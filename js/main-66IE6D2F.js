var zP=Object.create;var Lg=Object.defineProperty,KP=Object.defineProperties,WP=Object.getOwnPropertyDescriptor,jP=Object.getOwnPropertyDescriptors,JP=Object.getOwnPropertyNames,eh=Object.getOwnPropertySymbols,NI=Object.getPrototypeOf,Og=Object.prototype.hasOwnProperty,FI=Object.prototype.propertyIsEnumerable,qP=Reflect.get;var OI=(n,e,t)=>e in n?Lg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ae=(n,e)=>{for(var t in e||={})Og.call(e,t)&&OI(n,t,e[t]);if(eh)for(var t of eh(e))FI.call(e,t)&&OI(n,t,e[t]);return n},Bt=(n,e)=>KP(n,jP(e));var th=(n,e)=>{var t={};for(var i in n)Og.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&eh)for(var i of eh(n))e.indexOf(i)<0&&FI.call(n,i)&&(t[i]=n[i]);return t};var YP=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var XP=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of JP(e))!Og.call(n,r)&&r!==t&&Lg(n,r,{get:()=>e[r],enumerable:!(i=WP(e,r))||i.enumerable});return n};var $P=(n,e,t)=>(t=n!=null?zP(NI(n)):{},XP(e||!n||!n.__esModule?Lg(t,"default",{value:n,enumerable:!0}):t,n));var nh=(n,e,t)=>qP(NI(n),t,e);var ct=(n,e,t)=>new Promise((i,r)=>{var s=c=>{try{a(t.next(c))}catch(l){r(l)}},o=c=>{try{a(t.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var jD=YP((K7,dy)=>{"use strict";var BH=Object.prototype.hasOwnProperty,gi="~";function qu(){}Object.create&&(qu.prototype=Object.create(null),new qu().__proto__||(gi=!1));function DH(n,e,t){this.fn=n,this.context=e,this.once=t||!1}function WD(n,e,t,i,r){if(typeof t!="function")throw new TypeError("The listener must be a function");var s=new DH(t,i||n,r),o=gi?gi+e:e;return n._events[o]?n._events[o].fn?n._events[o]=[n._events[o],s]:n._events[o].push(s):(n._events[o]=s,n._eventsCount++),n}function Ip(n,e){--n._eventsCount===0?n._events=new qu:delete n._events[e]}function oi(){this._events=new qu,this._eventsCount=0}oi.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)BH.call(t,i)&&e.push(gi?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};oi.prototype.listeners=function(e){var t=gi?gi+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o};oi.prototype.listenerCount=function(e){var t=gi?gi+e:e,i=this._events[t];return i?i.fn?1:i.length:0};oi.prototype.emit=function(e,t,i,r,s,o){var a=gi?gi+e:e;if(!this._events[a])return!1;var c=this._events[a],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,s),!0;case 6:return c.fn.call(c.context,t,i,r,s,o),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var h=c.length,f;for(d=0;d<h;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,i);break;case 4:c[d].fn.call(c[d].context,t,i,r);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];c[d].fn.apply(c[d].context,u)}}return!0};oi.prototype.on=function(e,t,i){return WD(this,e,t,i,!1)};oi.prototype.once=function(e,t,i){return WD(this,e,t,i,!0)};oi.prototype.removeListener=function(e,t,i,r){var s=gi?gi+e:e;if(!this._events[s])return this;if(!t)return Ip(this,s),this;var o=this._events[s];if(o.fn)o.fn===t&&(!r||o.once)&&(!i||o.context===i)&&Ip(this,s);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==t||r&&!o[a].once||i&&o[a].context!==i)&&c.push(o[a]);c.length?this._events[s]=c.length===1?c[0]:c:Ip(this,s)}return this};oi.prototype.removeAllListeners=function(e){var t;return e?(t=gi?gi+e:e,this._events[t]&&Ip(this,t)):(this._events=new qu,this._eventsCount=0),this};oi.prototype.off=oi.prototype.removeListener;oi.prototype.addListener=oi.prototype.on;oi.prefixed=gi;oi.EventEmitter=oi;typeof dy<"u"&&(dy.exports=oi)});function kI(n,e){return Object.is(n,e)}var Nn=null,Vl=!1,ih=1,ar=Symbol("SIGNAL");function Et(n){let e=Nn;return Nn=n,e}function UI(){return Nn}function ZP(){return Vl}var ka={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sh(n){if(Vl)throw new Error("");if(Nn===null)return;Nn.consumerOnSignalRead(n);let e=Nn.nextProducerIndex++;if(uh(Nn),e<Nn.producerNode.length&&Nn.producerNode[e]!==n&&Ql(Nn)){let t=Nn.producerNode[e];lh(t,Nn.producerIndexOfThis[e])}Nn.producerNode[e]!==n&&(Nn.producerNode[e]=n,Nn.producerIndexOfThis[e]=Ql(Nn)?zI(n,Nn,e):0),Nn.producerLastReadVersion[e]=n.version}function eL(){ih++}function GI(n){if(!(Ql(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ih)){if(!n.producerMustRecompute(n)&&!ah(n)){n.dirty=!1,n.lastCleanEpoch=ih;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ih}}function HI(n){if(n.liveConsumerNode===void 0)return;let e=Vl;Vl=!0;try{for(let t of n.liveConsumerNode)t.dirty||QI(t)}finally{Vl=e}}function VI(){return Nn?.consumerAllowSignalWrites!==!1}function QI(n){n.dirty=!0,HI(n),n.consumerMarkedDirty?.(n)}function zl(n){return n&&(n.nextProducerIndex=0),Et(n)}function oh(n,e){if(Et(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ql(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)lh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ah(n){uh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(GI(t),i!==t.version))return!0}return!1}function ch(n){if(uh(n),Ql(n))for(let e=0;e<n.producerNode.length;e++)lh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function zI(n,e,t){if(KI(n),n.liveConsumerNode.length===0&&WI(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=zI(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function lh(n,e){if(KI(n),n.liveConsumerNode.length===1&&WI(n))for(let i=0;i<n.producerNode.length;i++)lh(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];uh(r),r.producerIndexOfThis[i]=e}}function Ql(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function uh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function KI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function WI(n){return n.producerNode!==void 0}function Ug(n){let e=Object.create(tL);e.computation=n;let t=()=>{if(GI(e),sh(e),e.value===rh)throw e.error;return e.value};return t[ar]=e,t}var Ng=Symbol("UNSET"),Fg=Symbol("COMPUTING"),rh=Symbol("ERRORED"),tL=Bt(ae({},ka),{value:Ng,dirty:!0,error:null,equal:kI,producerMustRecompute(n){return n.value===Ng||n.value===Fg},producerRecomputeValue(n){if(n.value===Fg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Fg;let t=zl(n),i;try{i=n.computation()}catch(r){i=rh,n.error=r}finally{oh(n,t)}if(e!==Ng&&e!==rh&&i!==rh&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function nL(){throw new Error}var jI=nL;function JI(){jI()}function qI(n){jI=n}var iL=null;function YI(n){let e=Object.create(Gg);e.value=n;let t=()=>(sh(e),e.value);return t[ar]=e,t}function dh(n,e){VI()||JI(),n.equal(n.value,e)||(n.value=e,rL(n))}function XI(n,e){VI()||JI(),dh(n,e(n.value))}var Gg=Bt(ae({},ka),{equal:kI,value:void 0});function rL(n){n.version++,eL(),HI(n),iL?.()}function $I(n,e,t){let i=Object.create(sL);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;let r=c=>{i.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(ch(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=kg)}let a=()=>{if(i.fn===null)return;if(ZP())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!ah(i))return;i.hasRun=!0;let c=zl(i);try{i.cleanupFn(),i.cleanupFn=kg,i.fn(r)}finally{oh(i,c)}};return i.ref={notify:()=>QI(i),run:a,cleanup:()=>i.cleanupFn(),destroy:()=>o(i),[ar]:i},i.ref}var kg=()=>{},sL=Bt(ae({},ka),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:kg});function it(n){return typeof n=="function"}function Ua(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var hh=Ua(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Kl(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var bn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(it(i))try{i()}catch(s){e=s instanceof hh?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{ZI(s)}catch(o){e=e??[],o instanceof hh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new hh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)ZI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Kl(t,e)}remove(e){let{_finalizers:t}=this;t&&Kl(t,e),e instanceof n&&e._removeParent(this)}};bn.EMPTY=(()=>{let n=new bn;return n.closed=!0,n})();var Hg=bn.EMPTY;function fh(n){return n instanceof bn||n&&"closed"in n&&it(n.remove)&&it(n.add)&&it(n.unsubscribe)}function ZI(n){it(n)?n():n.unsubscribe()}var Mr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ga={setTimeout(n,e,...t){let{delegate:i}=Ga;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ga;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ph(n){Ga.setTimeout(()=>{let{onUnhandledError:e}=Mr;if(e)e(n);else throw n})}function Wl(){}var eS=Vg("C",void 0,void 0);function tS(n){return Vg("E",void 0,n)}function nS(n){return Vg("N",n,void 0)}function Vg(n,e,t){return{kind:n,value:e,error:t}}var Qo=null;function Ha(n){if(Mr.useDeprecatedSynchronousErrorHandling){let e=!Qo;if(e&&(Qo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Qo;if(Qo=null,t)throw i}}else n()}function iS(n){Mr.useDeprecatedSynchronousErrorHandling&&Qo&&(Qo.errorThrown=!0,Qo.error=n)}var zo=class extends bn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fh(e)&&e.add(this)):this.destination=cL}static create(e,t,i){return new Va(e,t,i)}next(e){this.isStopped?zg(nS(e),this):this._next(e)}error(e){this.isStopped?zg(tS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zg(eS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},oL=Function.prototype.bind;function Qg(n,e){return oL.call(n,e)}var Kg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Ah(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Ah(i)}else Ah(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ah(t)}}},Va=class extends zo{constructor(e,t,i){super();let r;if(it(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Mr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Qg(e.next,s),error:e.error&&Qg(e.error,s),complete:e.complete&&Qg(e.complete,s)}):r=e}this.destination=new Kg(r)}};function Ah(n){Mr.useDeprecatedSynchronousErrorHandling?iS(n):ph(n)}function aL(n){throw n}function zg(n,e){let{onStoppedNotification:t}=Mr;t&&Ga.setTimeout(()=>t(n,e))}var cL={closed:!0,next:Wl,error:aL,complete:Wl};var Qa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Hi(n){return n}function Wg(...n){return jg(n)}function jg(n){return n.length===0?Hi:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=uL(t)?t:new Va(t,i,r);return Ha(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=rS(i),new i((r,s)=>{let o=new Va({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Qa](){return this}pipe(...t){return jg(t)(this)}toPromise(t){return t=rS(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function rS(n){var e;return(e=n??Mr.Promise)!==null&&e!==void 0?e:Promise}function lL(n){return n&&it(n.next)&&it(n.error)&&it(n.complete)}function uL(n){return n&&n instanceof zo||lL(n)&&fh(n)}function Jg(n){return it(n?.lift)}function It(n){return e=>{if(Jg(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function St(n,e,t,i,r){return new qg(n,e,t,i,r)}var qg=class extends zo{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function za(){return It((n,e)=>{let t=null;n._refCount++;let i=St(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Ka=class extends Dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Jg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bn;let t=this.getSubject();e.add(this.source.subscribe(St(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bn.EMPTY)}return e}refCount(){return za()(this)}};var sS=Ua(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var di=(()=>{class n extends Dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new gh(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new sS}next(t){Ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ha(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?Hg:(this.currentObservers=null,s.push(t),new bn(()=>{this.currentObservers=null,Kl(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new Dt;return t.source=this,t}}return n.create=(e,t)=>new gh(e,t),n})(),gh=class extends di{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:Hg}};var ei=class extends di{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var ti=new Dt(n=>n.complete());function oS(n){return n&&it(n.schedule)}function aS(n){return n[n.length-1]}function cS(n){return it(aS(n))?n.pop():void 0}function Xs(n){return oS(aS(n))?n.pop():void 0}function uS(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):r(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function lS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ko(n){return this instanceof Ko?(this.v=n,this):new Ko(n)}function dS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r={},a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){i[f]&&(r[f]=function(m){return new Promise(function(A,g){s.push([f,m,A,g])>1||c(f,m)})},p&&(r[f]=p(r[f])))}function c(f,p){try{l(i[f](p))}catch(m){h(s[0][3],m)}}function l(f){f.value instanceof Ko?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}function hS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof lS=="function"?lS(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),r(a,c,o.done,o.value)})}}function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var mh=n=>n&&typeof n.length=="number"&&typeof n!="function";function _h(n){return it(n?.then)}function Ch(n){return it(n[Qa])}function yh(n){return Symbol.asyncIterator&&it(n?.[Symbol.asyncIterator])}function Eh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var vh=dL();function Ih(n){return it(n?.[vh])}function Sh(n){return dS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Ko(t.read());if(r)return yield Ko(void 0);yield yield Ko(i)}}finally{t.releaseLock()}})}function xh(n){return it(n?.getReader)}function jn(n){if(n instanceof Dt)return n;if(n!=null){if(Ch(n))return hL(n);if(mh(n))return fL(n);if(_h(n))return pL(n);if(yh(n))return fS(n);if(Ih(n))return AL(n);if(xh(n))return gL(n)}throw Eh(n)}function hL(n){return new Dt(e=>{let t=n[Qa]();if(it(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fL(n){return new Dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pL(n){return new Dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ph)})}function AL(n){return new Dt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function fS(n){return new Dt(e=>{mL(n,e).catch(t=>e.error(t))})}function gL(n){return fS(Sh(n))}function mL(n,e){var t,i,r,s;return uS(this,void 0,void 0,function*(){try{for(t=hS(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function Mi(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Mh(n,e=0){return It((t,i)=>{t.subscribe(St(i,r=>Mi(i,n,()=>i.next(r),e),()=>Mi(i,n,()=>i.complete(),e),r=>Mi(i,n,()=>i.error(r),e)))})}function wh(n,e=0){return It((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function pS(n,e){return jn(n).pipe(wh(e),Mh(e))}function AS(n,e){return jn(n).pipe(wh(e),Mh(e))}function gS(n,e){return new Dt(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function mS(n,e){return new Dt(t=>{let i;return Mi(t,e,()=>{i=n[vh](),Mi(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>it(i?.return)&&i.return()})}function Bh(n,e){if(!n)throw new Error("Iterable cannot be null");return new Dt(t=>{Mi(t,e,()=>{let i=n[Symbol.asyncIterator]();Mi(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function _S(n,e){return Bh(Sh(n),e)}function CS(n,e){if(n!=null){if(Ch(n))return pS(n,e);if(mh(n))return gS(n,e);if(_h(n))return AS(n,e);if(yh(n))return Bh(n,e);if(Ih(n))return mS(n,e);if(xh(n))return _S(n,e)}throw Eh(n)}function vn(n,e){return e?CS(n,e):jn(n)}function Ke(...n){let e=Xs(n);return vn(n,e)}function Wa(n,e){let t=it(n)?n:()=>n,i=r=>r.error(t());return new Dt(e?r=>e.schedule(i,0,r):i)}function Yg(n){return!!n&&(n instanceof Dt||it(n.lift)&&it(n.subscribe))}var Es=Ua(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ft(n,e){return It((t,i)=>{let r=0;t.subscribe(St(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:_L}=Array;function CL(n,e){return _L(e)?n(...e):n(e)}function yS(n){return ft(e=>CL(n,e))}var{isArray:yL}=Array,{getPrototypeOf:EL,prototype:vL,keys:IL}=Object;function ES(n){if(n.length===1){let e=n[0];if(yL(e))return{args:e,keys:null};if(SL(e)){let t=IL(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function SL(n){return n&&typeof n=="object"&&EL(n)===vL}function vS(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Dh(...n){let e=Xs(n),t=cS(n),{args:i,keys:r}=ES(n);if(i.length===0)return vn([],e);let s=new Dt(xL(i,e,r?o=>vS(r,o):Hi));return t?s.pipe(yS(t)):s}function xL(n,e,t=Hi){return i=>{IS(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)IS(e,()=>{let l=vn(n[c],e),u=!1;l.subscribe(St(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function IS(n,e,t){n?Mi(t,n,e):e()}function SS(n,e,t,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=m=>l<i?p(m):c.push(m),p=m=>{s&&e.next(m),l++;let A=!1;jn(t(m,u++)).subscribe(St(e,g=>{r?.(g),s?f(g):e.next(g)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<i;){let g=c.shift();o?Mi(e,o,()=>p(g)):p(g)}h()}catch(g){e.error(g)}}))};return n.subscribe(St(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Fn(n,e,t=1/0){return it(e)?Fn((i,r)=>ft((s,o)=>e(i,s,r,o))(jn(n(i,r))),t):(typeof e=="number"&&(t=e),It((i,r)=>SS(i,r,n,t)))}function Xg(n=1/0){return Fn(Hi,n)}function xS(){return Xg(1)}function ja(...n){return xS()(vn(n,Xs(n)))}function bh(n){return new Dt(e=>{jn(n()).subscribe(e)})}function Vi(n,e){return It((t,i)=>{let r=0;t.subscribe(St(i,s=>n.call(e,s,r++)&&i.next(s)))})}function hi(n){return It((e,t)=>{let i=null,r=!1,s;i=e.subscribe(St(t,void 0,void 0,o=>{s=jn(n(o,hi(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function MS(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(St(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function $s(n,e){return it(e)?Fn(n,e,1):Fn(n,1)}function Zs(n){return It((e,t)=>{let i=!1;e.subscribe(St(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function wi(n){return n<=0?()=>ti:It((e,t)=>{let i=0;e.subscribe(St(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function $g(n){return ft(()=>n)}function Th(n=ML){return It((e,t)=>{let i=!1;e.subscribe(St(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function ML(){return new Es}function eo(n){return It((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Bi(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Vi((r,s)=>n(r,s,i)):Hi,wi(1),t?Zs(e):Th(()=>new Es))}function Ja(n){return n<=0?()=>ti:It((e,t)=>{let i=[];e.subscribe(St(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Zg(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Vi((r,s)=>n(r,s,i)):Hi,Ja(1),t?Zs(e):Th(()=>new Es))}function em(n,e){return It(MS(n,e,arguments.length>=2,!0))}function tm(...n){let e=Xs(n);return It((t,i)=>{(e?ja(n,t,e):ja(n,t)).subscribe(i)})}function si(n,e){return It((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(St(i,c=>{r?.unsubscribe();let l=0,u=s++;jn(n(c,u)).subscribe(r=St(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function nm(n){return It((e,t)=>{jn(n).subscribe(St(t,()=>t.complete(),Wl)),!t.closed&&e.subscribe(t)})}function kn(n,e,t){let i=it(n)||e||t?{next:n,error:e,complete:t}:n;return i?It((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(St(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Hi}var px="https://g.co/ng/security#xss",oe=class extends Error{constructor(e,t){super(Ef(e,t)),this.code=e}};function Ef(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var Ax=Symbol("InputSignalNode#UNSET"),wL=Bt(ae({},Gg),{transformFn:void 0,applyValueToInputSignal(n,e){dh(n,e)}});function gx(n,e){let t=Object.create(wL);t.value=n,t.transformFn=e?.transform;function i(){if(sh(t),t.value===Ax)throw new oe(-950,!1);return t.value}return i[ar]=t,i}function vf(n){return{toString:n}.toString()}var ql=globalThis;function Yt(n){for(let e in n)if(n[e]===Yt)return e;throw Error("Could not find renamed property on target object.")}function Di(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Di).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Am(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var BL=Yt({__forward_ref__:Yt});function mx(n){return n.__forward_ref__=mx,n.toString=function(){return Di(this())},n}function lr(n){return _x(n)?n():n}function _x(n){return typeof n=="function"&&n.hasOwnProperty(BL)&&n.__forward_ref__===mx}function Ce(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ac(n){return{providers:n.providers||[],imports:n.imports||[]}}function If(n){return wS(n,yx)||wS(n,Ex)}function Cx(n){return If(n)!==null}function wS(n,e){return n.hasOwnProperty(e)?n[e]:null}function DL(n){let e=n&&(n[yx]||n[Ex]);return e||null}function BS(n){return n&&(n.hasOwnProperty(DS)||n.hasOwnProperty(bL))?n[DS]:null}var yx=Yt({\u0275prov:Yt}),DS=Yt({\u0275inj:Yt}),Ex=Yt({ngInjectableDef:Yt}),bL=Yt({ngInjectorDef:Yt}),Fe=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Ce({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function vx(n){return n&&!!n.\u0275providers}var TL=Yt({\u0275cmp:Yt}),RL=Yt({\u0275dir:Yt}),PL=Yt({\u0275pipe:Yt}),LL=Yt({\u0275mod:Yt}),jh=Yt({\u0275fac:Yt}),Jl=Yt({__NG_ELEMENT_ID__:Yt}),bS=Yt({__NG_ENV_ID__:Yt});function cu(n){return typeof n=="string"?n:n==null?"":String(n)}function OL(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():cu(n)}function NL(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new oe(-200,n)}function c_(n,e){throw new oe(-201,!1)}var _t=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(_t||{}),gm;function Ix(){return gm}function cr(n){let e=gm;return gm=n,e}function Sx(n,e,t){let i=If(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&_t.Optional)return null;if(e!==void 0)return e;c_(n,"Injector")}var FL={},Yl=FL,kL="__NG_DI_FLAG__",Jh="ngTempTokenPath",UL="ngTokenPath",GL=/\n/gm,HL="\u0275",TS="__source",$a;function VL(){return $a}function to(n){let e=$a;return $a=n,e}function QL(n,e=_t.Default){if($a===void 0)throw new oe(-203,!1);return $a===null?Sx(n,void 0,e):$a.get(n,e&_t.Optional?null:void 0,e)}function Re(n,e=_t.Default){return(Ix()||QL)(lr(n),e)}function $(n,e=_t.Default){return Re(n,Sf(e))}function Sf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function mm(n){let e=[];for(let t=0;t<n.length;t++){let i=lr(n[t]);if(Array.isArray(i)){if(i.length===0)throw new oe(900,!1);let r,s=_t.Default;for(let o=0;o<i.length;o++){let a=i[o],c=zL(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(Re(r,s))}else e.push(Re(i))}return e}function zL(n){return n[kL]}function KL(n,e,t,i){let r=n[Jh];throw e[TS]&&r.unshift(e[TS]),n.message=WL(`
`+n.message,r,t,i),n[UL]=r,n[Jh]=null,n}function WL(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==HL?n.slice(2):n;let r=Di(e);if(Array.isArray(e))r=e.map(Di).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Di(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(GL,`
  `)}`}function ec(n,e){let t=n.hasOwnProperty(jh);return t?n[jh]:null}function jL(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function JL(n){return n.flat(Number.POSITIVE_INFINITY)}function l_(n,e){n.forEach(t=>Array.isArray(t)?l_(t,e):e(t))}function xx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function qh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qL(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function YL(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function u_(n,e,t){let i=lu(n,e);return i>=0?n[i|1]=t:(i=~i,YL(n,i,e,t)),i}function im(n,e){let t=lu(n,e);if(t>=0)return n[t|1]}function lu(n,e){return XL(n,e,1)}function XL(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var Xl={},fi=[],Jo=new Fe(""),Mx=new Fe("",-1),wx=new Fe(""),Yh=class{get(e,t=Yl){if(t===Yl){let i=new Error(`NullInjectorError: No provider for ${Di(e)}!`);throw i.name="NullInjectorError",i}return t}},Bx=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Bx||{}),qr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(qr||{}),io=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(io||{});function $L(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function _m(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];eO(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function ZL(n){return n===3||n===4||n===6}function eO(n){return n.charCodeAt(0)===64}function d_(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?RS(n,t,r,null,e[++i]):RS(n,t,r,null,null))}}return n}function RS(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[s+1]=r);return}else if(i===n[s+1]){n[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),r!==null&&n.splice(s++,0,r)}var Dx="ng-template";function tO(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&$L(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(h_(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function h_(n){return n.type===4&&n.value!==Dx}function nO(n,e,t){let i=n.type===4&&!t?Dx:n.value;return e===i}function iO(n,e,t){let i=4,r=n.attrs,s=r!==null?oO(r):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!wr(i)&&!wr(c))return!1;if(o&&wr(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!nO(n,c,t)||c===""&&e.length===1){if(wr(i))return!1;o=!0}}else if(i&8){if(r===null||!tO(n,r,c,t)){if(wr(i))return!1;o=!0}}else{let l=e[++a],u=rO(c,r,h_(n),t);if(u===-1){if(wr(i))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&l!==d){if(wr(i))return!1;o=!0}}}}return wr(i)||o}function wr(n){return(n&1)===0}function rO(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return aO(e,n)}function bx(n,e,t=!1){for(let i=0;i<e.length;i++)if(iO(n,e[i],t))return!0;return!1}function sO(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function oO(n){for(let e=0;e<n.length;e++){let t=n[e];if(ZL(t))return e}return n.length}function aO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function cO(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function PS(n,e){return n?":not("+e.trim()+")":e}function lO(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!wr(o)&&(e+=PS(s,r),r=""),i=o,s=s||!wr(i);t++}return r!==""&&(e+=PS(s,r)),e}function uO(n){return n.map(lO).join(",")}function dO(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!wr(r))break;r=s}i++}return{attrs:e,classes:t}}function Pe(n){return vf(()=>{let e=Ox(n),t=Bt(ae({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Bx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qr.Emulated,styles:n.styles||fi,_:null,schemas:n.schemas||null,tView:null,id:""});Nx(t);let i=n.dependencies;return t.directiveDefs=OS(i,!1),t.pipeDefs=OS(i,!0),t.id=pO(t),t})}function hO(n){return qo(n)||Tx(n)}function fO(n){return n!==null}function cc(n){return vf(()=>({type:n.type,bootstrap:n.bootstrap||fi,declarations:n.declarations||fi,imports:n.imports||fi,exports:n.exports||fi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function LS(n,e){if(n==null)return Xl;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a=io.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(t[s]=a!==io.None?[i,a]:i,e[s]=o):t[s]=i}return t}function uu(n){return vf(()=>{let e=Ox(n);return Nx(e),e})}function qo(n){return n[TL]||null}function Tx(n){return n[RL]||null}function Rx(n){return n[PL]||null}function Px(n){let e=qo(n)||Tx(n)||Rx(n);return e!==null?e.standalone:!1}function Lx(n,e){let t=n[LL]||null;if(!t&&e===!0)throw new Error(`Type ${Di(n)} does not have '\u0275mod' property.`);return t}function Ox(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Xl,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||fi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:LS(n.inputs,e),outputs:LS(n.outputs),debugInfo:null}}function Nx(n){n.features?.forEach(e=>e(n))}function OS(n,e){if(!n)return null;let t=e?Rx:hO;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(fO)}function pO(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ao(n){return{\u0275providers:n}}function AO(...n){return{\u0275providers:Fx(!0,n),\u0275fromNgModule:!0}}function Fx(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return l_(e,o=>{let a=o;Cm(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&kx(r,s),t}function kx(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];f_(r,s=>{e(s,i)})}}function Cm(n,e,t,i){if(n=lr(n),!n)return!1;let r=null,s=BS(n),o=!s&&qo(n);if(!s&&!o){let c=n.ngModule;if(s=BS(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Cm(l,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{l_(s.imports,u=>{Cm(u,e,t,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&kx(l,e)}if(!a){let l=ec(r)||(()=>new r);e({provide:r,useFactory:l,deps:fi},r),e({provide:wx,useValue:r,multi:!0},r),e({provide:Jo,useValue:()=>Re(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=n;f_(c,u=>{e(u,l)})}}else return!1;return r!==n&&n.providers!==void 0}function f_(n,e){for(let t of n)vx(t)&&(t=t.\u0275providers),Array.isArray(t)?f_(t,e):e(t)}var gO=Yt({provide:String,useValue:Yt});function Ux(n){return n!==null&&typeof n=="object"&&gO in n}function mO(n){return!!(n&&n.useExisting)}function _O(n){return!!(n&&n.useFactory)}function ym(n){return typeof n=="function"}var xf=new Fe(""),Gh={},CO={},rm;function p_(){return rm===void 0&&(rm=new Yh),rm}var bi=class{},$l=class extends bi{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vm(e,o=>this.processProvider(o)),this.records.set(Mx,qa(void 0,this)),r.has("environment")&&this.records.set(bi,qa(void 0,this));let s=this.records.get(xf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(wx,fi,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Et(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Et(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=to(this),i=cr(void 0),r;try{return e()}finally{to(t),cr(i)}}get(e,t=Yl,i=_t.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(bS))return e[bS](this);i=Sf(i);let r,s=to(this),o=cr(void 0);try{if(!(i&_t.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=xO(e)&&If(e);l&&this.injectableDefInScope(l)?c=qa(Em(e),Gh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&_t.Self?p_():this.parent;return t=i&_t.Optional&&t===Yl?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Jh]=a[Jh]||[]).unshift(Di(e)),s)throw a;return KL(a,e,"R3InjectorError",this.source)}else throw a}finally{cr(o),to(s)}}resolveInjectorInitializers(){let e=Et(null),t=to(this),i=cr(void 0),r;try{let s=this.get(Jo,fi,_t.Self);for(let o of s)o()}finally{to(t),cr(i),Et(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Di(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(e){e=lr(e);let t=ym(e)?e:lr(e&&e.provide),i=EO(e);if(!ym(e)&&e.multi===!0){let r=this.records.get(t);r||(r=qa(void 0,Gh,!0),r.factory=()=>mm(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=Et(null);try{return t.value===Gh&&(t.value=CO,t.value=t.factory()),typeof t.value=="object"&&t.value&&SO(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Et(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=lr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Em(n){let e=If(n),t=e!==null?e.factory:ec(n);if(t!==null)return t;if(n instanceof Fe)throw new oe(204,!1);if(n instanceof Function)return yO(n);throw new oe(204,!1)}function yO(n){if(n.length>0)throw new oe(204,!1);let t=DL(n);return t!==null?()=>t.factory(n):()=>new n}function EO(n){if(Ux(n))return qa(void 0,n.useValue);{let e=vO(n);return qa(e,Gh)}}function vO(n,e,t){let i;if(ym(n)){let r=lr(n);return ec(r)||Em(r)}else if(Ux(n))i=()=>lr(n.useValue);else if(_O(n))i=()=>n.useFactory(...mm(n.deps||[]));else if(mO(n))i=()=>Re(lr(n.useExisting));else{let r=lr(n&&(n.useClass||n.provide));if(IO(n))i=()=>new r(...mm(n.deps));else return ec(r)||Em(r)}return i}function qa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function IO(n){return!!n.deps}function SO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function xO(n){return typeof n=="function"||typeof n=="object"&&n instanceof Fe}function vm(n,e){for(let t of n)Array.isArray(t)?vm(t,e):t&&vx(t)?vm(t.\u0275providers,e):e(t)}function Pr(n,e){n instanceof $l&&n.assertNotDestroyed();let t,i=to(n),r=cr(void 0);try{return e()}finally{to(i),cr(r)}}function Gx(){return Ix()!==void 0||VL()!=null}function MO(n){if(!Gx())throw new oe(-203,!1)}function wO(n){return typeof n=="function"}var Qi=0,rt=1,Je=2,ni=3,Dr=4,Ri=5,Tr=6,Xh=7,dr=8,tc=9,Yr=10,tn=11,Zl=12,NS=13,lc=14,Ti=15,Yo=16,Ya=17,vs=18,Mf=19,Hx=20,no=21,Hh=22,ur=23,Tn=25,Vx=1,eu=6,Is=7,$h=8,nc=9,pi=10,Zh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Zh||{});function br(n){return Array.isArray(n)&&typeof n[Vx]=="object"}function Zr(n){return Array.isArray(n)&&n[Vx]===!0}function A_(n){return(n.flags&4)!==0}function du(n){return n.componentOffset>-1}function wf(n){return(n.flags&1)===1}function hu(n){return!!n.template}function ef(n){return(n[Je]&512)!==0}var Im=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function Qx(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function fu(){return zx}function zx(n){return n.type.prototype.ngOnChanges&&(n.setInput=DO),BO}fu.ngInherit=!0;function BO(){let n=Wx(this),e=n?.current;if(e){let t=n.previous;if(t===Xl)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function DO(n,e,t,i,r){let s=this.declaredInputs[i],o=Wx(n)||bO(n,{previous:Xl,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Im(l&&l.currentValue,t,c===Xl),Qx(n,e,r,t)}var Kx="__ngSimpleChanges__";function Wx(n){return n[Kx]||null}function bO(n,e){return n[Kx]=e}var FS=null;var jr=function(n,e,t){FS?.(n,e,t)},jx="svg",TO="math";function Rr(n){for(;Array.isArray(n);)n=n[Qi];return n}function Jx(n,e){return Rr(e[n])}function zi(n,e){return Rr(e[n.index])}function g_(n,e){return n.data[e]}function RO(n,e){return n[e]}function co(n,e){let t=e[n];return br(t)?t:t[Qi]}function m_(n){return(n[Je]&128)===128}function PO(n){return Zr(n[ni])}function ic(n,e){return e==null?null:n[e]}function qx(n){n[Ya]=0}function Yx(n){n[Je]&1024||(n[Je]|=1024,m_(n)&&Bf(n))}function LO(n,e){for(;n>0;)e=e[lc],n--;return e}function tu(n){return!!(n[Je]&9216||n[ur]?.dirty)}function Sm(n){n[Yr].changeDetectionScheduler?.notify(7),n[Je]&64&&(n[Je]|=1024),tu(n)&&Bf(n)}function Bf(n){n[Yr].changeDetectionScheduler?.notify(0);let e=Xo(n);for(;e!==null&&!(e[Je]&8192||(e[Je]|=8192,!m_(e)));)e=Xo(e)}function Xx(n,e){if((n[Je]&256)===256)throw new oe(911,!1);n[no]===null&&(n[no]=[]),n[no].push(e)}function OO(n,e){if(n[no]===null)return;let t=n[no].indexOf(e);t!==-1&&n[no].splice(t,1)}function Xo(n){let e=n[ni];return Zr(e)?e[ni]:e}var lt={lFrame:sM(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var $x=!1;function NO(){return lt.lFrame.elementDepthCount}function FO(){lt.lFrame.elementDepthCount++}function kO(){lt.lFrame.elementDepthCount--}function Zx(){return lt.bindingsEnabled}function uc(){return lt.skipHydrationRootTNode!==null}function UO(n){return lt.skipHydrationRootTNode===n}function GO(n){lt.skipHydrationRootTNode=n}function HO(){lt.skipHydrationRootTNode=null}function Ft(){return lt.lFrame.lView}function Ai(){return lt.lFrame.tView}function bt(n){return lt.lFrame.contextLView=n,n[dr]}function Tt(n){return lt.lFrame.contextLView=null,n}function Ki(){let n=eM();for(;n!==null&&n.type===64;)n=n.parent;return n}function eM(){return lt.lFrame.currentTNode}function VO(){let n=lt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ta(n,e){let t=lt.lFrame;t.currentTNode=n,t.isParent=e}function __(){return lt.lFrame.isParent}function C_(){lt.lFrame.isParent=!1}function QO(){return lt.lFrame.contextLView}function tM(){return $x}function kS(n){$x=n}function zO(n){return lt.lFrame.bindingIndex=n}function Df(){return lt.lFrame.bindingIndex++}function nM(n){let e=lt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function KO(){return lt.lFrame.inI18n}function WO(n,e){let t=lt.lFrame;t.bindingIndex=t.bindingRootIndex=n,xm(e)}function jO(){return lt.lFrame.currentDirectiveIndex}function xm(n){lt.lFrame.currentDirectiveIndex=n}function JO(n){let e=lt.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function qO(){return lt.lFrame.currentQueryIndex}function y_(n){lt.lFrame.currentQueryIndex=n}function YO(n){let e=n[rt];return e.type===2?e.declTNode:e.type===1?n[Ri]:null}function iM(n,e,t){if(t&_t.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&_t.Host);)if(r=YO(s),r===null||(s=s[lc],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=lt.lFrame=rM();return i.currentTNode=e,i.lView=n,!0}function E_(n){let e=rM(),t=n[rt];lt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function rM(){let n=lt.lFrame,e=n===null?null:n.child;return e===null?sM(n):e}function sM(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function oM(){let n=lt.lFrame;return lt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var aM=oM;function v_(){let n=oM();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function XO(n){return(lt.lFrame.contextLView=LO(n,lt.lFrame.contextLView))[dr]}function na(){return lt.lFrame.selectedIndex}function $o(n){lt.lFrame.selectedIndex=n}function I_(){let n=lt.lFrame;return g_(n.tView,n.selectedIndex)}function Un(){lt.lFrame.currentNamespace=jx}function Pi(){$O()}function $O(){lt.lFrame.currentNamespace=null}function cM(){return lt.lFrame.currentNamespace}var lM=!0;function bf(){return lM}function lo(n){lM=n}function ZO(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=zx(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Tf(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Vh(n,e,t){uM(n,e,3,t)}function Qh(n,e,t,i){(n[Je]&3)===t&&uM(n,e,t,i)}function sm(n,e){let t=n[Je];(t&3)===e&&(t&=16383,t+=1,n[Je]=t)}function uM(n,e,t,i){let r=i!==void 0?n[Ya]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[Ya]+=65536),(a<s||s==-1)&&(eN(n,t,e,c),n[Ya]=(n[Ya]&4294901760)+c+2),c++}function US(n,e){jr(4,n,e);let t=Et(null);try{e.call(n)}finally{Et(t),jr(5,n,e)}}function eN(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[Je]>>14<n[Ya]>>16&&(n[Je]&3)===e&&(n[Je]+=16384,US(a,s)):US(a,s)}var Za=-1,nu=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function tN(n){return n instanceof nu}function nN(n){return(n.flags&8)!==0}function iN(n){return(n.flags&16)!==0}var om={},Mm=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Sf(i);let r=this.injector.get(e,om,i);return r!==om||t===om?r:this.parentInjector.get(e,t,i)}};function dM(n){return n!==Za}function tf(n){return n&32767}function rN(n){return n>>16}function nf(n,e){let t=rN(n),i=e;for(;t>0;)i=i[lc],t--;return i}var wm=!0;function GS(n){let e=wm;return wm=n,e}var sN=256,hM=sN-1,fM=5,oN=0,Jr={};function aN(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Jl)&&(i=t[Jl]),i==null&&(i=t[Jl]=oN++);let r=i&hM,s=1<<r;e.data[n+(r>>fM)]|=s}function pM(n,e){let t=AM(n,e);if(t!==-1)return t;let i=e[rt];i.firstCreatePass&&(n.injectorIndex=e.length,am(i.data,n),am(e,null),am(i.blueprint,null));let r=S_(n,e),s=n.injectorIndex;if(dM(r)){let o=tf(r),a=nf(r,e),c=a[rt].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function am(n,e){n.push(0,0,0,0,0,0,0,0,e)}function AM(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function S_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=yM(r),i===null)return Za;if(t++,r=r[lc],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Za}function cN(n,e,t){aN(n,e,t)}function gM(n,e,t){if(t&_t.Optional||n!==void 0)return n;c_(e,"NodeInjector")}function mM(n,e,t,i){if(t&_t.Optional&&i===void 0&&(i=null),!(t&(_t.Self|_t.Host))){let r=n[tc],s=cr(void 0);try{return r?r.get(e,i,t&_t.Optional):Sx(e,i,t&_t.Optional)}finally{cr(s)}}return gM(i,e,t)}function _M(n,e,t,i=_t.Default,r){if(n!==null){if(e[Je]&2048&&!(i&_t.Self)){let o=hN(n,e,t,i,Jr);if(o!==Jr)return o}let s=CM(n,e,t,i,Jr);if(s!==Jr)return s}return mM(e,t,i,r)}function CM(n,e,t,i,r){let s=uN(t);if(typeof s=="function"){if(!iM(e,n,i))return i&_t.Host?gM(r,t,i):mM(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&_t.Optional))c_(t);else return o}finally{aM()}}else if(typeof s=="number"){let o=null,a=AM(n,e),c=Za,l=i&_t.Host?e[Ti][Ri]:null;for((a===-1||i&_t.SkipSelf)&&(c=a===-1?S_(n,e):e[a+8],c===Za||!VS(i,!1)?a=-1:(o=e[rt],a=tf(c),e=nf(c,e)));a!==-1;){let u=e[rt];if(HS(s,a,u.data)){let d=lN(a,e,t,o,i,l);if(d!==Jr)return d}c=e[a+8],c!==Za&&VS(i,e[rt].data[a+8]===l)&&HS(s,a,e)?(o=u,a=tf(c),e=nf(c,e)):a=-1}}return r}function lN(n,e,t,i,r,s){let o=e[rt],a=o.data[n+8],c=i==null?du(a)&&wm:i!=o&&(a.type&3)!==0,l=r&_t.Host&&s===a,u=zh(a,o,t,c,l);return u!==null?rc(e,o,u,a):Jr}function zh(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(r){let f=o[c];if(f&&hu(f)&&f.type===t)return c}return null}function rc(n,e,t,i){let r=n[t],s=e.data;if(tN(r)){let o=r;o.resolving&&NL(OL(s[t]));let a=GS(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?cr(o.injectImpl):null,u=iM(n,i,_t.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&ZO(t,s[t],e)}finally{l!==null&&cr(l),GS(a),o.resolving=!1,aM()}}return r}function uN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Jl)?n[Jl]:void 0;return typeof e=="number"?e>=0?e&hM:dN:e}function HS(n,e,t){let i=1<<n;return!!(t[e+(n>>fM)]&i)}function VS(n,e){return!(n&_t.Self)&&!(n&_t.Host&&e)}var jo=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return _M(this._tNode,this._lView,e,Sf(i),t)}};function dN(){return new jo(Ki(),Ft())}function x_(n){return vf(()=>{let e=n.prototype.constructor,t=e[jh]||Bm(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[jh]||Bm(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Bm(n){return _x(n)?()=>{let e=Bm(lr(n));return e&&e()}:ec(n)}function hN(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[Je]&2048&&!(o[Je]&512);){let a=CM(s,o,t,i|_t.Self,Jr);if(a!==Jr)return a;let c=s.parent;if(!c){let l=o[Hx];if(l){let u=l.get(t,Jr,i);if(u!==Jr)return u}c=yM(o),o=o[lc]}s=c}return r}function yM(n){let e=n[rt],t=e.type;return t===2?e.declTNode:t===1?n[Ri]:null}function QS(n,e=null,t=null,i){let r=EM(n,e,t,i);return r.resolveInjectorInitializers(),r}function EM(n,e=null,t=null,i,r=new Set){let s=[t||fi,AO(n)];return i=i||(typeof n=="object"?void 0:Di(n)),new $l(s,e||p_(),i||null,r)}var Wo=class Wo{static create(e,t){if(Array.isArray(e))return QS({name:""},t,e,"");{let i=e.name??"";return QS({name:i},e.parent,e.providers,i)}}};Wo.THROW_IF_NOT_FOUND=Yl,Wo.NULL=new Yh,Wo.\u0275prov=Ce({token:Wo,providedIn:"any",factory:()=>Re(Mx)}),Wo.__NG_ELEMENT_ID__=-1;var Xr=Wo;var fN=new Fe("");fN.__NG_ELEMENT_ID__=n=>{let e=Ki();if(e===null)throw new oe(204,!1);if(e.type&2)return e.value;if(n&_t.Optional)return null;throw new oe(204,!1)};var pN="ngOriginalError";function cm(n){return n[pN]}var Rf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=AN,e.__NG_ENV_ID__=i=>i;let n=e;return n})(),Dm=class extends Rf{constructor(e){super(),this._lView=e}onDestroy(e){return Xx(this._lView,e),()=>OO(this._lView,e)}};function AN(){return new Dm(Ft())}var es=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ei(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=Ce({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var bm=class extends di{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Gx()&&(this.destroyRef=$(Rf,{optional:!0})??void 0,this.pendingTasks=$(es,{optional:!0})??void 0)}emit(e){let t=Et(null);try{super.next(e)}finally{Et(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof bn&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},mn=bm;function rf(...n){}function vM(n){let e,t;function i(){n=rf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function zS(n){return queueMicrotask(()=>n()),()=>{n=rf}}var M_="isAngularZone",sf=M_+"_ID",gN=0,ln=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mn(!1),this.onMicrotaskEmpty=new mn(!1),this.onStable=new mn(!1),this.onError=new mn(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.callbackScheduled=!1,CN(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(M_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new oe(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,mN,rf,rf);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},mN={};function w_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function _N(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{vM(()=>{n.callbackScheduled=!1,Tm(n),n.isCheckStableRunning=!0,w_(n),n.isCheckStableRunning=!1})}),Tm(n))}function CN(n){let e=()=>{_N(n)},t=gN++;n._inner=n._inner.fork({name:"angular",properties:{[M_]:!0,[sf]:t,[sf+t]:!0},onInvokeTask:(i,r,s,o,a,c)=>{if(yN(c))return i.invokeTask(s,o,a,c);try{return KS(n),i.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),WS(n)}},onInvoke:(i,r,s,o,a,c,l)=>{try{return KS(n),i.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!EN(c)&&e(),WS(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Tm(n),w_(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Tm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function KS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function WS(n){n._nesting--,w_(n)}var Rm=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mn,this.onMicrotaskEmpty=new mn,this.onStable=new mn,this.onError=new mn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function yN(n){return IM(n,"__ignore_ng_zone__")}function EN(n){return IM(n,"__scheduler_tick__")}function IM(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var $r=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&cm(e);for(;t&&cm(t);)t=cm(t);return t||null}},vN=new Fe("",{providedIn:"root",factory:()=>{let n=$(ln),e=$($r);return t=>n.runOutsideAngular(()=>e.handleError(t))}}),Pm=class{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=$($r,{optional:!0}),this.destroyRef=$(Rf),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new oe(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed)throw new oe(953,!1);if(this.listeners===null)return;let t=Et(null);try{for(let i of this.listeners)try{i(e)}catch(r){this.errorHandler?.handleError(r)}}finally{Et(t)}}};function SM(n){return new Pm}function jS(n,e){return gx(n,e)}function IN(n){return gx(Ax,n)}var B_=(jS.required=IN,jS);function SN(){return dc(Ki(),Ft())}function dc(n,e){return new uo(zi(n,e))}var uo=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=SN;let n=e;return n})();function xN(n){return n instanceof uo?n.nativeElement:n}function MN(){return this._results[Symbol.iterator]()}var Lm=class n{get changes(){return this._changes??=new mn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=MN)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=JL(e);(this._changesDetected=!jL(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},wN="ngSkipHydration",BN="ngskiphydration";function xM(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let i=e[t];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===BN)return!0}return!1}function MM(n){return n.hasAttribute(wN)}function of(n){return(n.flags&128)===128}function DN(n){if(of(n))return!0;let e=n.parent;for(;e;){if(of(n)||xM(e))return!0;e=e.parent}return!1}var wM=new Map,bN=0;function TN(){return bN++}function RN(n){wM.set(n[Mf],n)}function PN(n){wM.delete(n[Mf])}var JS="__ngContext__";function ro(n,e){br(e)?(n[JS]=e[Mf],RN(e)):n[JS]=e}function BM(n){return bM(n[Zl])}function DM(n){return bM(n[Dr])}function bM(n){for(;n!==null&&!Zr(n);)n=n[Dr];return n}var Om;function TM(n){Om=n}function pu(){if(Om!==void 0)return Om;if(typeof document<"u")return document;throw new oe(210,!1)}var Pf=new Fe("",{providedIn:"root",factory:()=>LN}),LN="ng",D_=new Fe(""),Gn=new Fe("",{providedIn:"platform",factory:()=>"unknown"});var b_=new Fe(""),T_=new Fe("",{providedIn:"root",factory:()=>pu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function ON(){let n=new hc;return $(Gn)==="browser"&&(n.store=NN(pu(),$(Pf))),n}var hc=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(i,r){return this.store[i]!==void 0?this.store[i]:r}set(i,r){this.store[i]=r}remove(i){delete this.store[i]}hasKey(i){return this.store.hasOwnProperty(i)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(i,r){this.onSerializeCallbacks[i]=r}toJson(){for(let i in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(i))try{this.store[i]=this.onSerializeCallbacks[i]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=Ce({token:e,providedIn:"root",factory:ON});let n=e;return n})();function NN(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var RM="h",PM="b",Nm=function(n){return n.FirstChild="f",n.NextSibling="n",n}(Nm||{}),FN="e",kN="t",R_="c",LM="x",af="r",UN="i",GN="n",OM="d";var HN="__nghData__",NM=HN,lm="ngh",VN="nghm",FM=()=>null;function QN(n,e,t=!1){let i=n.getAttribute(lm);if(i==null)return null;let[r,s]=i.split("|");if(i=t?s:r,!i)return null;let o=s?`|${s}`:"",a=t?r:o,c={};if(i!==""){let u=e.get(hc,null,{optional:!0});u!==null&&(c=u.get(NM,[])[Number(i)])}let l={data:c,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Lf(l,0,n.nextSibling)),a?n.setAttribute(lm,a):n.removeAttribute(lm),l}function zN(){FM=QN}function P_(n,e,t=!1){return FM(n,e,t)}function KN(n){let e=n._lView;return e[rt].type===2?null:(ef(e)&&(e=e[Tn]),e)}function WN(n){return n.textContent?.replace(/\s/gm,"")}function jN(n){let e=pu(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=WN(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=t.nextNode();)r.push(i);for(let s of r)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Lf(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Fm(n,e){return n.segmentHeads?.[e]??null}function JN(n,e){let t=n.data,i=t[FN]?.[e]??null;return i===null&&t[R_]?.[e]&&(i=L_(n,e)),i}function kM(n,e){return n.data[R_]?.[e]??null}function L_(n,e){let t=kM(n,e)??[],i=0;for(let r of t)i+=r[af]*(r[LM]??1);return i}function qN(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[OM];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function Au(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[OM];n.disconnectedNodes=t?new Set(t):null}return!!qN(n)?.has(e)}var Rh=new Fe(""),UM=!1,GM=new Fe("",{providedIn:"root",factory:()=>UM});var Ph;function YN(){if(Ph===void 0&&(Ph=null,ql.trustedTypes))try{Ph=ql.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ph}function Of(n){return YN()?.createHTML(n)||n}var Lh;function XN(){if(Lh===void 0&&(Lh=null,ql.trustedTypes))try{Lh=ql.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lh}function qS(n){return XN()?.createHTML(n)||n}var cf=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${px})`}};function fc(n){return n instanceof cf?n.changingThisBreaksApplicationSecurity:n}function O_(n,e){let t=$N(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${px})`)}return t===e}function $N(n){return n instanceof cf&&n.getTypeName()||null}function ZN(n){let e=new Um(n);return eF()?new km(e):e}var km=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Of(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Um=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Of(e),t}};function eF(){try{return!!new window.DOMParser().parseFromString(Of(""),"text/html")}catch{return!1}}var tF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function N_(n){return n=String(n),n.match(tF)?n:"unsafe:"+n}function xs(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function gu(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var HM=xs("area,br,col,hr,img,wbr"),VM=xs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),QM=xs("rp,rt"),nF=gu(QM,VM),iF=gu(VM,xs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),rF=gu(QM,xs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),YS=gu(HM,iF,rF,nF),zM=xs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sF=xs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),oF=xs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),aF=gu(zM,sF,oF),cF=xs("script,style,template"),Gm=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=dF(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=uF(t);if(s){t=s;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=XS(e).toLowerCase();if(!YS.hasOwnProperty(t))return this.sanitizedSomething=!0,!cF.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!aF.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;zM[a]&&(c=N_(c)),this.buf.push(" ",o,'="',$S(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=XS(e).toLowerCase();YS.hasOwnProperty(t)&&!HM.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push($S(e))}};function lF(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function uF(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw KM(e);return e}function dF(n){let e=n.firstChild;if(e&&lF(n,e))throw KM(e);return e}function XS(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function KM(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var hF=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fF=/([^\#-~ |!])/g;function $S(n){return n.replace(/&/g,"&amp;").replace(hF,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(fF,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Oh;function WM(n,e){let t=null;try{Oh=Oh||ZN(n);let i=e?String(e):"";t=Oh.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Oh.getInertBodyElement(i)}while(i!==s);let a=new Gm().sanitizeChildren(ZS(t)||t);return Of(a)}finally{if(t){let i=ZS(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function ZS(n){return"content"in n&&pF(n)?n.content:null}function pF(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Nf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Nf||{});function Ff(n){let e=jM();return e?qS(e.sanitize(Nf.HTML,n)||""):O_(n,"HTML")?qS(fc(n)):WM(pu(),cu(n))}function Lr(n){let e=jM();return e?e.sanitize(Nf.URL,n)||"":O_(n,"URL")?fc(n):N_(cu(n))}function jM(){let n=Ft();return n&&n[Yr].sanitizer}var AF=/^>|^->|<!--|-->|--!>|<!-$/g,gF=/(<|>)/g,mF="\u200B$1\u200B";function _F(n){return n.replace(AF,e=>e.replace(gF,mF))}function CF(n){return n.ownerDocument.body}function JM(n){return n instanceof Function?n():n}function Nh(n){return(n??$(Xr)).get(Gn)==="browser"}var Ss=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ss||{}),yF;function F_(n,e){return yF(n,e)}function Xa(n,e,t,i,r){if(i!=null){let s,o=!1;Zr(i)?s=i:br(i)&&(o=!0,i=i[Qi]);let a=Rr(i);n===0&&t!==null?r==null?ew(e,t,a):uf(e,t,a,r||null,!0):n===1&&t!==null?uf(e,t,a,r||null,!0):n===2?H_(e,a,o):n===3&&e.destroyNode(a),s!=null&&PF(e,n,s,t,r)}}function qM(n,e){return n.createText(e)}function EF(n,e,t){n.setValue(e,t)}function YM(n,e){return n.createComment(_F(e))}function k_(n,e,t){return n.createElement(e,t)}function vF(n,e){XM(n,e),e[Qi]=null,e[Ri]=null}function IF(n,e,t,i,r,s){i[Qi]=r,i[Ri]=e,Uf(n,i,t,1,r,s)}function XM(n,e){e[Yr].changeDetectionScheduler?.notify(8),Uf(n,e,e[tn],2,null,null)}function SF(n){let e=n[Zl];if(!e)return um(n[rt],n);for(;e;){let t=null;if(br(e))t=e[Zl];else{let i=e[pi];i&&(t=i)}if(!t){for(;e&&!e[Dr]&&e!==n;)br(e)&&um(e[rt],e),e=e[ni];e===null&&(e=n),br(e)&&um(e[rt],e),t=e&&e[Dr]}e=t}}function xF(n,e,t,i){let r=pi+i,s=t.length;i>0&&(t[r-1][Dr]=e),i<s-pi?(e[Dr]=t[r],xx(t,pi+i,e)):(t.push(e),e[Dr]=null),e[ni]=t;let o=e[Yo];o!==null&&t!==o&&$M(o,e);let a=e[vs];a!==null&&a.insertView(n),Sm(e),e[Je]|=128}function $M(n,e){let t=n[nc],i=e[ni];if(br(i))n[Je]|=Zh.HasTransplantedViews;else{let r=i[ni][Ti];e[Ti]!==r&&(n[Je]|=Zh.HasTransplantedViews)}t===null?n[nc]=[e]:t.push(e)}function U_(n,e){let t=n[nc],i=t.indexOf(e);t.splice(i,1)}function lf(n,e){if(n.length<=pi)return;let t=pi+e,i=n[t];if(i){let r=i[Yo];r!==null&&r!==n&&U_(r,i),e>0&&(n[t-1][Dr]=i[Dr]);let s=qh(n,pi+e);vF(i[rt],i);let o=s[vs];o!==null&&o.detachView(s[rt]),i[ni]=null,i[Dr]=null,i[Je]&=-129}return i}function G_(n,e){if(!(e[Je]&256)){let t=e[tn];t.destroyNode&&Uf(n,e,t,3,null,null),SF(e)}}function um(n,e){if(e[Je]&256)return;let t=Et(null);try{e[Je]&=-129,e[Je]|=256,e[ur]&&ch(e[ur]),wF(n,e),MF(n,e),e[rt].type===1&&e[tn].destroy();let i=e[Yo];if(i!==null&&Zr(e[ni])){i!==e[ni]&&U_(i,e);let r=e[vs];r!==null&&r.detachView(n)}PN(e)}finally{Et(t)}}function MF(n,e){let t=n.cleanup,i=e[Xh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[t[s+1]];t[s].call(o)}i!==null&&(e[Xh]=null);let r=e[no];if(r!==null){e[no]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function wF(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof nu)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];jr(4,a,c);try{c.call(a)}finally{jr(5,a,c)}}else{jr(4,r,s);try{s.call(r)}finally{jr(5,r,s)}}}}}function ZM(n,e,t){return BF(n,e.parent,t)}function BF(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Qi];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=n.data[i.directiveStart+r];if(s===qr.None||s===qr.Emulated)return null}return zi(i,t)}}function uf(n,e,t,i,r){n.insertBefore(e,t,i,r)}function ew(n,e,t){n.appendChild(e,t)}function ex(n,e,t,i,r){i!==null?uf(n,e,t,i,r):ew(n,e,t)}function tw(n,e){return n.parentNode(e)}function DF(n,e){return n.nextSibling(e)}function nw(n,e,t){return TF(n,e,t)}function bF(n,e,t){return n.type&40?zi(n,t):null}var TF=bF,tx;function kf(n,e,t,i){let r=ZM(n,i,e),s=e[tn],o=i.parent||e[Ri],a=nw(o,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)ex(s,r,t[c],a,!1);else ex(s,r,t,a,!1);tx!==void 0&&tx(s,i,e,t,r)}function jl(n,e){if(e!==null){let t=e.type;if(t&3)return zi(e,n);if(t&4)return Hm(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return jl(n,i);{let r=n[e.index];return Zr(r)?Hm(-1,r):Rr(r)}}else{if(t&128)return jl(n,e.next);if(t&32)return F_(e,n)()||Rr(n[e.index]);{let i=iw(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Xo(n[Ti]);return jl(r,i)}else return jl(n,e.next)}}}return null}function iw(n,e){if(e!==null){let i=n[Ti][Ri],r=e.projection;return i.projection[r]}return null}function Hm(n,e){let t=pi+n+1;if(t<e.length){let i=e[t],r=i[rt].firstChild;if(r!==null)return jl(i,r)}return e[Is]}function H_(n,e,t){n.removeChild(null,e,t)}function rw(n){n.textContent=""}function V_(n,e,t,i,r,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],c=t.type;if(o&&e===0&&(a&&ro(Rr(a),i),t.flags|=2),(t.flags&32)!==32)if(c&8)V_(n,e,t.child,i,r,s,!1),Xa(e,n,r,a,s);else if(c&32){let l=F_(t,i),u;for(;u=l();)Xa(e,n,r,u,s);Xa(e,n,r,a,s)}else c&16?sw(n,e,i,t,r,s):Xa(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Uf(n,e,t,i,r,s){V_(t,i,n.firstChild,e,r,s,!1)}function RF(n,e,t){let i=e[tn],r=ZM(n,t,e),s=t.parent||e[Ri],o=nw(s,t,e);sw(i,0,e,t,r,o)}function sw(n,e,t,i,r,s){let o=t[Ti],c=o[Ri].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];Xa(e,n,r,u,s)}else{let l=c,u=o[ni];of(i)&&(l.flags|=128),V_(n,e,l,u,r,s,!0)}}function PF(n,e,t,i,r){let s=t[Is],o=Rr(t);s!==o&&Xa(e,n,i,s,r);for(let a=pi;a<t.length;a++){let c=t[a];Uf(c[rt],c,n,e,i,s)}}function LF(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:Ss.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ss.Important),n.setStyle(t,i,r,s))}}function OF(n,e,t){n.setAttribute(e,"style",t)}function ow(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function aw(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&_m(n,e,i),r!==null&&ow(n,e,r),s!==null&&OF(n,e,s)}var ts={};function V(n=1){cw(Ai(),Ft(),na()+n,!1)}function cw(n,e,t,i){if(!i)if((e[Je]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Vh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Qh(e,s,0,t)}$o(t)}function Ae(n,e=_t.Default){let t=Ft();if(t===null)return Re(n,e);let i=Ki();return _M(i,t,lr(n),e)}function lw(n,e,t,i,r,s){let o=Et(null);try{let a=null;r&io.SignalBased&&(a=e[i][ar]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&io.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,i):Qx(e,a,i,s)}finally{Et(o)}}function NF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)$o(~r);else{let s=r,o=t[++i],a=t[++i];WO(o,s);let c=e[s];a(2,c)}}}finally{$o(-1)}}function Gf(n,e,t,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Qi]=r,d[Je]=i|4|128|8|64,(l!==null||n&&n[Je]&2048)&&(d[Je]|=2048),qx(d),d[ni]=d[lc]=n,d[dr]=t,d[Yr]=o||n&&n[Yr],d[tn]=a||n&&n[tn],d[tc]=c||n&&n[tc]||null,d[Ri]=s,d[Mf]=TN(),d[Tr]=u,d[Hx]=l,d[Ti]=e.type==2?n[Ti]:d,d}function pc(n,e,t,i,r){let s=n.data[e];if(s===null)s=FF(n,e,t,i,r),KO()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=VO();s.injectorIndex=o===null?-1:o.injectorIndex}return ta(s,!0),s}function FF(n,e,t,i,r){let s=eM(),o=__(),a=o?s:s&&s.parent,c=n.data[e]=zF(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function uw(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function dw(n,e,t,i,r){let s=na(),o=i&2;try{$o(-1),o&&e.length>Tn&&cw(n,e,Tn,!1),jr(o?2:0,r),t(i,r)}finally{$o(s),jr(o?3:1,r)}}function Q_(n,e,t){if(A_(e)){let i=Et(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Et(i)}}}function z_(n,e,t){Zx()&&(YF(n,e,t,zi(t,e)),(t.flags&64)===64&&gw(n,e,t))}function K_(n,e,t=zi){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function hw(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=W_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function W_(n,e,t,i,r,s,o,a,c,l,u){let d=Tn+i,h=d+r,f=kF(d,h),p=typeof l=="function"?l():l;return f[rt]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function kF(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:ts);return t}function UF(n,e,t,i){let s=i.get(GM,UM)||t===qr.ShadowDom,o=n.selectRootElement(e,s);return GF(o),o}function GF(n){fw(n)}var fw=()=>null;function HF(n){MM(n)?rw(n):jN(n)}function VF(){fw=HF}function QF(n,e,t,i){let r=Cw(e);r.push(t),n.firstCreatePass&&yw(n).push(i,r.length-1)}function zF(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return uc()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nx(n,e,t,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,c=io.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(r!==null){if(!r.hasOwnProperty(s))continue;l=r[s]}n===0?ix(i,t,l,a,c):ix(i,t,l,a)}return i}function ix(n,e,t,i,r){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],r!==void 0&&s.push(r)}function KF(n,e,t){let i=e.directiveStart,r=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=s[u],h=t?t.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=nx(0,d.inputs,u,c,f),l=nx(1,d.outputs,u,l,p);let m=c!==null&&o!==null&&!h_(e)?a2(c,u,o):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function WF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function pw(n,e,t,i,r,s,o,a){let c=zi(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(J_(n,t,u,i,r),du(e)&&jF(t,e.index)):e.type&3?(i=WF(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(c,i,r)):e.type&12}function jF(n,e){let t=co(e,n);t[Je]&16||(t[Je]|=64)}function j_(n,e,t,i){if(Zx()){let r=i===null?null:{"":-1},s=$F(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Aw(n,e,t,o,r,a),r&&ZF(t,i,r)}t.mergedAttrs=d_(t.mergedAttrs,t.attrs)}function Aw(n,e,t,i,r,s){for(let l=0;l<i.length;l++)cN(pM(t,e),n,i[l].type);t2(t,n.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=uw(n,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];t.mergedAttrs=d_(t.mergedAttrs,u.hostAttrs),n2(n,t,e,c,u),e2(c,u,r),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}KF(n,t,s)}function JF(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;qF(o)!=a&&o.push(a),o.push(t,i,s)}}function qF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function YF(n,e,t,i){let r=t.directiveStart,s=t.directiveEnd;du(t)&&i2(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||pM(t,e),ro(i,e);let o=t.initialInputs;for(let a=r;a<s;a++){let c=n.data[a],l=rc(e,n,a,t);if(ro(l,e),o!==null&&o2(e,a-r,l,c,t,o),hu(c)){let u=co(t.index,e);u[dr]=rc(e,n,a,t)}}}function gw(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=jO();try{$o(s);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];xm(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&XF(c,l)}}finally{$o(-1),xm(o)}}function XF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $F(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(bx(e,o.selectors,!1))if(i||(i=[]),hu(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let c=a.length;Vm(n,e,c)}else i.unshift(o),Vm(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function Vm(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ZF(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new oe(-301,!1);i.push(e[r],s)}}}function e2(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;hu(e)&&(t[""]=n)}}function t2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function n2(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=ec(r.type,!0)),o=new nu(s,hu(r),Ae);n.blueprint[i]=o,t[i]=o,JF(n,e,i,uw(n,t,r.hostVars,ts),r)}function i2(n,e,t){let i=zi(e,n),r=hw(t),s=n[Yr].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Hf(n,Gf(n,r,null,o,i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=a}function r2(n,e,t,i,r,s){let o=zi(n,e);s2(e[tn],o,s,n.value,t,i,r)}function s2(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?cu(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function o2(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];lw(i,t,c,l,u,d)}}function a2(n,e,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],t[r+1]);break}}r+=2}return i}function mw(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function _w(n,e){let t=n.contentQueries;if(t!==null){let i=Et(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];y_(s),a.contentQueries(2,e[o],o)}}}finally{Et(i)}}}function Hf(n,e){return n[Zl]?n[NS][Dr]=e:n[Zl]=e,n[NS]=e,e}function Qm(n,e,t){y_(0);let i=Et(null);try{e(n,t)}finally{Et(i)}}function Cw(n){return n[Xh]??=[]}function yw(n){return n.cleanup??=[]}function Ew(n,e){let t=n[tc],i=t?t.get($r,null):null;i&&i.handleError(e)}function J_(n,e,t,i,r){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];lw(u,l,i,a,c,r)}}function c2(n,e,t){let i=Jx(e,n);EF(n[tn],i,t)}function l2(n,e){let t=co(e,n),i=t[rt];u2(i,t);let r=t[Qi];r!==null&&t[Tr]===null&&(t[Tr]=P_(r,t[tc])),q_(i,t,t[dr])}function u2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function q_(n,e,t){E_(e);try{let i=n.viewQuery;i!==null&&Qm(1,i,t);let r=n.template;r!==null&&dw(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[vs]?.finishViewCreation(n),n.staticContentQueries&&_w(n,e),n.staticViewQueries&&Qm(2,n.viewQuery,t);let s=n.components;s!==null&&d2(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Je]&=-5,v_()}}function d2(n,e){for(let t=0;t<e.length;t++)l2(n,e[t])}function Y_(n,e,t,i){let r=Et(null);try{let s=e.tView,a=n[Je]&4096?4096:16,c=Gf(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[Yo]=l;let u=n[vs];return u!==null&&(c[vs]=u.createEmbeddedView(s)),q_(s,c,t),c}finally{Et(r)}}function h2(n,e){let t=pi+e;if(t<n.length)return n[t]}function df(n,e){return!e||e.firstChild===null||of(n)}function X_(n,e,t,i=!0){let r=e[rt];if(xF(r,e,n,t),i){let o=Hm(t,n),a=e[tn],c=tw(a,n[Is]);c!==null&&IF(r,n[Ri],a,e,c,o)}let s=e[Tr];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function f2(n,e){let t=lf(n,e);return t!==void 0&&G_(t[rt],t),t}function hf(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(Rr(s)),Zr(s)&&p2(s,i);let o=t.type;if(o&8)hf(n,e,t.child,i);else if(o&32){let a=F_(t,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=iw(e,t);if(Array.isArray(a))i.push(...a);else{let c=Xo(e[Ti]);hf(c[rt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function p2(n,e){for(let t=pi;t<n.length;t++){let i=n[t],r=i[rt].firstChild;r!==null&&hf(i[rt],i,r,e)}n[Is]!==n[Qi]&&e.push(n[Is])}var vw=[];function A2(n){return n[ur]??g2(n)}function g2(n){let e=vw.pop()??Object.create(_2);return e.lView=n,e}function m2(n){n.lView[ur]!==n&&(n.lView=null,vw.push(n))}var _2=Bt(ae({},ka),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Bf(n.lView)},consumerOnSignalRead(){this.lView[ur]=this}});function C2(n){let e=n[ur]??Object.create(y2);return e.lView=n,e}var y2=Bt(ae({},ka),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Xo(n.lView);for(;e&&!Iw(e[rt]);)e=Xo(e);e&&Yx(e)},consumerOnSignalRead(){this.lView[ur]=this}});function Iw(n){return n.type!==2}var E2=100;function Sw(n,e=!0,t=0){let i=n[Yr],r=i.rendererFactory,s=!1;s||r.begin?.();try{v2(n,t)}catch(o){throw e&&Ew(n,o),o}finally{s||(r.end?.(),i.inlineEffectRunner?.flush())}}function v2(n,e){let t=tM();try{kS(!0),zm(n,e);let i=0;for(;tu(n);){if(i===E2)throw new oe(103,!1);i++,zm(n,1)}}finally{kS(t)}}function I2(n,e,t,i){let r=e[Je];if((r&256)===256)return;let s=!1,o=!1;!s&&e[Yr].inlineEffectRunner?.flush(),E_(e);let a=!0,c=null,l=null;s||(Iw(n)?(l=A2(e),c=zl(l)):UI()===null?(a=!1,l=C2(e),c=zl(l)):e[ur]&&(ch(e[ur]),e[ur]=null));try{qx(e),zO(n.bindingStartIndex),t!==null&&dw(n,e,t,2,i);let u=(r&3)===3;if(!s)if(u){let f=n.preOrderCheckHooks;f!==null&&Vh(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Qh(e,f,0,null),sm(e,0)}if(o||S2(e),xw(e,0),n.contentQueries!==null&&_w(n,e),!s)if(u){let f=n.contentCheckHooks;f!==null&&Vh(e,f)}else{let f=n.contentHooks;f!==null&&Qh(e,f,1),sm(e,1)}NF(n,e);let d=n.components;d!==null&&ww(e,d,0);let h=n.viewQuery;if(h!==null&&Qm(2,h,i),!s)if(u){let f=n.viewCheckHooks;f!==null&&Vh(e,f)}else{let f=n.viewHooks;f!==null&&Qh(e,f,2),sm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Hh]){for(let f of e[Hh])f();e[Hh]=null}s||(e[Je]&=-73)}catch(u){throw s||Bf(e),u}finally{l!==null&&(oh(l,c),a&&m2(l)),v_()}}function xw(n,e){for(let t=BM(n);t!==null;t=DM(t))for(let i=pi;i<t.length;i++){let r=t[i];Mw(r,e)}}function S2(n){for(let e=BM(n);e!==null;e=DM(e)){if(!(e[Je]&Zh.HasTransplantedViews))continue;let t=e[nc];for(let i=0;i<t.length;i++){let r=t[i];Yx(r)}}}function x2(n,e,t){let i=co(e,n);Mw(i,t)}function Mw(n,e){m_(n)&&zm(n,e)}function zm(n,e){let i=n[rt],r=n[Je],s=n[ur],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&ah(s)),o||=!1,s&&(s.dirty=!1),n[Je]&=-9217,o)I2(i,n,i.template,n[dr]);else if(r&8192){xw(n,1);let a=i.components;a!==null&&ww(n,a,1)}}function ww(n,e,t){for(let i=0;i<e.length;i++)x2(n,e[i],t)}function $_(n,e){let t=tM()?64:1088;for(n[Yr].changeDetectionScheduler?.notify(e);n;){n[Je]|=t;let i=Xo(n);if(ef(n)&&!i)return n;n=i}return null}var Zo=class{get rootNodes(){let e=this._lView,t=e[rt];return hf(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dr]}set context(e){this._lView[dr]=e}get destroyed(){return(this._lView[Je]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ni];if(Zr(e)){let t=e[$h],i=t?t.indexOf(this):-1;i>-1&&(lf(e,i),qh(t,i))}this._attachedToViewContainer=!1}G_(this._lView[rt],this._lView)}onDestroy(e){Xx(this._lView,e)}markForCheck(){$_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Je]&=-129}reattach(){Sm(this._lView),this._lView[Je]|=128}detectChanges(){this._lView[Je]|=1024,Sw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ef(this._lView),t=this._lView[Yo];t!==null&&!e&&U_(t,this._lView),XM(this._lView[rt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e;let t=ef(this._lView),i=this._lView[Yo];i!==null&&!t&&$M(i,this._lView),Sm(this._lView)}},iu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=B2;let n=e;return n})(),M2=iu,w2=class extends M2{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=Y_(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Zo(r)}};function B2(){return Vf(Ki(),Ft())}function Vf(n,e){return n.type&4?new w2(e,n,dc(n,e)):null}var D2=new RegExp(`^(\\d+)*(${PM}|${RM})*(.*)`);function b2(n){let e=n.match(D2),[t,i,r,s]=e,o=i?parseInt(i,10):r,a=[];for(let[c,l,u]of s.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[o,...a]}function T2(n){return!n.prev&&n.parent?.type===8}function dm(n){return n.index-Tn}function R2(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Qf(n,e,t,i){let r=dm(i),s=R2(n,r);if(s===void 0){let o=n.data[GN];if(o?.[r])s=L2(o[r],t);else if(e.firstChild===i)s=n.firstChild;else{let a=i.prev===null,c=i.prev??i.parent;if(T2(i)){let l=dm(i.parent);s=Fm(n,l)}else{let l=zi(c,t);if(a)s=l.firstChild;else{let u=dm(c),d=Fm(n,u);if(c.type===2&&d){let f=L_(n,u)+1;s=zf(f,d)}else s=l.nextSibling}}}}return s}function zf(n,e){let t=e;for(let i=0;i<n;i++)t=t.nextSibling;return t}function P2(n,e){let t=n;for(let i=0;i<e.length;i+=2){let r=e[i],s=e[i+1];for(let o=0;o<s;o++)switch(r){case Nm.FirstChild:t=t.firstChild;break;case Nm.NextSibling:t=t.nextSibling;break}}return t}function L2(n,e){let[t,...i]=b2(n),r;if(t===RM)r=e[Ti][Qi];else if(t===PM)r=CF(e[Ti][Qi]);else{let s=Number(t);r=Rr(e[s+Tn])}return P2(r,i)}var O2=!1;function N2(n){O2=n}function F2(n){let e=n[Tr];if(e){let{i18nNodes:t,dehydratedIcuData:i}=e;if(t&&i){let r=n[tn];for(let s of i.values())k2(r,t,s)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function k2(n,e,t){for(let i of t.node.cases[t.case]){let r=e.get(i.index-Tn);r&&H_(n,r,!1)}}function Bw(n){let e=n[eu]??[],i=n[ni][tn];for(let r of e)U2(r,i);n[eu]=fi}function U2(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[af];for(;t<r;){let s=i.nextSibling;H_(e,i,!1),i=s,t++}}}function Dw(n){Bw(n);let e=n[Qi];br(e)&&ff(e);for(let t=pi;t<n.length;t++)ff(n[t])}function ff(n){F2(n);let e=n[rt];for(let t=Tn;t<e.bindingStartIndex;t++)if(Zr(n[t])){let i=n[t];Dw(i)}else br(n[t])&&ff(n[t])}function G2(n){let e=n._views;for(let t of e){let i=KN(t);i!==null&&i[Qi]!==null&&(br(i)?ff(i):Dw(i))}}function H2(n,e){let t=[];for(let i of e)for(let r=0;r<(i[LM]??1);r++){let s={data:i,firstChild:null};i[af]>0&&(s.firstChild=n,n=zf(i[af],n)),t.push(s)}return[n,t]}var bw=()=>null;function V2(n,e){let t=n[eu];return!e||t===null||t.length===0?null:t[0].data[UN]===e?t.shift():(Bw(n),null)}function Q2(){bw=V2}function pf(n,e){return bw(n,e)}var ru=class{},Z_=new Fe("",{providedIn:"root",factory:()=>!1});var Tw=new Fe(""),Km=class{},Af=class{};function z2(n){let e=Error(`No component factory found for ${Di(n)}.`);return e[K2]=n,e}var K2="ngComponent";var Wm=class{resolveComponentFactory(e){throw z2(e)}},oC=class oC{};oC.NULL=new Wm;var sc=oC,so=class{},Ac=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>W2();let n=e;return n})();function W2(){let n=Ft(),e=Ki(),t=co(e.index,n);return(br(t)?t:n)[tn]}var j2=(()=>{let e=class e{};e.\u0275prov=Ce({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();var rx=new Set;function hr(n){rx.has(n)||(rx.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Rw=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Ce({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function gf(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=Am(r,a);else if(s==2){let c=a,l=e[++o];i=Am(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var mf=class extends sc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=qo(e);return new su(t,this.ngModule)}};function sx(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let s=Array.isArray(r),o=s?r[0]:r,a=s?r[1]:io.None;e?t.push({propName:o,templateName:i,isSignal:(a&io.SignalBased)!==0}):t.push({propName:o,templateName:i})}return t}function J2(n){let e=n.toLowerCase();return e==="svg"?jx:e==="math"?TO:null}var su=class extends Af{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=sx(e.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return sx(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=uO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=Et(null);try{r=r||this.ngModule;let o=r instanceof bi?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Mm(e,o):e,c=a.get(so,null);if(c===null)throw new oe(407,!1);let l=a.get(j2,null),u=a.get(Rw,null),d=a.get(ru,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=i?UF(f,i,this.componentDef.encapsulation,a):k_(f,p,J2(p)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let g=null;m!==null&&(g=P_(m,a,!0));let E=W_(0,null,null,1,0,null,null,null,null,null,null),_=Gf(null,E,null,A,null,null,h,f,a,null,g);E_(_);let C,T;try{let M=this.componentDef,w,D=null;M.findHostDirectiveDefs?(w=[],D=new Map,M.findHostDirectiveDefs(M,w,D),w.push(M)):w=[M];let I=q2(_,m),y=Y2(I,m,M,w,_,h,f);T=g_(E,Tn),m&&Z2(f,M,m,i),t!==void 0&&ek(T,this.ngContentSelectors,t),C=$2(y,M,w,D,_,[tk]),q_(E,_,null)}finally{v_()}return new jm(this.componentType,C,dc(T,_),_,T)}finally{Et(s)}}},jm=class extends Km{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Zo(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;J_(s[rt],s,r,e,t),this.previousInputValues.set(e,t);let o=co(this._tNode.index,s);$_(o,1)}}get injector(){return new jo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function q2(n,e){let t=n[rt],i=Tn;return n[i]=e,pc(t,i,2,"#host",null)}function Y2(n,e,t,i,r,s,o){let a=r[rt];X2(i,n,e,o);let c=null;e!==null&&(c=P_(e,r[tc]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=Gf(r,hw(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Vm(a,n,i.length-1),Hf(r,d),r[n.index]=d}function X2(n,e,t,i){for(let r of n)e.mergedAttrs=d_(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(gf(e,e.mergedAttrs,!0),t!==null&&aw(i,t,e))}function $2(n,e,t,i,r,s){let o=Ki(),a=r[rt],c=zi(o,r);Aw(a,r,o,t,null,i);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,h=rc(r,a,d,o);ro(h,r)}gw(a,r,o),c&&ro(c,r);let l=rc(r,a,o.directiveStart+o.componentOffset,o);if(n[dr]=r[dr]=l,s!==null)for(let u of s)u(l,e);return Q_(a,o,r),l}function Z2(n,e,t,i){if(i)_m(n,t,["ng-version","18.2.0"]);else{let{attrs:r,classes:s}=dO(e.selectors[0]);r&&_m(n,t,r),s&&s.length>0&&ow(n,t,s.join(" "))}}function ek(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null?Array.from(s):null)}}function tk(){let n=Ki();Tf(Ft()[rt],n)}var ia=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nk;let n=e;return n})();function nk(){let n=Ki();return Lw(n,Ft())}var ik=ia,Pw=class extends ik{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return dc(this._hostTNode,this._hostLView)}get injector(){return new jo(this._hostTNode,this._hostLView)}get parentInjector(){let e=S_(this._hostTNode,this._hostLView);if(dM(e)){let t=nf(e,this._hostLView),i=tf(e),r=t[rt].data[i+8];return new jo(r,t)}else return new jo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=ox(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-pi}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=pf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,df(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!wO(e),a;if(o)a=t;else{let p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new su(qo(e)),l=i||this.parentInjector;if(!s&&c.ngModule==null){let m=(o?l:this.parentInjector).get(bi,null);m&&(s=m)}let u=qo(c.componentType??{}),d=pf(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,s);return this.insertImpl(f.hostView,a,df(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(PO(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[ni],l=new Pw(c,c[Ri],c[ni]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return X_(o,r,s,i),e.attachToViewContainerRef(),xx(hm(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=ox(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=lf(this._lContainer,t);i&&(qh(hm(this._lContainer),t),G_(i[rt],i))}detach(e){let t=this._adjustIndex(e,-1),i=lf(this._lContainer,t);return i&&qh(hm(this._lContainer),t)!=null?new Zo(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function ox(n){return n[$h]}function hm(n){return n[$h]||(n[$h]=[])}function Lw(n,e){let t,i=e[n.index];return Zr(i)?t=i:(t=mw(i,e,null,n),e[n.index]=t,Hf(e,t)),Ow(t,e,n,i),new Pw(t,n,e)}function rk(n,e){let t=n[tn],i=t.createComment(""),r=zi(e,n),s=tw(t,r);return uf(t,s,i,DF(t,r),!1),i}var Ow=Nw,eC=()=>!1;function sk(n,e,t){return eC(n,e,t)}function Nw(n,e,t,i){if(n[Is])return;let r;t.type&8?r=Rr(i):r=rk(e,t),n[Is]=r}function ok(n,e,t){if(n[Is]&&n[eu])return!0;let i=t[Tr],r=e.index-Tn;if(!i||DN(e)||Au(i,r))return!1;let o=Fm(i,r),a=i.data[R_]?.[r],[c,l]=H2(o,a);return n[Is]=c,n[eu]=l,!0}function ak(n,e,t,i){eC(n,t,e)||Nw(n,e,t,i)}function ck(){Ow=ak,eC=ok}var Jm=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},qm=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Uw(e,t).matches!==null&&this.queries[t].setDirty()}},Ym=class{constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=Ak(e):this.predicate=e}},Xm=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},$m=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,lk(t,s)),this.matchTNodeWithReadOption(e,t,zh(t,e,s,!1,!1))}else i===iu?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,zh(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===uo||r===ia||r===iu&&t.type&4)this.addMatch(t.index,-2);else{let s=zh(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function lk(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function uk(n,e){return n.type&11?dc(n,e):n.type&4?Vf(n,e):null}function dk(n,e,t,i){return t===-1?uk(e,n):t===-2?hk(n,e,i):rc(n,n[rt],t,e)}function hk(n,e,t){if(t===uo)return dc(e,n);if(t===iu)return Vf(e,n);if(t===ia)return Lw(e,n)}function Fw(n,e,t,i){let r=e[vs].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(dk(e,u,o[c+1],t.metadata.read))}}r.matches=a}return r.matches}function Zm(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=Fw(n,e,r,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)i.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=pi;d<u.length;d++){let h=u[d];h[Yo]===h[ni]&&Zm(h[rt],h,l,i)}if(u[nc]!==null){let d=u[nc];for(let h=0;h<d.length;h++){let f=d[h];Zm(f[rt],f,l,i)}}}}}return i}function kw(n,e){return n[vs].queries[e].queryList}function fk(n,e,t){let i=new Lm((t&4)===4);return QF(n,e,i,i.destroy),(e[vs]??=new qm).queries.push(new Jm(i))-1}function pk(n,e,t){let i=Ai();return i.firstCreatePass&&(gk(i,new Ym(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),fk(i,Ft(),e)}function Ak(n){return n.split(",").map(e=>e.trim())}function gk(n,e,t){n.queries===null&&(n.queries=new Xm),n.queries.track(new $m(e,t))}function Uw(n,e){return n.queries.getByIndex(e)}function mk(n,e){let t=n[rt],i=Uw(t,e);return i.crossesNgTemplate?Zm(t,n,e,[]):Fw(t,n,i,e)}function Ht(n,e){hr("NgSignals");let t=YI(n),i=t[ar];return e?.equal&&(i.equal=e.equal),t.set=r=>dh(i,r),t.update=r=>XI(i,r),t.asReadonly=_k.bind(t),t}function _k(){let n=this[ar];if(n.readonlyFn===void 0){let e=()=>this();e[ar]=n,n.readonlyFn=e}return n.readonlyFn}function Gw(n,e){let t,i=Ug(()=>{t._dirtyCounter();let r=vk(t,n);if(e&&r===void 0)throw new oe(-951,!1);return r});return t=i[ar],t._dirtyCounter=Ht(0),t._flatValue=void 0,i}function Ck(){return Gw(!0,!1)}function yk(){return Gw(!0,!0)}function Ek(n,e){let t=n[ar];t._lView=Ft(),t._queryIndex=e,t._queryList=kw(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(i=>i+1))}function vk(n,e){let t=n._lView,i=n._queryIndex;if(t===void 0||i===void 0||t[Je]&4)return e?void 0:fi;let r=kw(t,i),s=mk(t,i);return r.reset(s,xN),e?r.first:r._changesDetected||n._flatValue===void 0?n._flatValue=r.toArray():n._flatValue}function ax(n,e){return Ck()}function Ik(n,e){return yk()}var ns=(ax.required=Ik,ax);var oo=class{},ou=class{};var e_=class extends oo{constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mf(this);let s=Lx(e);this._bootstrapComponents=JM(s.bootstrap),this._r3Injector=EM(e,t,[{provide:oo,useValue:this},{provide:sc,useValue:this.componentFactoryResolver},...i],Di(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},t_=class extends ou{constructor(e){super(),this.moduleType=e}create(e){return new e_(this.moduleType,e,[])}};var _f=class extends oo{constructor(e){super(),this.componentFactoryResolver=new mf(this),this.instance=null;let t=new $l([...e.providers,{provide:oo,useValue:this},{provide:sc,useValue:this.componentFactoryResolver}],e.parent||p_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tC(n,e,t=null){return new _f({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function gc(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function mu(n){return(n.flags&32)===32}function Sk(n,e,t,i,r,s,o,a,c){let l=e.consts,u=pc(e,n,4,o||null,a||null);j_(e,t,u,ic(l,c)),Tf(e,u);let d=u.tView=W_(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Hw(n,e,t,i,r,s,o,a,c,l){let u=t+Tn,d=e.firstCreatePass?Sk(u,e,n,i,r,s,o,a,c):e.data[u];ta(d,!1);let h=Vw(e,n,d,t);bf()&&kf(e,n,h,d),ro(h,n);let f=mw(h,n,h,d);return n[u]=f,Hf(n,f),sk(f,d,n),wf(d)&&z_(e,n,d),c!=null&&K_(n,d,l),d}function st(n,e,t,i,r,s,o,a){let c=Ft(),l=Ai(),u=ic(l.consts,s);return Hw(c,l,n,e,t,i,r,u,o,a),st}var Vw=Qw;function Qw(n,e,t,i){return lo(!0),e[tn].createComment("")}function xk(n,e,t,i){let r=e[Tr],s=!r||uc()||mu(t)||Au(r,i);if(lo(s),s)return Qw(n,e,t,i);let o=r.data[kN]?.[i]??null;o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o);let a=Qf(r,n,e,t);Lf(r,i,a);let c=L_(r,i);return zf(c,a)}function Mk(){Vw=xk}function Jn(n,e,t,i){let r=Ft(),s=Df();if(gc(r,s,e)){let o=Ai(),a=I_();r2(a,r,n,e,t,i)}return Jn}function zw(n,e,t,i){return gc(n,Df(),t)?e+cu(t)+i:ts}function Fh(n,e){return n<<17|e<<2}function ea(n){return n>>17&32767}function wk(n){return(n&2)==2}function Bk(n,e){return n&131071|e<<17}function n_(n){return n|2}function oc(n){return(n&131068)>>2}function fm(n,e){return n&-131069|e<<2}function Dk(n){return(n&1)===1}function i_(n){return n|1}function bk(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=ea(o),c=oc(o);n[i]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||lu(d,u)>0)&&(l=!0)}else u=t;if(r)if(c!==0){let h=ea(n[a+1]);n[i+1]=Fh(h,a),h!==0&&(n[h+1]=fm(n[h+1],i)),n[a+1]=Bk(n[a+1],i)}else n[i+1]=Fh(a,0),a!==0&&(n[a+1]=fm(n[a+1],i)),a=i;else n[i+1]=Fh(c,0),a===0?a=i:n[c+1]=fm(n[c+1],i),c=i;l&&(n[i+1]=n_(n[i+1])),cx(n,u,i,!0),cx(n,u,i,!1),Tk(e,u,n,i,s),o=Fh(a,c),s?e.classBindings=o:e.styleBindings=o}function Tk(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&lu(s,e)>=0&&(t[i+1]=i_(t[i+1]))}function cx(n,e,t,i){let r=n[t+1],s=e===null,o=i?ea(r):oc(r),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];Rk(c,e)&&(a=!0,n[o+1]=i?i_(l):n_(l)),o=i?ea(l):oc(l)}a&&(n[t+1]=i?n_(r):i_(r))}function Rk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?lu(n,e)>=0:!1}var Br={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Pk(n){return n.substring(Br.key,Br.keyEnd)}function Lk(n){return Ok(n),Kw(n,Ww(n,0,Br.textEnd))}function Kw(n,e){let t=Br.textEnd;return t===e?-1:(e=Br.keyEnd=Nk(n,Br.key=e,t),Ww(n,e,t))}function Ok(n){Br.key=0,Br.keyEnd=0,Br.value=0,Br.valueEnd=0,Br.textEnd=n.length}function Ww(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Nk(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Ie(n,e,t){let i=Ft(),r=Df();if(gc(i,r,e)){let s=Ai(),o=I_();pw(s,o,i,n,e,i[tn],t,!1)}return Ie}function r_(n,e,t,i,r){let s=e.inputs,o=r?"class":"style";J_(n,t,s[o],o,i)}function Kf(n,e,t){return jw(n,e,t,!1),Kf}function Wi(n,e){return jw(n,e,null,!0),Wi}function Wf(n){kk(zk,Fk,n,!0)}function Fk(n,e){for(let t=Lk(e);t>=0;t=Kw(e,t))u_(n,Pk(e),!0)}function jw(n,e,t,i){let r=Ft(),s=Ai(),o=nM(2);if(s.firstUpdatePass&&qw(s,n,o,i),e!==ts&&gc(r,o,e)){let a=s.data[na()];Yw(s,a,r,r[tn],n,r[o+1]=Wk(e,t),i,o)}}function kk(n,e,t,i){let r=Ai(),s=nM(2);r.firstUpdatePass&&qw(r,null,s,i);let o=Ft();if(t!==ts&&gc(o,s,t)){let a=r.data[na()];if(Xw(a,i)&&!Jw(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Am(c,t||"")),r_(r,a,o,t,i)}else Kk(r,a,o,o[tn],o[s+1],o[s+1]=Qk(n,e,t),i,s)}}function Jw(n,e){return e>=n.expandoStartIndex}function qw(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[na()],o=Jw(n,t);Xw(s,i)&&e===null&&!o&&(e=!1),e=Uk(r,s,e,i),bk(r,s,e,t,o,i)}}function Uk(n,e,t,i){let r=JO(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=pm(null,n,e,t,i),t=au(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=pm(r,n,e,t,i),s===null){let c=Gk(n,e,i);c!==void 0&&Array.isArray(c)&&(c=pm(null,n,e,c[1],i),c=au(c,e.attrs,i),Hk(n,e,i,c))}else s=Vk(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function Gk(n,e,t){let i=t?e.classBindings:e.styleBindings;if(oc(i)!==0)return n[ea(i)]}function Hk(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[ea(r)]=i}function Vk(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=au(i,o,t)}return au(i,e.attrs,t)}function pm(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=au(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function au(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),u_(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Qk(n,e,t){if(t==null||t==="")return fi;let i=[],r=fc(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function zk(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&u_(n,i,t)}function Kk(n,e,t,i,r,s,o,a){r===ts&&(r=fi);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,f=l<s.length?s[l+1]:void 0,p=null,m;u===d?(c+=2,l+=2,h!==f&&(p=d,m=f)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,m=f),p!==null&&Yw(n,e,t,i,p,m,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}function Yw(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=Dk(l)?lx(c,e,t,r,oc(l),o):void 0;if(!Cf(u)){Cf(s)||wk(l)&&(s=lx(c,null,t,r,a,o));let d=Jx(na(),t);LF(i,o,d,r,s)}}function lx(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[r+1];h===ts&&(h=d?fi:void 0);let f=d?im(h,i):u===i?h:void 0;if(l&&!Cf(f)&&(f=im(c,i)),Cf(f)&&(a=f,o))return a;let p=n[r+1];r=o?ea(p):oc(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=im(c,i))}return a}function Cf(n){return n!==void 0}function Wk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Di(fc(n)))),n}function Xw(n,e){return(n.flags&(e?8:16))!==0}function qe(n,e){hr("NgControlFlow");let t=Ft(),i=Df(),r=t[i]!==ts?t[i]:-1,s=r!==-1?ux(t,Tn+r):void 0,o=0;if(gc(t,i,n)){let a=Et(null);try{if(s!==void 0&&f2(s,o),n!==-1){let c=Tn+n,l=ux(t,c),u=jk(t[rt],c),d=pf(l,u.tView.ssrId),h=Y_(t,u,e,{dehydratedView:d});X_(l,h,o,df(u,d))}}finally{Et(a)}}else if(s!==void 0){let a=h2(s,o);a!==void 0&&(a[dr]=e)}}function ux(n,e){return n[e]}function jk(n,e){return g_(n,e)}function Jk(n,e,t,i,r,s){let o=e.consts,a=ic(o,r),c=pc(e,n,2,i,a);return j_(e,t,c,ic(o,s)),c.attrs!==null&&gf(c,c.attrs,!1),c.mergedAttrs!==null&&gf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function G(n,e,t,i){let r=Ft(),s=Ai(),o=Tn+n,a=r[tn],c=s.firstCreatePass?Jk(o,s,r,e,t,i):s.data[o],l=$w(s,r,c,a,e,n);r[o]=l;let u=wf(c);return ta(c,!0),aw(a,l,c),!mu(c)&&bf()&&kf(s,r,l,c),NO()===0&&ro(l,r),FO(),u&&(z_(s,r,c),Q_(s,c,r)),i!==null&&K_(r,c),G}function H(){let n=Ki();__()?C_():(n=n.parent,ta(n,!1));let e=n;UO(e)&&HO(),kO();let t=Ai();return t.firstCreatePass&&(Tf(t,n),A_(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&nN(e)&&r_(t,e,Ft(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&iN(e)&&r_(t,e,Ft(),e.stylesWithoutHost,!1),H}function re(n,e,t,i){return G(n,e,t,i),H(),re}var $w=(n,e,t,i,r,s)=>(lo(!0),k_(i,r,cM()));function qk(n,e,t,i,r,s){let o=e[Tr],a=!o||uc()||mu(t)||Au(o,s);if(lo(a),a)return k_(i,r,cM());let c=Qf(o,n,e,t);return kM(o,s)&&Lf(o,s,c.nextSibling),o&&(xM(t)||MM(c))&&du(t)&&(GO(t),rw(c)),c}function Yk(){$w=qk}function Xk(n,e,t,i,r){let s=e.consts,o=ic(s,i),a=pc(e,n,8,"ng-container",o);o!==null&&gf(a,o,!0);let c=ic(s,r);return j_(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Zw(n,e,t){let i=Ft(),r=Ai(),s=n+Tn,o=r.firstCreatePass?Xk(s,r,i,e,t):r.data[s];ta(o,!0);let a=tB(r,i,o,n);return i[s]=a,bf()&&kf(r,i,a,o),ro(a,i),wf(o)&&(z_(r,i,o),Q_(r,o,i)),t!=null&&K_(i,o),Zw}function eB(){let n=Ki(),e=Ai();return __()?C_():(n=n.parent,ta(n,!1)),e.firstCreatePass&&(Tf(e,n),A_(n)&&e.queries.elementEnd(n)),eB}function jf(n,e,t){return Zw(n,e,t),eB(),jf}var tB=(n,e,t,i)=>(lo(!0),YM(e[tn],""));function $k(n,e,t,i){let r,s=e[Tr],o=!s||uc()||Au(s,i)||mu(t);if(lo(o),o)return YM(e[tn],"");let a=Qf(s,n,e,t),c=JN(s,i);return Lf(s,i,a),r=zf(c,a),r}function Zk(){tB=$k}function _n(){return Ft()}var yf="en-US";var eU=yf;function tU(n){typeof n=="string"&&(eU=n.toLowerCase().replace(/_/g,"-"))}var nU=(n,e,t)=>{};function Ye(n,e,t,i){let r=Ft(),s=Ai(),o=Ki();return rU(s,r,r[tn],o,n,e,i),Ye}function iU(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[Xh],c=r[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function rU(n,e,t,i,r,s,o){let a=wf(i),l=n.firstCreatePass&&yw(n),u=e[dr],d=Cw(e),h=!0;if(i.type&3||o){let m=zi(i,e),A=o?o(m):m,g=d.length,E=o?C=>o(Rr(C[i.index])):i.index,_=null;if(!o&&a&&(_=iU(n,e,r,i.index)),_!==null){let C=_.__ngLastListenerFn__||_;C.__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,h=!1}else{s=hx(i,e,u,s),nU(m,r,s);let C=t.listen(A,r,s);d.push(s,C),l&&l.push(r,E,g,g+1)}}else s=hx(i,e,u,s);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let m=p.length;if(m)for(let A=0;A<m;A+=2){let g=p[A],E=p[A+1],T=e[g][E].subscribe(s),M=d.length;d.push(s,T),l&&l.push(r,i.index,M,-(M+1))}}}function dx(n,e,t,i){let r=Et(null);try{return jr(6,e,t),t(i)!==!1}catch(s){return Ew(n,s),!1}finally{jr(7,e,t),Et(r)}}function hx(n,e,t,i){return function r(s){if(s===Function)return i;let o=n.componentOffset>-1?co(n.index,e):e;$_(o,5);let a=dx(e,t,i,s),c=r.__ngNextListenerFn__;for(;c;)a=dx(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Se(n=1){return XO(n)}function sU(n,e){let t=null,i=sO(n);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){t=r;continue}if(i===null?bx(n,s,!0):cO(i,s))return r}return t}function nB(n){let e=Ft()[Ti][Ri];if(!e.projection){let t=n?n.length:1,i=e.projection=qL(t,null),r=i.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?sU(s,n):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function iB(n,e=0,t,i,r,s){let o=Ft(),a=Ai(),c=i?n+1:null;c!==null&&Hw(o,a,c,i,r,s,null,t);let l=pc(a,Tn+n,16,null,t||null);l.projection===null&&(l.projection=e),C_();let d=!o[Tr]||uc();o[Ti][Ri].projection[l.projection]===null&&c!==null?oU(o,a,c):d&&(l.flags&32)!==32&&RF(a,o,l)}function oU(n,e,t){let i=Tn+t,r=e.data[i],s=n[i],o=pf(s,r.tView.ssrId),a=Y_(n,r,void 0,{dehydratedView:o});X_(s,a,0,df(r,o))}function nC(n,e,t){return rB(n,"",e,"",t),nC}function rB(n,e,t,i,r){let s=Ft(),o=zw(s,e,t,i);if(o!==ts){let a=Ai(),c=I_();pw(a,c,s,n,o,s[tn],r,!1)}return rB}function is(n,e,t,i){Ek(n,pk(e,t,i))}function rs(n=1){y_(qO()+n)}function iC(n){let e=QO();return RO(e,Tn+n)}function ge(n,e=""){let t=Ft(),i=Ai(),r=n+Tn,s=i.firstCreatePass?pc(i,r,1,e,null):i.data[r],o=sB(i,t,s,e,n);t[r]=o,bf()&&kf(i,t,o,s),ta(s,!1)}var sB=(n,e,t,i,r)=>(lo(!0),qM(e[tn],i));function aU(n,e,t,i,r){let s=e[Tr],o=!s||uc()||mu(t)||Au(s,r);return lo(o),o?qM(e[tn],i):Qf(s,n,e,t)}function cU(){sB=aU}function ze(n){return sn("",n,""),ze}function sn(n,e,t){let i=Ft(),r=zw(i,n,e,t);return r!==ts&&c2(i,na(),r),sn}var lU=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=Fx(!1,i.type),s=r.length>0?tC([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Ce({token:e,providedIn:"environment",factory:()=>new e(Re(bi))});let n=e;return n})();function Le(n){hr("NgStandalone"),n.getStandaloneInjector=e=>e.get(lU).getOrCreateStandaloneInjector(n)}function oB(n,e){return Vf(n,e)}var Jf=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var aB=new Fe("");function _u(n){return!!n&&typeof n.then=="function"}function cB(n){return!!n&&typeof n.subscribe=="function"}var lB=new Fe(""),uB=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=$(lB,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(_u(o))i.push(o);else if(cB(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),mc=new Fe("");function uU(){qI(()=>{throw new oe(600,!1)})}function dU(n){return n.isBoundToModule}var hU=10;function fU(n,e,t){try{let i=t();return _u(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var ss=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=$(vN),this.afterRenderEffectManager=$(Rw),this.zonelessEnabled=$(Z_),this.externalTestViews=new Set,this.beforeRender=new di,this.afterTick=new di,this.componentTypes=[],this.components=[],this.isStable=$(es).hasPendingTasks.pipe(ft(i=>!i)),this._injector=$(bi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let i;return new Promise(r=>{i=this.isStable.subscribe({next:s=>{s&&r()}})}).finally(()=>{i.unsubscribe()})}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof Af;if(!this._injector.get(uB).done){let f=!s&&Px(i),p=!1;throw new oe(405,p)}let a;s?a=i:a=this._injector.get(sc).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=dU(a)?void 0:this._injector.get(oo),l=r||a.selector,u=a.create(Xr.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(aB,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Kh(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new oe(101,!1);let r=Et(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,Et(r),this.afterTick.next()}}detectChangesInAttachedViews(i){let r=null;this._injector.destroyed||(r=this._injector.get(so,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<hU;){let a=s===0;if(i||!a){this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:l}of this._views)pU(c,l,a,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:c})=>tu(c))&&(o.execute(),!this.allViews.some(({_lView:c})=>tu(c))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Kh(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(mc,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Kh(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new oe(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Kh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var kh;function qf(n){kh??=new WeakMap;let e=kh.get(n);if(e)return e;let t=n.isStable.pipe(Bi(i=>i)).toPromise().then(()=>{});return kh.set(n,t),n.onDestroy(()=>kh?.delete(n)),t}function pU(n,e,t,i){if(!t&&!tu(n))return;Sw(n,e,t&&!i?0:1)}var s_=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},rC=(()=>{let e=class e{compileModuleSync(i){return new t_(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=Lx(i),o=JM(s.declarations).reduce((a,c)=>{let l=qo(c);return l&&a.push(new su(l)),a},[]);return new s_(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var AU=(()=>{let e=class e{constructor(){this.zone=$(ln),this.changeDetectionScheduler=$(ru),this.applicationRef=$(ss)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),gU=new Fe("",{factory:()=>!1});function dB({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new ln(fB()),[{provide:ln,useFactory:n},{provide:Jo,multi:!0,useFactory:()=>{let t=$(AU,{optional:!0});return()=>t.initialize()}},{provide:Jo,multi:!0,useFactory:()=>{let t=$(mU);return()=>{t.initialize()}}},e===!0?{provide:Tw,useValue:!0}:[]]}function hB(n){let e=n?.ignoreChangesOutsideZone,t=dB({ngZoneFactory:()=>{let i=fB(n);return i.shouldCoalesceEventChangeDetection&&hr("NgZone_CoalesceEvent"),new ln(i)},ignoreChangesOutsideZone:e});return ao([{provide:gU,useValue:!0},{provide:Z_,useValue:!1},t])}function fB(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var mU=(()=>{let e=class e{constructor(){this.subscription=new bn,this.initialized=!1,this.zone=$(ln),this.pendingTasks=$(es)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ln.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ln.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var _U=(()=>{let e=class e{constructor(){this.appRef=$(ss),this.taskService=$(es),this.ngZone=$(ln),this.zonelessEnabled=$(Z_),this.disableScheduling=$(Tw,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new bn,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(sf):null,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Rm||!this.zoneIsDefined)}notify(i){if(!this.zonelessEnabled&&i===5)return;switch(i){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?zS:vM;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(sf+this.angularZoneId))}tick(i){if(this.runningTick||this.appRef.destroyed)return;let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(i)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(r),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let i=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(i)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function CU(){return typeof $localize<"u"&&$localize.locale||yf}var sC=new Fe("",{providedIn:"root",factory:()=>$(sC,_t.Optional|_t.SkipSelf)||CU()});var pB=new Fe("");function Uh(n){return!!n.platformInjector}function yU(n){let e=Uh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ln);return t.run(()=>{Uh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get($r,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:s=>{i.handleError(s)}})}),Uh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(pB);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{Kh(n.allPlatformModules,n.moduleRef),r.unsubscribe()});return fU(i,t,()=>{let s=e.get(uB);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(sC,yf);if(tU(o||yf),Uh(n)){let a=e.get(ss);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return EU(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function EU(n,e){let t=n.injector.get(ss);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new oe(-403,!1);e.push(n)}var Wh=null;function vU(n=[],e){return Xr.create({name:e,providers:[{provide:xf,useValue:"platform"},{provide:pB,useValue:new Set([()=>Wh=null])},...n]})}function IU(n=[]){if(Wh)return Wh;let e=vU(n);return Wh=e,uU(),SU(e),e}function SU(n){n.get(D_,null)?.forEach(t=>t())}var os=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xU;let n=e;return n})();function xU(n){return MU(Ki(),Ft(),(n&16)===16)}function MU(n,e,t){if(du(n)&&!t){let i=co(n.index,e);return new Zo(i,i)}else if(n.type&175){let i=e[Ti];return new Zo(i,e)}return null}function AB(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=IU(i),s=[dB({}),{provide:ru,useExisting:_U},...t||[]],o=new _f({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return yU({r3Injector:o.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}}var gB=new Fe("");var fx=!1;function wU(){fx||(fx=!0,zN(),Yk(),cU(),Zk(),Mk(),ck(),Q2(),VF())}function BU(n,e){return qf(n)}function mB(){return ao([{provide:Rh,useFactory:()=>{let n=!0;return Nh()&&(n=!!$(hc,{optional:!0})?.get(NM,null)),n&&hr("NgHydration"),n}},{provide:Jo,useValue:()=>{N2(!1),Nh()&&$(Rh)&&(DU(),wU())},multi:!0},{provide:GM,useFactory:()=>Nh()&&$(Rh)},{provide:mc,useFactory:()=>{if(Nh()&&$(Rh)){let n=$(ss),e=$(Xr);return()=>{BU(n,e).then(()=>{G2(n)})}}return()=>{}},multi:!0}])}function DU(){let n=pu(),e;for(let t of n.body.childNodes)if(t.nodeType===Node.COMMENT_NODE&&t.textContent?.trim()===VN){e=t;break}if(!e)throw new oe(-507,!1)}function In(n,e){hr("NgSignals");let t=Ug(n);return e?.equal&&(t[ar].equal=e.equal),t}var bU=new Fe("",{providedIn:"root",factory:()=>$(TU)}),TU=(()=>{let e=class e{};e.\u0275prov=Ce({token:e,providedIn:"root",factory:()=>new o_});let n=e;return n})(),o_=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=$(es),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},a_=class{constructor(e,t,i,r,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=i,this.injector=s,this.watcher=$I(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get($r,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Ms(n,e){hr("NgSignals"),!e?.injector&&MO(Ms);let t=e?.injector??$(Xr),i=e?.manualCleanup!==!0?t.get(Rf):null,r=new a_(t.get(bU),n,typeof Zone>"u"?null:Zone.current,i,t,e?.allowSignalWrites??!1),s=t.get(os,null,{optional:!0});return!s||!(s._lView[Je]&8)?r.watcher.notify():(s._lView[Hh]??=[]).push(r.watcher.notify),r}var vB=null;function _c(){return vB}function IB(n){vB??=n}var Yf=class{};var un=new Fe(""),SB=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:()=>$(OU),providedIn:"platform"});let n=e;return n})();var OU=(()=>{let e=class e extends SB{constructor(){super(),this._doc=$(un),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _c().getBaseHref(this._doc)}onPopState(i){let r=_c().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=_c().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function xB(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function _B(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function ra(n){return n&&n[0]!=="?"?"?"+n:n}var Xf=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:()=>$(MB),providedIn:"root"});let n=e;return n})(),NU=new Fe(""),MB=(()=>{let e=class e extends Xf{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return xB(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+ra(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+ra(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+ra(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(Re(SB),Re(NU,8))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Cu=(()=>{let e=class e{constructor(i){this._subject=new mn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=UU(_B(CB(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+ra(r))}normalize(i){return e.stripTrailingSlash(kU(this._basePath,CB(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ra(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ra(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=ra,e.joinWithSlash=xB,e.stripTrailingSlash=_B,e.\u0275fac=function(r){return new(r||e)(Re(Xf))},e.\u0275prov=Ce({token:e,factory:()=>FU(),providedIn:"root"});let n=e;return n})();function FU(){return new Cu(Re(Xf))}function kU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function CB(n){return n.replace(/\/index.html$/,"")}function UU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function $f(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var aC=/\s+/,yB=[],wB=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=yB,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(aC):yB}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(aC):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(aC).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(r){return new(r||e)(Ae(uo),Ae(Ac))},e.\u0275dir=uu({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var BB=(()=>{let e=class e{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(this._shouldRecreateView(i)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(i){return!!i.ngTemplateOutlet||!!i.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(i,r,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,s):!1,get:(i,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}};e.\u0275fac=function(r){return new(r||e)(Ae(ia))},e.\u0275dir=uu({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[fu]});let n=e;return n})();var ws=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=cc({type:e}),e.\u0275inj=ac({});let n=e;return n})(),cC="browser",GU="server";function ho(n){return n===cC}function yu(n){return n===GU}var Cc=class{};var vu=class{},Iu=class{},as=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var uC=class{encodeKey(e){return bB(e)}encodeValue(e){return bB(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function HU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var VU=/%(\d[a-f0-9])/gi,QU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bB(n){return encodeURIComponent(n).replace(VU,(e,t)=>QU[t]??e)}function Zf(n){return`${n}`}var po=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new uC,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=HU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Zf):[Zf(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Zf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Zf(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var dC=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function zU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function TB(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function RB(n){return typeof Blob<"u"&&n instanceof Blob}function PB(n){return typeof FormData<"u"&&n instanceof FormData}function KU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Eu=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(zU(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new as,this.context??=new dC,!this.params)this.params=new po,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||TB(this.body)||RB(this.body)||PB(this.body)||KU(this.body)?this.body:this.body instanceof po?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||PB(this.body)?null:RB(this.body)?this.body.type||null:TB(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof po?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new n(t,i,o,{params:u,headers:l,context:d,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}},Ao=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ao||{}),Su=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new as,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},tp=class n extends Su{constructor(e={}){super(e),this.type=Ao.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},sa=class n extends Su{constructor(e={}){super(e),this.type=Ao.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},fo=class extends Su{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},KB=200,WU=204;function lC(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var xu=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Eu)o=i;else{let l;s.headers instanceof as?l=s.headers:l=new as(s.headers);let u;s.params&&(s.params instanceof po?u=s.params:u=new po({fromObject:s.params})),o=new Eu(i,r,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=Ke(o).pipe($s(l=>this.handler.handle(l)));if(i instanceof Eu||s.observe==="events")return a;let c=a.pipe(Vi(l=>l instanceof sa));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(ft(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ft(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ft(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ft(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new po().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,lC(s,r))}post(i,r,s={}){return this.request("POST",i,lC(s,r))}put(i,r,s={}){return this.request("PUT",i,lC(s,r))}};e.\u0275fac=function(r){return new(r||e)(Re(vu))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),jU=/^\)\]\}',?\n/,JU="X-Request-URL";function LB(n){if(n.url)return n.url;let e=JU.toLocaleLowerCase();return n.headers.get(e)}var hC=(()=>{let e=class e{constructor(){this.fetchImpl=$(fC,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=$(ln)}handle(i){return new Dt(r=>{let s=new AbortController;return this.doRequest(i,s.signal,r).then(pC,o=>r.error(new fo({error:o}))),()=>s.abort()})}doRequest(i,r,s){return ct(this,null,function*(){let o=this.createRequestInit(i),a;try{let p=this.ngZone.runOutsideAngular(()=>this.fetchImpl(i.urlWithParams,ae({signal:r},o)));qU(p),s.next({type:Ao.Sent}),a=yield p}catch(p){s.error(new fo({error:p,status:p.status??0,statusText:p.statusText,url:i.urlWithParams,headers:p.headers}));return}let c=new as(a.headers),l=a.statusText,u=LB(a)??i.urlWithParams,d=a.status,h=null;if(i.reportProgress&&s.next(new tp({headers:c,status:d,statusText:l,url:u})),a.body){let p=a.headers.get("content-length"),m=[],A=a.body.getReader(),g=0,E,_,C=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>ct(this,null,function*(){for(;;){let{done:M,value:w}=yield A.read();if(M)break;if(m.push(w),g+=w.length,i.reportProgress){_=i.responseType==="text"?(_??"")+(E??=new TextDecoder).decode(w,{stream:!0}):void 0;let D=()=>s.next({type:Ao.DownloadProgress,total:p?+p:void 0,loaded:g,partialText:_});C?C.run(D):D()}}}));let T=this.concatChunks(m,g);try{let M=a.headers.get("Content-Type")??"";h=this.parseBody(i,T,M)}catch(M){s.error(new fo({error:M,headers:new as(a.headers),status:a.status,statusText:a.statusText,url:LB(a)??i.urlWithParams}));return}}d===0&&(d=h?KB:0),d>=200&&d<300?(s.next(new sa({body:h,headers:c,status:d,statusText:l,url:u})),s.complete()):s.error(new fo({error:h,headers:c,status:d,statusText:l,url:u}))})}parseBody(i,r,s){switch(i.responseType){case"json":let o=new TextDecoder().decode(r).replace(jU,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:s});case"arraybuffer":return r.buffer}}createRequestInit(i){let r={},s=i.withCredentials?"include":void 0;if(i.headers.forEach((o,a)=>r[o]=a.join(",")),i.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!i.headers.has("Content-Type")){let o=i.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:i.serializeBody(),method:i.method,headers:r,credentials:s}}concatChunks(i,r){let s=new Uint8Array(r),o=0;for(let a of i)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),fC=class{};function pC(){}function qU(n){n.then(pC,pC)}function WB(n,e){return e(n)}function YU(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function XU(n,e,t){return(i,r)=>Pr(t,()=>e(i,s=>n(s,r)))}var AC=new Fe(""),gC=new Fe(""),jB=new Fe(""),JB=new Fe("",{providedIn:"root",factory:()=>!0});function $U(){let n=null;return(e,t)=>{n===null&&(n=($(AC,{optional:!0})??[]).reduceRight(YU,WB));let i=$(es);if($(JB)){let s=i.add();return n(e,t).pipe(eo(()=>i.remove(s)))}else return n(e,t)}}var OB=(()=>{let e=class e extends vu{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=$(es),this.contributeToStability=$(JB)}handle(i){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(gC),...this.injector.get(jB,[])]));this.chain=r.reduceRight((s,o)=>XU(s,o,this.injector),WB)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(eo(()=>this.pendingTasks.remove(r)))}else return this.chain(i,r=>this.backend.handle(r))}};e.\u0275fac=function(r){return new(r||e)(Re(Iu),Re(bi))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})();var ZU=/^\)\]\}',?\n/;function eG(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var NB=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new oe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?vn(r.\u0275loadImpl()):Ke(null)).pipe(si(()=>new Dt(o=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((A,g)=>a.setRequestHeader(A,g.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let A=i.detectContentTypeHeader();A!==null&&a.setRequestHeader("Content-Type",A)}if(i.responseType){let A=i.responseType.toLowerCase();a.responseType=A!=="json"?A:"text"}let c=i.serializeBody(),l=null,u=()=>{if(l!==null)return l;let A=a.statusText||"OK",g=new as(a.getAllResponseHeaders()),E=eG(a)||i.url;return l=new tp({headers:g,status:a.status,statusText:A,url:E}),l},d=()=>{let{headers:A,status:g,statusText:E,url:_}=u(),C=null;g!==WU&&(C=typeof a.response>"u"?a.responseText:a.response),g===0&&(g=C?KB:0);let T=g>=200&&g<300;if(i.responseType==="json"&&typeof C=="string"){let M=C;C=C.replace(ZU,"");try{C=C!==""?JSON.parse(C):null}catch(w){C=M,T&&(T=!1,C={error:w,text:C})}}T?(o.next(new sa({body:C,headers:A,status:g,statusText:E,url:_||void 0})),o.complete()):o.error(new fo({error:C,headers:A,status:g,statusText:E,url:_||void 0}))},h=A=>{let{url:g}=u(),E=new fo({error:A,status:a.status||0,statusText:a.statusText||"Unknown Error",url:g||void 0});o.error(E)},f=!1,p=A=>{f||(o.next(u()),f=!0);let g={type:Ao.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(g.total=A.total),i.responseType==="text"&&a.responseText&&(g.partialText=a.responseText),o.next(g)},m=A=>{let g={type:Ao.UploadProgress,loaded:A.loaded};A.lengthComputable&&(g.total=A.total),o.next(g)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),i.reportProgress&&(a.addEventListener("progress",p),c!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(c),o.next({type:Ao.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),i.reportProgress&&(a.removeEventListener("progress",p),c!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(Re(Cc))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),qB=new Fe(""),tG="XSRF-TOKEN",nG=new Fe("",{providedIn:"root",factory:()=>tG}),iG="X-XSRF-TOKEN",rG=new Fe("",{providedIn:"root",factory:()=>iG}),np=class{},sG=(()=>{let e=class e{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=$f(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(Re(un),Re(Gn),Re(nG))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})();function oG(n,e){let t=n.url.toLowerCase();if(!$(qB)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=$(np).getToken(),r=$(rG);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var mC=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(mC||{});function YB(n,e){return{\u0275kind:n,\u0275providers:e}}function XB(...n){let e=[xu,NB,OB,{provide:vu,useExisting:OB},{provide:Iu,useFactory:()=>$(hC,{optional:!0})??$(NB)},{provide:gC,useValue:oG,multi:!0},{provide:qB,useValue:!0},{provide:np,useClass:sG}];for(let t of n)e.push(...t.\u0275providers);return ao(e)}var FB=new Fe("");function $B(){return YB(mC.LegacyInterceptors,[{provide:FB,useFactory:$U},{provide:gC,useExisting:FB,multi:!0}])}function ZB(){return YB(mC.Fetch,[hC,{provide:Iu,useExisting:hC}])}var aG=new Fe(""),kB="b",UB="h",GB="s",HB="st",VB="u",QB="rt",ep=new Fe(""),cG=["GET","HEAD"];function lG(n,e){let f=$(ep),{isCacheActive:t}=f,i=th(f,["isCacheActive"]),{transferCache:r,method:s}=n;if(!t||r===!1||s==="POST"&&!i.includePostRequests&&!r||s!=="POST"&&!cG.includes(s)||!i.includeRequestsWithAuthHeaders&&uG(n)||i.filter?.(n)===!1)return e(n);let o=$(hc),a=$(aG,{optional:!0}),c=yu($(Gn));if(a&&!c)throw new oe(2803,!1);let l=c&&a?pG(n.url,a):n.url,u=hG(n,l),d=o.get(u,null),h=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(h=r.includeHeaders),d){let{[kB]:p,[QB]:m,[UB]:A,[GB]:g,[HB]:E,[VB]:_}=d,C=p;switch(m){case"arraybuffer":C=new TextEncoder().encode(p).buffer;break;case"blob":C=new Blob([p]);break}let T=new as(A);return Ke(new sa({body:C,headers:T,status:g,statusText:E,url:_}))}return e(n).pipe(kn(p=>{p instanceof sa&&c&&o.set(u,{[kB]:p.body,[UB]:dG(p.headers,h),[GB]:p.status,[HB]:p.statusText,[VB]:l,[QB]:n.responseType})}))}function uG(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function dG(n,e){if(!e)return{};let t={};for(let i of e){let r=n.getAll(i);r!==null&&(t[i]=r)}return t}function zB(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function hG(n,e){let{params:t,method:i,responseType:r}=n,s=zB(t),o=n.serializeBody();o instanceof URLSearchParams?o=zB(o):typeof o!="string"&&(o="");let a=[i,r,e,o,s].join("|"),c=fG(a);return c}function fG(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function eD(n){return[{provide:ep,useFactory:()=>(hr("NgHttpTransferCache"),ae({isCacheActive:!0},n))},{provide:jB,useValue:lG,multi:!0,deps:[hc,ep]},{provide:mc,multi:!0,useFactory:()=>{let e=$(ss),t=$(ep);return()=>{qf(e).then(()=>{t.isCacheActive=!1})}}}]}function pG(n,e){let t=new URL(n,"resolve://").origin,i=e[t];return i?n.replace(t,i):n}var yC=class extends Yf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},EC=class n extends yC{static makeCurrent(){IB(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=gG();return t==null?null:mG(t)}resetBaseElement(){Mu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $f(document.cookie,e)}},Mu=null;function gG(){return Mu=Mu||document.querySelector("base"),Mu?Mu.getAttribute("href"):null}function mG(n){return new URL(n,document.baseURI).pathname}var _G=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),ip=new Fe(""),rD=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(Re(ip),Re(ln))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),wu=class{constructor(e){this._doc=e}},_C="ng-app-id",sD=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=yu(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${_C}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(_C),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(_C,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(Re(un),Re(Pf),Re(T_,8),Re(Gn))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),CC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},SC=/%COMP%/g,oD="%COMP%",CG=`_nghost-${oD}`,yG=`_ngcontent-${oD}`,EG=!0,vG=new Fe("",{providedIn:"root",factory:()=>EG});function IG(n){return yG.replace(SC,n)}function SG(n){return CG.replace(SC,n)}function aD(n,e){return e.map(t=>t.replace(SC,n))}var rp=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=yu(c),this.defaultRenderer=new Bu(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===qr.ShadowDom&&(r=Bt(ae({},r),{encapsulation:qr.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof sp?s.applyToHost(i):s instanceof Du&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case qr.Emulated:o=new sp(l,u,r,this.appId,d,a,c,h);break;case qr.ShadowDom:return new vC(l,u,i,r,a,c,this.nonce,h);default:o=new Du(l,u,r,d,a,c,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(Re(rD),Re(sD),Re(Pf),Re(vG),Re(un),Re(Gn),Re(ln),Re(T_))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),Bu=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(CC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(nD(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(nD(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new oe(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=CC[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=CC[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ss.DashCase|Ss.Important)?e.style.setProperty(t,i,r&Ss.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ss.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=_c().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function nD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var vC=class extends Bu{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=aD(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Du=class extends Bu{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?aD(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sp=class extends Du{constructor(e,t,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=IG(l),this.hostAttr=SG(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},xG=(()=>{let e=class e extends wu{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(Re(un))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),MG=(()=>{let e=class e extends wu{constructor(i){super(i),this.delegate=$(gB,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,r,s){return this.delegate.addEventListener(i,r,s)}removeEventListener(i,r,s){return this.delegate.removeEventListener(i,r,s)}};e.\u0275fac=function(r){return new(r||e)(Re(un))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),iD=["alt","control","meta","shift"],wG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},DG=(()=>{let e=class e extends wu{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_c().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),iD.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=wG[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),iD.forEach(a=>{if(a!==s){let c=BG[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(Re(un))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})();function cD(n,e){return AB(ae({rootComponent:n},bG(e)))}function bG(n){return{appProviders:[...OG,...n?.providers??[]],platformProviders:LG}}function TG(){EC.makeCurrent()}function RG(){return new $r}function PG(){return TM(document),document}var LG=[{provide:Gn,useValue:cC},{provide:D_,useValue:TG,multi:!0},{provide:un,useFactory:PG,deps:[]}];var OG=[{provide:xf,useValue:"root"},{provide:$r,useFactory:RG,deps:[]},{provide:ip,useClass:xG,multi:!0,deps:[un,ln,Gn]},{provide:ip,useClass:DG,multi:!0,deps:[un]},{provide:ip,useClass:MG,multi:!0},rp,sD,rD,{provide:so,useExisting:rp},{provide:Cc,useClass:_G,deps:[]},[]];var lD=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(Re(un))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var IC=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n}(IC||{});function uD(...n){let e=[],t=new Set,i=t.has(IC.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:s}of n)t.add(s),r.length&&e.push(r);return ao([[],mB(),t.has(IC.NoHttpTransferCache)||i?[]:eD({}),e])}var ut="primary",Wu=Symbol("RouteTitle"),DC=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function xc(n){return new DC(n)}function FG(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function kG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!cs(n[t],e[t]))return!1;return!0}function cs(n,e){let t=n?bC(n):void 0,i=e?bC(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!_D(n[r],e[r]))return!1;return!0}function bC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function _D(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function CD(n){return n.length>0?n[n.length-1]:null}function mo(n){return Yg(n)?n:_u(n)?vn(Promise.resolve(n)):Ke(n)}var UG={exact:ED,subset:vD},yD={exact:GG,subset:HG,ignored:()=>!0};function dD(n,e,t){return UG[t.paths](n.root,e.root,t.matrixParams)&&yD[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function GG(n,e){return cs(n,e)}function ED(n,e,t){if(!aa(n.segments,e.segments)||!cp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!ED(n.children[i],e.children[i],t))return!1;return!0}function HG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>_D(n[t],e[t]))}function vD(n,e,t){return ID(n,e,e.segments,t)}function ID(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!aa(r,t)||e.hasChildren()||!cp(r,t,i))}else if(n.segments.length===t.length){if(!aa(n.segments,t)||!cp(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!vD(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!aa(n.segments,r)||!cp(n.segments,r,i)||!n.children[ut]?!1:ID(n.children[ut],e,s,i)}}function cp(n,e,t){return e.every((i,r)=>yD[t](n[r].parameters,i.parameters))}var Ds=class{constructor(e=new kt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=xc(this.queryParams),this._queryParamMap}toString(){return zG.serialize(this)}},kt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lp(this)}},oa=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=xc(this.parameters),this._parameterMap}toString(){return xD(this)}};function VG(n,e){return aa(n,e)&&n.every((t,i)=>cs(t.parameters,e[i].parameters))}function aa(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function QG(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ut&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ut&&(t=t.concat(e(r,i)))}),t}var ny=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:()=>new Nu,providedIn:"root"});let n=e;return n})(),Nu=class{parse(e){let t=new RC(e);return new Ds(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${bu(e.root,!0)}`,i=jG(e.queryParams),r=typeof e.fragment=="string"?`#${KG(e.fragment)}`:"";return`${t}${i}${r}`}},zG=new Nu;function lp(n){return n.segments.map(e=>xD(e)).join("/")}function bu(n,e){if(!n.hasChildren())return lp(n);if(e){let t=n.children[ut]?bu(n.children[ut],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==ut&&i.push(`${r}:${bu(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=QG(n,(i,r)=>r===ut?[bu(n.children[ut],!1)]:[`${r}:${bu(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[ut]!=null?`${lp(n)}/${t[0]}`:`${lp(n)}/(${t.join("//")})`}}function SD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function op(n){return SD(n).replace(/%3B/gi,";")}function KG(n){return encodeURI(n)}function TC(n){return SD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function up(n){return decodeURIComponent(n)}function hD(n){return up(n.replace(/\+/g,"%20"))}function xD(n){return`${TC(n.path)}${WG(n.parameters)}`}function WG(n){return Object.entries(n).map(([e,t])=>`;${TC(e)}=${TC(t)}`).join("")}function jG(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${op(t)}=${op(r)}`).join("&"):`${op(t)}=${op(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var JG=/^[^\/()?;#]+/;function xC(n){let e=n.match(JG);return e?e[0]:""}var qG=/^[^\/()?;=#]+/;function YG(n){let e=n.match(qG);return e?e[0]:""}var XG=/^[^=?&#]+/;function $G(n){let e=n.match(XG);return e?e[0]:""}var ZG=/^[^&#]+/;function e3(n){let e=n.match(ZG);return e?e[0]:""}var RC=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ut]=new kt(e,t)),i}parseSegment(){let e=xC(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new oa(up(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=YG(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=xC(this.remaining);r&&(i=r,this.capture(i))}e[up(t)]=up(i)}parseQueryParam(e){let t=$G(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=e3(this.remaining);o&&(i=o,this.capture(i))}let r=hD(t),s=hD(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=xC(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new oe(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ut);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ut]:new kt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}};function MD(n){return n.segments.length>0?new kt([],{[ut]:n}):n}function wD(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=wD(r);if(i===ut&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new kt(n.segments,e);return t3(t)}function t3(n){if(n.numberOfChildren===1&&n.children[ut]){let e=n.children[ut];return new kt(n.segments.concat(e.segments),e.children)}return n}function Fu(n){return n instanceof Ds}function n3(n,e,t=null,i=null){let r=BD(n);return DD(r,e,t,i)}function BD(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new kt(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=MD(i);return e??r}function DD(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return MC(r,r,r,t,i);let s=i3(e);if(s.toRoot())return MC(r,r,new kt([],{}),t,i);let o=r3(s,r,n),a=o.processChildren?Pu(o.segmentGroup,o.index,s.commands):TD(o.segmentGroup,o.index,s.commands);return MC(r,o.segmentGroup,a,t,i)}function dp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ku(n){return typeof n=="object"&&n!=null&&n.outlets}function MC(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=bD(n,e,t);let a=MD(wD(o));return new Ds(a,s,r)}function bD(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=bD(s,e,t)}),new kt(n.segments,i)}var hp=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&dp(i[0]))throw new oe(4003,!1);let r=i.find(ku);if(r&&r!==CD(i))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function i3(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new hp(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new hp(t,e,i)}var vc=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function r3(n,e,t){if(n.isAbsolute)return new vc(e,!0,0);if(!t)return new vc(e,!1,NaN);if(t.parent===null)return new vc(t,!0,0);let i=dp(n.commands[0])?0:1,r=t.segments.length-1+i;return s3(t,r,n.numberOfDoubleDots)}function s3(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new oe(4005,!1);r=i.segments.length}return new vc(i,!1,r-s)}function o3(n){return ku(n[0])?n[0].outlets:{[ut]:n}}function TD(n,e,t){if(n??=new kt([],{}),n.segments.length===0&&n.hasChildren())return Pu(n,e,t);let i=a3(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new kt(n.segments.slice(0,i.pathIndex),{});return s.children[ut]=new kt(n.segments.slice(i.pathIndex),n.children),Pu(s,0,r)}else return i.match&&r.length===0?new kt(n.segments,{}):i.match&&!n.hasChildren()?PC(n,e,t):i.match?Pu(n,0,r):PC(n,e,t)}function Pu(n,e,t){if(t.length===0)return new kt(n.segments,{});{let i=o3(t),r={};if(Object.keys(i).some(s=>s!==ut)&&n.children[ut]&&n.numberOfChildren===1&&n.children[ut].segments.length===0){let s=Pu(n.children[ut],e,t);return new kt(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=TD(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new kt(n.segments,r)}}function a3(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(ku(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!pD(c,l,o))return s;i+=2}else{if(!pD(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function PC(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(ku(s)){let c=c3(s.outlets);return new kt(i,c)}if(r===0&&dp(t[0])){let c=n.segments[e];i.push(new oa(c.path,fD(t[0]))),r++;continue}let o=ku(s)?s.outlets[ut]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&dp(a)?(i.push(new oa(o,fD(a))),r+=2):(i.push(new oa(o,{})),r++)}return new kt(i,{})}function c3(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=PC(new kt([],{}),0,i))}),e}function fD(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function pD(n,e,t){return n==t.path&&cs(e,t.parameters)}var Lu="imperative",ii=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ii||{}),fr=class{constructor(e,t){this.id=e,this.url=t}},Uu=class extends fr{constructor(e,t,i="imperative",r=null){super(e,t),this.type=ii.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ca=class extends fr{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=ii.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ji=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ji||{}),LC=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(LC||{}),Bs=class extends fr{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ii.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},la=class extends fr{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ii.NavigationSkipped}},Gu=class extends fr{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=ii.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fp=class extends fr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ii.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},OC=class extends fr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ii.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},NC=class extends fr{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=ii.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},FC=class extends fr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ii.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kC=class extends fr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ii.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},UC=class{constructor(e){this.route=e,this.type=ii.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},GC=class{constructor(e){this.route=e,this.type=ii.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},HC=class{constructor(e){this.snapshot=e,this.type=ii.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},VC=class{constructor(e){this.snapshot=e,this.type=ii.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},QC=class{constructor(e){this.snapshot=e,this.type=ii.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zC=class{constructor(e){this.snapshot=e,this.type=ii.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Hu=class{},Mc=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function l3(n,e){return n.providers&&!n._injector&&(n._injector=tC(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Or(n){return n.outlet||ut}function u3(n,e){let t=n.filter(i=>Or(i)===e);return t.push(...n.filter(i=>Or(i)!==e)),t}function ju(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var KC=class{get injector(){return ju(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new yp(this.rootInjector),this.attachRef=null}},yp=(()=>{let e=class e{constructor(i){this.rootInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new KC(this.rootInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(Re(bi))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),pp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=WC(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=WC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=jC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return jC(e,this._root).map(t=>t.value)}};function WC(n,e){if(n===e.value)return e;for(let t of e.children){let i=WC(n,t);if(i)return i}return null}function jC(n,e){if(n===e.value)return[e];for(let t of e.children){let i=jC(n,t);if(i.length)return i.unshift(e),i}return[]}var ji=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ec(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Ap=class extends pp{constructor(e,t){super(e),this.snapshot=t,iy(this,e)}toString(){return this.snapshot.toString()}};function RD(n){let e=d3(n),t=new ei([new oa("",{})]),i=new ei({}),r=new ei({}),s=new ei({}),o=new ei(""),a=new go(t,i,s,o,r,ut,n,e.root);return a.snapshot=e.root,new Ap(new ji(a,[]),e)}function d3(n){let e={},t={},i={},r="",s=new Ic([],e,i,r,t,ut,n,null,{});return new mp("",new ji(s,[]))}var go=class{constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ft(l=>l[Wu]))??Ke(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ft(e=>xc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ft(e=>xc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gp(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:ae(ae({},e.params),n.params),data:ae(ae({},e.data),n.data),resolve:ae(ae(ae(ae({},n.data),e.data),r?.data),n._resolvedData)}:i={params:ae({},n.params),data:ae({},n.data),resolve:ae(ae({},n.data),n._resolvedData??{})},r&&LD(r)&&(i.resolve[Wu]=r.title),i}var Ic=class{get title(){return this.data?.[Wu]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},mp=class extends pp{constructor(e,t){super(t),this.url=e,iy(this,t)}toString(){return PD(this._root)}};function iy(n,e){e.value._routerState=n,e.children.forEach(t=>iy(n,t))}function PD(n){let e=n.children.length>0?` { ${n.children.map(PD).join(", ")} } `:"";return`${n.value}${e}`}function wC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,cs(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),cs(e.params,t.params)||n.paramsSubject.next(t.params),kG(e.url,t.url)||n.urlSubject.next(t.url),cs(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function JC(n,e){let t=cs(n.params,e.params)&&VG(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||JC(n.parent,e.parent))}function LD(n){return typeof n.title=="string"||n.title===null}var ry=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ut,this.activateEvents=new mn,this.deactivateEvents=new mn,this.attachEvents=new mn,this.detachEvents=new mn,this.parentContexts=$(yp),this.location=$(ia),this.changeDetector=$(os),this.inputBinder=$(sy,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new qC(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=uu({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fu]});let n=e;return n})(),qC=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===go?this.route:e===yp?this.childContexts:this.parent.get(e,t)}},sy=new Fe("");function h3(n,e,t){let i=Vu(n,e._root,t?t._root:void 0);return new Ap(i,e)}function Vu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=f3(n,e,t);return new ji(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Vu(n,a)),o}}let i=p3(e.value),r=e.children.map(s=>Vu(n,s));return new ji(i,r)}}function f3(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Vu(n,i,r);return Vu(n,i)})}function p3(n){return new go(new ei(n.url),new ei(n.params),new ei(n.queryParams),new ei(n.fragment),new ei(n.data),n.outlet,n.component,n)}var Qu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},OD="ngNavigationCancelingError";function _p(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Fu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=ND(!1,Ji.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function ND(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[OD]=!0,t.cancellationCode=e,t}function A3(n){return FD(n)&&Fu(n.url)}function FD(n){return!!n&&n[OD]}var g3=(n,e,t,i)=>ft(r=>(new YC(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),YC=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),wC(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Ec(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ec(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ec(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Ec(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new zC(s.value.snapshot))}),e.children.length&&this.forwardEvent(new VC(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(wC(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),wC(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},Cp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Sc=class{constructor(e,t){this.component=e,this.route=t}};function m3(n,e,t){let i=n._root,r=e?e._root:null;return Tu(i,r,t,[i.value])}function _3(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Bc(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Cx(n)?n:e.get(n):i}function Tu(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ec(e);return n.children.forEach(o=>{C3(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ou(a,t.getContext(o),r)),r}function C3(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=y3(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Cp(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Tu(n,e,a?a.children:null,i,r):Tu(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Sc(a.outlet.component,o))}else o&&Ou(e,a,r),r.canActivateChecks.push(new Cp(i)),s.component?Tu(n,null,a?a.children:null,i,r):Tu(n,null,t,i,r);return r}function y3(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!aa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!aa(n.url,e.url)||!cs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!JC(n,e)||!cs(n.queryParams,e.queryParams);case"paramsChange":default:return!JC(n,e)}}function Ou(n,e,t){let i=Ec(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Ou(o,e.children.getContext(s),t):Ou(o,null,t):Ou(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Sc(e.outlet.component,r)):t.canDeactivateChecks.push(new Sc(null,r)):t.canDeactivateChecks.push(new Sc(null,r))}function Ju(n){return typeof n=="function"}function E3(n){return typeof n=="boolean"}function v3(n){return n&&Ju(n.canLoad)}function I3(n){return n&&Ju(n.canActivate)}function S3(n){return n&&Ju(n.canActivateChild)}function x3(n){return n&&Ju(n.canDeactivate)}function M3(n){return n&&Ju(n.canMatch)}function kD(n){return n instanceof Es||n?.name==="EmptyError"}var ap=Symbol("INITIAL_VALUE");function wc(){return si(n=>Dh(n.map(e=>e.pipe(wi(1),tm(ap)))).pipe(ft(e=>{for(let t of e)if(t!==!0){if(t===ap)return ap;if(t===!1||w3(t))return t}return!0}),Vi(e=>e!==ap),wi(1)))}function w3(n){return Fu(n)||n instanceof Qu}function B3(n,e){return Fn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Ke(Bt(ae({},t),{guardsResult:!0})):D3(o,i,r,n).pipe(Fn(a=>a&&E3(a)?b3(i,s,n,e):Ke(a)),ft(a=>Bt(ae({},t),{guardsResult:a})))})}function D3(n,e,t,i){return vn(n).pipe(Fn(r=>O3(r.component,r.route,t,e,i)),Bi(r=>r!==!0,!0))}function b3(n,e,t,i){return vn(e).pipe($s(r=>ja(R3(r.route.parent,i),T3(r.route,i),L3(n,r.path,t),P3(n,r.route,t))),Bi(r=>r!==!0,!0))}function T3(n,e){return n!==null&&e&&e(new QC(n)),Ke(!0)}function R3(n,e){return n!==null&&e&&e(new HC(n)),Ke(!0)}function P3(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Ke(!0);let r=i.map(s=>bh(()=>{let o=ju(e)??t,a=Bc(s,o),c=I3(a)?a.canActivate(e,n):Pr(o,()=>a(e,n));return mo(c).pipe(Bi())}));return Ke(r).pipe(wc())}function L3(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>_3(o)).filter(o=>o!==null).map(o=>bh(()=>{let a=o.guards.map(c=>{let l=ju(o.node)??t,u=Bc(c,l),d=S3(u)?u.canActivateChild(i,n):Pr(l,()=>u(i,n));return mo(d).pipe(Bi())});return Ke(a).pipe(wc())}));return Ke(s).pipe(wc())}function O3(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Ke(!0);let o=s.map(a=>{let c=ju(e)??r,l=Bc(a,c),u=x3(l)?l.canDeactivate(n,e,t,i):Pr(c,()=>l(n,e,t,i));return mo(u).pipe(Bi())});return Ke(o).pipe(wc())}function N3(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Ke(!0);let s=r.map(o=>{let a=Bc(o,n),c=v3(a)?a.canLoad(e,t):Pr(n,()=>a(e,t));return mo(c)});return Ke(s).pipe(wc(),UD(i))}function UD(n){return Wg(kn(e=>{if(typeof e!="boolean")throw _p(n,e)}),ft(e=>e===!0))}function F3(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Ke(!0);let s=r.map(o=>{let a=Bc(o,n),c=M3(a)?a.canMatch(e,t):Pr(n,()=>a(e,t));return mo(c)});return Ke(s).pipe(wc(),UD(i))}var zu=class{constructor(e){this.segmentGroup=e||null}},Ku=class extends Error{constructor(e){super(),this.urlTree=e}};function yc(n){return Wa(new zu(n))}function k3(n){return Wa(new oe(4e3,!1))}function U3(n){return Wa(ND(!1,Ji.GuardRejected))}var XC=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Ke(i);if(r.numberOfChildren>1||!r.children[ut])return k3(`${e.redirectTo}`);r=r.children[ut]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,params:f,data:p,title:m}=r,A=Pr(s,()=>a({params:f,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,title:m}));if(A instanceof Ds)throw new Ku(A);t=A}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Ku(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new Ds(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new kt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new oe(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},$C={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function G3(n,e,t,i,r){let s=oy(n,e,t);return s.matched?(i=l3(e,i),F3(i,e,t,r).pipe(ft(o=>o===!0?s:ae({},$C)))):Ke(s)}function oy(n,e,t){if(e.path==="**")return H3(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?ae({},$C):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||FG)(t,n,e);if(!r)return ae({},$C);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?ae(ae({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function H3(n){return{matched:!0,parameters:n.length>0?CD(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function AD(n,e,t,i){return t.length>0&&z3(n,t,i)?{segmentGroup:new kt(e,Q3(i,new kt(t,n.children))),slicedSegments:[]}:t.length===0&&K3(n,t,i)?{segmentGroup:new kt(n.segments,V3(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new kt(n.segments,n.children),slicedSegments:t}}function V3(n,e,t,i){let r={};for(let s of t)if(Ep(n,e,s)&&!i[Or(s)]){let o=new kt([],{});r[Or(s)]=o}return ae(ae({},i),r)}function Q3(n,e){let t={};t[ut]=e;for(let i of n)if(i.path===""&&Or(i)!==ut){let r=new kt([],{});t[Or(i)]=r}return t}function z3(n,e,t){return t.some(i=>Ep(n,e,i)&&Or(i)!==ut)}function K3(n,e,t){return t.some(i=>Ep(n,e,i))}function Ep(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function W3(n,e,t,i){return Or(n)!==i&&(i===ut||!Ep(e,t,n))?!1:oy(e,n,t).matched}function j3(n,e,t){return e.length===0&&!n.children[t]}var ZC=class{};function J3(n,e,t,i,r,s,o="emptyOnly"){return new ey(n,e,t,i,r,o,s).recognize()}var q3=31,ey=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new XC(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new oe(4002,`'${e.segmentGroup}'`)}recognize(){let e=AD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ft(({children:t,rootSnapshot:i})=>{let r=new ji(i,t),s=new mp("",r),o=n3(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ic([],Object.freeze({}),Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ut,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ut,t).pipe(ft(i=>({children:i,rootSnapshot:t})),hi(i=>{if(i instanceof Ku)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof zu?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(ft(o=>o instanceof ji?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return vn(s).pipe($s(o=>{let a=i.children[o],c=u3(t,o);return this.processSegmentGroup(e,c,a,o,r)}),em((o,a)=>(o.push(...a),o)),Zs(null),Zg(),Fn(o=>{if(o===null)return yc(i);let a=GD(o);return Y3(a),Ke(a)}))}processSegment(e,t,i,r,s,o,a){return vn(t).pipe($s(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,s,o,a).pipe(hi(l=>{if(l instanceof zu)return Ke(null);throw l}))),Bi(c=>!!c),hi(c=>{if(kD(c))return j3(i,r,s)?Ke(new ZC):yc(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,s,o,a,c){return W3(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,c):yc(r):yc(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=oy(t,r,s);if(!c)return yc(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>q3&&(this.allowRedirects=!1));let f=new Ic(s,l,Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,gD(r),Or(r),r.component??r._loadedComponent??null,r,mD(r)),p=gp(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(r,m).pipe(Fn(A=>this.processSegment(e,i,t,A.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a=G3(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(si(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(si(({routes:l})=>{let u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=c,p=new Ic(h,d,Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,gD(i),Or(i),i.component??i._loadedComponent??null,i,mD(i)),m=gp(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:A,slicedSegments:g}=AD(t,h,f,l);if(g.length===0&&A.hasChildren())return this.processChildren(u,l,A,p).pipe(ft(_=>new ji(p,_)));if(l.length===0&&g.length===0)return Ke(new ji(p,[]));let E=Or(i)===s;return this.processSegment(u,l,A,g,E?ut:s,!0,p).pipe(ft(_=>new ji(p,_ instanceof ji?[_]:[])))}))):yc(t)))}getChildConfig(e,t,i){return t.children?Ke({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Ke({routes:t._loadedRoutes,injector:t._loadedInjector}):N3(e,t,i,this.urlSerializer).pipe(Fn(r=>r?this.configLoader.loadChildren(e,t).pipe(kn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):U3(t))):Ke({routes:[],injector:e})}};function Y3(n){n.sort((e,t)=>e.value.outlet===ut?-1:t.value.outlet===ut?1:e.value.outlet.localeCompare(t.value.outlet))}function X3(n){let e=n.value.routeConfig;return e&&e.path===""}function GD(n){let e=[],t=new Set;for(let i of n){if(!X3(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=GD(i.children);e.push(new ji(i.value,r))}return e.filter(i=>!t.has(i))}function gD(n){return n.data||{}}function mD(n){return n.resolve||{}}function $3(n,e,t,i,r,s){return Fn(o=>J3(n,e,t,i,o.extractedUrl,r,s).pipe(ft(({state:a,tree:c})=>Bt(ae({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Z3(n,e){return Fn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ke(t);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of HD(c))o.add(l);let a=0;return vn(o).pipe($s(c=>s.has(c)?eH(c,i,n,e):(c.data=gp(c,c.parent,n).resolve,Ke(void 0))),kn(()=>a++),Ja(1),Fn(c=>a===o.size?Ke(t):ti))})}function HD(n){let e=n.children.map(t=>HD(t)).flat();return[n,...e]}function eH(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!LD(r)&&(s[Wu]=r.title),tH(s,n,e,i).pipe(ft(o=>(n._resolvedData=o,n.data=gp(n,n.parent,t).resolve,null)))}function tH(n,e,t,i){let r=bC(n);if(r.length===0)return Ke({});let s={};return vn(r).pipe(Fn(o=>nH(n[o],e,t,i).pipe(Bi(),kn(a=>{if(a instanceof Qu)throw _p(new Nu,a);s[o]=a}))),Ja(1),$g(s),hi(o=>kD(o)?ti:Wa(o)))}function nH(n,e,t,i){let r=ju(e)??i,s=Bc(n,r),o=s.resolve?s.resolve(e,t):Pr(r,()=>s(e,t));return mo(o)}function BC(n){return si(e=>{let t=n(e);return t?vn(t).pipe(ft(()=>e)):Ke(e)})}var VD=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===ut);return r}getResolvedTitleForRoute(i){return i.data[Wu]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:()=>$(iH),providedIn:"root"});let n=e;return n})(),iH=(()=>{let e=class e extends VD{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(Re(lD))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ay=new Fe("",{providedIn:"root",factory:()=>({})}),rH=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Pe({type:e,selectors:[["ng-component"]],standalone:!0,features:[Le],decls:1,vars:0,template:function(r,s){r&1&&re(0,"router-outlet")},dependencies:[ry],encapsulation:2});let n=e;return n})();function cy(n){let e=n.children&&n.children.map(cy),t=e?Bt(ae({},n),{children:e}):ae({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ut&&(t.component=rH),t}var ly=new Fe(""),sH=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$(rC)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Ke(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=mo(i.loadComponent()).pipe(ft(QD),kn(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),eo(()=>{this.componentLoaders.delete(i)})),s=new Ka(r,()=>new di).pipe(za());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ke({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=oH(r,this.compiler,i,this.onLoadEndListener).pipe(eo(()=>{this.childrenLoaders.delete(r)})),a=new Ka(o,()=>new di).pipe(za());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function oH(n,e,t,i){return mo(n.loadChildren()).pipe(ft(QD),Fn(r=>r instanceof ou||Array.isArray(r)?Ke(r):vn(e.compileModuleAsync(r))),ft(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(ly,[],{optional:!0,self:!0}).flat()),{routes:o.map(cy),injector:s}}))}function aH(n){return n&&typeof n=="object"&&"default"in n}function QD(n){return aH(n)?n.default:n}var uy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:()=>$(cH),providedIn:"root"});let n=e;return n})(),cH=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),lH=new Fe("");var uH=new Fe(""),dH=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new di,this.transitionAbortSubject=new di,this.configLoader=$(sH),this.environmentInjector=$(bi),this.urlSerializer=$(ny),this.rootContexts=$(yp),this.location=$(Cu),this.inputBindingEnabled=$(sy,{optional:!0})!==null,this.titleStrategy=$(VD),this.options=$(ay,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=$(uy),this.createViewTransition=$(lH,{optional:!0}),this.navigationErrorHandler=$(uH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ke(void 0),this.rootComponentType=null;let i=s=>this.events.next(new UC(s)),r=s=>this.events.next(new GC(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Bt(ae(ae({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new ei({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Lu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Vi(o=>o.id!==0),ft(o=>Bt(ae({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),si(o=>{let a=!1,c=!1;return Ke(o).pipe(si(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ji.SupersededByNewNavigation),ti;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Bt(ae({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new la(l.id,this.urlSerializer.serialize(l.rawUrl),h,LC.IgnoredSameUrlNavigation)),l.resolve(!1),ti}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ke(l).pipe(si(h=>{let f=this.transitions?.getValue();return this.events.next(new Uu(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?ti:Promise.resolve(h)}),$3(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),kn(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Bt(ae({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new fp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:m,extras:A}=l,g=new Uu(h,this.urlSerializer.serialize(f),p,m);this.events.next(g);let E=RD(this.rootComponentType).snapshot;return this.currentTransition=o=Bt(ae({},l),{targetSnapshot:E,urlAfterRedirects:f,extras:Bt(ae({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Ke(o)}else{let h="";return this.events.next(new la(l.id,this.urlSerializer.serialize(l.extractedUrl),h,LC.IgnoredByUrlHandlingStrategy)),l.resolve(!1),ti}}),kn(l=>{let u=new OC(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ft(l=>(this.currentTransition=o=Bt(ae({},l),{guards:m3(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),B3(this.environmentInjector,l=>this.events.next(l)),kn(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw _p(this.urlSerializer,l.guardsResult);let u=new NC(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Vi(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ji.GuardRejected),!1)),BC(l=>{if(l.guards.canActivateChecks.length)return Ke(l).pipe(kn(u=>{let d=new FC(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),si(u=>{let d=!1;return Ke(u).pipe(Z3(this.paramsInheritanceStrategy,this.environmentInjector),kn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Ji.NoDataFromResolver)}}))}),kn(u=>{let d=new kC(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),BC(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(kn(f=>{d.component=f}),ft(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Dh(u(l.targetSnapshot.root)).pipe(Zs(null),wi(1))}),BC(()=>this.afterPreactivation()),si(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?vn(d).pipe(ft(()=>o)):Ke(o)}),ft(l=>{let u=h3(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Bt(ae({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),kn(()=>{this.events.next(new Hu)}),g3(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),wi(1),kn({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ca(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),nm(this.transitionAbortSubject.pipe(kn(l=>{throw l}))),eo(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Ji.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),hi(l=>{if(c=!0,FD(l))this.events.next(new Bs(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),A3(l)?this.events.next(new Mc(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Gu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let d=Pr(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Qu){let{message:h,cancellationCode:f}=_p(this.urlSerializer,d);this.events.next(new Bs(o.id,this.urlSerializer.serialize(o.extractedUrl),h,f)),this.events.next(new Mc(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let h=i.errorHandler(l);o.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return ti}))}))}cancelNavigationTransition(i,r,s){let o=new Bs(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function hH(n){return n!==Lu}var fH=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:()=>$(pH),providedIn:"root"});let n=e;return n})(),ty=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},pH=(()=>{let e=class e extends ty{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=x_(e)))(s||e)}})(),e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),zD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:()=>$(AH),providedIn:"root"});let n=e;return n})(),AH=(()=>{let e=class e extends zD{constructor(){super(...arguments),this.location=$(Cu),this.urlSerializer=$(ny),this.options=$(ay,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=$(uy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ds,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=RD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Uu)this.stateMemento=this.createStateMemento();else if(i instanceof la)this.rawUrlTree=r.initialUrl;else if(i instanceof fp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else i instanceof Hu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):i instanceof Bs&&(i.code===Ji.GuardRejected||i.code===Ji.NoDataFromResolver)?this.restoreHistory(r):i instanceof Gu?this.restoreHistory(r,!0):i instanceof ca&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=i instanceof Ds?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=ae(ae({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=ae(ae({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=x_(e)))(s||e)}})(),e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ru=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ru||{});function gH(n,e){n.events.pipe(Vi(t=>t instanceof ca||t instanceof Bs||t instanceof Gu||t instanceof la),ft(t=>t instanceof ca||t instanceof la?Ru.COMPLETE:(t instanceof Bs?t.code===Ji.Redirect||t.code===Ji.SupersededByNewNavigation:!1)?Ru.REDIRECTING:Ru.FAILED),Vi(t=>t!==Ru.REDIRECTING),wi(1)).subscribe(()=>{e()})}function mH(n){throw n}var _H={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_o=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=$(Jf),this.stateManager=$(zD),this.options=$(ay,{optional:!0})||{},this.pendingTasks=$(es),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=$(dH),this.urlSerializer=$(ny),this.location=$(Cu),this.urlHandlingStrategy=$(uy),this._events=new di,this.errorHandler=this.options.errorHandler||mH,this.navigated=!1,this.routeReuseStrategy=$(fH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=$(ly,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!$(sy,{optional:!0}),this.eventsSubscription=new bn,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Bs&&r.code!==Ji.Redirect&&r.code!==Ji.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ca)this.navigated=!0;else if(r instanceof Mc){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l=ae({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||hH(s.source)},a);this.scheduleNavigation(c,Lu,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}EH(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Lu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=ae({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(cy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":d=ae(ae({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=BD(f)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),h=this.currentUrlTree.root}return DD(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Fu(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Lu,null,r)}navigate(i,r={skipLocationChange:!1}){return yH(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=ae({},_H):r===!1?s=ae({},CH):s=r,Fu(i))return dD(this.currentUrlTree,i,s);let o=this.parseUrl(i);return dD(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return gH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function yH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new oe(4008,!1)}function EH(n){return!(n instanceof Hu)&&!(n instanceof Mc)}var vH=new Fe("");function KD(n,...e){return ao([{provide:ly,multi:!0,useValue:n},[],{provide:go,useFactory:IH,deps:[_o]},{provide:mc,multi:!0,useFactory:SH},e.map(t=>t.\u0275providers)])}function IH(n){return n.routerState.root}function SH(){let n=$(Xr);return e=>{let t=n.get(ss);if(e!==t.components[0])return;let i=n.get(_o),r=n.get(xH);n.get(MH)===1&&i.initialNavigation(),n.get(wH,null,_t.Optional)?.setUpPreloading(),n.get(vH,null,_t.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var xH=new Fe("",{factory:()=>new di}),MH=new Fe("",{providedIn:"root",factory:()=>1});var wH=new Fe("");var Wt=function(n){return n.READY="game-ready",n.OVER="game-over",n.CLEAR="game-clear",n.SCORE_UPDATE="score-update",n.JUMP="jump",n.LANE_CHANGE="lane-change",n.DEATH="death",n}(Wt||{}),Li=function(n){return n.LOAD="game-load",n.PAUSE="game-pause",n.START="game-start",n.RESTART="game-restart",n}(Li||{});var Sp=$P(jD(),1);var bs=Sp.default;var kE="167";var bH=0,JD=1,TH=2;var fT=1,RH=2,Ur=3,us=0,Oi=1,Xi=2,Mo=0,Yc=1,qD=2,YD=3,XD=4,PH=5,ma=100,LH=101,OH=102,NH=103,FH=104,kH=200,UH=201,GH=202,HH=203,Vy=204,Qy=205,VH=206,QH=207,zH=208,KH=209,WH=210,jH=211,JH=212,qH=213,YH=214,XH=0,$H=1,ZH=2,nA=3,eV=4,tV=5,nV=6,iV=7,UE=0,rV=1,sV=2,wo=0,oV=1,aV=2,cV=3,lV=4,uV=5,dV=6,hV=7,$D="attached",fV="detached",ZD=300,Ca=301,rl=302,zy=303,Ky=304,RA=306,ya=1e3,Ar=1001,ds=1002,on=1003,GE=1004;var jc=1005;var hn=1006,od=1007;var $i=1008;var xn=1009,pT=1010,AT=1011,ud=1012,HE=1013,Ea=1014,Pn=1015,yi=1016,VE=1017,QE=1018,sl=1020,gT=35902,mT=1021,_T=1022,Vn=1023,CT=1024,yT=1025,Xc=1026,ol=1027,zs=1028,zE=1029,Po=1030,KE=1031;var WE=1033,eA=33776,$c=33777,tA=33778,Zc=33779,dd=35840,Wy=35841,hd=35842,jy=35843,fd=36196,pd=37492,Ad=37496,gd=37808,Jy=37809,qy=37810,Yy=37811,al=37812,Xy=37813,$y=37814,Zy=37815,eE=37816,tE=37817,nE=37818,iE=37819,rE=37820,sE=37821,el=36492,oE=36494,aE=36495,ET=36283,cE=36284,lE=36285,uE=36286;var cl=2300,ll=2301,hy=2302,eb=2400,tb=2401,nb=2402,pV=2500;var vT=0,PA=1,bd=2,AV=3200,gV=3201;var jE=0,mV=1,Gr="",Qt="srgb",an="srgb-linear",Td="display-p3",El="display-p3-linear",iA="linear",nn="srgb",rA="rec709",sA="p3";var Dc=7680;var ib=519,_V=512,CV=513,yV=514,IT=515,EV=516,vV=517,IV=518,SV=519,dE=35044,ST=35048;var rb="300 es",Us=2e3,oA=2001,Bo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let i=this._listeners[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}},ai=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],sb=1234567,ad=Math.PI/180,ul=180/Math.PI;function Vr(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ai[n&255]+ai[n>>8&255]+ai[n>>16&255]+ai[n>>24&255]+"-"+ai[e&255]+ai[e>>8&255]+"-"+ai[e>>16&15|64]+ai[e>>24&255]+"-"+ai[t&63|128]+ai[t>>8&255]+"-"+ai[t>>16&255]+ai[t>>24&255]+ai[i&255]+ai[i>>8&255]+ai[i>>16&255]+ai[i>>24&255]).toLowerCase()}function ri(n,e,t){return Math.max(e,Math.min(t,n))}function JE(n,e){return(n%e+e)%e}function xV(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function MV(n,e,t){return n!==e?(t-n)/(e-n):0}function cd(n,e,t){return(1-t)*n+t*e}function wV(n,e,t,i){return cd(n,e,1-Math.exp(-t*i))}function BV(n,e=1){return e-Math.abs(JE(n,e*2)-e)}function DV(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function bV(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function TV(n,e){return n+Math.floor(Math.random()*(e-n+1))}function RV(n,e){return n+Math.random()*(e-n)}function PV(n){return n*(.5-Math.random())}function LV(n){n!==void 0&&(sb=n);let e=sb+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function OV(n){return n*ad}function NV(n){return n*ul}function FV(n){return(n&n-1)===0&&n!==0}function kV(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function UV(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function GV(n,e,t,i,r){let s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),l=s((e+i)/2),u=o((e+i)/2),d=s((e-i)/2),h=o((e-i)/2),f=s((i-e)/2),p=o((i-e)/2);switch(r){case"XYX":n.set(a*u,c*d,c*h,a*l);break;case"YZY":n.set(c*h,a*u,c*d,a*l);break;case"ZXZ":n.set(c*d,c*h,a*u,a*l);break;case"XZX":n.set(a*u,c*p,c*f,a*l);break;case"YXY":n.set(c*f,a*u,c*p,a*l);break;case"ZYZ":n.set(c*p,c*f,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Hr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Vt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var xT={DEG2RAD:ad,RAD2DEG:ul,generateUUID:Vr,clamp:ri,euclideanModulo:JE,mapLinear:xV,inverseLerp:MV,lerp:cd,damp:wV,pingpong:BV,smoothstep:DV,smootherstep:bV,randInt:TV,randFloat:RV,randFloatSpread:PV,seededRandom:LV,degToRad:OV,radToDeg:NV,isPowerOfTwo:FV,ceilPowerOfTwo:kV,floorPowerOfTwo:UV,setQuaternionFromProperEuler:GV,normalize:Vt,denormalize:Hr},we=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(ri(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},gt=class n{constructor(e,t,i,r,s,o,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,c,l)}set(e,t,i,r,s,o,a,c,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],m=r[0],A=r[3],g=r[6],E=r[1],_=r[4],C=r[7],T=r[2],M=r[5],w=r[8];return s[0]=o*m+a*E+c*T,s[3]=o*A+a*_+c*M,s[6]=o*g+a*C+c*w,s[1]=l*m+u*E+d*T,s[4]=l*A+u*_+d*M,s[7]=l*g+u*C+d*w,s[2]=h*m+f*E+p*T,s[5]=h*A+f*_+p*M,s[8]=h*g+f*C+p*w,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*o*u-t*a*l-i*s*u+i*a*c+r*s*l-r*o*c}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*o-a*l,h=a*c-u*s,f=l*s-o*c,p=t*d+i*h+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let m=1/p;return e[0]=d*m,e[1]=(r*l-u*i)*m,e[2]=(a*i-r*o)*m,e[3]=h*m,e[4]=(u*t-r*c)*m,e[5]=(r*s-a*t)*m,e[6]=f*m,e[7]=(i*c-l*t)*m,e[8]=(o*t-i*s)*m,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){let c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*o+l*a)+o+e,-r*l,r*c,-r*(-l*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(fy.makeScale(e,t)),this}rotate(e){return this.premultiply(fy.makeRotation(-e)),this}translate(e,t){return this.premultiply(fy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},fy=new gt;function MT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function md(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function HV(){let n=md("canvas");return n.style.display="block",n}var ob={};function tl(n){n in ob||(ob[n]=!0,console.warn(n))}function VV(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}var ab=new gt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),cb=new gt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Yu={[an]:{transfer:iA,primaries:rA,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[Qt]:{transfer:nn,primaries:rA,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[El]:{transfer:iA,primaries:sA,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(cb),fromReference:n=>n.applyMatrix3(ab)},[Td]:{transfer:nn,primaries:sA,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(cb),fromReference:n=>n.applyMatrix3(ab).convertLinearToSRGB()}},QV=new Set([an,El]),wt={enabled:!0,_workingColorSpace:an,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!QV.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;let i=Yu[e].toReference,r=Yu[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Yu[n].primaries},getTransfer:function(n){return n===Gr?iA:Yu[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(Yu[e].luminanceCoefficients)}};function nl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function py(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var bc,hE=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{bc===void 0&&(bc=md("canvas")),bc.width=e.width,bc.height=e.height;let i=bc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=bc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=md("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=nl(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(nl(t[i]/255)*255):t[i]=nl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},zV=0,aA=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zV++}),this.uuid=Vr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Ay(r[o].image)):s.push(Ay(r[o]))}else s=Ay(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function Ay(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?hE.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var KV=0,fn=(()=>{class n extends Bo{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=Ar,s=Ar,o=hn,a=$i,c=Vn,l=xn,u=n.DEFAULT_ANISOTROPY,d=Gr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:KV++}),this.uuid=Vr(),this.name="",this.source=new aA(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new we(0,0),this.repeat=new we(1,1),this.center=new we(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==ZD)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ya:t.x=t.x-Math.floor(t.x);break;case Ar:t.x=t.x<0?0:1;break;case ds:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ya:t.y=t.y-Math.floor(t.y);break;case Ar:t.y=t.y<0?0:1;break;case ds:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=ZD,n.DEFAULT_ANISOTROPY=1,n})(),jt=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s,c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],f=c[5],p=c[9],m=c[2],A=c[6],g=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-m)<.01&&Math.abs(p-A)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+m)<.1&&Math.abs(p+A)<.1&&Math.abs(l+f+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let _=(l+1)/2,C=(f+1)/2,T=(g+1)/2,M=(u+h)/4,w=(d+m)/4,D=(p+A)/4;return _>C&&_>T?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=M/i,s=w/i):C>T?C<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),i=M/r,s=D/r):T<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(T),i=w/s,r=D/s),this.set(i,r,s,t),this}let E=Math.sqrt((A-p)*(A-p)+(d-m)*(d-m)+(h-u)*(h-u));return Math.abs(E)<.001&&(E=1),this.x=(A-p)/E,this.y=(d-m)/E,this.z=(h-u)/E,this.w=Math.acos((l+f+g-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},fE=class extends Bo{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new jt(0,0,e,t),this.scissorTest=!1,this.viewport=new jt(0,0,e,t);let r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:hn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);let s=new fn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];let o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new aA(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Gs=class extends fE{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},cA=class extends fn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=on,this.minFilter=on,this.wrapR=Ar,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var _d=class extends fn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=on,this.minFilter=on,this.wrapR=Ar,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Qr=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3],h=s[o+0],f=s[o+1],p=s[o+2],m=s[o+3];if(a===0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=f,e[t+2]=p,e[t+3]=m;return}if(d!==m||c!==h||l!==f||u!==p){let A=1-a,g=c*h+l*f+u*p+d*m,E=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){let T=Math.sqrt(_),M=Math.atan2(T,g*E);A=Math.sin(A*M)/T,a=Math.sin(a*M)/T}let C=a*E;if(c=c*A+h*C,l=l*A+f*C,u=u*A+p*C,d=d*A+m*C,A===1-a){let T=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=T,l*=T,u*=T,d*=T}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){let a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=s[o],h=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*d+c*f-l*h,e[t+1]=c*p+u*h+l*d-a*f,e[t+2]=l*p+u*f+a*h-c*d,e[t+3]=u*p-a*d-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(s/2),h=c(i/2),f=c(r/2),p=c(s/2);switch(o){case"XYZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"YZX":this._x=h*u*d+l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d-h*f*p;break;case"XZY":this._x=h*u*d-l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-c)*f,this._y=(s-l)*f,this._z=(o-r)*f}else if(i>a&&i>d){let f=2*Math.sqrt(1+i-a-d);this._w=(u-c)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(s+l)/f}else if(a>d){let f=2*Math.sqrt(1+a-i-d);this._w=(s-l)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(c+u)/f}else{let f=2*Math.sqrt(1+d-i-a);this._w=(o-r)/f,this._x=(s+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ri(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+o*a+r*l-s*c,this._y=r*u+o*c+s*a-i*l,this._z=s*u+o*l+i*c-r*a,this._w=o*u-i*a-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,s=this._z,o=this._w,a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;let c=1-a*a;if(c<=Number.EPSILON){let f=1-t;return this._w=f*o+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}let l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},x=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(lb.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(lb.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,c=e.w,l=2*(o*r-a*i),u=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+c*l+o*d-a*u,this.y=i+c*u+a*l-s*d,this.z=r+c*d+s*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=r*c-s*a,this.y=s*o-i*c,this.z=i*a-r*o,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return gy.copy(this).projectOnVector(e),this.sub(gy)}reflect(e){return this.sub(gy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(ri(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},gy=new x,lb=new Qr,gr=class{constructor(e=new x(1/0,1/0,1/0),t=new x(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Nr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Nr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Nr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Nr):Nr.fromBufferAttribute(s,o),Nr.applyMatrix4(e.matrixWorld),this.expandByPoint(Nr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),xp.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),xp.copy(i.boundingBox)),xp.applyMatrix4(e.matrixWorld),this.union(xp)}let r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Nr),Nr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Xu),Mp.subVectors(this.max,Xu),Tc.subVectors(e.a,Xu),Rc.subVectors(e.b,Xu),Pc.subVectors(e.c,Xu),Co.subVectors(Rc,Tc),yo.subVectors(Pc,Rc),ua.subVectors(Tc,Pc);let t=[0,-Co.z,Co.y,0,-yo.z,yo.y,0,-ua.z,ua.y,Co.z,0,-Co.x,yo.z,0,-yo.x,ua.z,0,-ua.x,-Co.y,Co.x,0,-yo.y,yo.x,0,-ua.y,ua.x,0];return!my(t,Tc,Rc,Pc,Mp)||(t=[1,0,0,0,1,0,0,0,1],!my(t,Tc,Rc,Pc,Mp))?!1:(wp.crossVectors(Co,yo),t=[wp.x,wp.y,wp.z],my(t,Tc,Rc,Pc,Mp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Nr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Nr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ts[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ts[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ts[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ts[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ts[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ts[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ts[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ts[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ts),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Ts=[new x,new x,new x,new x,new x,new x,new x,new x],Nr=new x,xp=new gr,Tc=new x,Rc=new x,Pc=new x,Co=new x,yo=new x,ua=new x,Xu=new x,Mp=new x,wp=new x,da=new x;function my(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){da.fromArray(n,s);let a=r.x*Math.abs(da.x)+r.y*Math.abs(da.y)+r.z*Math.abs(da.z),c=e.dot(da),l=t.dot(da),u=i.dot(da);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}var WV=new gr,$u=new x,_y=new x,Zi=class{constructor(e=new x,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):WV.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;$u.subVectors(e,this.center);let t=$u.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector($u,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(_y.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint($u.copy(e.center).add(_y)),this.expandByPoint($u.copy(e.center).sub(_y))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Rs=new x,Cy=new x,Bp=new x,Eo=new x,yy=new x,Dp=new x,Ey=new x,dl=class{constructor(e=new x,t=new x(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Rs)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Rs.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Rs.copy(this.origin).addScaledVector(this.direction,t),Rs.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Cy.copy(e).add(t).multiplyScalar(.5),Bp.copy(t).sub(e).normalize(),Eo.copy(this.origin).sub(Cy);let s=e.distanceTo(t)*.5,o=-this.direction.dot(Bp),a=Eo.dot(this.direction),c=-Eo.dot(Bp),l=Eo.lengthSq(),u=Math.abs(1-o*o),d,h,f,p;if(u>0)if(d=o*c-a,h=o*a-c,p=s*u,d>=0)if(h>=-p)if(h<=p){let m=1/u;d*=m,h*=m,f=d*(d+o*h+2*a)+h*(o*d+h+2*c)+l}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;else h<=-p?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l):h<=p?(d=0,h=Math.min(Math.max(-s,-c),s),f=h*(h+2*c)+l):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-c),s),f=-d*d+h*(h+2*c)+l);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(Cy).addScaledVector(Bp,h),f}intersectSphere(e,t){Rs.subVectors(e.center,this.origin);let i=Rs.dot(this.direction),r=Rs.dot(Rs)-i*i,s=e.radius*e.radius;if(r>s)return null;let o=Math.sqrt(s-r),a=i-o,c=i+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,c,l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Rs)!==null}intersectTriangle(e,t,i,r,s){yy.subVectors(t,e),Dp.subVectors(i,e),Ey.crossVectors(yy,Dp);let o=this.direction.dot(Ey),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Eo.subVectors(this.origin,e);let c=a*this.direction.dot(Dp.crossVectors(Eo,Dp));if(c<0)return null;let l=a*this.direction.dot(yy.cross(Eo));if(l<0||c+l>o)return null;let u=-a*Eo.dot(Ey);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},mt=class n{constructor(e,t,i,r,s,o,a,c,l,u,d,h,f,p,m,A){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,c,l,u,d,h,f,p,m,A)}set(e,t,i,r,s,o,a,c,l,u,d,h,f,p,m,A){let g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=c,g[2]=l,g[6]=u,g[10]=d,g[14]=h,g[3]=f,g[7]=p,g[11]=m,g[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Lc.setFromMatrixColumn(e,0).length(),s=1/Lc.setFromMatrixColumn(e,1).length(),o=1/Lc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){let h=o*u,f=o*d,p=a*u,m=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=f+p*l,t[5]=h-m*l,t[9]=-a*c,t[2]=m-h*l,t[6]=p+f*l,t[10]=o*c}else if(e.order==="YXZ"){let h=c*u,f=c*d,p=l*u,m=l*d;t[0]=h+m*a,t[4]=p*a-f,t[8]=o*l,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=m+h*a,t[10]=o*c}else if(e.order==="ZXY"){let h=c*u,f=c*d,p=l*u,m=l*d;t[0]=h-m*a,t[4]=-o*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=m-h*a,t[2]=-o*l,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){let h=o*u,f=o*d,p=a*u,m=a*d;t[0]=c*u,t[4]=p*l-f,t[8]=h*l+m,t[1]=c*d,t[5]=m*l+h,t[9]=f*l-p,t[2]=-l,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){let h=o*c,f=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=m-h*d,t[8]=p*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-l*u,t[6]=f*d+p,t[10]=h-m*d}else if(e.order==="XZY"){let h=o*c,f=o*l,p=a*c,m=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=h*d+m,t[5]=o*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jV,e,JV)}lookAt(e,t,i){let r=this.elements;return qi.subVectors(e,t),qi.lengthSq()===0&&(qi.z=1),qi.normalize(),vo.crossVectors(i,qi),vo.lengthSq()===0&&(Math.abs(i.z)===1?qi.x+=1e-4:qi.z+=1e-4,qi.normalize(),vo.crossVectors(i,qi)),vo.normalize(),bp.crossVectors(qi,vo),r[0]=vo.x,r[4]=bp.x,r[8]=qi.x,r[1]=vo.y,r[5]=bp.y,r[9]=qi.y,r[2]=vo.z,r[6]=bp.z,r[10]=qi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],m=i[6],A=i[10],g=i[14],E=i[3],_=i[7],C=i[11],T=i[15],M=r[0],w=r[4],D=r[8],I=r[12],y=r[1],b=r[5],Q=r[9],U=r[13],z=r[2],q=r[6],R=r[10],N=r[14],L=r[3],Y=r[7],te=r[11],fe=r[15];return s[0]=o*M+a*y+c*z+l*L,s[4]=o*w+a*b+c*q+l*Y,s[8]=o*D+a*Q+c*R+l*te,s[12]=o*I+a*U+c*N+l*fe,s[1]=u*M+d*y+h*z+f*L,s[5]=u*w+d*b+h*q+f*Y,s[9]=u*D+d*Q+h*R+f*te,s[13]=u*I+d*U+h*N+f*fe,s[2]=p*M+m*y+A*z+g*L,s[6]=p*w+m*b+A*q+g*Y,s[10]=p*D+m*Q+A*R+g*te,s[14]=p*I+m*U+A*N+g*fe,s[3]=E*M+_*y+C*z+T*L,s[7]=E*w+_*b+C*q+T*Y,s[11]=E*D+_*Q+C*R+T*te,s[15]=E*I+_*U+C*N+T*fe,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],f=e[14],p=e[3],m=e[7],A=e[11],g=e[15];return p*(+s*c*d-r*l*d-s*a*h+i*l*h+r*a*f-i*c*f)+m*(+t*c*f-t*l*h+s*o*h-r*o*f+r*l*u-s*c*u)+A*(+t*l*d-t*a*f-s*o*d+i*o*f+s*a*u-i*l*u)+g*(-r*a*u-t*c*d+t*a*h+r*o*d-i*o*h+i*c*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],A=e[14],g=e[15],E=d*A*l-m*h*l+m*c*f-a*A*f-d*c*g+a*h*g,_=p*h*l-u*A*l-p*c*f+o*A*f+u*c*g-o*h*g,C=u*m*l-p*d*l+p*a*f-o*m*f-u*a*g+o*d*g,T=p*d*c-u*m*c-p*a*h+o*m*h+u*a*A-o*d*A,M=t*E+i*_+r*C+s*T;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/M;return e[0]=E*w,e[1]=(m*h*s-d*A*s-m*r*f+i*A*f+d*r*g-i*h*g)*w,e[2]=(a*A*s-m*c*s+m*r*l-i*A*l-a*r*g+i*c*g)*w,e[3]=(d*c*s-a*h*s-d*r*l+i*h*l+a*r*f-i*c*f)*w,e[4]=_*w,e[5]=(u*A*s-p*h*s+p*r*f-t*A*f-u*r*g+t*h*g)*w,e[6]=(p*c*s-o*A*s-p*r*l+t*A*l+o*r*g-t*c*g)*w,e[7]=(o*h*s-u*c*s+u*r*l-t*h*l-o*r*f+t*c*f)*w,e[8]=C*w,e[9]=(p*d*s-u*m*s-p*i*f+t*m*f+u*i*g-t*d*g)*w,e[10]=(o*m*s-p*a*s+p*i*l-t*m*l-o*i*g+t*a*g)*w,e[11]=(u*a*s-o*d*s-u*i*l+t*d*l+o*i*f-t*a*f)*w,e[12]=T*w,e[13]=(u*m*r-p*d*r+p*i*h-t*m*h-u*i*A+t*d*A)*w,e[14]=(p*a*r-o*m*r-p*i*c+t*m*c+o*i*A-t*a*A)*w,e[15]=(o*d*r-u*a*r+u*i*c-t*d*c-o*i*h+t*a*h)*w,this}scale(e){let t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,c=e.z,l=s*o,u=s*a;return this.set(l*o+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*o,0,l*c-r*a,u*c+r*o,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,l=s+s,u=o+o,d=a+a,h=s*l,f=s*u,p=s*d,m=o*u,A=o*d,g=a*d,E=c*l,_=c*u,C=c*d,T=i.x,M=i.y,w=i.z;return r[0]=(1-(m+g))*T,r[1]=(f+C)*T,r[2]=(p-_)*T,r[3]=0,r[4]=(f-C)*M,r[5]=(1-(h+g))*M,r[6]=(A+E)*M,r[7]=0,r[8]=(p+_)*w,r[9]=(A-E)*w,r[10]=(1-(h+m))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,s=Lc.set(r[0],r[1],r[2]).length(),o=Lc.set(r[4],r[5],r[6]).length(),a=Lc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Fr.copy(this);let l=1/s,u=1/o,d=1/a;return Fr.elements[0]*=l,Fr.elements[1]*=l,Fr.elements[2]*=l,Fr.elements[4]*=u,Fr.elements[5]*=u,Fr.elements[6]*=u,Fr.elements[8]*=d,Fr.elements[9]*=d,Fr.elements[10]*=d,t.setFromRotationMatrix(Fr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Us){let c=this.elements,l=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),h=(i+r)/(i-r),f,p;if(a===Us)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===oA)f=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=l,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=u,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Us){let c=this.elements,l=1/(t-e),u=1/(i-r),d=1/(o-s),h=(t+e)*l,f=(i+r)*u,p,m;if(a===Us)p=(o+s)*d,m=-2*d;else if(a===oA)p=s*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-f,c[2]=0,c[6]=0,c[10]=m,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Lc=new x,Fr=new mt,jV=new x(0,0,0),JV=new x(1,1,1),vo=new x,bp=new x,qi=new x,ub=new mt,db=new Qr,hs=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let s=t.elements,o=s[0],a=s[4],c=s[8],l=s[1],u=s[5],d=s[9],h=s[2],f=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(ri(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ri(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(ri(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-ri(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(ri(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-ri(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return ub.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ub,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return db.setFromEuler(this),this.setFromQuaternion(db,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),lA=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},qV=0,hb=new x,Oc=new Qr,Ps=new mt,Tp=new x,Zu=new x,YV=new x,XV=new Qr,fb=new x(1,0,0),pb=new x(0,1,0),Ab=new x(0,0,1),gb={type:"added"},$V={type:"removed"},Nc={type:"childadded",child:null},vy={type:"childremoved",child:null},xt=(()=>{class n extends Bo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qV++}),this.uuid=Vr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new x,i=new hs,r=new Qr,s=new x(1,1,1);function o(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(o),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new mt},normalMatrix:{value:new gt}}),this.matrix=new mt,this.matrixWorld=new mt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new lA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Oc.setFromAxisAngle(t,i),this.quaternion.multiply(Oc),this}rotateOnWorldAxis(t,i){return Oc.setFromAxisAngle(t,i),this.quaternion.premultiply(Oc),this}rotateX(t){return this.rotateOnAxis(fb,t)}rotateY(t){return this.rotateOnAxis(pb,t)}rotateZ(t){return this.rotateOnAxis(Ab,t)}translateOnAxis(t,i){return hb.copy(t).applyQuaternion(this.quaternion),this.position.add(hb.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(fb,t)}translateY(t){return this.translateOnAxis(pb,t)}translateZ(t){return this.translateOnAxis(Ab,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ps.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Tp.copy(t):Tp.set(t,i,r);let s=this.parent;this.updateWorldMatrix(!0,!1),Zu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ps.lookAt(Zu,Tp,this.up):Ps.lookAt(Tp,Zu,this.up),this.quaternion.setFromRotationMatrix(Ps),s&&(Ps.extractRotation(s.matrixWorld),Oc.setFromRotationMatrix(Ps),this.quaternion.premultiply(Oc.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(gb),Nc.child=t,this.dispatchEvent(Nc),Nc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent($V),vy.child=t,this.dispatchEvent(vy),vy.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ps.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ps.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ps),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(gb),Nc.child=t,this.dispatchEvent(Nc),Nc.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zu,t,YV),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zu,XV,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(c=>({boxInitialized:c.boxInitialized,boxMin:c.box.min.toArray(),boxMax:c.box.max.toArray(),sphereInitialized:c.sphereInitialized,sphereRadius:c.sphere.radius,sphereCenter:c.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){let h=l[u];o(t.shapes,h)}else o(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(o(t.materials,this.material[l]));s.material=c}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];s.animations.push(o(t.animations,l))}}if(i){let c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),m=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),m.length>0&&(r.nodes=m)}return r.object=s,r;function a(c){let l=[];for(let u in c){let d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let s=t.children[r];this.add(s.clone())}return this}}return n.DEFAULT_UP=new x(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),kr=new x,Ls=new x,Iy=new x,Os=new x,Fc=new x,kc=new x,mb=new x,Sy=new x,xy=new x,My=new x,Jc=class n{constructor(e=new x,t=new x,i=new x){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),kr.subVectors(e,t),r.cross(kr);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){kr.subVectors(r,t),Ls.subVectors(i,t),Iy.subVectors(e,t);let o=kr.dot(kr),a=kr.dot(Ls),c=kr.dot(Iy),l=Ls.dot(Ls),u=Ls.dot(Iy),d=o*l-a*a;if(d===0)return s.set(0,0,0),null;let h=1/d,f=(l*c-a*u)*h,p=(o*u-a*c)*h;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Os)===null?!1:Os.x>=0&&Os.y>=0&&Os.x+Os.y<=1}static getInterpolation(e,t,i,r,s,o,a,c){return this.getBarycoord(e,t,i,r,Os)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Os.x),c.addScaledVector(o,Os.y),c.addScaledVector(a,Os.z),c)}static isFrontFacing(e,t,i,r){return kr.subVectors(i,t),Ls.subVectors(e,t),kr.cross(Ls).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return kr.subVectors(this.c,this.b),Ls.subVectors(this.a,this.b),kr.cross(Ls).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,s=this.c,o,a;Fc.subVectors(r,i),kc.subVectors(s,i),Sy.subVectors(e,i);let c=Fc.dot(Sy),l=kc.dot(Sy);if(c<=0&&l<=0)return t.copy(i);xy.subVectors(e,r);let u=Fc.dot(xy),d=kc.dot(xy);if(u>=0&&d<=u)return t.copy(r);let h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return o=c/(c-u),t.copy(i).addScaledVector(Fc,o);My.subVectors(e,s);let f=Fc.dot(My),p=kc.dot(My);if(p>=0&&f<=p)return t.copy(s);let m=f*l-c*p;if(m<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(kc,a);let A=u*p-f*d;if(A<=0&&d-u>=0&&f-p>=0)return mb.subVectors(s,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(mb,a);let g=1/(A+m+h);return o=m*g,a=h*g,t.copy(i).addScaledVector(Fc,o).addScaledVector(kc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},wT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Io={h:0,s:0,l:0},Rp={h:0,s:0,l:0};function wy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var be=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,wt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=wt.workingColorSpace){return this.r=e,this.g=t,this.b=i,wt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=wt.workingColorSpace){if(e=JE(e,1),t=ri(t,0,1),i=ri(i,0,1),t===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=wy(o,s,e+1/3),this.g=wy(o,s,e),this.b=wy(o,s,e-1/3)}return wt.toWorkingColorSpace(this,r),this}setStyle(e,t=Qt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s,o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Qt){let i=wT[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=nl(e.r),this.g=nl(e.g),this.b=nl(e.b),this}copyLinearToSRGB(e){return this.r=py(e.r),this.g=py(e.g),this.b=py(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qt){return wt.fromWorkingColorSpace(ci.copy(this),e),Math.round(ri(ci.r*255,0,255))*65536+Math.round(ri(ci.g*255,0,255))*256+Math.round(ri(ci.b*255,0,255))}getHexString(e=Qt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=wt.workingColorSpace){wt.fromWorkingColorSpace(ci.copy(this),t);let i=ci.r,r=ci.g,s=ci.b,o=Math.max(i,r,s),a=Math.min(i,r,s),c,l,u=(a+o)/2;if(a===o)c=0,l=0;else{let d=o-a;switch(l=u<=.5?d/(o+a):d/(2-o-a),o){case i:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-i)/d+2;break;case s:c=(i-r)/d+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=wt.workingColorSpace){return wt.fromWorkingColorSpace(ci.copy(this),t),e.r=ci.r,e.g=ci.g,e.b=ci.b,e}getStyle(e=Qt){wt.fromWorkingColorSpace(ci.copy(this),e);let t=ci.r,i=ci.g,r=ci.b;return e!==Qt?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Io),this.setHSL(Io.h+e,Io.s+t,Io.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Io),e.getHSL(Rp);let i=cd(Io.h,Rp.h,t),r=cd(Io.s,Rp.s,t),s=cd(Io.l,Rp.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},ci=new be;be.NAMES=wT;var ZV=0,Fi=class extends Bo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ZV++}),this.uuid=Vr(),this.name="",this.type="Material",this.blending=Yc,this.side=us,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Vy,this.blendDst=Qy,this.blendEquation=ma,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new be(0,0,0),this.blendAlpha=0,this.depthFunc=nA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ib,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Dc,this.stencilZFail=Dc,this.stencilZPass=Dc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Yc&&(i.blending=this.blending),this.side!==us&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Vy&&(i.blendSrc=this.blendSrc),this.blendDst!==Qy&&(i.blendDst=this.blendDst),this.blendEquation!==ma&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==nA&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ib&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Dc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Dc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Dc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){let o=[];for(let a in s){let c=s[a];delete c.metadata,o.push(c)}return o}if(t){let s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}},mr=class extends Fi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hs,this.combine=UE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},ks=eQ();function eQ(){let n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){let l=c-127;l<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):l<-14?(i[c]=1024>>-l-14,i[c|256]=1024>>-l-14|32768,r[c]=-l-1,r[c|256]=-l-1):l<=15?(i[c]=l+15<<10,i[c|256]=l+15<<10|32768,r[c]=13,r[c|256]=13):l<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}let s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let l=c<<13,u=0;for(;!(l&8388608);)l<<=1,u-=8388608;l&=-8388609,u+=947912704,s[c]=l|u}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function tQ(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=ri(n,-65504,65504),ks.floatView[0]=n;let e=ks.uint32View[0],t=e>>23&511;return ks.baseTable[t]+((e&8388607)>>ks.shiftTable[t])}function nQ(n){let e=n>>10;return ks.uint32View[0]=ks.mantissaTable[ks.offsetTable[e]+(n&1023)]+ks.exponentTable[e],ks.floatView[0]}var Rd={toHalfFloat:tQ,fromHalfFloat:nQ},Rn=new x,Pp=new we,yn=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=dE,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Pn,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return tl("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Pp.fromBufferAttribute(this,t),Pp.applyMatrix3(e),this.setXY(t,Pp.x,Pp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Rn.fromBufferAttribute(this,t),Rn.applyMatrix3(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Rn.fromBufferAttribute(this,t),Rn.applyMatrix4(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Rn.fromBufferAttribute(this,t),Rn.applyNormalMatrix(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Rn.fromBufferAttribute(this,t),Rn.transformDirection(e),this.setXYZ(t,Rn.x,Rn.y,Rn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Hr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Vt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Hr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Hr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Hr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Hr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array),s=Vt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==dE&&(e.usage=this.usage),e}};var uA=class extends yn{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var dA=class extends yn{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var Ni=class extends yn{constructor(e,t,i){super(new Float32Array(e),t,i)}},iQ=0,pr=new mt,By=new xt,Uc=new x,Yi=new gr,ed=new gr,qn=new x,Ci=class n extends Bo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:iQ++}),this.uuid=Vr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(MT(e)?dA:uA)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new gt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return pr.makeRotationFromQuaternion(e),this.applyMatrix4(pr),this}rotateX(e){return pr.makeRotationX(e),this.applyMatrix4(pr),this}rotateY(e){return pr.makeRotationY(e),this.applyMatrix4(pr),this}rotateZ(e){return pr.makeRotationZ(e),this.applyMatrix4(pr),this}translate(e,t,i){return pr.makeTranslation(e,t,i),this.applyMatrix4(pr),this}scale(e,t,i){return pr.makeScale(e,t,i),this.applyMatrix4(pr),this}lookAt(e){return By.lookAt(e),By.updateMatrix(),this.applyMatrix4(By.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Uc).negate(),this.translate(Uc.x,Uc.y,Uc.z),this}setFromPoints(e){let t=[];for(let i=0,r=e.length;i<r;i++){let s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ni(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new gr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new x(-1/0,-1/0,-1/0),new x(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let s=t[i];Yi.setFromBufferAttribute(s),this.morphTargetsRelative?(qn.addVectors(this.boundingBox.min,Yi.min),this.boundingBox.expandByPoint(qn),qn.addVectors(this.boundingBox.max,Yi.max),this.boundingBox.expandByPoint(qn)):(this.boundingBox.expandByPoint(Yi.min),this.boundingBox.expandByPoint(Yi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zi);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new x,1/0);return}if(e){let i=this.boundingSphere.center;if(Yi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){let a=t[s];ed.setFromBufferAttribute(a),this.morphTargetsRelative?(qn.addVectors(Yi.min,ed.min),Yi.expandByPoint(qn),qn.addVectors(Yi.max,ed.max),Yi.expandByPoint(qn)):(Yi.expandByPoint(ed.min),Yi.expandByPoint(ed.max))}Yi.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)qn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(qn));if(t)for(let s=0,o=t.length;s<o;s++){let a=t[s],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)qn.fromBufferAttribute(a,l),c&&(Uc.fromBufferAttribute(e,l),qn.add(Uc)),r=Math.max(r,i.distanceToSquared(qn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new yn(new Float32Array(4*i.count),4));let o=this.getAttribute("tangent"),a=[],c=[];for(let D=0;D<i.count;D++)a[D]=new x,c[D]=new x;let l=new x,u=new x,d=new x,h=new we,f=new we,p=new we,m=new x,A=new x;function g(D,I,y){l.fromBufferAttribute(i,D),u.fromBufferAttribute(i,I),d.fromBufferAttribute(i,y),h.fromBufferAttribute(s,D),f.fromBufferAttribute(s,I),p.fromBufferAttribute(s,y),u.sub(l),d.sub(l),f.sub(h),p.sub(h);let b=1/(f.x*p.y-p.x*f.y);isFinite(b)&&(m.copy(u).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(b),A.copy(d).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(b),a[D].add(m),a[I].add(m),a[y].add(m),c[D].add(A),c[I].add(A),c[y].add(A))}let E=this.groups;E.length===0&&(E=[{start:0,count:e.count}]);for(let D=0,I=E.length;D<I;++D){let y=E[D],b=y.start,Q=y.count;for(let U=b,z=b+Q;U<z;U+=3)g(e.getX(U+0),e.getX(U+1),e.getX(U+2))}let _=new x,C=new x,T=new x,M=new x;function w(D){T.fromBufferAttribute(r,D),M.copy(T);let I=a[D];_.copy(I),_.sub(T.multiplyScalar(T.dot(I))).normalize(),C.crossVectors(M,I);let b=C.dot(c[D])<0?-1:1;o.setXYZW(D,_.x,_.y,_.z,b)}for(let D=0,I=E.length;D<I;++D){let y=E[D],b=y.start,Q=y.count;for(let U=b,z=b+Q;U<z;U+=3)w(e.getX(U+0)),w(e.getX(U+1)),w(e.getX(U+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new yn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);let r=new x,s=new x,o=new x,a=new x,c=new x,l=new x,u=new x,d=new x;if(e)for(let h=0,f=e.count;h<f;h+=3){let p=e.getX(h+0),m=e.getX(h+1),A=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,A),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,m),l.fromBufferAttribute(i,A),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(m,c.x,c.y,c.z),i.setXYZ(A,l.x,l.y,l.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)qn.fromBufferAttribute(e,t),qn.normalize(),e.setXYZ(t,qn.x,qn.y,qn.z)}toNonIndexed(){function e(a,c){let l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u),f=0,p=0;for(let m=0,A=c.length;m<A;m++){a.isInterleavedBufferAttribute?f=c[m]*a.data.stride+a.offset:f=c[m]*u;for(let g=0;g<u;g++)h[p++]=l[f++]}return new yn(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let c=r[a],l=e(c,i);t.setAttribute(a,l)}let s=this.morphAttributes;for(let a in s){let c=[],l=s[a];for(let u=0,d=l.length;u<d;u++){let h=l[u],f=e(h,i);c.push(f)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let a=0,c=o.length;a<c;a++){let l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let c in i){let l=i[c];e.data.attributes[c]=l.toJSON(e.data)}let r={},s=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++){let f=l[d];u.push(f.toJSON(e.data))}u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let l in r){let u=r[l];this.setAttribute(l,u.clone(t))}let s=e.morphAttributes;for(let l in s){let u=[],d=s[l];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let l=0,u=o.length;l<u;l++){let d=o[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},_b=new mt,ha=new dl,Lp=new Zi,Cb=new x,Gc=new x,Hc=new x,Vc=new x,Dy=new x,Op=new x,Np=new we,Fp=new we,kp=new we,yb=new x,Eb=new x,vb=new x,Up=new x,Gp=new x,$t=class extends xt{constructor(e=new Ci,t=new mr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(s&&a){Op.set(0,0,0);for(let c=0,l=s.length;c<l;c++){let u=a[c],d=s[c];u!==0&&(Dy.fromBufferAttribute(d,e),o?Op.addScaledVector(Dy,u):Op.addScaledVector(Dy.sub(t),u))}t.add(Op)}return t}raycast(e,t){let i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Lp.copy(i.boundingSphere),Lp.applyMatrix4(s),ha.copy(e.ray).recast(e.near),!(Lp.containsPoint(ha.origin)===!1&&(ha.intersectSphere(Lp,Cb)===null||ha.origin.distanceToSquared(Cb)>(e.far-e.near)**2))&&(_b.copy(s).invert(),ha.copy(e.ray).applyMatrix4(_b),!(i.boundingBox!==null&&ha.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ha)))}_computeIntersections(e,t,i){let r,s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,m=h.length;p<m;p++){let A=h[p],g=o[A.materialIndex],E=Math.max(A.start,f.start),_=Math.min(a.count,Math.min(A.start+A.count,f.start+f.count));for(let C=E,T=_;C<T;C+=3){let M=a.getX(C),w=a.getX(C+1),D=a.getX(C+2);r=Hp(this,g,e,i,l,u,d,M,w,D),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=A.materialIndex,t.push(r))}}else{let p=Math.max(0,f.start),m=Math.min(a.count,f.start+f.count);for(let A=p,g=m;A<g;A+=3){let E=a.getX(A),_=a.getX(A+1),C=a.getX(A+2);r=Hp(this,o,e,i,l,u,d,E,_,C),r&&(r.faceIndex=Math.floor(A/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let p=0,m=h.length;p<m;p++){let A=h[p],g=o[A.materialIndex],E=Math.max(A.start,f.start),_=Math.min(c.count,Math.min(A.start+A.count,f.start+f.count));for(let C=E,T=_;C<T;C+=3){let M=C,w=C+1,D=C+2;r=Hp(this,g,e,i,l,u,d,M,w,D),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=A.materialIndex,t.push(r))}}else{let p=Math.max(0,f.start),m=Math.min(c.count,f.start+f.count);for(let A=p,g=m;A<g;A+=3){let E=A,_=A+1,C=A+2;r=Hp(this,o,e,i,l,u,d,E,_,C),r&&(r.faceIndex=Math.floor(A/3),t.push(r))}}}};function rQ(n,e,t,i,r,s,o,a){let c;if(e.side===Oi?c=i.intersectTriangle(o,s,r,!0,a):c=i.intersectTriangle(r,s,o,e.side===us,a),c===null)return null;Gp.copy(a),Gp.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(Gp);return l<t.near||l>t.far?null:{distance:l,point:Gp.clone(),object:n}}function Hp(n,e,t,i,r,s,o,a,c,l){n.getVertexPosition(a,Gc),n.getVertexPosition(c,Hc),n.getVertexPosition(l,Vc);let u=rQ(n,e,t,i,Gc,Hc,Vc,Up);if(u){r&&(Np.fromBufferAttribute(r,a),Fp.fromBufferAttribute(r,c),kp.fromBufferAttribute(r,l),u.uv=Jc.getInterpolation(Up,Gc,Hc,Vc,Np,Fp,kp,new we)),s&&(Np.fromBufferAttribute(s,a),Fp.fromBufferAttribute(s,c),kp.fromBufferAttribute(s,l),u.uv1=Jc.getInterpolation(Up,Gc,Hc,Vc,Np,Fp,kp,new we)),o&&(yb.fromBufferAttribute(o,a),Eb.fromBufferAttribute(o,c),vb.fromBufferAttribute(o,l),u.normal=Jc.getInterpolation(Up,Gc,Hc,Vc,yb,Eb,vb,new x),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));let d={a,b:c,c:l,normal:new x,materialIndex:0};Jc.getNormal(Gc,Hc,Vc,d.normal),u.face=d}return u}var va=class n extends Ci{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};let a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);let c=[],l=[],u=[],d=[],h=0,f=0;p("z","y","x",-1,-1,i,t,e,o,s,0),p("z","y","x",1,-1,i,t,-e,o,s,1),p("x","z","y",1,1,e,i,t,r,o,2),p("x","z","y",1,-1,e,i,-t,r,o,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Ni(l,3)),this.setAttribute("normal",new Ni(u,3)),this.setAttribute("uv",new Ni(d,2));function p(m,A,g,E,_,C,T,M,w,D,I){let y=C/w,b=T/D,Q=C/2,U=T/2,z=M/2,q=w+1,R=D+1,N=0,L=0,Y=new x;for(let te=0;te<R;te++){let fe=te*b-U;for(let ye=0;ye<q;ye++){let Ge=ye*y-Q;Y[m]=Ge*E,Y[A]=fe*_,Y[g]=z,l.push(Y.x,Y.y,Y.z),Y[m]=0,Y[A]=0,Y[g]=M>0?1:-1,u.push(Y.x,Y.y,Y.z),d.push(ye/w),d.push(1-te/D),N+=1}}for(let te=0;te<D;te++)for(let fe=0;fe<w;fe++){let ye=h+fe+q*te,Ge=h+fe+q*(te+1),j=h+(fe+1)+q*(te+1),se=h+(fe+1)+q*te;c.push(ye,Ge,se),c.push(Ge,j,se),L+=6}a.addGroup(f,L,I),f+=L,h+=N}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function hl(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function _i(n){let e={};for(let t=0;t<n.length;t++){let i=hl(n[t]);for(let r in i)e[r]=i[r]}return e}function sQ(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function BT(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:wt.workingColorSpace}var oQ={clone:hl,merge:_i},aQ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cQ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,fs=class extends Fi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=aQ,this.fragmentShader=cQ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hl(e.uniforms),this.uniformsGroups=sQ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Cd=class extends xt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new mt,this.projectionMatrix=new mt,this.projectionMatrixInverse=new mt,this.coordinateSystem=Us}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},So=new x,Ib=new we,Sb=new we,Hn=class extends Cd{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=ul*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(ad*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ul*2*Math.atan(Math.tan(ad*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){So.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(So.x,So.y).multiplyScalar(-e/So.z),So.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(So.x,So.y).multiplyScalar(-e/So.z)}getViewSize(e,t){return this.getViewBounds(e,Ib,Sb),t.subVectors(Sb,Ib)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(ad*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){let c=o.fullWidth,l=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*i/l,r*=o.width/c,i*=o.height/l}let a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Qc=-90,zc=1,pE=class extends xt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Hn(Qc,zc,e,t);r.layers=this.layers,this.add(r);let s=new Hn(Qc,zc,e,t);s.layers=this.layers,this.add(s);let o=new Hn(Qc,zc,e,t);o.layers=this.layers,this.add(o);let a=new Hn(Qc,zc,e,t);a.layers=this.layers,this.add(a);let c=new Hn(Qc,zc,e,t);c.layers=this.layers,this.add(c);let l=new Hn(Qc,zc,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,c]=t;for(let l of t)this.remove(l);if(e===Us)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===oA)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let l of t)this.add(l),l.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[s,o,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;let m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}},hA=class extends fn{constructor(e,t,i,r,s,o,a,c,l,u){e=e!==void 0?e:[],t=t!==void 0?t:Ca,super(e,t,i,r,s,o,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},AE=class extends Gs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new hA(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:hn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new va(5,5,5),s=new fs({name:"CubemapFromEquirect",uniforms:hl(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Oi,blending:Mo});s.uniforms.tEquirect.value=t;let o=new $t(r,s),a=t.minFilter;return t.minFilter===$i&&(t.minFilter=hn),new pE(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){let s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}},by=new x,lQ=new x,uQ=new gt,Fs=class{constructor(e=new x(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=by.subVectors(i,t).cross(lQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(by),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||uQ.getNormalMatrix(e),r=this.coplanarPoint(by).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},fa=new Zi,Vp=new x,yd=class{constructor(e=new Fs,t=new Fs,i=new Fs,r=new Fs,s=new Fs,o=new Fs){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Us){let i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],c=r[3],l=r[4],u=r[5],d=r[6],h=r[7],f=r[8],p=r[9],m=r[10],A=r[11],g=r[12],E=r[13],_=r[14],C=r[15];if(i[0].setComponents(c-s,h-l,A-f,C-g).normalize(),i[1].setComponents(c+s,h+l,A+f,C+g).normalize(),i[2].setComponents(c+o,h+u,A+p,C+E).normalize(),i[3].setComponents(c-o,h-u,A-p,C-E).normalize(),i[4].setComponents(c-a,h-d,A-m,C-_).normalize(),t===Us)i[5].setComponents(c+a,h+d,A+m,C+_).normalize();else if(t===oA)i[5].setComponents(a,d,m,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),fa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),fa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(fa)}intersectsSprite(e){return fa.center.set(0,0,0),fa.radius=.7071067811865476,fa.applyMatrix4(e.matrixWorld),this.intersectsSphere(fa)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(Vp.x=r.normal.x>0?e.max.x:e.min.x,Vp.y=r.normal.y>0?e.max.y:e.min.y,Vp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Vp)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function DT(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function dQ(n){let e=new WeakMap;function t(a,c){let l=a.array,u=a.usage,d=l.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,l,u),a.onUploadCallback();let f;if(l instanceof Float32Array)f=n.FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=n.SHORT;else if(l instanceof Uint32Array)f=n.UNSIGNED_INT;else if(l instanceof Int32Array)f=n.INT;else if(l instanceof Int8Array)f=n.BYTE;else if(l instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,c,l){let u=c.array,d=c._updateRange,h=c.updateRanges;if(n.bindBuffer(l,a),d.count===-1&&h.length===0&&n.bufferSubData(l,0,u),h.length!==0){for(let f=0,p=h.length;f<p;f++){let m=h[f];n.bufferSubData(l,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}c.clearUpdateRanges()}d.count!==-1&&(n.bufferSubData(l,d.offset*u.BYTES_PER_ELEMENT,u,d.offset,d.count),d.count=-1),c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function o(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let l=e.get(a);if(l===void 0)e.set(a,t(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(l.buffer,a,c),l.version=a.version}}return{get:r,remove:s,update:o}}var ps=class n extends Ci{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let s=e/2,o=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,h=t/c,f=[],p=[],m=[],A=[];for(let g=0;g<u;g++){let E=g*h-o;for(let _=0;_<l;_++){let C=_*d-s;p.push(C,-E,0),m.push(0,0,1),A.push(_/a),A.push(1-g/c)}}for(let g=0;g<c;g++)for(let E=0;E<a;E++){let _=E+l*g,C=E+l*(g+1),T=E+1+l*(g+1),M=E+1+l*g;f.push(_,C,M),f.push(C,T,M)}this.setIndex(f),this.setAttribute("position",new Ni(p,3)),this.setAttribute("normal",new Ni(m,3)),this.setAttribute("uv",new Ni(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}},hQ=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,fQ=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,pQ=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,AQ=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gQ=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,mQ=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_Q=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,CQ=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,yQ=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,EQ=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,vQ=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,IQ=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,SQ=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xQ=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,MQ=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,wQ=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,BQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,DQ=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,bQ=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,TQ=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,RQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,PQ=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,LQ=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,OQ=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,NQ=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,FQ=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,kQ=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,UQ=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,GQ=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,HQ=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,VQ="gl_FragColor = linearToOutputTexel( gl_FragColor );",QQ=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,zQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,KQ=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,WQ=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,jQ=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,JQ=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,qQ=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,YQ=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,XQ=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,$Q=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ZQ=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,e8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,t8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,n8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,i8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,r8=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,s8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,o8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,a8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,c8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,l8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,u8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,d8=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,h8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,f8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,p8=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,A8=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,g8=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,m8=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,_8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,C8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,y8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,E8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,v8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,I8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,S8=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,x8=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,M8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,w8=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,B8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,D8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,b8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,T8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,R8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,P8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,L8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,O8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,N8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,F8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,k8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,U8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,G8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,H8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,V8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Q8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,z8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,K8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,W8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,j8=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,J8=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,q8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Y8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,X8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,$8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Z8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,e4=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,t4=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,n4=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,i4=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,r4=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,s4=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,o4=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,a4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,c4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,l4=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,u4=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,d4=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,h4=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,f4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,p4=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,A4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,g4=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,m4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,_4=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,C4=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,y4=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,E4=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,v4=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,I4=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,S4=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,x4=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,M4=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,w4=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,B4=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,D4=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,b4=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,T4=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,R4=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,P4=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,L4=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,O4=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,N4=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U4=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,G4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,H4=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,V4=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Q4=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,z4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,At={alphahash_fragment:hQ,alphahash_pars_fragment:fQ,alphamap_fragment:pQ,alphamap_pars_fragment:AQ,alphatest_fragment:gQ,alphatest_pars_fragment:mQ,aomap_fragment:_Q,aomap_pars_fragment:CQ,batching_pars_vertex:yQ,batching_vertex:EQ,begin_vertex:vQ,beginnormal_vertex:IQ,bsdfs:SQ,iridescence_fragment:xQ,bumpmap_pars_fragment:MQ,clipping_planes_fragment:wQ,clipping_planes_pars_fragment:BQ,clipping_planes_pars_vertex:DQ,clipping_planes_vertex:bQ,color_fragment:TQ,color_pars_fragment:RQ,color_pars_vertex:PQ,color_vertex:LQ,common:OQ,cube_uv_reflection_fragment:NQ,defaultnormal_vertex:FQ,displacementmap_pars_vertex:kQ,displacementmap_vertex:UQ,emissivemap_fragment:GQ,emissivemap_pars_fragment:HQ,colorspace_fragment:VQ,colorspace_pars_fragment:QQ,envmap_fragment:zQ,envmap_common_pars_fragment:KQ,envmap_pars_fragment:WQ,envmap_pars_vertex:jQ,envmap_physical_pars_fragment:r8,envmap_vertex:JQ,fog_vertex:qQ,fog_pars_vertex:YQ,fog_fragment:XQ,fog_pars_fragment:$Q,gradientmap_pars_fragment:ZQ,lightmap_pars_fragment:e8,lights_lambert_fragment:t8,lights_lambert_pars_fragment:n8,lights_pars_begin:i8,lights_toon_fragment:s8,lights_toon_pars_fragment:o8,lights_phong_fragment:a8,lights_phong_pars_fragment:c8,lights_physical_fragment:l8,lights_physical_pars_fragment:u8,lights_fragment_begin:d8,lights_fragment_maps:h8,lights_fragment_end:f8,logdepthbuf_fragment:p8,logdepthbuf_pars_fragment:A8,logdepthbuf_pars_vertex:g8,logdepthbuf_vertex:m8,map_fragment:_8,map_pars_fragment:C8,map_particle_fragment:y8,map_particle_pars_fragment:E8,metalnessmap_fragment:v8,metalnessmap_pars_fragment:I8,morphinstance_vertex:S8,morphcolor_vertex:x8,morphnormal_vertex:M8,morphtarget_pars_vertex:w8,morphtarget_vertex:B8,normal_fragment_begin:D8,normal_fragment_maps:b8,normal_pars_fragment:T8,normal_pars_vertex:R8,normal_vertex:P8,normalmap_pars_fragment:L8,clearcoat_normal_fragment_begin:O8,clearcoat_normal_fragment_maps:N8,clearcoat_pars_fragment:F8,iridescence_pars_fragment:k8,opaque_fragment:U8,packing:G8,premultiplied_alpha_fragment:H8,project_vertex:V8,dithering_fragment:Q8,dithering_pars_fragment:z8,roughnessmap_fragment:K8,roughnessmap_pars_fragment:W8,shadowmap_pars_fragment:j8,shadowmap_pars_vertex:J8,shadowmap_vertex:q8,shadowmask_pars_fragment:Y8,skinbase_vertex:X8,skinning_pars_vertex:$8,skinning_vertex:Z8,skinnormal_vertex:e4,specularmap_fragment:t4,specularmap_pars_fragment:n4,tonemapping_fragment:i4,tonemapping_pars_fragment:r4,transmission_fragment:s4,transmission_pars_fragment:o4,uv_pars_fragment:a4,uv_pars_vertex:c4,uv_vertex:l4,worldpos_vertex:u4,background_vert:d4,background_frag:h4,backgroundCube_vert:f4,backgroundCube_frag:p4,cube_vert:A4,cube_frag:g4,depth_vert:m4,depth_frag:_4,distanceRGBA_vert:C4,distanceRGBA_frag:y4,equirect_vert:E4,equirect_frag:v4,linedashed_vert:I4,linedashed_frag:S4,meshbasic_vert:x4,meshbasic_frag:M4,meshlambert_vert:w4,meshlambert_frag:B4,meshmatcap_vert:D4,meshmatcap_frag:b4,meshnormal_vert:T4,meshnormal_frag:R4,meshphong_vert:P4,meshphong_frag:L4,meshphysical_vert:O4,meshphysical_frag:N4,meshtoon_vert:F4,meshtoon_frag:k4,points_vert:U4,points_frag:G4,shadow_vert:H4,shadow_frag:V4,sprite_vert:Q4,sprite_frag:z4},pe={common:{diffuse:{value:new be(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new gt}},envmap:{envMap:{value:null},envMapRotation:{value:new gt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new gt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new gt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new gt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new gt},normalScale:{value:new we(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new gt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new gt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new gt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new gt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new be(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new be(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0},uvTransform:{value:new gt}},sprite:{diffuse:{value:new be(16777215)},opacity:{value:1},center:{value:new we(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new gt},alphaMap:{value:null},alphaMapTransform:{value:new gt},alphaTest:{value:0}}},ls={basic:{uniforms:_i([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.fog]),vertexShader:At.meshbasic_vert,fragmentShader:At.meshbasic_frag},lambert:{uniforms:_i([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,pe.lights,{emissive:{value:new be(0)}}]),vertexShader:At.meshlambert_vert,fragmentShader:At.meshlambert_frag},phong:{uniforms:_i([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,pe.lights,{emissive:{value:new be(0)},specular:{value:new be(1118481)},shininess:{value:30}}]),vertexShader:At.meshphong_vert,fragmentShader:At.meshphong_frag},standard:{uniforms:_i([pe.common,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.roughnessmap,pe.metalnessmap,pe.fog,pe.lights,{emissive:{value:new be(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag},toon:{uniforms:_i([pe.common,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.gradientmap,pe.fog,pe.lights,{emissive:{value:new be(0)}}]),vertexShader:At.meshtoon_vert,fragmentShader:At.meshtoon_frag},matcap:{uniforms:_i([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,{matcap:{value:null}}]),vertexShader:At.meshmatcap_vert,fragmentShader:At.meshmatcap_frag},points:{uniforms:_i([pe.points,pe.fog]),vertexShader:At.points_vert,fragmentShader:At.points_frag},dashed:{uniforms:_i([pe.common,pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:At.linedashed_vert,fragmentShader:At.linedashed_frag},depth:{uniforms:_i([pe.common,pe.displacementmap]),vertexShader:At.depth_vert,fragmentShader:At.depth_frag},normal:{uniforms:_i([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,{opacity:{value:1}}]),vertexShader:At.meshnormal_vert,fragmentShader:At.meshnormal_frag},sprite:{uniforms:_i([pe.sprite,pe.fog]),vertexShader:At.sprite_vert,fragmentShader:At.sprite_frag},background:{uniforms:{uvTransform:{value:new gt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:At.background_vert,fragmentShader:At.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new gt}},vertexShader:At.backgroundCube_vert,fragmentShader:At.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:At.cube_vert,fragmentShader:At.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:At.equirect_vert,fragmentShader:At.equirect_frag},distanceRGBA:{uniforms:_i([pe.common,pe.displacementmap,{referencePosition:{value:new x},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:At.distanceRGBA_vert,fragmentShader:At.distanceRGBA_frag},shadow:{uniforms:_i([pe.lights,pe.fog,{color:{value:new be(0)},opacity:{value:1}}]),vertexShader:At.shadow_vert,fragmentShader:At.shadow_frag}};ls.physical={uniforms:_i([ls.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new gt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new gt},clearcoatNormalScale:{value:new we(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new gt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new gt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new gt},sheen:{value:0},sheenColor:{value:new be(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new gt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new gt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new gt},transmissionSamplerSize:{value:new we},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new gt},attenuationDistance:{value:0},attenuationColor:{value:new be(0)},specularColor:{value:new be(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new gt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new gt},anisotropyVector:{value:new we},anisotropyMap:{value:null},anisotropyMapTransform:{value:new gt}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag};var Qp={r:0,b:0,g:0},pa=new hs,K4=new mt;function W4(n,e,t,i,r,s,o){let a=new be(0),c=s===!0?0:1,l,u,d=null,h=0,f=null;function p(E){let _=E.isScene===!0?E.background:null;return _&&_.isTexture&&(_=(E.backgroundBlurriness>0?t:e).get(_)),_}function m(E){let _=!1,C=p(E);C===null?g(a,c):C&&C.isColor&&(g(C,1),_=!0);let T=n.xr.getEnvironmentBlendMode();T==="additive"?i.buffers.color.setClear(0,0,0,1,o):T==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||_)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function A(E,_){let C=p(_);C&&(C.isCubeTexture||C.mapping===RA)?(u===void 0&&(u=new $t(new va(1,1,1),new fs({name:"BackgroundCubeMaterial",uniforms:hl(ls.backgroundCube.uniforms),vertexShader:ls.backgroundCube.vertexShader,fragmentShader:ls.backgroundCube.fragmentShader,side:Oi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(T,M,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),pa.copy(_.backgroundRotation),pa.x*=-1,pa.y*=-1,pa.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(pa.y*=-1,pa.z*=-1),u.material.uniforms.envMap.value=C,u.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(K4.makeRotationFromEuler(pa)),u.material.toneMapped=wt.getTransfer(C.colorSpace)!==nn,(d!==C||h!==C.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=C,h=C.version,f=n.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null)):C&&C.isTexture&&(l===void 0&&(l=new $t(new ps(2,2),new fs({name:"BackgroundMaterial",uniforms:hl(ls.background.uniforms),vertexShader:ls.background.vertexShader,fragmentShader:ls.background.fragmentShader,side:us,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=C,l.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,l.material.toneMapped=wt.getTransfer(C.colorSpace)!==nn,C.matrixAutoUpdate===!0&&C.updateMatrix(),l.material.uniforms.uvTransform.value.copy(C.matrix),(d!==C||h!==C.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,d=C,h=C.version,f=n.toneMapping),l.layers.enableAll(),E.unshift(l,l.geometry,l.material,0,0,null))}function g(E,_){E.getRGB(Qp,BT(n)),i.buffers.color.setClear(Qp.r,Qp.g,Qp.b,_,o)}return{getClearColor:function(){return a},setClearColor:function(E,_=1){a.set(E),c=_,g(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(E){c=E,g(a,c)},render:m,addToRenderList:A}}function j4(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null),s=r,o=!1;function a(y,b,Q,U,z){let q=!1,R=d(U,Q,b);s!==R&&(s=R,l(s.object)),q=f(y,U,Q,z),q&&p(y,U,Q,z),z!==null&&e.update(z,n.ELEMENT_ARRAY_BUFFER),(q||o)&&(o=!1,C(y,b,Q,U),z!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(z).buffer))}function c(){return n.createVertexArray()}function l(y){return n.bindVertexArray(y)}function u(y){return n.deleteVertexArray(y)}function d(y,b,Q){let U=Q.wireframe===!0,z=i[y.id];z===void 0&&(z={},i[y.id]=z);let q=z[b.id];q===void 0&&(q={},z[b.id]=q);let R=q[U];return R===void 0&&(R=h(c()),q[U]=R),R}function h(y){let b=[],Q=[],U=[];for(let z=0;z<t;z++)b[z]=0,Q[z]=0,U[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:b,enabledAttributes:Q,attributeDivisors:U,object:y,attributes:{},index:null}}function f(y,b,Q,U){let z=s.attributes,q=b.attributes,R=0,N=Q.getAttributes();for(let L in N)if(N[L].location>=0){let te=z[L],fe=q[L];if(fe===void 0&&(L==="instanceMatrix"&&y.instanceMatrix&&(fe=y.instanceMatrix),L==="instanceColor"&&y.instanceColor&&(fe=y.instanceColor)),te===void 0||te.attribute!==fe||fe&&te.data!==fe.data)return!0;R++}return s.attributesNum!==R||s.index!==U}function p(y,b,Q,U){let z={},q=b.attributes,R=0,N=Q.getAttributes();for(let L in N)if(N[L].location>=0){let te=q[L];te===void 0&&(L==="instanceMatrix"&&y.instanceMatrix&&(te=y.instanceMatrix),L==="instanceColor"&&y.instanceColor&&(te=y.instanceColor));let fe={};fe.attribute=te,te&&te.data&&(fe.data=te.data),z[L]=fe,R++}s.attributes=z,s.attributesNum=R,s.index=U}function m(){let y=s.newAttributes;for(let b=0,Q=y.length;b<Q;b++)y[b]=0}function A(y){g(y,0)}function g(y,b){let Q=s.newAttributes,U=s.enabledAttributes,z=s.attributeDivisors;Q[y]=1,U[y]===0&&(n.enableVertexAttribArray(y),U[y]=1),z[y]!==b&&(n.vertexAttribDivisor(y,b),z[y]=b)}function E(){let y=s.newAttributes,b=s.enabledAttributes;for(let Q=0,U=b.length;Q<U;Q++)b[Q]!==y[Q]&&(n.disableVertexAttribArray(Q),b[Q]=0)}function _(y,b,Q,U,z,q,R){R===!0?n.vertexAttribIPointer(y,b,Q,z,q):n.vertexAttribPointer(y,b,Q,U,z,q)}function C(y,b,Q,U){m();let z=U.attributes,q=Q.getAttributes(),R=b.defaultAttributeValues;for(let N in q){let L=q[N];if(L.location>=0){let Y=z[N];if(Y===void 0&&(N==="instanceMatrix"&&y.instanceMatrix&&(Y=y.instanceMatrix),N==="instanceColor"&&y.instanceColor&&(Y=y.instanceColor)),Y!==void 0){let te=Y.normalized,fe=Y.itemSize,ye=e.get(Y);if(ye===void 0)continue;let Ge=ye.buffer,j=ye.type,se=ye.bytesPerElement,xe=j===n.INT||j===n.UNSIGNED_INT||Y.gpuType===HE;if(Y.isInterleavedBufferAttribute){let de=Y.data,Qe=de.stride,Ue=Y.offset;if(de.isInstancedInterleavedBuffer){for(let ot=0;ot<L.locationSize;ot++)g(L.location+ot,de.meshPerAttribute);y.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let ot=0;ot<L.locationSize;ot++)A(L.location+ot);n.bindBuffer(n.ARRAY_BUFFER,Ge);for(let ot=0;ot<L.locationSize;ot++)_(L.location+ot,fe/L.locationSize,j,te,Qe*se,(Ue+fe/L.locationSize*ot)*se,xe)}else{if(Y.isInstancedBufferAttribute){for(let de=0;de<L.locationSize;de++)g(L.location+de,Y.meshPerAttribute);y.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=Y.meshPerAttribute*Y.count)}else for(let de=0;de<L.locationSize;de++)A(L.location+de);n.bindBuffer(n.ARRAY_BUFFER,Ge);for(let de=0;de<L.locationSize;de++)_(L.location+de,fe/L.locationSize,j,te,fe*se,fe/L.locationSize*de*se,xe)}}else if(R!==void 0){let te=R[N];if(te!==void 0)switch(te.length){case 2:n.vertexAttrib2fv(L.location,te);break;case 3:n.vertexAttrib3fv(L.location,te);break;case 4:n.vertexAttrib4fv(L.location,te);break;default:n.vertexAttrib1fv(L.location,te)}}}}E()}function T(){D();for(let y in i){let b=i[y];for(let Q in b){let U=b[Q];for(let z in U)u(U[z].object),delete U[z];delete b[Q]}delete i[y]}}function M(y){if(i[y.id]===void 0)return;let b=i[y.id];for(let Q in b){let U=b[Q];for(let z in U)u(U[z].object),delete U[z];delete b[Q]}delete i[y.id]}function w(y){for(let b in i){let Q=i[b];if(Q[y.id]===void 0)continue;let U=Q[y.id];for(let z in U)u(U[z].object),delete U[z];delete Q[y.id]}}function D(){I(),o=!0,s!==r&&(s=r,l(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:D,resetDefaultState:I,dispose:T,releaseStatesOfGeometry:M,releaseStatesOfProgram:w,initAttributes:m,enableAttribute:A,disableUnusedAttributes:E}}function J4(n,e,t){let i;function r(l){i=l}function s(l,u){n.drawArrays(i,l,u),t.update(u,i,1)}function o(l,u,d){d!==0&&(n.drawArraysInstanced(i,l,u,d),t.update(u,i,d))}function a(l,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,l,0,u,0,d);let f=0;for(let p=0;p<d;p++)f+=u[p];t.update(f,i,1)}function c(l,u,d,h){if(d===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<l.length;p++)o(l[p],u[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(i,l,0,u,0,h,0,d);let p=0;for(let m=0;m<d;m++)p+=u[m];for(let m=0;m<h.length;m++)t.update(p,i,h[m])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function q4(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let M=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(M){return!(M!==Vn&&i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(M){let w=M===yi&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==xn&&i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==Pn&&!w)}function c(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=t.precision!==void 0?t.precision:"highp",u=c(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);let d=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_TEXTURE_SIZE),m=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),A=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),C=f>0,T=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:f,maxTextureSize:p,maxCubemapSize:m,maxAttributes:A,maxVertexUniforms:g,maxVaryings:E,maxFragmentUniforms:_,vertexTextures:C,maxSamples:T}}function Y4(n){let e=this,t=null,i=0,r=!1,s=!1,o=new Fs,a=new gt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let f=d.length!==0||h||i!==0||r;return r=h,i=d.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){let p=d.clippingPlanes,m=d.clipIntersection,A=d.clipShadows,g=n.get(d);if(!r||p===null||p.length===0||s&&!A)s?u(null):l();else{let E=s?0:i,_=E*4,C=g.clippingState||null;c.value=C,C=u(p,h,_,f);for(let T=0;T!==_;++T)C[T]=t[T];g.clippingState=C,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=E}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,p){let m=d!==null?d.length:0,A=null;if(m!==0){if(A=c.value,p!==!0||A===null){let g=f+m*4,E=h.matrixWorldInverse;a.getNormalMatrix(E),(A===null||A.length<g)&&(A=new Float32Array(g));for(let _=0,C=f;_!==m;++_,C+=4)o.copy(d[_]).applyMatrix4(E,a),o.normal.toArray(A,C),A[C+3]=o.constant}c.value=A,c.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,A}}function X4(n){let e=new WeakMap;function t(o,a){return a===zy?o.mapping=Ca:a===Ky&&(o.mapping=rl),o}function i(o){if(o&&o.isTexture){let a=o.mapping;if(a===zy||a===Ky)if(e.has(o)){let c=e.get(o).texture;return t(c,o.mapping)}else{let c=o.image;if(c&&c.height>0){let l=new AE(c.height);return l.fromEquirectangularTexture(n,o),e.set(o,l),o.addEventListener("dispose",r),t(l.texture,o.mapping)}else return null}}return o}function r(o){let a=o.target;a.removeEventListener("dispose",r);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}var fl=class extends Cd{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=i-e,o=i+e,a=r+t,c=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,o=s+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},qc=4,xb=[.125,.215,.35,.446,.526,.582],_a=20,Ty=new fl,Mb=new be,Ry=null,Py=0,Ly=0,Oy=!1,ga=(1+Math.sqrt(5))/2,Kc=1/ga,wb=[new x(-ga,Kc,0),new x(ga,Kc,0),new x(-Kc,0,ga),new x(Kc,0,ga),new x(0,ga,-Kc),new x(0,ga,Kc),new x(-1,1,-1),new x(1,1,-1),new x(-1,1,1),new x(1,1,1)],pl=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Ry=this._renderer.getRenderTarget(),Py=this._renderer.getActiveCubeFace(),Ly=this._renderer.getActiveMipmapLevel(),Oy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=bb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Db(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ry,Py,Ly),this._renderer.xr.enabled=Oy,e.scissorTest=!1,zp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ca||e.mapping===rl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ry=this._renderer.getRenderTarget(),Py=this._renderer.getActiveCubeFace(),Ly=this._renderer.getActiveMipmapLevel(),Oy=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:hn,minFilter:hn,generateMipmaps:!1,type:yi,format:Vn,colorSpace:an,depthBuffer:!1},r=Bb(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Bb(e,t,i);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$4(s)),this._blurMaterial=Z4(s,e,t)}return r}_compileMaterial(e){let t=new $t(this._lodPlanes[0],e);this._renderer.compile(t,Ty)}_sceneToCubeUV(e,t,i,r){let a=new Hn(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(Mb),u.toneMapping=wo,u.autoClear=!1;let f=new mr({name:"PMREM.Background",side:Oi,depthWrite:!1,depthTest:!1}),p=new $t(new va,f),m=!1,A=e.background;A?A.isColor&&(f.color.copy(A),e.background=null,m=!0):(f.color.copy(Mb),m=!0);for(let g=0;g<6;g++){let E=g%3;E===0?(a.up.set(0,c[g],0),a.lookAt(l[g],0,0)):E===1?(a.up.set(0,0,c[g]),a.lookAt(0,l[g],0)):(a.up.set(0,c[g],0),a.lookAt(0,0,l[g]));let _=this._cubeSize;zp(r,E*_,g>2?_:0,_,_),u.setRenderTarget(r),m&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=A}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Ca||e.mapping===rl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=bb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Db());let s=r?this._cubemapMaterial:this._equirectMaterial,o=new $t(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;let c=this._cubeSize;zp(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(o,Ty)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let s=1;s<r;s++){let o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=wb[(r-s-1)%wb.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){let c=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,d=new $t(this._lodPlanes[r],l),h=l.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*_a-1),m=s/p,A=isFinite(s)?1+Math.floor(u*m):_a;A>_a&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${A} samples when the maximum is set to ${_a}`);let g=[],E=0;for(let w=0;w<_a;++w){let D=w/m,I=Math.exp(-D*D/2);g.push(I),w===0?E+=I:w<A&&(E+=2*I)}for(let w=0;w<g.length;w++)g[w]=g[w]/E;h.envMap.value=e.texture,h.samples.value=A,h.weights.value=g,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:_}=this;h.dTheta.value=p,h.mipInt.value=_-i;let C=this._sizeLods[r],T=3*C*(r>_-qc?r-_+qc:0),M=4*(this._cubeSize-C);zp(t,T,M,3*C,2*C),c.setRenderTarget(t),c.render(d,Ty)}};function $4(n){let e=[],t=[],i=[],r=n,s=n-qc+1+xb.length;for(let o=0;o<s;o++){let a=Math.pow(2,r);t.push(a);let c=1/a;o>n-qc?c=xb[o-n+qc-1]:o===0&&(c=0),i.push(c);let l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,m=3,A=2,g=1,E=new Float32Array(m*p*f),_=new Float32Array(A*p*f),C=new Float32Array(g*p*f);for(let M=0;M<f;M++){let w=M%3*2/3-1,D=M>2?0:-1,I=[w,D,0,w+2/3,D,0,w+2/3,D+1,0,w,D,0,w+2/3,D+1,0,w,D+1,0];E.set(I,m*p*M),_.set(h,A*p*M);let y=[M,M,M,M,M,M];C.set(y,g*p*M)}let T=new Ci;T.setAttribute("position",new yn(E,m)),T.setAttribute("uv",new yn(_,A)),T.setAttribute("faceIndex",new yn(C,g)),e.push(T),r>qc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Bb(n,e,t){let i=new Gs(n,e,t);return i.texture.mapping=RA,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function zp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Z4(n,e,t){let i=new Float32Array(_a),r=new x(0,1,0);return new fs({name:"SphericalGaussianBlur",defines:{n:_a,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:qE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Mo,depthTest:!1,depthWrite:!1})}function Db(){return new fs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:qE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Mo,depthTest:!1,depthWrite:!1})}function bb(){return new fs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:qE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Mo,depthTest:!1,depthWrite:!1})}function qE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function e9(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let c=a.mapping,l=c===zy||c===Ky,u=c===Ca||c===rl;if(l||u){let d=e.get(a),h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new pl(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{let f=a.image;return l&&f&&f.height>0||u&&f&&r(f)?(t===null&&(t=new pl(n)),d=l?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let c=0,l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function s(a){let c=a.target;c.removeEventListener("dispose",s);let l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function t9(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&tl("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function n9(n,e,t,i){let r={},s=new WeakMap;function o(d){let h=d.target;h.index!==null&&e.remove(h.index);for(let p in h.attributes)e.remove(h.attributes[p]);for(let p in h.morphAttributes){let m=h.morphAttributes[p];for(let A=0,g=m.length;A<g;A++)e.remove(m[A])}h.removeEventListener("dispose",o),delete r[h.id];let f=s.get(h);f&&(e.remove(f),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h}function c(d){let h=d.attributes;for(let p in h)e.update(h[p],n.ARRAY_BUFFER);let f=d.morphAttributes;for(let p in f){let m=f[p];for(let A=0,g=m.length;A<g;A++)e.update(m[A],n.ARRAY_BUFFER)}}function l(d){let h=[],f=d.index,p=d.attributes.position,m=0;if(f!==null){let E=f.array;m=f.version;for(let _=0,C=E.length;_<C;_+=3){let T=E[_+0],M=E[_+1],w=E[_+2];h.push(T,M,M,w,w,T)}}else if(p!==void 0){let E=p.array;m=p.version;for(let _=0,C=E.length/3-1;_<C;_+=3){let T=_+0,M=_+1,w=_+2;h.push(T,M,M,w,w,T)}}else return;let A=new(MT(h)?dA:uA)(h,1);A.version=m;let g=s.get(d);g&&e.remove(g),s.set(d,A)}function u(d){let h=s.get(d);if(h){let f=d.index;f!==null&&h.version<f.version&&l(d)}else l(d);return s.get(d)}return{get:a,update:c,getWireframeAttribute:u}}function i9(n,e,t){let i;function r(h){i=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function c(h,f){n.drawElements(i,f,s,h*o),t.update(f,i,1)}function l(h,f,p){p!==0&&(n.drawElementsInstanced(i,f,s,h*o,p),t.update(f,i,p))}function u(h,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,s,h,0,p);let A=0;for(let g=0;g<p;g++)A+=f[g];t.update(A,i,1)}function d(h,f,p,m){if(p===0)return;let A=e.get("WEBGL_multi_draw");if(A===null)for(let g=0;g<h.length;g++)l(h[g]/o,f[g],m[g]);else{A.multiDrawElementsInstancedWEBGL(i,f,0,s,h,0,m,0,p);let g=0;for(let E=0;E<p;E++)g+=f[E];for(let E=0;E<m.length;E++)t.update(g,i,m[E])}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function r9(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function s9(n,e,t){let i=new WeakMap,r=new jt;function s(o,a,c){let l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0,h=i.get(a);if(h===void 0||h.count!==d){let y=function(){D.dispose(),i.delete(a),a.removeEventListener("dispose",y)};var f=y;h!==void 0&&h.texture.dispose();let p=a.morphAttributes.position!==void 0,m=a.morphAttributes.normal!==void 0,A=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],E=a.morphAttributes.normal||[],_=a.morphAttributes.color||[],C=0;p===!0&&(C=1),m===!0&&(C=2),A===!0&&(C=3);let T=a.attributes.position.count*C,M=1;T>e.maxTextureSize&&(M=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);let w=new Float32Array(T*M*4*d),D=new cA(w,T,M,d);D.type=Pn,D.needsUpdate=!0;let I=C*4;for(let b=0;b<d;b++){let Q=g[b],U=E[b],z=_[b],q=T*M*4*b;for(let R=0;R<Q.count;R++){let N=R*I;p===!0&&(r.fromBufferAttribute(Q,R),w[q+N+0]=r.x,w[q+N+1]=r.y,w[q+N+2]=r.z,w[q+N+3]=0),m===!0&&(r.fromBufferAttribute(U,R),w[q+N+4]=r.x,w[q+N+5]=r.y,w[q+N+6]=r.z,w[q+N+7]=0),A===!0&&(r.fromBufferAttribute(z,R),w[q+N+8]=r.x,w[q+N+9]=r.y,w[q+N+10]=r.z,w[q+N+11]=z.itemSize===4?r.w:1)}}h={count:d,texture:D,size:new we(T,M)},i.set(a,h),a.addEventListener("dispose",y)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let p=0;for(let A=0;A<l.length;A++)p+=l[A];let m=a.morphTargetsRelative?1:1-p;c.getUniforms().setValue(n,"morphTargetBaseInfluence",m),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function o9(n,e,t,i){let r=new WeakMap;function s(c){let l=i.render.frame,u=c.geometry,d=e.get(c,u);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){let h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return d}function o(){r=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:s,dispose:o}}var fA=class extends fn{constructor(e,t,i,r,s,o,a,c,l,u=Xc){if(u!==Xc&&u!==ol)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Xc&&(i=Ea),i===void 0&&u===ol&&(i=sl),super(null,r,s,o,a,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:on,this.minFilter=c!==void 0?c:on,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},bT=new fn,Tb=new fA(1,1),TT=new cA,RT=new _d,PT=new hA,Rb=[],Pb=[],Lb=new Float32Array(16),Ob=new Float32Array(9),Nb=new Float32Array(4);function vl(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,s=Rb[r];if(s===void 0&&(s=new Float32Array(r),Rb[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Qn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function zn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function LA(n,e){let t=Pb[e];t===void 0&&(t=new Int32Array(e),Pb[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function a9(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function c9(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2fv(this.addr,e),zn(t,e)}}function l9(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Qn(t,e))return;n.uniform3fv(this.addr,e),zn(t,e)}}function u9(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4fv(this.addr,e),zn(t,e)}}function d9(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Qn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),zn(t,e)}else{if(Qn(t,i))return;Nb.set(i),n.uniformMatrix2fv(this.addr,!1,Nb),zn(t,i)}}function h9(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Qn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),zn(t,e)}else{if(Qn(t,i))return;Ob.set(i),n.uniformMatrix3fv(this.addr,!1,Ob),zn(t,i)}}function f9(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Qn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),zn(t,e)}else{if(Qn(t,i))return;Lb.set(i),n.uniformMatrix4fv(this.addr,!1,Lb),zn(t,i)}}function p9(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function A9(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2iv(this.addr,e),zn(t,e)}}function g9(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qn(t,e))return;n.uniform3iv(this.addr,e),zn(t,e)}}function m9(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4iv(this.addr,e),zn(t,e)}}function _9(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function C9(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Qn(t,e))return;n.uniform2uiv(this.addr,e),zn(t,e)}}function y9(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Qn(t,e))return;n.uniform3uiv(this.addr,e),zn(t,e)}}function E9(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Qn(t,e))return;n.uniform4uiv(this.addr,e),zn(t,e)}}function v9(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(Tb.compareFunction=IT,s=Tb):s=bT,t.setTexture2D(e||s,r)}function I9(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||RT,r)}function S9(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||PT,r)}function x9(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||TT,r)}function M9(n){switch(n){case 5126:return a9;case 35664:return c9;case 35665:return l9;case 35666:return u9;case 35674:return d9;case 35675:return h9;case 35676:return f9;case 5124:case 35670:return p9;case 35667:case 35671:return A9;case 35668:case 35672:return g9;case 35669:case 35673:return m9;case 5125:return _9;case 36294:return C9;case 36295:return y9;case 36296:return E9;case 35678:case 36198:case 36298:case 36306:case 35682:return v9;case 35679:case 36299:case 36307:return I9;case 35680:case 36300:case 36308:case 36293:return S9;case 36289:case 36303:case 36311:case 36292:return x9}}function w9(n,e){n.uniform1fv(this.addr,e)}function B9(n,e){let t=vl(e,this.size,2);n.uniform2fv(this.addr,t)}function D9(n,e){let t=vl(e,this.size,3);n.uniform3fv(this.addr,t)}function b9(n,e){let t=vl(e,this.size,4);n.uniform4fv(this.addr,t)}function T9(n,e){let t=vl(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function R9(n,e){let t=vl(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function P9(n,e){let t=vl(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function L9(n,e){n.uniform1iv(this.addr,e)}function O9(n,e){n.uniform2iv(this.addr,e)}function N9(n,e){n.uniform3iv(this.addr,e)}function F9(n,e){n.uniform4iv(this.addr,e)}function k9(n,e){n.uniform1uiv(this.addr,e)}function U9(n,e){n.uniform2uiv(this.addr,e)}function G9(n,e){n.uniform3uiv(this.addr,e)}function H9(n,e){n.uniform4uiv(this.addr,e)}function V9(n,e,t){let i=this.cache,r=e.length,s=LA(t,r);Qn(i,s)||(n.uniform1iv(this.addr,s),zn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||bT,s[o])}function Q9(n,e,t){let i=this.cache,r=e.length,s=LA(t,r);Qn(i,s)||(n.uniform1iv(this.addr,s),zn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||RT,s[o])}function z9(n,e,t){let i=this.cache,r=e.length,s=LA(t,r);Qn(i,s)||(n.uniform1iv(this.addr,s),zn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||PT,s[o])}function K9(n,e,t){let i=this.cache,r=e.length,s=LA(t,r);Qn(i,s)||(n.uniform1iv(this.addr,s),zn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||TT,s[o])}function W9(n){switch(n){case 5126:return w9;case 35664:return B9;case 35665:return D9;case 35666:return b9;case 35674:return T9;case 35675:return R9;case 35676:return P9;case 5124:case 35670:return L9;case 35667:case 35671:return O9;case 35668:case 35672:return N9;case 35669:case 35673:return F9;case 5125:return k9;case 36294:return U9;case 36295:return G9;case 36296:return H9;case 35678:case 36198:case 36298:case 36306:case 35682:return V9;case 35679:case 36299:case 36307:return Q9;case 35680:case 36300:case 36308:case 36293:return z9;case 36289:case 36303:case 36311:case 36292:return K9}}var gE=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=M9(t.type)}},mE=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=W9(t.type)}},_E=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let s=0,o=r.length;s!==o;++s){let a=r[s];a.setValue(e,t[a.id],i)}}},Ny=/(\w+)(\])?(\[|\.)?/g;function Fb(n,e){n.seq.push(e),n.map[e.id]=e}function j9(n,e,t){let i=n.name,r=i.length;for(Ny.lastIndex=0;;){let s=Ny.exec(i),o=Ny.lastIndex,a=s[1],c=s[2]==="]",l=s[3];if(c&&(a=a|0),l===void 0||l==="["&&o+2===r){Fb(t,l===void 0?new gE(a,n,e):new mE(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new _E(a),Fb(t,d)),t=d}}}var il=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);j9(s,o,this)}}setValue(e,t,i,r){let s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){let a=t[s],c=i[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,s=e.length;r!==s;++r){let o=e[r];o.id in t&&i.push(o)}return i}};function kb(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var J9=37297,q9=0;function Y9(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){let a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function X9(n){let e=wt.getPrimaries(wt.workingColorSpace),t=wt.getPrimaries(n),i;switch(e===t?i="":e===sA&&t===rA?i="LinearDisplayP3ToLinearSRGB":e===rA&&t===sA&&(i="LinearSRGBToLinearDisplayP3"),n){case an:case El:return[i,"LinearTransferOETF"];case Qt:case Td:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function Ub(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Y9(n.getShaderSource(e),o)}else return r}function $9(n,e){let t=X9(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Z9(n,e){let t;switch(e){case oV:t="Linear";break;case aV:t="Reinhard";break;case cV:t="OptimizedCineon";break;case lV:t="ACESFilmic";break;case dV:t="AgX";break;case hV:t="Neutral";break;case uV:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var Kp=new x;function ez(){wt.getLuminanceCoefficients(Kp);let n=Kp.x.toFixed(4),e=Kp.y.toFixed(4),t=Kp.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function tz(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(sd).join(`
`)}function nz(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function iz(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let s=n.getActiveAttrib(e,r),o=s.name,a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function sd(n){return n!==""}function Gb(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Hb(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var rz=/^[ \t]*#include +<([\w\d./]+)>/gm;function CE(n){return n.replace(rz,oz)}var sz=new Map;function oz(n,e){let t=At[e];if(t===void 0){let i=sz.get(e);if(i!==void 0)t=At[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return CE(t)}var az=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Vb(n){return n.replace(az,cz)}function cz(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Qb(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function lz(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===fT?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===RH?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ur&&(e="SHADOWMAP_TYPE_VSM"),e}function uz(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ca:case rl:e="ENVMAP_TYPE_CUBE";break;case RA:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dz(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case rl:e="ENVMAP_MODE_REFRACTION";break}return e}function hz(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case UE:e="ENVMAP_BLENDING_MULTIPLY";break;case rV:e="ENVMAP_BLENDING_MIX";break;case sV:e="ENVMAP_BLENDING_ADD";break}return e}function fz(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function pz(n,e,t,i){let r=n.getContext(),s=t.defines,o=t.vertexShader,a=t.fragmentShader,c=lz(t),l=uz(t),u=dz(t),d=hz(t),h=fz(t),f=tz(t),p=nz(s),m=r.createProgram(),A,g,E=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(sd).join(`
`),A.length>0&&(A+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(sd).join(`
`),g.length>0&&(g+=`
`)):(A=[Qb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(sd).join(`
`),g=[Qb(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==wo?"#define TONE_MAPPING":"",t.toneMapping!==wo?At.tonemapping_pars_fragment:"",t.toneMapping!==wo?Z9("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",At.colorspace_pars_fragment,$9("linearToOutputTexel",t.outputColorSpace),ez(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(sd).join(`
`)),o=CE(o),o=Gb(o,t),o=Hb(o,t),a=CE(a),a=Gb(a,t),a=Hb(a,t),o=Vb(o),a=Vb(a),t.isRawShaderMaterial!==!0&&(E=`#version 300 es
`,A=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+A,g=["#define varying in",t.glslVersion===rb?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===rb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);let _=E+A+o,C=E+g+a,T=kb(r,r.VERTEX_SHADER,_),M=kb(r,r.FRAGMENT_SHADER,C);r.attachShader(m,T),r.attachShader(m,M),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m);function w(b){if(n.debug.checkShaderErrors){let Q=r.getProgramInfoLog(m).trim(),U=r.getShaderInfoLog(T).trim(),z=r.getShaderInfoLog(M).trim(),q=!0,R=!0;if(r.getProgramParameter(m,r.LINK_STATUS)===!1)if(q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,m,T,M);else{let N=Ub(r,T,"vertex"),L=Ub(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+`

Material Name: `+b.name+`
Material Type: `+b.type+`

Program Info Log: `+Q+`
`+N+`
`+L)}else Q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(U===""||z==="")&&(R=!1);R&&(b.diagnostics={runnable:q,programLog:Q,vertexShader:{log:U,prefix:A},fragmentShader:{log:z,prefix:g}})}r.deleteShader(T),r.deleteShader(M),D=new il(r,m),I=iz(r,m)}let D;this.getUniforms=function(){return D===void 0&&w(this),D};let I;this.getAttributes=function(){return I===void 0&&w(this),I};let y=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return y===!1&&(y=r.getProgramParameter(m,J9)),y},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=q9++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=T,this.fragmentShader=M,this}var Az=0,yE=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new EE(e),t.set(e,i)),i}},EE=class{constructor(e){this.id=Az++,this.code=e,this.usedTimes=0}};function gz(n,e,t,i,r,s,o){let a=new lA,c=new yE,l=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(I){return l.add(I),I===0?"uv":`uv${I}`}function A(I,y,b,Q,U){let z=Q.fog,q=U.geometry,R=I.isMeshStandardMaterial?Q.environment:null,N=(I.isMeshStandardMaterial?t:e).get(I.envMap||R),L=N&&N.mapping===RA?N.image.height:null,Y=p[I.type];I.precision!==null&&(f=r.getMaxPrecision(I.precision),f!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",f,"instead."));let te=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,fe=te!==void 0?te.length:0,ye=0;q.morphAttributes.position!==void 0&&(ye=1),q.morphAttributes.normal!==void 0&&(ye=2),q.morphAttributes.color!==void 0&&(ye=3);let Ge,j,se,xe;if(Y){let Pt=ls[Y];Ge=Pt.vertexShader,j=Pt.fragmentShader}else Ge=I.vertexShader,j=I.fragmentShader,c.update(I),se=c.getVertexShaderID(I),xe=c.getFragmentShaderID(I);let de=n.getRenderTarget(),Qe=U.isInstancedMesh===!0,Ue=U.isBatchedMesh===!0,ot=!!I.map,Xt=!!I.matcap,P=!!N,Mn=!!I.aoMap,Gt=!!I.lightMap,Kt=!!I.bumpMap,ke=!!I.normalMap,wn=!!I.displacementMap,tt=!!I.emissiveMap,at=!!I.metalnessMap,B=!!I.roughnessMap,v=I.anisotropy>0,J=I.clearcoat>0,ne=I.dispersion>0,ie=I.iridescence>0,ee=I.sheen>0,He=I.transmission>0,me=v&&!!I.anisotropyMap,ve=J&&!!I.clearcoatMap,ht=J&&!!I.clearcoatNormalMap,ce=J&&!!I.clearcoatRoughnessMap,Ee=ie&&!!I.iridescenceMap,vt=ie&&!!I.iridescenceThicknessMap,$e=ee&&!!I.sheenColorMap,Me=ee&&!!I.sheenRoughnessMap,nt=!!I.specularMap,Ct=!!I.specularColorMap,cn=!!I.specularIntensityMap,O=He&&!!I.transmissionMap,le=He&&!!I.thicknessMap,X=!!I.gradientMap,Z=!!I.alphaMap,he=I.alphaTest>0,We=!!I.alphaHash,Mt=!!I.extensions,Bn=wo;I.toneMapped&&(de===null||de.isXRRenderTarget===!0)&&(Bn=n.toneMapping);let $n={shaderID:Y,shaderType:I.type,shaderName:I.name,vertexShader:Ge,fragmentShader:j,defines:I.defines,customVertexShaderID:se,customFragmentShaderID:xe,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:f,batching:Ue,batchingColor:Ue&&U._colorsTexture!==null,instancing:Qe,instancingColor:Qe&&U.instanceColor!==null,instancingMorph:Qe&&U.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:de===null?n.outputColorSpace:de.isXRRenderTarget===!0?de.texture.colorSpace:an,alphaToCoverage:!!I.alphaToCoverage,map:ot,matcap:Xt,envMap:P,envMapMode:P&&N.mapping,envMapCubeUVHeight:L,aoMap:Mn,lightMap:Gt,bumpMap:Kt,normalMap:ke,displacementMap:h&&wn,emissiveMap:tt,normalMapObjectSpace:ke&&I.normalMapType===mV,normalMapTangentSpace:ke&&I.normalMapType===jE,metalnessMap:at,roughnessMap:B,anisotropy:v,anisotropyMap:me,clearcoat:J,clearcoatMap:ve,clearcoatNormalMap:ht,clearcoatRoughnessMap:ce,dispersion:ne,iridescence:ie,iridescenceMap:Ee,iridescenceThicknessMap:vt,sheen:ee,sheenColorMap:$e,sheenRoughnessMap:Me,specularMap:nt,specularColorMap:Ct,specularIntensityMap:cn,transmission:He,transmissionMap:O,thicknessMap:le,gradientMap:X,opaque:I.transparent===!1&&I.blending===Yc&&I.alphaToCoverage===!1,alphaMap:Z,alphaTest:he,alphaHash:We,combine:I.combine,mapUv:ot&&m(I.map.channel),aoMapUv:Mn&&m(I.aoMap.channel),lightMapUv:Gt&&m(I.lightMap.channel),bumpMapUv:Kt&&m(I.bumpMap.channel),normalMapUv:ke&&m(I.normalMap.channel),displacementMapUv:wn&&m(I.displacementMap.channel),emissiveMapUv:tt&&m(I.emissiveMap.channel),metalnessMapUv:at&&m(I.metalnessMap.channel),roughnessMapUv:B&&m(I.roughnessMap.channel),anisotropyMapUv:me&&m(I.anisotropyMap.channel),clearcoatMapUv:ve&&m(I.clearcoatMap.channel),clearcoatNormalMapUv:ht&&m(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ce&&m(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Ee&&m(I.iridescenceMap.channel),iridescenceThicknessMapUv:vt&&m(I.iridescenceThicknessMap.channel),sheenColorMapUv:$e&&m(I.sheenColorMap.channel),sheenRoughnessMapUv:Me&&m(I.sheenRoughnessMap.channel),specularMapUv:nt&&m(I.specularMap.channel),specularColorMapUv:Ct&&m(I.specularColorMap.channel),specularIntensityMapUv:cn&&m(I.specularIntensityMap.channel),transmissionMapUv:O&&m(I.transmissionMap.channel),thicknessMapUv:le&&m(I.thicknessMap.channel),alphaMapUv:Z&&m(I.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(ke||v),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,pointsUvs:U.isPoints===!0&&!!q.attributes.uv&&(ot||Z),fog:!!z,useFog:I.fog===!0,fogExp2:!!z&&z.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:U.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:fe,morphTextureStride:ye,numDirLights:y.directional.length,numPointLights:y.point.length,numSpotLights:y.spot.length,numSpotLightMaps:y.spotLightMap.length,numRectAreaLights:y.rectArea.length,numHemiLights:y.hemi.length,numDirLightShadows:y.directionalShadowMap.length,numPointLightShadows:y.pointShadowMap.length,numSpotLightShadows:y.spotShadowMap.length,numSpotLightShadowsWithMaps:y.numSpotLightShadowsWithMaps,numLightProbes:y.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&b.length>0,shadowMapType:n.shadowMap.type,toneMapping:Bn,decodeVideoTexture:ot&&I.map.isVideoTexture===!0&&wt.getTransfer(I.map.colorSpace)===nn,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Xi,flipSided:I.side===Oi,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Mt&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Mt&&I.extensions.multiDraw===!0||Ue)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return $n.vertexUv1s=l.has(1),$n.vertexUv2s=l.has(2),$n.vertexUv3s=l.has(3),l.clear(),$n}function g(I){let y=[];if(I.shaderID?y.push(I.shaderID):(y.push(I.customVertexShaderID),y.push(I.customFragmentShaderID)),I.defines!==void 0)for(let b in I.defines)y.push(b),y.push(I.defines[b]);return I.isRawShaderMaterial===!1&&(E(y,I),_(y,I),y.push(n.outputColorSpace)),y.push(I.customProgramCacheKey),y.join()}function E(I,y){I.push(y.precision),I.push(y.outputColorSpace),I.push(y.envMapMode),I.push(y.envMapCubeUVHeight),I.push(y.mapUv),I.push(y.alphaMapUv),I.push(y.lightMapUv),I.push(y.aoMapUv),I.push(y.bumpMapUv),I.push(y.normalMapUv),I.push(y.displacementMapUv),I.push(y.emissiveMapUv),I.push(y.metalnessMapUv),I.push(y.roughnessMapUv),I.push(y.anisotropyMapUv),I.push(y.clearcoatMapUv),I.push(y.clearcoatNormalMapUv),I.push(y.clearcoatRoughnessMapUv),I.push(y.iridescenceMapUv),I.push(y.iridescenceThicknessMapUv),I.push(y.sheenColorMapUv),I.push(y.sheenRoughnessMapUv),I.push(y.specularMapUv),I.push(y.specularColorMapUv),I.push(y.specularIntensityMapUv),I.push(y.transmissionMapUv),I.push(y.thicknessMapUv),I.push(y.combine),I.push(y.fogExp2),I.push(y.sizeAttenuation),I.push(y.morphTargetsCount),I.push(y.morphAttributeCount),I.push(y.numDirLights),I.push(y.numPointLights),I.push(y.numSpotLights),I.push(y.numSpotLightMaps),I.push(y.numHemiLights),I.push(y.numRectAreaLights),I.push(y.numDirLightShadows),I.push(y.numPointLightShadows),I.push(y.numSpotLightShadows),I.push(y.numSpotLightShadowsWithMaps),I.push(y.numLightProbes),I.push(y.shadowMapType),I.push(y.toneMapping),I.push(y.numClippingPlanes),I.push(y.numClipIntersection),I.push(y.depthPacking)}function _(I,y){a.disableAll(),y.supportsVertexTextures&&a.enable(0),y.instancing&&a.enable(1),y.instancingColor&&a.enable(2),y.instancingMorph&&a.enable(3),y.matcap&&a.enable(4),y.envMap&&a.enable(5),y.normalMapObjectSpace&&a.enable(6),y.normalMapTangentSpace&&a.enable(7),y.clearcoat&&a.enable(8),y.iridescence&&a.enable(9),y.alphaTest&&a.enable(10),y.vertexColors&&a.enable(11),y.vertexAlphas&&a.enable(12),y.vertexUv1s&&a.enable(13),y.vertexUv2s&&a.enable(14),y.vertexUv3s&&a.enable(15),y.vertexTangents&&a.enable(16),y.anisotropy&&a.enable(17),y.alphaHash&&a.enable(18),y.batching&&a.enable(19),y.dispersion&&a.enable(20),y.batchingColor&&a.enable(21),I.push(a.mask),a.disableAll(),y.fog&&a.enable(0),y.useFog&&a.enable(1),y.flatShading&&a.enable(2),y.logarithmicDepthBuffer&&a.enable(3),y.skinning&&a.enable(4),y.morphTargets&&a.enable(5),y.morphNormals&&a.enable(6),y.morphColors&&a.enable(7),y.premultipliedAlpha&&a.enable(8),y.shadowMapEnabled&&a.enable(9),y.doubleSided&&a.enable(10),y.flipSided&&a.enable(11),y.useDepthPacking&&a.enable(12),y.dithering&&a.enable(13),y.transmission&&a.enable(14),y.sheen&&a.enable(15),y.opaque&&a.enable(16),y.pointsUvs&&a.enable(17),y.decodeVideoTexture&&a.enable(18),y.alphaToCoverage&&a.enable(19),I.push(a.mask)}function C(I){let y=p[I.type],b;if(y){let Q=ls[y];b=oQ.clone(Q.uniforms)}else b=I.uniforms;return b}function T(I,y){let b;for(let Q=0,U=u.length;Q<U;Q++){let z=u[Q];if(z.cacheKey===y){b=z,++b.usedTimes;break}}return b===void 0&&(b=new pz(n,y,I,s),u.push(b)),b}function M(I){if(--I.usedTimes===0){let y=u.indexOf(I);u[y]=u[u.length-1],u.pop(),I.destroy()}}function w(I){c.remove(I)}function D(){c.dispose()}return{getParameters:A,getProgramCacheKey:g,getUniforms:C,acquireProgram:T,releaseProgram:M,releaseShaderCache:w,programs:u,dispose:D}}function mz(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function _z(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function zb(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Kb(){let n=[],e=0,t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,h,f,p,m,A){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:m,group:A},n[e]=g):(g.id=d.id,g.object=d,g.geometry=h,g.material=f,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=m,g.group=A),e++,g}function a(d,h,f,p,m,A){let g=o(d,h,f,p,m,A);f.transmission>0?i.push(g):f.transparent===!0?r.push(g):t.push(g)}function c(d,h,f,p,m,A){let g=o(d,h,f,p,m,A);f.transmission>0?i.unshift(g):f.transparent===!0?r.unshift(g):t.unshift(g)}function l(d,h){t.length>1&&t.sort(d||_z),i.length>1&&i.sort(h||zb),r.length>1&&r.sort(h||zb)}function u(){for(let d=e,h=n.length;d<h;d++){let f=n[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:c,finish:u,sort:l}}function Cz(){let n=new WeakMap;function e(i,r){let s=n.get(i),o;return s===void 0?(o=new Kb,n.set(i,[o])):r>=s.length?(o=new Kb,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function yz(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new x,color:new be};break;case"SpotLight":t={position:new x,direction:new x,color:new be,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new x,color:new be,distance:0,decay:0};break;case"HemisphereLight":t={direction:new x,skyColor:new be,groundColor:new be};break;case"RectAreaLight":t={color:new be,position:new x,halfWidth:new x,halfHeight:new x};break}return n[e.id]=t,t}}}function Ez(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var vz=0;function Iz(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Sz(n){let e=new yz,t=Ez(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new x);let r=new x,s=new mt,o=new mt;function a(l){let u=0,d=0,h=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let f=0,p=0,m=0,A=0,g=0,E=0,_=0,C=0,T=0,M=0,w=0;l.sort(Iz);for(let I=0,y=l.length;I<y;I++){let b=l[I],Q=b.color,U=b.intensity,z=b.distance,q=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)u+=Q.r*U,d+=Q.g*U,h+=Q.b*U;else if(b.isLightProbe){for(let R=0;R<9;R++)i.probe[R].addScaledVector(b.sh.coefficients[R],U);w++}else if(b.isDirectionalLight){let R=e.get(b);if(R.color.copy(b.color).multiplyScalar(b.intensity),b.castShadow){let N=b.shadow,L=t.get(b);L.shadowIntensity=N.intensity,L.shadowBias=N.bias,L.shadowNormalBias=N.normalBias,L.shadowRadius=N.radius,L.shadowMapSize=N.mapSize,i.directionalShadow[f]=L,i.directionalShadowMap[f]=q,i.directionalShadowMatrix[f]=b.shadow.matrix,E++}i.directional[f]=R,f++}else if(b.isSpotLight){let R=e.get(b);R.position.setFromMatrixPosition(b.matrixWorld),R.color.copy(Q).multiplyScalar(U),R.distance=z,R.coneCos=Math.cos(b.angle),R.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),R.decay=b.decay,i.spot[m]=R;let N=b.shadow;if(b.map&&(i.spotLightMap[T]=b.map,T++,N.updateMatrices(b),b.castShadow&&M++),i.spotLightMatrix[m]=N.matrix,b.castShadow){let L=t.get(b);L.shadowIntensity=N.intensity,L.shadowBias=N.bias,L.shadowNormalBias=N.normalBias,L.shadowRadius=N.radius,L.shadowMapSize=N.mapSize,i.spotShadow[m]=L,i.spotShadowMap[m]=q,C++}m++}else if(b.isRectAreaLight){let R=e.get(b);R.color.copy(Q).multiplyScalar(U),R.halfWidth.set(b.width*.5,0,0),R.halfHeight.set(0,b.height*.5,0),i.rectArea[A]=R,A++}else if(b.isPointLight){let R=e.get(b);if(R.color.copy(b.color).multiplyScalar(b.intensity),R.distance=b.distance,R.decay=b.decay,b.castShadow){let N=b.shadow,L=t.get(b);L.shadowIntensity=N.intensity,L.shadowBias=N.bias,L.shadowNormalBias=N.normalBias,L.shadowRadius=N.radius,L.shadowMapSize=N.mapSize,L.shadowCameraNear=N.camera.near,L.shadowCameraFar=N.camera.far,i.pointShadow[p]=L,i.pointShadowMap[p]=q,i.pointShadowMatrix[p]=b.shadow.matrix,_++}i.point[p]=R,p++}else if(b.isHemisphereLight){let R=e.get(b);R.skyColor.copy(b.color).multiplyScalar(U),R.groundColor.copy(b.groundColor).multiplyScalar(U),i.hemi[g]=R,g++}}A>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=pe.LTC_FLOAT_1,i.rectAreaLTC2=pe.LTC_FLOAT_2):(i.rectAreaLTC1=pe.LTC_HALF_1,i.rectAreaLTC2=pe.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;let D=i.hash;(D.directionalLength!==f||D.pointLength!==p||D.spotLength!==m||D.rectAreaLength!==A||D.hemiLength!==g||D.numDirectionalShadows!==E||D.numPointShadows!==_||D.numSpotShadows!==C||D.numSpotMaps!==T||D.numLightProbes!==w)&&(i.directional.length=f,i.spot.length=m,i.rectArea.length=A,i.point.length=p,i.hemi.length=g,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=_,i.pointShadowMap.length=_,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=_,i.spotLightMatrix.length=C+T-M,i.spotLightMap.length=T,i.numSpotLightShadowsWithMaps=M,i.numLightProbes=w,D.directionalLength=f,D.pointLength=p,D.spotLength=m,D.rectAreaLength=A,D.hemiLength=g,D.numDirectionalShadows=E,D.numPointShadows=_,D.numSpotShadows=C,D.numSpotMaps=T,D.numLightProbes=w,i.version=vz++)}function c(l,u){let d=0,h=0,f=0,p=0,m=0,A=u.matrixWorldInverse;for(let g=0,E=l.length;g<E;g++){let _=l[g];if(_.isDirectionalLight){let C=i.directional[d];C.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(A),d++}else if(_.isSpotLight){let C=i.spot[f];C.position.setFromMatrixPosition(_.matrixWorld),C.position.applyMatrix4(A),C.direction.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(_.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(A),f++}else if(_.isRectAreaLight){let C=i.rectArea[p];C.position.setFromMatrixPosition(_.matrixWorld),C.position.applyMatrix4(A),o.identity(),s.copy(_.matrixWorld),s.premultiply(A),o.extractRotation(s),C.halfWidth.set(_.width*.5,0,0),C.halfHeight.set(0,_.height*.5,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),p++}else if(_.isPointLight){let C=i.point[h];C.position.setFromMatrixPosition(_.matrixWorld),C.position.applyMatrix4(A),h++}else if(_.isHemisphereLight){let C=i.hemi[m];C.direction.setFromMatrixPosition(_.matrixWorld),C.direction.transformDirection(A),m++}}}return{setup:a,setupView:c,state:i}}function Wb(n){let e=new Sz(n),t=[],i=[];function r(u){l.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function c(u){e.setupView(t,u)}let l={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:l,setupLights:a,setupLightsView:c,pushLight:s,pushShadow:o}}function xz(n){let e=new WeakMap;function t(r,s=0){let o=e.get(r),a;return o===void 0?(a=new Wb(n),e.set(r,[a])):s>=o.length?(a=new Wb(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var vE=class extends Fi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=AV,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},IE=class extends Fi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Mz=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wz=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Bz(n,e,t){let i=new yd,r=new we,s=new we,o=new jt,a=new vE({depthPacking:gV}),c=new IE,l={},u=t.maxTextureSize,d={[us]:Oi,[Oi]:us,[Xi]:Xi},h=new fs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new we},radius:{value:4}},vertexShader:Mz,fragmentShader:wz}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let p=new Ci;p.setAttribute("position",new yn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new $t(p,h),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fT;let g=this.type;this.render=function(M,w,D){if(A.enabled===!1||A.autoUpdate===!1&&A.needsUpdate===!1||M.length===0)return;let I=n.getRenderTarget(),y=n.getActiveCubeFace(),b=n.getActiveMipmapLevel(),Q=n.state;Q.setBlending(Mo),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);let U=g!==Ur&&this.type===Ur,z=g===Ur&&this.type!==Ur;for(let q=0,R=M.length;q<R;q++){let N=M[q],L=N.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",N,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;r.copy(L.mapSize);let Y=L.getFrameExtents();if(r.multiply(Y),s.copy(L.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Y.x),r.x=s.x*Y.x,L.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Y.y),r.y=s.y*Y.y,L.mapSize.y=s.y)),L.map===null||U===!0||z===!0){let fe=this.type!==Ur?{minFilter:on,magFilter:on}:{};L.map!==null&&L.map.dispose(),L.map=new Gs(r.x,r.y,fe),L.map.texture.name=N.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();let te=L.getViewportCount();for(let fe=0;fe<te;fe++){let ye=L.getViewport(fe);o.set(s.x*ye.x,s.y*ye.y,s.x*ye.z,s.y*ye.w),Q.viewport(o),L.updateMatrices(N,fe),i=L.getFrustum(),C(w,D,L.camera,N,this.type)}L.isPointLightShadow!==!0&&this.type===Ur&&E(L,D),L.needsUpdate=!1}g=this.type,A.needsUpdate=!1,n.setRenderTarget(I,y,b)};function E(M,w){let D=e.update(m);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,f.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Gs(r.x,r.y)),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(w,null,D,h,m,null),f.uniforms.shadow_pass.value=M.mapPass.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(w,null,D,f,m,null)}function _(M,w,D,I){let y=null,b=D.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(b!==void 0)y=b;else if(y=D.isPointLight===!0?c:a,n.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){let Q=y.uuid,U=w.uuid,z=l[Q];z===void 0&&(z={},l[Q]=z);let q=z[U];q===void 0&&(q=y.clone(),z[U]=q,w.addEventListener("dispose",T)),y=q}if(y.visible=w.visible,y.wireframe=w.wireframe,I===Ur?y.side=w.shadowSide!==null?w.shadowSide:w.side:y.side=w.shadowSide!==null?w.shadowSide:d[w.side],y.alphaMap=w.alphaMap,y.alphaTest=w.alphaTest,y.map=w.map,y.clipShadows=w.clipShadows,y.clippingPlanes=w.clippingPlanes,y.clipIntersection=w.clipIntersection,y.displacementMap=w.displacementMap,y.displacementScale=w.displacementScale,y.displacementBias=w.displacementBias,y.wireframeLinewidth=w.wireframeLinewidth,y.linewidth=w.linewidth,D.isPointLight===!0&&y.isMeshDistanceMaterial===!0){let Q=n.properties.get(y);Q.light=D}return y}function C(M,w,D,I,y){if(M.visible===!1)return;if(M.layers.test(w.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&y===Ur)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,M.matrixWorld);let U=e.update(M),z=M.material;if(Array.isArray(z)){let q=U.groups;for(let R=0,N=q.length;R<N;R++){let L=q[R],Y=z[L.materialIndex];if(Y&&Y.visible){let te=_(M,Y,I,y);M.onBeforeShadow(n,M,w,D,U,te,L),n.renderBufferDirect(D,null,U,te,M,L),M.onAfterShadow(n,M,w,D,U,te,L)}}}else if(z.visible){let q=_(M,z,I,y);M.onBeforeShadow(n,M,w,D,U,q,null),n.renderBufferDirect(D,null,U,q,M,null),M.onAfterShadow(n,M,w,D,U,q,null)}}let Q=M.children;for(let U=0,z=Q.length;U<z;U++)C(Q[U],w,D,I,y)}function T(M){M.target.removeEventListener("dispose",T);for(let D in l){let I=l[D],y=M.target.uuid;y in I&&(I[y].dispose(),delete I[y])}}}function Dz(n){function e(){let O=!1,le=new jt,X=null,Z=new jt(0,0,0,0);return{setMask:function(he){X!==he&&!O&&(n.colorMask(he,he,he,he),X=he)},setLocked:function(he){O=he},setClear:function(he,We,Mt,Bn,$n){$n===!0&&(he*=Bn,We*=Bn,Mt*=Bn),le.set(he,We,Mt,Bn),Z.equals(le)===!1&&(n.clearColor(he,We,Mt,Bn),Z.copy(le))},reset:function(){O=!1,X=null,Z.set(-1,0,0,0)}}}function t(){let O=!1,le=null,X=null,Z=null;return{setTest:function(he){he?xe(n.DEPTH_TEST):de(n.DEPTH_TEST)},setMask:function(he){le!==he&&!O&&(n.depthMask(he),le=he)},setFunc:function(he){if(X!==he){switch(he){case XH:n.depthFunc(n.NEVER);break;case $H:n.depthFunc(n.ALWAYS);break;case ZH:n.depthFunc(n.LESS);break;case nA:n.depthFunc(n.LEQUAL);break;case eV:n.depthFunc(n.EQUAL);break;case tV:n.depthFunc(n.GEQUAL);break;case nV:n.depthFunc(n.GREATER);break;case iV:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}X=he}},setLocked:function(he){O=he},setClear:function(he){Z!==he&&(n.clearDepth(he),Z=he)},reset:function(){O=!1,le=null,X=null,Z=null}}}function i(){let O=!1,le=null,X=null,Z=null,he=null,We=null,Mt=null,Bn=null,$n=null;return{setTest:function(Pt){O||(Pt?xe(n.STENCIL_TEST):de(n.STENCIL_TEST))},setMask:function(Pt){le!==Pt&&!O&&(n.stencilMask(Pt),le=Pt)},setFunc:function(Pt,ys,Wr){(X!==Pt||Z!==ys||he!==Wr)&&(n.stencilFunc(Pt,ys,Wr),X=Pt,Z=ys,he=Wr)},setOp:function(Pt,ys,Wr){(We!==Pt||Mt!==ys||Bn!==Wr)&&(n.stencilOp(Pt,ys,Wr),We=Pt,Mt=ys,Bn=Wr)},setLocked:function(Pt){O=Pt},setClear:function(Pt){$n!==Pt&&(n.clearStencil(Pt),$n=Pt)},reset:function(){O=!1,le=null,X=null,Z=null,he=null,We=null,Mt=null,Bn=null,$n=null}}}let r=new e,s=new t,o=new i,a=new WeakMap,c=new WeakMap,l={},u={},d=new WeakMap,h=[],f=null,p=!1,m=null,A=null,g=null,E=null,_=null,C=null,T=null,M=new be(0,0,0),w=0,D=!1,I=null,y=null,b=null,Q=null,U=null,z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),q=!1,R=0,N=n.getParameter(n.VERSION);N.indexOf("WebGL")!==-1?(R=parseFloat(/^WebGL (\d)/.exec(N)[1]),q=R>=1):N.indexOf("OpenGL ES")!==-1&&(R=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),q=R>=2);let L=null,Y={},te=n.getParameter(n.SCISSOR_BOX),fe=n.getParameter(n.VIEWPORT),ye=new jt().fromArray(te),Ge=new jt().fromArray(fe);function j(O,le,X,Z){let he=new Uint8Array(4),We=n.createTexture();n.bindTexture(O,We),n.texParameteri(O,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(O,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Mt=0;Mt<X;Mt++)O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY?n.texImage3D(le,0,n.RGBA,1,1,Z,0,n.RGBA,n.UNSIGNED_BYTE,he):n.texImage2D(le+Mt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,he);return We}let se={};se[n.TEXTURE_2D]=j(n.TEXTURE_2D,n.TEXTURE_2D,1),se[n.TEXTURE_CUBE_MAP]=j(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),se[n.TEXTURE_2D_ARRAY]=j(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),se[n.TEXTURE_3D]=j(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),xe(n.DEPTH_TEST),s.setFunc(nA),Kt(!1),ke(JD),xe(n.CULL_FACE),Mn(Mo);function xe(O){l[O]!==!0&&(n.enable(O),l[O]=!0)}function de(O){l[O]!==!1&&(n.disable(O),l[O]=!1)}function Qe(O,le){return u[O]!==le?(n.bindFramebuffer(O,le),u[O]=le,O===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=le),O===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=le),!0):!1}function Ue(O,le){let X=h,Z=!1;if(O){X=d.get(le),X===void 0&&(X=[],d.set(le,X));let he=O.textures;if(X.length!==he.length||X[0]!==n.COLOR_ATTACHMENT0){for(let We=0,Mt=he.length;We<Mt;We++)X[We]=n.COLOR_ATTACHMENT0+We;X.length=he.length,Z=!0}}else X[0]!==n.BACK&&(X[0]=n.BACK,Z=!0);Z&&n.drawBuffers(X)}function ot(O){return f!==O?(n.useProgram(O),f=O,!0):!1}let Xt={[ma]:n.FUNC_ADD,[LH]:n.FUNC_SUBTRACT,[OH]:n.FUNC_REVERSE_SUBTRACT};Xt[NH]=n.MIN,Xt[FH]=n.MAX;let P={[kH]:n.ZERO,[UH]:n.ONE,[GH]:n.SRC_COLOR,[Vy]:n.SRC_ALPHA,[WH]:n.SRC_ALPHA_SATURATE,[zH]:n.DST_COLOR,[VH]:n.DST_ALPHA,[HH]:n.ONE_MINUS_SRC_COLOR,[Qy]:n.ONE_MINUS_SRC_ALPHA,[KH]:n.ONE_MINUS_DST_COLOR,[QH]:n.ONE_MINUS_DST_ALPHA,[jH]:n.CONSTANT_COLOR,[JH]:n.ONE_MINUS_CONSTANT_COLOR,[qH]:n.CONSTANT_ALPHA,[YH]:n.ONE_MINUS_CONSTANT_ALPHA};function Mn(O,le,X,Z,he,We,Mt,Bn,$n,Pt){if(O===Mo){p===!0&&(de(n.BLEND),p=!1);return}if(p===!1&&(xe(n.BLEND),p=!0),O!==PH){if(O!==m||Pt!==D){if((A!==ma||_!==ma)&&(n.blendEquation(n.FUNC_ADD),A=ma,_=ma),Pt)switch(O){case Yc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case qD:n.blendFunc(n.ONE,n.ONE);break;case YD:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case XD:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}else switch(O){case Yc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case qD:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case YD:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case XD:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",O);break}g=null,E=null,C=null,T=null,M.set(0,0,0),w=0,m=O,D=Pt}return}he=he||le,We=We||X,Mt=Mt||Z,(le!==A||he!==_)&&(n.blendEquationSeparate(Xt[le],Xt[he]),A=le,_=he),(X!==g||Z!==E||We!==C||Mt!==T)&&(n.blendFuncSeparate(P[X],P[Z],P[We],P[Mt]),g=X,E=Z,C=We,T=Mt),(Bn.equals(M)===!1||$n!==w)&&(n.blendColor(Bn.r,Bn.g,Bn.b,$n),M.copy(Bn),w=$n),m=O,D=!1}function Gt(O,le){O.side===Xi?de(n.CULL_FACE):xe(n.CULL_FACE);let X=O.side===Oi;le&&(X=!X),Kt(X),O.blending===Yc&&O.transparent===!1?Mn(Mo):Mn(O.blending,O.blendEquation,O.blendSrc,O.blendDst,O.blendEquationAlpha,O.blendSrcAlpha,O.blendDstAlpha,O.blendColor,O.blendAlpha,O.premultipliedAlpha),s.setFunc(O.depthFunc),s.setTest(O.depthTest),s.setMask(O.depthWrite),r.setMask(O.colorWrite);let Z=O.stencilWrite;o.setTest(Z),Z&&(o.setMask(O.stencilWriteMask),o.setFunc(O.stencilFunc,O.stencilRef,O.stencilFuncMask),o.setOp(O.stencilFail,O.stencilZFail,O.stencilZPass)),tt(O.polygonOffset,O.polygonOffsetFactor,O.polygonOffsetUnits),O.alphaToCoverage===!0?xe(n.SAMPLE_ALPHA_TO_COVERAGE):de(n.SAMPLE_ALPHA_TO_COVERAGE)}function Kt(O){I!==O&&(O?n.frontFace(n.CW):n.frontFace(n.CCW),I=O)}function ke(O){O!==bH?(xe(n.CULL_FACE),O!==y&&(O===JD?n.cullFace(n.BACK):O===TH?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):de(n.CULL_FACE),y=O}function wn(O){O!==b&&(q&&n.lineWidth(O),b=O)}function tt(O,le,X){O?(xe(n.POLYGON_OFFSET_FILL),(Q!==le||U!==X)&&(n.polygonOffset(le,X),Q=le,U=X)):de(n.POLYGON_OFFSET_FILL)}function at(O){O?xe(n.SCISSOR_TEST):de(n.SCISSOR_TEST)}function B(O){O===void 0&&(O=n.TEXTURE0+z-1),L!==O&&(n.activeTexture(O),L=O)}function v(O,le,X){X===void 0&&(L===null?X=n.TEXTURE0+z-1:X=L);let Z=Y[X];Z===void 0&&(Z={type:void 0,texture:void 0},Y[X]=Z),(Z.type!==O||Z.texture!==le)&&(L!==X&&(n.activeTexture(X),L=X),n.bindTexture(O,le||se[O]),Z.type=O,Z.texture=le)}function J(){let O=Y[L];O!==void 0&&O.type!==void 0&&(n.bindTexture(O.type,null),O.type=void 0,O.texture=void 0)}function ne(){try{n.compressedTexImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ie(){try{n.compressedTexImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ee(){try{n.texSubImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function He(){try{n.texSubImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function me(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ve(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ht(){try{n.texStorage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function ce(){try{n.texStorage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function Ee(){try{n.texImage2D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function vt(){try{n.texImage3D.apply(n,arguments)}catch(O){console.error("THREE.WebGLState:",O)}}function $e(O){ye.equals(O)===!1&&(n.scissor(O.x,O.y,O.z,O.w),ye.copy(O))}function Me(O){Ge.equals(O)===!1&&(n.viewport(O.x,O.y,O.z,O.w),Ge.copy(O))}function nt(O,le){let X=c.get(le);X===void 0&&(X=new WeakMap,c.set(le,X));let Z=X.get(O);Z===void 0&&(Z=n.getUniformBlockIndex(le,O.name),X.set(O,Z))}function Ct(O,le){let Z=c.get(le).get(O);a.get(le)!==Z&&(n.uniformBlockBinding(le,Z,O.__bindingPointIndex),a.set(le,Z))}function cn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),l={},L=null,Y={},u={},d=new WeakMap,h=[],f=null,p=!1,m=null,A=null,g=null,E=null,_=null,C=null,T=null,M=new be(0,0,0),w=0,D=!1,I=null,y=null,b=null,Q=null,U=null,ye.set(0,0,n.canvas.width,n.canvas.height),Ge.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:xe,disable:de,bindFramebuffer:Qe,drawBuffers:Ue,useProgram:ot,setBlending:Mn,setMaterial:Gt,setFlipSided:Kt,setCullFace:ke,setLineWidth:wn,setPolygonOffset:tt,setScissorTest:at,activeTexture:B,bindTexture:v,unbindTexture:J,compressedTexImage2D:ne,compressedTexImage3D:ie,texImage2D:Ee,texImage3D:vt,updateUBOMapping:nt,uniformBlockBinding:Ct,texStorage2D:ht,texStorage3D:ce,texSubImage2D:ee,texSubImage3D:He,compressedTexSubImage2D:me,compressedTexSubImage3D:ve,scissor:$e,viewport:Me,reset:cn}}function jb(n,e,t,i){let r=bz(i);switch(t){case mT:return n*e;case CT:return n*e;case yT:return n*e*2;case zs:return n*e/r.components*r.byteLength;case zE:return n*e/r.components*r.byteLength;case Po:return n*e*2/r.components*r.byteLength;case KE:return n*e*2/r.components*r.byteLength;case _T:return n*e*3/r.components*r.byteLength;case Vn:return n*e*4/r.components*r.byteLength;case WE:return n*e*4/r.components*r.byteLength;case eA:case $c:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case tA:case Zc:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Wy:case jy:return Math.max(n,16)*Math.max(e,8)/4;case dd:case hd:return Math.max(n,8)*Math.max(e,8)/2;case fd:case pd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ad:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case gd:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Jy:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case qy:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Yy:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case al:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Xy:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case $y:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Zy:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case eE:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case tE:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case nE:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case iE:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case rE:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case sE:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case el:case oE:case aE:return Math.ceil(n/4)*Math.ceil(e/4)*16;case ET:case cE:return Math.ceil(n/4)*Math.ceil(e/4)*8;case lE:case uE:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function bz(n){switch(n){case xn:case pT:return{byteLength:1,components:1};case ud:case AT:case yi:return{byteLength:2,components:1};case VE:case QE:return{byteLength:2,components:4};case Ea:case HE:case Pn:return{byteLength:4,components:1};case gT:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}function Tz(n,e,t,i,r,s,o){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new we,u=new WeakMap,d,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(B,v){return f?new OffscreenCanvas(B,v):md("canvas")}function m(B,v,J){let ne=1,ie=at(B);if((ie.width>J||ie.height>J)&&(ne=J/Math.max(ie.width,ie.height)),ne<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){let ee=Math.floor(ne*ie.width),He=Math.floor(ne*ie.height);d===void 0&&(d=p(ee,He));let me=v?p(ee,He):d;return me.width=ee,me.height=He,me.getContext("2d").drawImage(B,0,0,ee,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ie.width+"x"+ie.height+") to ("+ee+"x"+He+")."),me}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ie.width+"x"+ie.height+")."),B;return B}function A(B){return B.generateMipmaps&&B.minFilter!==on&&B.minFilter!==hn}function g(B){n.generateMipmap(B)}function E(B,v,J,ne,ie=!1){if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let ee=v;if(v===n.RED&&(J===n.FLOAT&&(ee=n.R32F),J===n.HALF_FLOAT&&(ee=n.R16F),J===n.UNSIGNED_BYTE&&(ee=n.R8)),v===n.RED_INTEGER&&(J===n.UNSIGNED_BYTE&&(ee=n.R8UI),J===n.UNSIGNED_SHORT&&(ee=n.R16UI),J===n.UNSIGNED_INT&&(ee=n.R32UI),J===n.BYTE&&(ee=n.R8I),J===n.SHORT&&(ee=n.R16I),J===n.INT&&(ee=n.R32I)),v===n.RG&&(J===n.FLOAT&&(ee=n.RG32F),J===n.HALF_FLOAT&&(ee=n.RG16F),J===n.UNSIGNED_BYTE&&(ee=n.RG8)),v===n.RG_INTEGER&&(J===n.UNSIGNED_BYTE&&(ee=n.RG8UI),J===n.UNSIGNED_SHORT&&(ee=n.RG16UI),J===n.UNSIGNED_INT&&(ee=n.RG32UI),J===n.BYTE&&(ee=n.RG8I),J===n.SHORT&&(ee=n.RG16I),J===n.INT&&(ee=n.RG32I)),v===n.RGB&&J===n.UNSIGNED_INT_5_9_9_9_REV&&(ee=n.RGB9_E5),v===n.RGBA){let He=ie?iA:wt.getTransfer(ne);J===n.FLOAT&&(ee=n.RGBA32F),J===n.HALF_FLOAT&&(ee=n.RGBA16F),J===n.UNSIGNED_BYTE&&(ee=He===nn?n.SRGB8_ALPHA8:n.RGBA8),J===n.UNSIGNED_SHORT_4_4_4_4&&(ee=n.RGBA4),J===n.UNSIGNED_SHORT_5_5_5_1&&(ee=n.RGB5_A1)}return(ee===n.R16F||ee===n.R32F||ee===n.RG16F||ee===n.RG32F||ee===n.RGBA16F||ee===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ee}function _(B,v){let J;return B?v===null||v===Ea||v===sl?J=n.DEPTH24_STENCIL8:v===Pn?J=n.DEPTH32F_STENCIL8:v===ud&&(J=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):v===null||v===Ea||v===sl?J=n.DEPTH_COMPONENT24:v===Pn?J=n.DEPTH_COMPONENT32F:v===ud&&(J=n.DEPTH_COMPONENT16),J}function C(B,v){return A(B)===!0||B.isFramebufferTexture&&B.minFilter!==on&&B.minFilter!==hn?Math.log2(Math.max(v.width,v.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?v.mipmaps.length:1}function T(B){let v=B.target;v.removeEventListener("dispose",T),w(v),v.isVideoTexture&&u.delete(v)}function M(B){let v=B.target;v.removeEventListener("dispose",M),I(v)}function w(B){let v=i.get(B);if(v.__webglInit===void 0)return;let J=B.source,ne=h.get(J);if(ne){let ie=ne[v.__cacheKey];ie.usedTimes--,ie.usedTimes===0&&D(B),Object.keys(ne).length===0&&h.delete(J)}i.remove(B)}function D(B){let v=i.get(B);n.deleteTexture(v.__webglTexture);let J=B.source,ne=h.get(J);delete ne[v.__cacheKey],o.memory.textures--}function I(B){let v=i.get(B);if(B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let ne=0;ne<6;ne++){if(Array.isArray(v.__webglFramebuffer[ne]))for(let ie=0;ie<v.__webglFramebuffer[ne].length;ie++)n.deleteFramebuffer(v.__webglFramebuffer[ne][ie]);else n.deleteFramebuffer(v.__webglFramebuffer[ne]);v.__webglDepthbuffer&&n.deleteRenderbuffer(v.__webglDepthbuffer[ne])}else{if(Array.isArray(v.__webglFramebuffer))for(let ne=0;ne<v.__webglFramebuffer.length;ne++)n.deleteFramebuffer(v.__webglFramebuffer[ne]);else n.deleteFramebuffer(v.__webglFramebuffer);if(v.__webglDepthbuffer&&n.deleteRenderbuffer(v.__webglDepthbuffer),v.__webglMultisampledFramebuffer&&n.deleteFramebuffer(v.__webglMultisampledFramebuffer),v.__webglColorRenderbuffer)for(let ne=0;ne<v.__webglColorRenderbuffer.length;ne++)v.__webglColorRenderbuffer[ne]&&n.deleteRenderbuffer(v.__webglColorRenderbuffer[ne]);v.__webglDepthRenderbuffer&&n.deleteRenderbuffer(v.__webglDepthRenderbuffer)}let J=B.textures;for(let ne=0,ie=J.length;ne<ie;ne++){let ee=i.get(J[ne]);ee.__webglTexture&&(n.deleteTexture(ee.__webglTexture),o.memory.textures--),i.remove(J[ne])}i.remove(B)}let y=0;function b(){y=0}function Q(){let B=y;return B>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+r.maxTextures),y+=1,B}function U(B){let v=[];return v.push(B.wrapS),v.push(B.wrapT),v.push(B.wrapR||0),v.push(B.magFilter),v.push(B.minFilter),v.push(B.anisotropy),v.push(B.internalFormat),v.push(B.format),v.push(B.type),v.push(B.generateMipmaps),v.push(B.premultiplyAlpha),v.push(B.flipY),v.push(B.unpackAlignment),v.push(B.colorSpace),v.join()}function z(B,v){let J=i.get(B);if(B.isVideoTexture&&wn(B),B.isRenderTargetTexture===!1&&B.version>0&&J.__version!==B.version){let ne=B.image;if(ne===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ne.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ge(J,B,v);return}}t.bindTexture(n.TEXTURE_2D,J.__webglTexture,n.TEXTURE0+v)}function q(B,v){let J=i.get(B);if(B.version>0&&J.__version!==B.version){Ge(J,B,v);return}t.bindTexture(n.TEXTURE_2D_ARRAY,J.__webglTexture,n.TEXTURE0+v)}function R(B,v){let J=i.get(B);if(B.version>0&&J.__version!==B.version){Ge(J,B,v);return}t.bindTexture(n.TEXTURE_3D,J.__webglTexture,n.TEXTURE0+v)}function N(B,v){let J=i.get(B);if(B.version>0&&J.__version!==B.version){j(J,B,v);return}t.bindTexture(n.TEXTURE_CUBE_MAP,J.__webglTexture,n.TEXTURE0+v)}let L={[ya]:n.REPEAT,[Ar]:n.CLAMP_TO_EDGE,[ds]:n.MIRRORED_REPEAT},Y={[on]:n.NEAREST,[GE]:n.NEAREST_MIPMAP_NEAREST,[jc]:n.NEAREST_MIPMAP_LINEAR,[hn]:n.LINEAR,[od]:n.LINEAR_MIPMAP_NEAREST,[$i]:n.LINEAR_MIPMAP_LINEAR},te={[_V]:n.NEVER,[SV]:n.ALWAYS,[CV]:n.LESS,[IT]:n.LEQUAL,[yV]:n.EQUAL,[IV]:n.GEQUAL,[EV]:n.GREATER,[vV]:n.NOTEQUAL};function fe(B,v){if(v.type===Pn&&e.has("OES_texture_float_linear")===!1&&(v.magFilter===hn||v.magFilter===od||v.magFilter===jc||v.magFilter===$i||v.minFilter===hn||v.minFilter===od||v.minFilter===jc||v.minFilter===$i)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(B,n.TEXTURE_WRAP_S,L[v.wrapS]),n.texParameteri(B,n.TEXTURE_WRAP_T,L[v.wrapT]),(B===n.TEXTURE_3D||B===n.TEXTURE_2D_ARRAY)&&n.texParameteri(B,n.TEXTURE_WRAP_R,L[v.wrapR]),n.texParameteri(B,n.TEXTURE_MAG_FILTER,Y[v.magFilter]),n.texParameteri(B,n.TEXTURE_MIN_FILTER,Y[v.minFilter]),v.compareFunction&&(n.texParameteri(B,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(B,n.TEXTURE_COMPARE_FUNC,te[v.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(v.magFilter===on||v.minFilter!==jc&&v.minFilter!==$i||v.type===Pn&&e.has("OES_texture_float_linear")===!1)return;if(v.anisotropy>1||i.get(v).__currentAnisotropy){let J=e.get("EXT_texture_filter_anisotropic");n.texParameterf(B,J.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(v.anisotropy,r.getMaxAnisotropy())),i.get(v).__currentAnisotropy=v.anisotropy}}}function ye(B,v){let J=!1;B.__webglInit===void 0&&(B.__webglInit=!0,v.addEventListener("dispose",T));let ne=v.source,ie=h.get(ne);ie===void 0&&(ie={},h.set(ne,ie));let ee=U(v);if(ee!==B.__cacheKey){ie[ee]===void 0&&(ie[ee]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,J=!0),ie[ee].usedTimes++;let He=ie[B.__cacheKey];He!==void 0&&(ie[B.__cacheKey].usedTimes--,He.usedTimes===0&&D(v)),B.__cacheKey=ee,B.__webglTexture=ie[ee].texture}return J}function Ge(B,v,J){let ne=n.TEXTURE_2D;(v.isDataArrayTexture||v.isCompressedArrayTexture)&&(ne=n.TEXTURE_2D_ARRAY),v.isData3DTexture&&(ne=n.TEXTURE_3D);let ie=ye(B,v),ee=v.source;t.bindTexture(ne,B.__webglTexture,n.TEXTURE0+J);let He=i.get(ee);if(ee.version!==He.__version||ie===!0){t.activeTexture(n.TEXTURE0+J);let me=wt.getPrimaries(wt.workingColorSpace),ve=v.colorSpace===Gr?null:wt.getPrimaries(v.colorSpace),ht=v.colorSpace===Gr||me===ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,v.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,v.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ht);let ce=m(v.image,!1,r.maxTextureSize);ce=tt(v,ce);let Ee=s.convert(v.format,v.colorSpace),vt=s.convert(v.type),$e=E(v.internalFormat,Ee,vt,v.colorSpace,v.isVideoTexture);fe(ne,v);let Me,nt=v.mipmaps,Ct=v.isVideoTexture!==!0,cn=He.__version===void 0||ie===!0,O=ee.dataReady,le=C(v,ce);if(v.isDepthTexture)$e=_(v.format===ol,v.type),cn&&(Ct?t.texStorage2D(n.TEXTURE_2D,1,$e,ce.width,ce.height):t.texImage2D(n.TEXTURE_2D,0,$e,ce.width,ce.height,0,Ee,vt,null));else if(v.isDataTexture)if(nt.length>0){Ct&&cn&&t.texStorage2D(n.TEXTURE_2D,le,$e,nt[0].width,nt[0].height);for(let X=0,Z=nt.length;X<Z;X++)Me=nt[X],Ct?O&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,Me.width,Me.height,Ee,vt,Me.data):t.texImage2D(n.TEXTURE_2D,X,$e,Me.width,Me.height,0,Ee,vt,Me.data);v.generateMipmaps=!1}else Ct?(cn&&t.texStorage2D(n.TEXTURE_2D,le,$e,ce.width,ce.height),O&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ce.width,ce.height,Ee,vt,ce.data)):t.texImage2D(n.TEXTURE_2D,0,$e,ce.width,ce.height,0,Ee,vt,ce.data);else if(v.isCompressedTexture)if(v.isCompressedArrayTexture){Ct&&cn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,le,$e,nt[0].width,nt[0].height,ce.depth);for(let X=0,Z=nt.length;X<Z;X++)if(Me=nt[X],v.format!==Vn)if(Ee!==null)if(Ct){if(O)if(v.layerUpdates.size>0){let he=jb(Me.width,Me.height,v.format,v.type);for(let We of v.layerUpdates){let Mt=Me.data.subarray(We*he/Me.data.BYTES_PER_ELEMENT,(We+1)*he/Me.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,We,Me.width,Me.height,1,Ee,Mt,0,0)}v.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,0,Me.width,Me.height,ce.depth,Ee,Me.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,X,$e,Me.width,Me.height,ce.depth,0,Me.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ct?O&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,X,0,0,0,Me.width,Me.height,ce.depth,Ee,vt,Me.data):t.texImage3D(n.TEXTURE_2D_ARRAY,X,$e,Me.width,Me.height,ce.depth,0,Ee,vt,Me.data)}else{Ct&&cn&&t.texStorage2D(n.TEXTURE_2D,le,$e,nt[0].width,nt[0].height);for(let X=0,Z=nt.length;X<Z;X++)Me=nt[X],v.format!==Vn?Ee!==null?Ct?O&&t.compressedTexSubImage2D(n.TEXTURE_2D,X,0,0,Me.width,Me.height,Ee,Me.data):t.compressedTexImage2D(n.TEXTURE_2D,X,$e,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ct?O&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,Me.width,Me.height,Ee,vt,Me.data):t.texImage2D(n.TEXTURE_2D,X,$e,Me.width,Me.height,0,Ee,vt,Me.data)}else if(v.isDataArrayTexture)if(Ct){if(cn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,le,$e,ce.width,ce.height,ce.depth),O)if(v.layerUpdates.size>0){let X=jb(ce.width,ce.height,v.format,v.type);for(let Z of v.layerUpdates){let he=ce.data.subarray(Z*X/ce.data.BYTES_PER_ELEMENT,(Z+1)*X/ce.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Z,ce.width,ce.height,1,Ee,vt,he)}v.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ce.width,ce.height,ce.depth,Ee,vt,ce.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,$e,ce.width,ce.height,ce.depth,0,Ee,vt,ce.data);else if(v.isData3DTexture)Ct?(cn&&t.texStorage3D(n.TEXTURE_3D,le,$e,ce.width,ce.height,ce.depth),O&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ce.width,ce.height,ce.depth,Ee,vt,ce.data)):t.texImage3D(n.TEXTURE_3D,0,$e,ce.width,ce.height,ce.depth,0,Ee,vt,ce.data);else if(v.isFramebufferTexture){if(cn)if(Ct)t.texStorage2D(n.TEXTURE_2D,le,$e,ce.width,ce.height);else{let X=ce.width,Z=ce.height;for(let he=0;he<le;he++)t.texImage2D(n.TEXTURE_2D,he,$e,X,Z,0,Ee,vt,null),X>>=1,Z>>=1}}else if(nt.length>0){if(Ct&&cn){let X=at(nt[0]);t.texStorage2D(n.TEXTURE_2D,le,$e,X.width,X.height)}for(let X=0,Z=nt.length;X<Z;X++)Me=nt[X],Ct?O&&t.texSubImage2D(n.TEXTURE_2D,X,0,0,Ee,vt,Me):t.texImage2D(n.TEXTURE_2D,X,$e,Ee,vt,Me);v.generateMipmaps=!1}else if(Ct){if(cn){let X=at(ce);t.texStorage2D(n.TEXTURE_2D,le,$e,X.width,X.height)}O&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ee,vt,ce)}else t.texImage2D(n.TEXTURE_2D,0,$e,Ee,vt,ce);A(v)&&g(ne),He.__version=ee.version,v.onUpdate&&v.onUpdate(v)}B.__version=v.version}function j(B,v,J){if(v.image.length!==6)return;let ne=ye(B,v),ie=v.source;t.bindTexture(n.TEXTURE_CUBE_MAP,B.__webglTexture,n.TEXTURE0+J);let ee=i.get(ie);if(ie.version!==ee.__version||ne===!0){t.activeTexture(n.TEXTURE0+J);let He=wt.getPrimaries(wt.workingColorSpace),me=v.colorSpace===Gr?null:wt.getPrimaries(v.colorSpace),ve=v.colorSpace===Gr||He===me?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,v.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,v.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ve);let ht=v.isCompressedTexture||v.image[0].isCompressedTexture,ce=v.image[0]&&v.image[0].isDataTexture,Ee=[];for(let Z=0;Z<6;Z++)!ht&&!ce?Ee[Z]=m(v.image[Z],!0,r.maxCubemapSize):Ee[Z]=ce?v.image[Z].image:v.image[Z],Ee[Z]=tt(v,Ee[Z]);let vt=Ee[0],$e=s.convert(v.format,v.colorSpace),Me=s.convert(v.type),nt=E(v.internalFormat,$e,Me,v.colorSpace),Ct=v.isVideoTexture!==!0,cn=ee.__version===void 0||ne===!0,O=ie.dataReady,le=C(v,vt);fe(n.TEXTURE_CUBE_MAP,v);let X;if(ht){Ct&&cn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,le,nt,vt.width,vt.height);for(let Z=0;Z<6;Z++){X=Ee[Z].mipmaps;for(let he=0;he<X.length;he++){let We=X[he];v.format!==Vn?$e!==null?Ct?O&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,he,0,0,We.width,We.height,$e,We.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,he,nt,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ct?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,he,0,0,We.width,We.height,$e,Me,We.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,he,nt,We.width,We.height,0,$e,Me,We.data)}}}else{if(X=v.mipmaps,Ct&&cn){X.length>0&&le++;let Z=at(Ee[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,le,nt,Z.width,Z.height)}for(let Z=0;Z<6;Z++)if(ce){Ct?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,0,0,0,Ee[Z].width,Ee[Z].height,$e,Me,Ee[Z].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,0,nt,Ee[Z].width,Ee[Z].height,0,$e,Me,Ee[Z].data);for(let he=0;he<X.length;he++){let Mt=X[he].image[Z].image;Ct?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,he+1,0,0,Mt.width,Mt.height,$e,Me,Mt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,he+1,nt,Mt.width,Mt.height,0,$e,Me,Mt.data)}}else{Ct?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,0,0,0,$e,Me,Ee[Z]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,0,nt,$e,Me,Ee[Z]);for(let he=0;he<X.length;he++){let We=X[he];Ct?O&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,he+1,0,0,$e,Me,We.image[Z]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Z,he+1,nt,$e,Me,We.image[Z])}}}A(v)&&g(n.TEXTURE_CUBE_MAP),ee.__version=ie.version,v.onUpdate&&v.onUpdate(v)}B.__version=v.version}function se(B,v,J,ne,ie,ee){let He=s.convert(J.format,J.colorSpace),me=s.convert(J.type),ve=E(J.internalFormat,He,me,J.colorSpace);if(!i.get(v).__hasExternalTextures){let ce=Math.max(1,v.width>>ee),Ee=Math.max(1,v.height>>ee);ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY?t.texImage3D(ie,ee,ve,ce,Ee,v.depth,0,He,me,null):t.texImage2D(ie,ee,ve,ce,Ee,0,He,me,null)}t.bindFramebuffer(n.FRAMEBUFFER,B),ke(v)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ne,ie,i.get(J).__webglTexture,0,Kt(v)):(ie===n.TEXTURE_2D||ie>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ie<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ne,ie,i.get(J).__webglTexture,ee),t.bindFramebuffer(n.FRAMEBUFFER,null)}function xe(B,v,J){if(n.bindRenderbuffer(n.RENDERBUFFER,B),v.depthBuffer){let ne=v.depthTexture,ie=ne&&ne.isDepthTexture?ne.type:null,ee=_(v.stencilBuffer,ie),He=v.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,me=Kt(v);ke(v)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,me,ee,v.width,v.height):J?n.renderbufferStorageMultisample(n.RENDERBUFFER,me,ee,v.width,v.height):n.renderbufferStorage(n.RENDERBUFFER,ee,v.width,v.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,He,n.RENDERBUFFER,B)}else{let ne=v.textures;for(let ie=0;ie<ne.length;ie++){let ee=ne[ie],He=s.convert(ee.format,ee.colorSpace),me=s.convert(ee.type),ve=E(ee.internalFormat,He,me,ee.colorSpace),ht=Kt(v);J&&ke(v)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ht,ve,v.width,v.height):ke(v)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ht,ve,v.width,v.height):n.renderbufferStorage(n.RENDERBUFFER,ve,v.width,v.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function de(B,v){if(v&&v.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,B),!(v.depthTexture&&v.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(v.depthTexture).__webglTexture||v.depthTexture.image.width!==v.width||v.depthTexture.image.height!==v.height)&&(v.depthTexture.image.width=v.width,v.depthTexture.image.height=v.height,v.depthTexture.needsUpdate=!0),z(v.depthTexture,0);let ne=i.get(v.depthTexture).__webglTexture,ie=Kt(v);if(v.depthTexture.format===Xc)ke(v)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ne,0,ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ne,0);else if(v.depthTexture.format===ol)ke(v)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ne,0,ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ne,0);else throw new Error("Unknown depthTexture format")}function Qe(B){let v=i.get(B),J=B.isWebGLCubeRenderTarget===!0;if(B.depthTexture&&!v.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");de(v.__webglFramebuffer,B)}else if(J){v.__webglDepthbuffer=[];for(let ne=0;ne<6;ne++)t.bindFramebuffer(n.FRAMEBUFFER,v.__webglFramebuffer[ne]),v.__webglDepthbuffer[ne]=n.createRenderbuffer(),xe(v.__webglDepthbuffer[ne],B,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,v.__webglFramebuffer),v.__webglDepthbuffer=n.createRenderbuffer(),xe(v.__webglDepthbuffer,B,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(B,v,J){let ne=i.get(B);v!==void 0&&se(ne.__webglFramebuffer,B,B.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),J!==void 0&&Qe(B)}function ot(B){let v=B.texture,J=i.get(B),ne=i.get(v);B.addEventListener("dispose",M);let ie=B.textures,ee=B.isWebGLCubeRenderTarget===!0,He=ie.length>1;if(He||(ne.__webglTexture===void 0&&(ne.__webglTexture=n.createTexture()),ne.__version=v.version,o.memory.textures++),ee){J.__webglFramebuffer=[];for(let me=0;me<6;me++)if(v.mipmaps&&v.mipmaps.length>0){J.__webglFramebuffer[me]=[];for(let ve=0;ve<v.mipmaps.length;ve++)J.__webglFramebuffer[me][ve]=n.createFramebuffer()}else J.__webglFramebuffer[me]=n.createFramebuffer()}else{if(v.mipmaps&&v.mipmaps.length>0){J.__webglFramebuffer=[];for(let me=0;me<v.mipmaps.length;me++)J.__webglFramebuffer[me]=n.createFramebuffer()}else J.__webglFramebuffer=n.createFramebuffer();if(He)for(let me=0,ve=ie.length;me<ve;me++){let ht=i.get(ie[me]);ht.__webglTexture===void 0&&(ht.__webglTexture=n.createTexture(),o.memory.textures++)}if(B.samples>0&&ke(B)===!1){J.__webglMultisampledFramebuffer=n.createFramebuffer(),J.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,J.__webglMultisampledFramebuffer);for(let me=0;me<ie.length;me++){let ve=ie[me];J.__webglColorRenderbuffer[me]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,J.__webglColorRenderbuffer[me]);let ht=s.convert(ve.format,ve.colorSpace),ce=s.convert(ve.type),Ee=E(ve.internalFormat,ht,ce,ve.colorSpace,B.isXRRenderTarget===!0),vt=Kt(B);n.renderbufferStorageMultisample(n.RENDERBUFFER,vt,Ee,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+me,n.RENDERBUFFER,J.__webglColorRenderbuffer[me])}n.bindRenderbuffer(n.RENDERBUFFER,null),B.depthBuffer&&(J.__webglDepthRenderbuffer=n.createRenderbuffer(),xe(J.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ee){t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture),fe(n.TEXTURE_CUBE_MAP,v);for(let me=0;me<6;me++)if(v.mipmaps&&v.mipmaps.length>0)for(let ve=0;ve<v.mipmaps.length;ve++)se(J.__webglFramebuffer[me][ve],B,v,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,ve);else se(J.__webglFramebuffer[me],B,v,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0);A(v)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(He){for(let me=0,ve=ie.length;me<ve;me++){let ht=ie[me],ce=i.get(ht);t.bindTexture(n.TEXTURE_2D,ce.__webglTexture),fe(n.TEXTURE_2D,ht),se(J.__webglFramebuffer,B,ht,n.COLOR_ATTACHMENT0+me,n.TEXTURE_2D,0),A(ht)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let me=n.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(me=B.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(me,ne.__webglTexture),fe(me,v),v.mipmaps&&v.mipmaps.length>0)for(let ve=0;ve<v.mipmaps.length;ve++)se(J.__webglFramebuffer[ve],B,v,n.COLOR_ATTACHMENT0,me,ve);else se(J.__webglFramebuffer,B,v,n.COLOR_ATTACHMENT0,me,0);A(v)&&g(me),t.unbindTexture()}B.depthBuffer&&Qe(B)}function Xt(B){let v=B.textures;for(let J=0,ne=v.length;J<ne;J++){let ie=v[J];if(A(ie)){let ee=B.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,He=i.get(ie).__webglTexture;t.bindTexture(ee,He),g(ee),t.unbindTexture()}}}let P=[],Mn=[];function Gt(B){if(B.samples>0){if(ke(B)===!1){let v=B.textures,J=B.width,ne=B.height,ie=n.COLOR_BUFFER_BIT,ee=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=i.get(B),me=v.length>1;if(me)for(let ve=0;ve<v.length;ve++)t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let ve=0;ve<v.length;ve++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(ie|=n.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(ie|=n.STENCIL_BUFFER_BIT)),me){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,He.__webglColorRenderbuffer[ve]);let ht=i.get(v[ve]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ht,0)}n.blitFramebuffer(0,0,J,ne,0,0,J,ne,ie,n.NEAREST),c===!0&&(P.length=0,Mn.length=0,P.push(n.COLOR_ATTACHMENT0+ve),B.depthBuffer&&B.resolveDepthBuffer===!1&&(P.push(ee),Mn.push(ee),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Mn)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,P))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),me)for(let ve=0;ve<v.length;ve++){t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.RENDERBUFFER,He.__webglColorRenderbuffer[ve]);let ht=i.get(v[ve]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ve,n.TEXTURE_2D,ht,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&c){let v=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[v])}}}function Kt(B){return Math.min(r.maxSamples,B.samples)}function ke(B){let v=i.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&v.__useRenderToTexture!==!1}function wn(B){let v=o.render.frame;u.get(B)!==v&&(u.set(B,v),B.update())}function tt(B,v){let J=B.colorSpace,ne=B.format,ie=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||J!==an&&J!==Gr&&(wt.getTransfer(J)===nn?(ne!==Vn||ie!==xn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",J)),v}function at(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(l.width=B.naturalWidth||B.width,l.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(l.width=B.displayWidth,l.height=B.displayHeight):(l.width=B.width,l.height=B.height),l}this.allocateTextureUnit=Q,this.resetTextureUnits=b,this.setTexture2D=z,this.setTexture2DArray=q,this.setTexture3D=R,this.setTextureCube=N,this.rebindTextures=Ue,this.setupRenderTarget=ot,this.updateRenderTargetMipmap=Xt,this.updateMultisampleRenderTarget=Gt,this.setupDepthRenderbuffer=Qe,this.setupFrameBufferTexture=se,this.useMultisampledRTT=ke}function Rz(n,e){function t(i,r=Gr){let s,o=wt.getTransfer(r);if(i===xn)return n.UNSIGNED_BYTE;if(i===VE)return n.UNSIGNED_SHORT_4_4_4_4;if(i===QE)return n.UNSIGNED_SHORT_5_5_5_1;if(i===gT)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===pT)return n.BYTE;if(i===AT)return n.SHORT;if(i===ud)return n.UNSIGNED_SHORT;if(i===HE)return n.INT;if(i===Ea)return n.UNSIGNED_INT;if(i===Pn)return n.FLOAT;if(i===yi)return n.HALF_FLOAT;if(i===mT)return n.ALPHA;if(i===_T)return n.RGB;if(i===Vn)return n.RGBA;if(i===CT)return n.LUMINANCE;if(i===yT)return n.LUMINANCE_ALPHA;if(i===Xc)return n.DEPTH_COMPONENT;if(i===ol)return n.DEPTH_STENCIL;if(i===zs)return n.RED;if(i===zE)return n.RED_INTEGER;if(i===Po)return n.RG;if(i===KE)return n.RG_INTEGER;if(i===WE)return n.RGBA_INTEGER;if(i===eA||i===$c||i===tA||i===Zc)if(o===nn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===eA)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===$c)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===tA)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Zc)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===eA)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===$c)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===tA)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Zc)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===dd||i===Wy||i===hd||i===jy)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===dd)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Wy)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===hd)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===jy)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===fd||i===pd||i===Ad)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===fd||i===pd)return o===nn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Ad)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===gd||i===Jy||i===qy||i===Yy||i===al||i===Xy||i===$y||i===Zy||i===eE||i===tE||i===nE||i===iE||i===rE||i===sE)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===gd)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Jy)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===qy)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Yy)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===al)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Xy)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===$y)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Zy)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===eE)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===tE)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===nE)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===iE)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===rE)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===sE)return o===nn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===el||i===oE||i===aE)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===el)return o===nn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===oE)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===aE)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===ET||i===cE||i===lE||i===uE)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===el)return s.COMPRESSED_RED_RGTC1_EXT;if(i===cE)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===lE)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===uE)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===sl?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var SE=class extends Hn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},li=class extends xt{constructor(){super(),this.isGroup=!0,this.type="Group"}},Pz={type:"move"},ld=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new li,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new li,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new x,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new x),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new li,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new x,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new x),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null,a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){o=!0;for(let m of e.hand.values()){let A=t.getJointPose(m,i),g=this._getHandJoint(l,m);A!==null&&(g.matrix.fromArray(A.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=A.radius),g.visible=A!==null}let u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,p=.005;l.inputState.pinching&&h>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Pz)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=s!==null),l!==null&&(l.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new li;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},Lz=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Oz=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,xE=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){let r=new fn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new fs({vertexShader:Lz,fragmentShader:Oz,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new $t(new ps(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},ME=class extends Bo{constructor(e,t){super();let i=this,r=null,s=1,o=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,f=null,p=null,m=new xE,A=t.getContextAttributes(),g=null,E=null,_=[],C=[],T=new we,M=null,w=new Hn;w.layers.enable(1),w.viewport=new jt;let D=new Hn;D.layers.enable(2),D.viewport=new jt;let I=[w,D],y=new SE;y.layers.enable(1),y.layers.enable(2);let b=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(j){let se=_[j];return se===void 0&&(se=new ld,_[j]=se),se.getTargetRaySpace()},this.getControllerGrip=function(j){let se=_[j];return se===void 0&&(se=new ld,_[j]=se),se.getGripSpace()},this.getHand=function(j){let se=_[j];return se===void 0&&(se=new ld,_[j]=se),se.getHandSpace()};function U(j){let se=C.indexOf(j.inputSource);if(se===-1)return;let xe=_[se];xe!==void 0&&(xe.update(j.inputSource,j.frame,l||o),xe.dispatchEvent({type:j.type,data:j.inputSource}))}function z(){r.removeEventListener("select",U),r.removeEventListener("selectstart",U),r.removeEventListener("selectend",U),r.removeEventListener("squeeze",U),r.removeEventListener("squeezestart",U),r.removeEventListener("squeezeend",U),r.removeEventListener("end",z),r.removeEventListener("inputsourceschange",q);for(let j=0;j<_.length;j++){let se=C[j];se!==null&&(C[j]=null,_[j].disconnect(se))}b=null,Q=null,m.reset(),e.setRenderTarget(g),f=null,h=null,d=null,r=null,E=null,Ge.stop(),i.isPresenting=!1,e.setPixelRatio(M),e.setSize(T.width,T.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(j){s=j,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(j){a=j,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(j){l=j},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(j){return ct(this,null,function*(){if(r=j,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",U),r.addEventListener("selectstart",U),r.addEventListener("selectend",U),r.addEventListener("squeeze",U),r.addEventListener("squeezestart",U),r.addEventListener("squeezeend",U),r.addEventListener("end",z),r.addEventListener("inputsourceschange",q),A.xrCompatible!==!0&&(yield t.makeXRCompatible()),M=e.getPixelRatio(),e.getSize(T),r.renderState.layers===void 0){let se={antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,se),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),E=new Gs(f.framebufferWidth,f.framebufferHeight,{format:Vn,type:xn,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil})}else{let se=null,xe=null,de=null;A.depth&&(de=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,se=A.stencil?ol:Xc,xe=A.stencil?sl:Ea);let Qe={colorFormat:t.RGBA8,depthFormat:de,scaleFactor:s};d=new XRWebGLBinding(r,t),h=d.createProjectionLayer(Qe),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),E=new Gs(h.textureWidth,h.textureHeight,{format:Vn,type:xn,depthTexture:new fA(h.textureWidth,h.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,se),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(c),l=null,o=yield r.requestReferenceSpace(a),Ge.setContext(r),Ge.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function q(j){for(let se=0;se<j.removed.length;se++){let xe=j.removed[se],de=C.indexOf(xe);de>=0&&(C[de]=null,_[de].disconnect(xe))}for(let se=0;se<j.added.length;se++){let xe=j.added[se],de=C.indexOf(xe);if(de===-1){for(let Ue=0;Ue<_.length;Ue++)if(Ue>=C.length){C.push(xe),de=Ue;break}else if(C[Ue]===null){C[Ue]=xe,de=Ue;break}if(de===-1)break}let Qe=_[de];Qe&&Qe.connect(xe)}}let R=new x,N=new x;function L(j,se,xe){R.setFromMatrixPosition(se.matrixWorld),N.setFromMatrixPosition(xe.matrixWorld);let de=R.distanceTo(N),Qe=se.projectionMatrix.elements,Ue=xe.projectionMatrix.elements,ot=Qe[14]/(Qe[10]-1),Xt=Qe[14]/(Qe[10]+1),P=(Qe[9]+1)/Qe[5],Mn=(Qe[9]-1)/Qe[5],Gt=(Qe[8]-1)/Qe[0],Kt=(Ue[8]+1)/Ue[0],ke=ot*Gt,wn=ot*Kt,tt=de/(-Gt+Kt),at=tt*-Gt;se.matrixWorld.decompose(j.position,j.quaternion,j.scale),j.translateX(at),j.translateZ(tt),j.matrixWorld.compose(j.position,j.quaternion,j.scale),j.matrixWorldInverse.copy(j.matrixWorld).invert();let B=ot+tt,v=Xt+tt,J=ke-at,ne=wn+(de-at),ie=P*Xt/v*B,ee=Mn*Xt/v*B;j.projectionMatrix.makePerspective(J,ne,ie,ee,B,v),j.projectionMatrixInverse.copy(j.projectionMatrix).invert()}function Y(j,se){se===null?j.matrixWorld.copy(j.matrix):j.matrixWorld.multiplyMatrices(se.matrixWorld,j.matrix),j.matrixWorldInverse.copy(j.matrixWorld).invert()}this.updateCamera=function(j){if(r===null)return;m.texture!==null&&(j.near=m.depthNear,j.far=m.depthFar),y.near=D.near=w.near=j.near,y.far=D.far=w.far=j.far,(b!==y.near||Q!==y.far)&&(r.updateRenderState({depthNear:y.near,depthFar:y.far}),b=y.near,Q=y.far,w.near=b,w.far=Q,D.near=b,D.far=Q,w.updateProjectionMatrix(),D.updateProjectionMatrix(),j.updateProjectionMatrix());let se=j.parent,xe=y.cameras;Y(y,se);for(let de=0;de<xe.length;de++)Y(xe[de],se);xe.length===2?L(y,w,D):y.projectionMatrix.copy(w.projectionMatrix),te(j,y,se)};function te(j,se,xe){xe===null?j.matrix.copy(se.matrixWorld):(j.matrix.copy(xe.matrixWorld),j.matrix.invert(),j.matrix.multiply(se.matrixWorld)),j.matrix.decompose(j.position,j.quaternion,j.scale),j.updateMatrixWorld(!0),j.projectionMatrix.copy(se.projectionMatrix),j.projectionMatrixInverse.copy(se.projectionMatrixInverse),j.isPerspectiveCamera&&(j.fov=ul*2*Math.atan(1/j.projectionMatrix.elements[5]),j.zoom=1)}this.getCamera=function(){return y},this.getFoveation=function(){if(!(h===null&&f===null))return c},this.setFoveation=function(j){c=j,h!==null&&(h.fixedFoveation=j),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=j)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(y)};let fe=null;function ye(j,se){if(u=se.getViewerPose(l||o),p=se,u!==null){let xe=u.views;f!==null&&(e.setRenderTargetFramebuffer(E,f.framebuffer),e.setRenderTarget(E));let de=!1;xe.length!==y.cameras.length&&(y.cameras.length=0,de=!0);for(let Ue=0;Ue<xe.length;Ue++){let ot=xe[Ue],Xt=null;if(f!==null)Xt=f.getViewport(ot);else{let Mn=d.getViewSubImage(h,ot);Xt=Mn.viewport,Ue===0&&(e.setRenderTargetTextures(E,Mn.colorTexture,h.ignoreDepthValues?void 0:Mn.depthStencilTexture),e.setRenderTarget(E))}let P=I[Ue];P===void 0&&(P=new Hn,P.layers.enable(Ue),P.viewport=new jt,I[Ue]=P),P.matrix.fromArray(ot.transform.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale),P.projectionMatrix.fromArray(ot.projectionMatrix),P.projectionMatrixInverse.copy(P.projectionMatrix).invert(),P.viewport.set(Xt.x,Xt.y,Xt.width,Xt.height),Ue===0&&(y.matrix.copy(P.matrix),y.matrix.decompose(y.position,y.quaternion,y.scale)),de===!0&&y.cameras.push(P)}let Qe=r.enabledFeatures;if(Qe&&Qe.includes("depth-sensing")){let Ue=d.getDepthInformation(xe[0]);Ue&&Ue.isValid&&Ue.texture&&m.init(e,Ue,r.renderState)}}for(let xe=0;xe<_.length;xe++){let de=C[xe],Qe=_[xe];de!==null&&Qe!==void 0&&Qe.update(de,se,l||o)}fe&&fe(j,se),se.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:se}),p=null}let Ge=new DT;Ge.setAnimationLoop(ye),this.setAnimationLoop=function(j){fe=j},this.dispose=function(){}}},Aa=new hs,Nz=new mt;function Fz(n,e){function t(A,g){A.matrixAutoUpdate===!0&&A.updateMatrix(),g.value.copy(A.matrix)}function i(A,g){g.color.getRGB(A.fogColor.value,BT(n)),g.isFog?(A.fogNear.value=g.near,A.fogFar.value=g.far):g.isFogExp2&&(A.fogDensity.value=g.density)}function r(A,g,E,_,C){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(A,g):g.isMeshToonMaterial?(s(A,g),d(A,g)):g.isMeshPhongMaterial?(s(A,g),u(A,g)):g.isMeshStandardMaterial?(s(A,g),h(A,g),g.isMeshPhysicalMaterial&&f(A,g,C)):g.isMeshMatcapMaterial?(s(A,g),p(A,g)):g.isMeshDepthMaterial?s(A,g):g.isMeshDistanceMaterial?(s(A,g),m(A,g)):g.isMeshNormalMaterial?s(A,g):g.isLineBasicMaterial?(o(A,g),g.isLineDashedMaterial&&a(A,g)):g.isPointsMaterial?c(A,g,E,_):g.isSpriteMaterial?l(A,g):g.isShadowMaterial?(A.color.value.copy(g.color),A.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(A,g){A.opacity.value=g.opacity,g.color&&A.diffuse.value.copy(g.color),g.emissive&&A.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(A.map.value=g.map,t(g.map,A.mapTransform)),g.alphaMap&&(A.alphaMap.value=g.alphaMap,t(g.alphaMap,A.alphaMapTransform)),g.bumpMap&&(A.bumpMap.value=g.bumpMap,t(g.bumpMap,A.bumpMapTransform),A.bumpScale.value=g.bumpScale,g.side===Oi&&(A.bumpScale.value*=-1)),g.normalMap&&(A.normalMap.value=g.normalMap,t(g.normalMap,A.normalMapTransform),A.normalScale.value.copy(g.normalScale),g.side===Oi&&A.normalScale.value.negate()),g.displacementMap&&(A.displacementMap.value=g.displacementMap,t(g.displacementMap,A.displacementMapTransform),A.displacementScale.value=g.displacementScale,A.displacementBias.value=g.displacementBias),g.emissiveMap&&(A.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,A.emissiveMapTransform)),g.specularMap&&(A.specularMap.value=g.specularMap,t(g.specularMap,A.specularMapTransform)),g.alphaTest>0&&(A.alphaTest.value=g.alphaTest);let E=e.get(g),_=E.envMap,C=E.envMapRotation;_&&(A.envMap.value=_,Aa.copy(C),Aa.x*=-1,Aa.y*=-1,Aa.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(Aa.y*=-1,Aa.z*=-1),A.envMapRotation.value.setFromMatrix4(Nz.makeRotationFromEuler(Aa)),A.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,A.reflectivity.value=g.reflectivity,A.ior.value=g.ior,A.refractionRatio.value=g.refractionRatio),g.lightMap&&(A.lightMap.value=g.lightMap,A.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,A.lightMapTransform)),g.aoMap&&(A.aoMap.value=g.aoMap,A.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,A.aoMapTransform))}function o(A,g){A.diffuse.value.copy(g.color),A.opacity.value=g.opacity,g.map&&(A.map.value=g.map,t(g.map,A.mapTransform))}function a(A,g){A.dashSize.value=g.dashSize,A.totalSize.value=g.dashSize+g.gapSize,A.scale.value=g.scale}function c(A,g,E,_){A.diffuse.value.copy(g.color),A.opacity.value=g.opacity,A.size.value=g.size*E,A.scale.value=_*.5,g.map&&(A.map.value=g.map,t(g.map,A.uvTransform)),g.alphaMap&&(A.alphaMap.value=g.alphaMap,t(g.alphaMap,A.alphaMapTransform)),g.alphaTest>0&&(A.alphaTest.value=g.alphaTest)}function l(A,g){A.diffuse.value.copy(g.color),A.opacity.value=g.opacity,A.rotation.value=g.rotation,g.map&&(A.map.value=g.map,t(g.map,A.mapTransform)),g.alphaMap&&(A.alphaMap.value=g.alphaMap,t(g.alphaMap,A.alphaMapTransform)),g.alphaTest>0&&(A.alphaTest.value=g.alphaTest)}function u(A,g){A.specular.value.copy(g.specular),A.shininess.value=Math.max(g.shininess,1e-4)}function d(A,g){g.gradientMap&&(A.gradientMap.value=g.gradientMap)}function h(A,g){A.metalness.value=g.metalness,g.metalnessMap&&(A.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,A.metalnessMapTransform)),A.roughness.value=g.roughness,g.roughnessMap&&(A.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,A.roughnessMapTransform)),g.envMap&&(A.envMapIntensity.value=g.envMapIntensity)}function f(A,g,E){A.ior.value=g.ior,g.sheen>0&&(A.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),A.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(A.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,A.sheenColorMapTransform)),g.sheenRoughnessMap&&(A.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,A.sheenRoughnessMapTransform))),g.clearcoat>0&&(A.clearcoat.value=g.clearcoat,A.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(A.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,A.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(A.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Oi&&A.clearcoatNormalScale.value.negate())),g.dispersion>0&&(A.dispersion.value=g.dispersion),g.iridescence>0&&(A.iridescence.value=g.iridescence,A.iridescenceIOR.value=g.iridescenceIOR,A.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(A.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,A.iridescenceMapTransform)),g.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),g.transmission>0&&(A.transmission.value=g.transmission,A.transmissionSamplerMap.value=E.texture,A.transmissionSamplerSize.value.set(E.width,E.height),g.transmissionMap&&(A.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,A.transmissionMapTransform)),A.thickness.value=g.thickness,g.thicknessMap&&(A.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=g.attenuationDistance,A.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(A.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(A.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=g.specularIntensity,A.specularColor.value.copy(g.specularColor),g.specularColorMap&&(A.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,A.specularColorMapTransform)),g.specularIntensityMap&&(A.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,A.specularIntensityMapTransform))}function p(A,g){g.matcap&&(A.matcap.value=g.matcap)}function m(A,g){let E=e.get(g).light;A.referencePosition.value.setFromMatrixPosition(E.matrixWorld),A.nearDistance.value=E.shadow.camera.near,A.farDistance.value=E.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function kz(n,e,t,i){let r={},s={},o=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(E,_){let C=_.program;i.uniformBlockBinding(E,C)}function l(E,_){let C=r[E.id];C===void 0&&(p(E),C=u(E),r[E.id]=C,E.addEventListener("dispose",A));let T=_.program;i.updateUBOMapping(E,T);let M=e.render.frame;s[E.id]!==M&&(h(E),s[E.id]=M)}function u(E){let _=d();E.__bindingPointIndex=_;let C=n.createBuffer(),T=E.__size,M=E.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,T,M),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,C),C}function d(){for(let E=0;E<a;E++)if(o.indexOf(E)===-1)return o.push(E),E;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(E){let _=r[E.id],C=E.uniforms,T=E.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let M=0,w=C.length;M<w;M++){let D=Array.isArray(C[M])?C[M]:[C[M]];for(let I=0,y=D.length;I<y;I++){let b=D[I];if(f(b,M,I,T)===!0){let Q=b.__offset,U=Array.isArray(b.value)?b.value:[b.value],z=0;for(let q=0;q<U.length;q++){let R=U[q],N=m(R);typeof R=="number"||typeof R=="boolean"?(b.__data[0]=R,n.bufferSubData(n.UNIFORM_BUFFER,Q+z,b.__data)):R.isMatrix3?(b.__data[0]=R.elements[0],b.__data[1]=R.elements[1],b.__data[2]=R.elements[2],b.__data[3]=0,b.__data[4]=R.elements[3],b.__data[5]=R.elements[4],b.__data[6]=R.elements[5],b.__data[7]=0,b.__data[8]=R.elements[6],b.__data[9]=R.elements[7],b.__data[10]=R.elements[8],b.__data[11]=0):(R.toArray(b.__data,z),z+=N.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Q,b.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(E,_,C,T){let M=E.value,w=_+"_"+C;if(T[w]===void 0)return typeof M=="number"||typeof M=="boolean"?T[w]=M:T[w]=M.clone(),!0;{let D=T[w];if(typeof M=="number"||typeof M=="boolean"){if(D!==M)return T[w]=M,!0}else if(D.equals(M)===!1)return D.copy(M),!0}return!1}function p(E){let _=E.uniforms,C=0,T=16;for(let w=0,D=_.length;w<D;w++){let I=Array.isArray(_[w])?_[w]:[_[w]];for(let y=0,b=I.length;y<b;y++){let Q=I[y],U=Array.isArray(Q.value)?Q.value:[Q.value];for(let z=0,q=U.length;z<q;z++){let R=U[z],N=m(R),L=C%T,Y=L%N.boundary,te=L+Y;C+=Y,te!==0&&T-te<N.storage&&(C+=T-te),Q.__data=new Float32Array(N.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=C,C+=N.storage}}}let M=C%T;return M>0&&(C+=T-M),E.__size=C,E.__cache={},this}function m(E){let _={boundary:0,storage:0};return typeof E=="number"||typeof E=="boolean"?(_.boundary=4,_.storage=4):E.isVector2?(_.boundary=8,_.storage=8):E.isVector3||E.isColor?(_.boundary=16,_.storage=12):E.isVector4?(_.boundary=16,_.storage=16):E.isMatrix3?(_.boundary=48,_.storage=48):E.isMatrix4?(_.boundary=64,_.storage=64):E.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",E),_}function A(E){let _=E.target;_.removeEventListener("dispose",A);let C=o.indexOf(_.__bindingPointIndex);o.splice(C,1),n.deleteBuffer(r[_.id]),delete r[_.id],delete s[_.id]}function g(){for(let E in r)n.deleteBuffer(r[E]);o=[],r={},s={}}return{bind:c,update:l,dispose:g}}var pA=class{constructor(e={}){let{canvas:t=HV(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let h;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=o;let f=new Uint32Array(4),p=new Int32Array(4),m=null,A=null,g=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Qt,this.toneMapping=wo,this.toneMappingExposure=1;let _=this,C=!1,T=0,M=0,w=null,D=-1,I=null,y=new jt,b=new jt,Q=null,U=new be(0),z=0,q=t.width,R=t.height,N=1,L=null,Y=null,te=new jt(0,0,q,R),fe=new jt(0,0,q,R),ye=!1,Ge=new yd,j=!1,se=!1,xe=new mt,de=new x,Qe=new jt,Ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ot=!1;function Xt(){return w===null?N:1}let P=i;function Mn(S,F){return t.getContext(S,F)}try{let S={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${kE}`),t.addEventListener("webglcontextlost",X,!1),t.addEventListener("webglcontextrestored",Z,!1),t.addEventListener("webglcontextcreationerror",he,!1),P===null){let F="webgl2";if(P=Mn(F,S),P===null)throw Mn(F)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(S){throw console.error("THREE.WebGLRenderer: "+S.message),S}let Gt,Kt,ke,wn,tt,at,B,v,J,ne,ie,ee,He,me,ve,ht,ce,Ee,vt,$e,Me,nt,Ct,cn;function O(){Gt=new t9(P),Gt.init(),nt=new Rz(P,Gt),Kt=new q4(P,Gt,e,nt),ke=new Dz(P),wn=new r9(P),tt=new mz,at=new Tz(P,Gt,ke,tt,Kt,nt,wn),B=new X4(_),v=new e9(_),J=new dQ(P),Ct=new j4(P,J),ne=new n9(P,J,wn,Ct),ie=new o9(P,ne,J,wn),vt=new s9(P,Kt,at),ht=new Y4(tt),ee=new gz(_,B,v,Gt,Kt,Ct,ht),He=new Fz(_,tt),me=new Cz,ve=new xz(Gt),Ee=new W4(_,B,v,ke,ie,h,c),ce=new Bz(_,ie,Kt),cn=new kz(P,wn,Kt,ke),$e=new J4(P,Gt,wn),Me=new i9(P,Gt,wn),wn.programs=ee.programs,_.capabilities=Kt,_.extensions=Gt,_.properties=tt,_.renderLists=me,_.shadowMap=ce,_.state=ke,_.info=wn}O();let le=new ME(_,P);this.xr=le,this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.forceContextLoss=function(){let S=Gt.get("WEBGL_lose_context");S&&S.loseContext()},this.forceContextRestore=function(){let S=Gt.get("WEBGL_lose_context");S&&S.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(S){S!==void 0&&(N=S,this.setSize(q,R,!1))},this.getSize=function(S){return S.set(q,R)},this.setSize=function(S,F,K=!0){if(le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=S,R=F,t.width=Math.floor(S*N),t.height=Math.floor(F*N),K===!0&&(t.style.width=S+"px",t.style.height=F+"px"),this.setViewport(0,0,S,F)},this.getDrawingBufferSize=function(S){return S.set(q*N,R*N).floor()},this.setDrawingBufferSize=function(S,F,K){q=S,R=F,N=K,t.width=Math.floor(S*K),t.height=Math.floor(F*K),this.setViewport(0,0,S,F)},this.getCurrentViewport=function(S){return S.copy(y)},this.getViewport=function(S){return S.copy(te)},this.setViewport=function(S,F,K,W){S.isVector4?te.set(S.x,S.y,S.z,S.w):te.set(S,F,K,W),ke.viewport(y.copy(te).multiplyScalar(N).round())},this.getScissor=function(S){return S.copy(fe)},this.setScissor=function(S,F,K,W){S.isVector4?fe.set(S.x,S.y,S.z,S.w):fe.set(S,F,K,W),ke.scissor(b.copy(fe).multiplyScalar(N).round())},this.getScissorTest=function(){return ye},this.setScissorTest=function(S){ke.setScissorTest(ye=S)},this.setOpaqueSort=function(S){L=S},this.setTransparentSort=function(S){Y=S},this.getClearColor=function(S){return S.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor.apply(Ee,arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha.apply(Ee,arguments)},this.clear=function(S=!0,F=!0,K=!0){let W=0;if(S){let k=!1;if(w!==null){let ue=w.texture.format;k=ue===WE||ue===KE||ue===zE}if(k){let ue=w.texture.type,_e=ue===xn||ue===Ea||ue===ud||ue===sl||ue===VE||ue===QE,Be=Ee.getClearColor(),De=Ee.getClearAlpha(),je=Be.r,Xe=Be.g,Ve=Be.b;_e?(f[0]=je,f[1]=Xe,f[2]=Ve,f[3]=De,P.clearBufferuiv(P.COLOR,0,f)):(p[0]=je,p[1]=Xe,p[2]=Ve,p[3]=De,P.clearBufferiv(P.COLOR,0,p))}else W|=P.COLOR_BUFFER_BIT}F&&(W|=P.DEPTH_BUFFER_BIT),K&&(W|=P.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),P.clear(W)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",X,!1),t.removeEventListener("webglcontextrestored",Z,!1),t.removeEventListener("webglcontextcreationerror",he,!1),me.dispose(),ve.dispose(),tt.dispose(),B.dispose(),v.dispose(),ie.dispose(),Ct.dispose(),cn.dispose(),ee.dispose(),le.dispose(),le.removeEventListener("sessionstart",Wr),le.removeEventListener("sessionend",BI),Vo.stop()};function X(S){S.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Z(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;let S=wn.autoReset,F=ce.enabled,K=ce.autoUpdate,W=ce.needsUpdate,k=ce.type;O(),wn.autoReset=S,ce.enabled=F,ce.autoUpdate=K,ce.needsUpdate=W,ce.type=k}function he(S){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",S.statusMessage)}function We(S){let F=S.target;F.removeEventListener("dispose",We),Mt(F)}function Mt(S){Bn(S),tt.remove(S)}function Bn(S){let F=tt.get(S).programs;F!==void 0&&(F.forEach(function(K){ee.releaseProgram(K)}),S.isShaderMaterial&&ee.releaseShaderCache(S))}this.renderBufferDirect=function(S,F,K,W,k,ue){F===null&&(F=Ue);let _e=k.isMesh&&k.matrixWorld.determinant()<0,Be=GP(S,F,K,W,k);ke.setMaterial(W,_e);let De=K.index,je=1;if(W.wireframe===!0){if(De=ne.getWireframeAttribute(K),De===void 0)return;je=2}let Xe=K.drawRange,Ve=K.attributes.position,Lt=Xe.start*je,An=(Xe.start+Xe.count)*je;ue!==null&&(Lt=Math.max(Lt,ue.start*je),An=Math.min(An,(ue.start+ue.count)*je)),De!==null?(Lt=Math.max(Lt,0),An=Math.min(An,De.count)):Ve!=null&&(Lt=Math.max(Lt,0),An=Math.min(An,Ve.count));let gn=An-Lt;if(gn<0||gn===1/0)return;Ct.setup(k,W,Be,K,De);let Ui,Ot=$e;if(De!==null&&(Ui=J.get(De),Ot=Me,Ot.setIndex(Ui)),k.isMesh)W.wireframe===!0?(ke.setLineWidth(W.wireframeLinewidth*Xt()),Ot.setMode(P.LINES)):Ot.setMode(P.TRIANGLES);else if(k.isLine){let Oe=W.linewidth;Oe===void 0&&(Oe=1),ke.setLineWidth(Oe*Xt()),k.isLineSegments?Ot.setMode(P.LINES):k.isLineLoop?Ot.setMode(P.LINE_LOOP):Ot.setMode(P.LINE_STRIP)}else k.isPoints?Ot.setMode(P.POINTS):k.isSprite&&Ot.setMode(P.TRIANGLES);if(k.isBatchedMesh)if(k._multiDrawInstances!==null)Ot.renderMultiDrawInstances(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount,k._multiDrawInstances);else if(Gt.get("WEBGL_multi_draw"))Ot.renderMultiDraw(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount);else{let Oe=k._multiDrawStarts,Zn=k._multiDrawCounts,Nt=k._multiDrawCount,xr=De?J.get(De).bytesPerElement:1,Fa=tt.get(W).currentProgram.getUniforms();for(let Gi=0;Gi<Nt;Gi++)Fa.setValue(P,"_gl_DrawID",Gi),Ot.render(Oe[Gi]/xr,Zn[Gi])}else if(k.isInstancedMesh)Ot.renderInstances(Lt,gn,k.count);else if(K.isInstancedBufferGeometry){let Oe=K._maxInstanceCount!==void 0?K._maxInstanceCount:1/0,Zn=Math.min(K.instanceCount,Oe);Ot.renderInstances(Lt,gn,Zn)}else Ot.render(Lt,gn)};function $n(S,F,K){S.transparent===!0&&S.side===Xi&&S.forceSinglePass===!1?(S.side=Oi,S.needsUpdate=!0,Zd(S,F,K),S.side=us,S.needsUpdate=!0,Zd(S,F,K),S.side=Xi):Zd(S,F,K)}this.compile=function(S,F,K=null){K===null&&(K=S),A=ve.get(K),A.init(F),E.push(A),K.traverseVisible(function(k){k.isLight&&k.layers.test(F.layers)&&(A.pushLight(k),k.castShadow&&A.pushShadow(k))}),S!==K&&S.traverseVisible(function(k){k.isLight&&k.layers.test(F.layers)&&(A.pushLight(k),k.castShadow&&A.pushShadow(k))}),A.setupLights();let W=new Set;return S.traverse(function(k){let ue=k.material;if(ue)if(Array.isArray(ue))for(let _e=0;_e<ue.length;_e++){let Be=ue[_e];$n(Be,K,k),W.add(Be)}else $n(ue,K,k),W.add(ue)}),E.pop(),A=null,W},this.compileAsync=function(S,F,K=null){let W=this.compile(S,F,K);return new Promise(k=>{function ue(){if(W.forEach(function(_e){tt.get(_e).currentProgram.isReady()&&W.delete(_e)}),W.size===0){k(S);return}setTimeout(ue,10)}Gt.get("KHR_parallel_shader_compile")!==null?ue():setTimeout(ue,10)})};let Pt=null;function ys(S){Pt&&Pt(S)}function Wr(){Vo.stop()}function BI(){Vo.start()}let Vo=new DT;Vo.setAnimationLoop(ys),typeof self<"u"&&Vo.setContext(self),this.setAnimationLoop=function(S){Pt=S,le.setAnimationLoop(S),S===null?Vo.stop():Vo.start()},le.addEventListener("sessionstart",Wr),le.addEventListener("sessionend",BI),this.render=function(S,F){if(F!==void 0&&F.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(C===!0)return;if(S.matrixWorldAutoUpdate===!0&&S.updateMatrixWorld(),F.parent===null&&F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),le.enabled===!0&&le.isPresenting===!0&&(le.cameraAutoUpdate===!0&&le.updateCamera(F),F=le.getCamera()),S.isScene===!0&&S.onBeforeRender(_,S,F,w),A=ve.get(S,E.length),A.init(F),E.push(A),xe.multiplyMatrices(F.projectionMatrix,F.matrixWorldInverse),Ge.setFromProjectionMatrix(xe),se=this.localClippingEnabled,j=ht.init(this.clippingPlanes,se),m=me.get(S,g.length),m.init(),g.push(m),le.enabled===!0&&le.isPresenting===!0){let ue=_.xr.getDepthSensingMesh();ue!==null&&bg(ue,F,-1/0,_.sortObjects)}bg(S,F,0,_.sortObjects),m.finish(),_.sortObjects===!0&&m.sort(L,Y),ot=le.enabled===!1||le.isPresenting===!1||le.hasDepthSensing()===!1,ot&&Ee.addToRenderList(m,S),this.info.render.frame++,j===!0&&ht.beginShadows();let K=A.state.shadowsArray;ce.render(K,S,F),j===!0&&ht.endShadows(),this.info.autoReset===!0&&this.info.reset();let W=m.opaque,k=m.transmissive;if(A.setupLights(),F.isArrayCamera){let ue=F.cameras;if(k.length>0)for(let _e=0,Be=ue.length;_e<Be;_e++){let De=ue[_e];bI(W,k,S,De)}ot&&Ee.render(S);for(let _e=0,Be=ue.length;_e<Be;_e++){let De=ue[_e];DI(m,S,De,De.viewport)}}else k.length>0&&bI(W,k,S,F),ot&&Ee.render(S),DI(m,S,F);w!==null&&(at.updateMultisampleRenderTarget(w),at.updateRenderTargetMipmap(w)),S.isScene===!0&&S.onAfterRender(_,S,F),Ct.resetDefaultState(),D=-1,I=null,E.pop(),E.length>0?(A=E[E.length-1],j===!0&&ht.setGlobalState(_.clippingPlanes,A.state.camera)):A=null,g.pop(),g.length>0?m=g[g.length-1]:m=null};function bg(S,F,K,W){if(S.visible===!1)return;if(S.layers.test(F.layers)){if(S.isGroup)K=S.renderOrder;else if(S.isLOD)S.autoUpdate===!0&&S.update(F);else if(S.isLight)A.pushLight(S),S.castShadow&&A.pushShadow(S);else if(S.isSprite){if(!S.frustumCulled||Ge.intersectsSprite(S)){W&&Qe.setFromMatrixPosition(S.matrixWorld).applyMatrix4(xe);let _e=ie.update(S),Be=S.material;Be.visible&&m.push(S,_e,Be,K,Qe.z,null)}}else if((S.isMesh||S.isLine||S.isPoints)&&(!S.frustumCulled||Ge.intersectsObject(S))){let _e=ie.update(S),Be=S.material;if(W&&(S.boundingSphere!==void 0?(S.boundingSphere===null&&S.computeBoundingSphere(),Qe.copy(S.boundingSphere.center)):(_e.boundingSphere===null&&_e.computeBoundingSphere(),Qe.copy(_e.boundingSphere.center)),Qe.applyMatrix4(S.matrixWorld).applyMatrix4(xe)),Array.isArray(Be)){let De=_e.groups;for(let je=0,Xe=De.length;je<Xe;je++){let Ve=De[je],Lt=Be[Ve.materialIndex];Lt&&Lt.visible&&m.push(S,_e,Lt,K,Qe.z,Ve)}}else Be.visible&&m.push(S,_e,Be,K,Qe.z,null)}}let ue=S.children;for(let _e=0,Be=ue.length;_e<Be;_e++)bg(ue[_e],F,K,W)}function DI(S,F,K,W){let k=S.opaque,ue=S.transmissive,_e=S.transparent;A.setupLightsView(K),j===!0&&ht.setGlobalState(_.clippingPlanes,K),W&&ke.viewport(y.copy(W)),k.length>0&&$d(k,F,K),ue.length>0&&$d(ue,F,K),_e.length>0&&$d(_e,F,K),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function bI(S,F,K,W){if((K.isScene===!0?K.overrideMaterial:null)!==null)return;A.state.transmissionRenderTarget[W.id]===void 0&&(A.state.transmissionRenderTarget[W.id]=new Gs(1,1,{generateMipmaps:!0,type:Gt.has("EXT_color_buffer_half_float")||Gt.has("EXT_color_buffer_float")?yi:xn,minFilter:$i,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:wt.workingColorSpace}));let ue=A.state.transmissionRenderTarget[W.id],_e=W.viewport||y;ue.setSize(_e.z,_e.w);let Be=_.getRenderTarget();_.setRenderTarget(ue),_.getClearColor(U),z=_.getClearAlpha(),z<1&&_.setClearColor(16777215,.5),_.clear(),ot&&Ee.render(K);let De=_.toneMapping;_.toneMapping=wo;let je=W.viewport;if(W.viewport!==void 0&&(W.viewport=void 0),A.setupLightsView(W),j===!0&&ht.setGlobalState(_.clippingPlanes,W),$d(S,K,W),at.updateMultisampleRenderTarget(ue),at.updateRenderTargetMipmap(ue),Gt.has("WEBGL_multisampled_render_to_texture")===!1){let Xe=!1;for(let Ve=0,Lt=F.length;Ve<Lt;Ve++){let An=F[Ve],gn=An.object,Ui=An.geometry,Ot=An.material,Oe=An.group;if(Ot.side===Xi&&gn.layers.test(W.layers)){let Zn=Ot.side;Ot.side=Oi,Ot.needsUpdate=!0,TI(gn,K,W,Ui,Ot,Oe),Ot.side=Zn,Ot.needsUpdate=!0,Xe=!0}}Xe===!0&&(at.updateMultisampleRenderTarget(ue),at.updateRenderTargetMipmap(ue))}_.setRenderTarget(Be),_.setClearColor(U,z),je!==void 0&&(W.viewport=je),_.toneMapping=De}function $d(S,F,K){let W=F.isScene===!0?F.overrideMaterial:null;for(let k=0,ue=S.length;k<ue;k++){let _e=S[k],Be=_e.object,De=_e.geometry,je=W===null?_e.material:W,Xe=_e.group;Be.layers.test(K.layers)&&TI(Be,F,K,De,je,Xe)}}function TI(S,F,K,W,k,ue){S.onBeforeRender(_,F,K,W,k,ue),S.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,S.matrixWorld),S.normalMatrix.getNormalMatrix(S.modelViewMatrix),k.transparent===!0&&k.side===Xi&&k.forceSinglePass===!1?(k.side=Oi,k.needsUpdate=!0,_.renderBufferDirect(K,F,W,k,S,ue),k.side=us,k.needsUpdate=!0,_.renderBufferDirect(K,F,W,k,S,ue),k.side=Xi):_.renderBufferDirect(K,F,W,k,S,ue),S.onAfterRender(_,F,K,W,k,ue)}function Zd(S,F,K){F.isScene!==!0&&(F=Ue);let W=tt.get(S),k=A.state.lights,ue=A.state.shadowsArray,_e=k.state.version,Be=ee.getParameters(S,k.state,ue,F,K),De=ee.getProgramCacheKey(Be),je=W.programs;W.environment=S.isMeshStandardMaterial?F.environment:null,W.fog=F.fog,W.envMap=(S.isMeshStandardMaterial?v:B).get(S.envMap||W.environment),W.envMapRotation=W.environment!==null&&S.envMap===null?F.environmentRotation:S.envMapRotation,je===void 0&&(S.addEventListener("dispose",We),je=new Map,W.programs=je);let Xe=je.get(De);if(Xe!==void 0){if(W.currentProgram===Xe&&W.lightsStateVersion===_e)return PI(S,Be),Xe}else Be.uniforms=ee.getUniforms(S),S.onBeforeCompile(Be,_),Xe=ee.acquireProgram(Be,De),je.set(De,Xe),W.uniforms=Be.uniforms;let Ve=W.uniforms;return(!S.isShaderMaterial&&!S.isRawShaderMaterial||S.clipping===!0)&&(Ve.clippingPlanes=ht.uniform),PI(S,Be),W.needsLights=VP(S),W.lightsStateVersion=_e,W.needsLights&&(Ve.ambientLightColor.value=k.state.ambient,Ve.lightProbe.value=k.state.probe,Ve.directionalLights.value=k.state.directional,Ve.directionalLightShadows.value=k.state.directionalShadow,Ve.spotLights.value=k.state.spot,Ve.spotLightShadows.value=k.state.spotShadow,Ve.rectAreaLights.value=k.state.rectArea,Ve.ltc_1.value=k.state.rectAreaLTC1,Ve.ltc_2.value=k.state.rectAreaLTC2,Ve.pointLights.value=k.state.point,Ve.pointLightShadows.value=k.state.pointShadow,Ve.hemisphereLights.value=k.state.hemi,Ve.directionalShadowMap.value=k.state.directionalShadowMap,Ve.directionalShadowMatrix.value=k.state.directionalShadowMatrix,Ve.spotShadowMap.value=k.state.spotShadowMap,Ve.spotLightMatrix.value=k.state.spotLightMatrix,Ve.spotLightMap.value=k.state.spotLightMap,Ve.pointShadowMap.value=k.state.pointShadowMap,Ve.pointShadowMatrix.value=k.state.pointShadowMatrix),W.currentProgram=Xe,W.uniformsList=null,Xe}function RI(S){if(S.uniformsList===null){let F=S.currentProgram.getUniforms();S.uniformsList=il.seqWithValue(F.seq,S.uniforms)}return S.uniformsList}function PI(S,F){let K=tt.get(S);K.outputColorSpace=F.outputColorSpace,K.batching=F.batching,K.batchingColor=F.batchingColor,K.instancing=F.instancing,K.instancingColor=F.instancingColor,K.instancingMorph=F.instancingMorph,K.skinning=F.skinning,K.morphTargets=F.morphTargets,K.morphNormals=F.morphNormals,K.morphColors=F.morphColors,K.morphTargetsCount=F.morphTargetsCount,K.numClippingPlanes=F.numClippingPlanes,K.numIntersection=F.numClipIntersection,K.vertexAlphas=F.vertexAlphas,K.vertexTangents=F.vertexTangents,K.toneMapping=F.toneMapping}function GP(S,F,K,W,k){F.isScene!==!0&&(F=Ue),at.resetTextureUnits();let ue=F.fog,_e=W.isMeshStandardMaterial?F.environment:null,Be=w===null?_.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:an,De=(W.isMeshStandardMaterial?v:B).get(W.envMap||_e),je=W.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,Xe=!!K.attributes.tangent&&(!!W.normalMap||W.anisotropy>0),Ve=!!K.morphAttributes.position,Lt=!!K.morphAttributes.normal,An=!!K.morphAttributes.color,gn=wo;W.toneMapped&&(w===null||w.isXRRenderTarget===!0)&&(gn=_.toneMapping);let Ui=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,Ot=Ui!==void 0?Ui.length:0,Oe=tt.get(W),Zn=A.state.lights;if(j===!0&&(se===!0||S!==I)){let or=S===I&&W.id===D;ht.setState(W,S,or)}let Nt=!1;W.version===Oe.__version?(Oe.needsLights&&Oe.lightsStateVersion!==Zn.state.version||Oe.outputColorSpace!==Be||k.isBatchedMesh&&Oe.batching===!1||!k.isBatchedMesh&&Oe.batching===!0||k.isBatchedMesh&&Oe.batchingColor===!0&&k.colorTexture===null||k.isBatchedMesh&&Oe.batchingColor===!1&&k.colorTexture!==null||k.isInstancedMesh&&Oe.instancing===!1||!k.isInstancedMesh&&Oe.instancing===!0||k.isSkinnedMesh&&Oe.skinning===!1||!k.isSkinnedMesh&&Oe.skinning===!0||k.isInstancedMesh&&Oe.instancingColor===!0&&k.instanceColor===null||k.isInstancedMesh&&Oe.instancingColor===!1&&k.instanceColor!==null||k.isInstancedMesh&&Oe.instancingMorph===!0&&k.morphTexture===null||k.isInstancedMesh&&Oe.instancingMorph===!1&&k.morphTexture!==null||Oe.envMap!==De||W.fog===!0&&Oe.fog!==ue||Oe.numClippingPlanes!==void 0&&(Oe.numClippingPlanes!==ht.numPlanes||Oe.numIntersection!==ht.numIntersection)||Oe.vertexAlphas!==je||Oe.vertexTangents!==Xe||Oe.morphTargets!==Ve||Oe.morphNormals!==Lt||Oe.morphColors!==An||Oe.toneMapping!==gn||Oe.morphTargetsCount!==Ot)&&(Nt=!0):(Nt=!0,Oe.__version=W.version);let xr=Oe.currentProgram;Nt===!0&&(xr=Zd(W,F,k));let Fa=!1,Gi=!1,Tg=!1,Dn=xr.getUniforms(),Ys=Oe.uniforms;if(ke.useProgram(xr.program)&&(Fa=!0,Gi=!0,Tg=!0),W.id!==D&&(D=W.id,Gi=!0),Fa||I!==S){Dn.setValue(P,"projectionMatrix",S.projectionMatrix),Dn.setValue(P,"viewMatrix",S.matrixWorldInverse);let or=Dn.map.cameraPosition;or!==void 0&&or.setValue(P,de.setFromMatrixPosition(S.matrixWorld)),Kt.logarithmicDepthBuffer&&Dn.setValue(P,"logDepthBufFC",2/(Math.log(S.far+1)/Math.LN2)),(W.isMeshPhongMaterial||W.isMeshToonMaterial||W.isMeshLambertMaterial||W.isMeshBasicMaterial||W.isMeshStandardMaterial||W.isShaderMaterial)&&Dn.setValue(P,"isOrthographic",S.isOrthographicCamera===!0),I!==S&&(I=S,Gi=!0,Tg=!0)}if(k.isSkinnedMesh){Dn.setOptional(P,k,"bindMatrix"),Dn.setOptional(P,k,"bindMatrixInverse");let or=k.skeleton;or&&(or.boneTexture===null&&or.computeBoneTexture(),Dn.setValue(P,"boneTexture",or.boneTexture,at))}k.isBatchedMesh&&(Dn.setOptional(P,k,"batchingTexture"),Dn.setValue(P,"batchingTexture",k._matricesTexture,at),Dn.setOptional(P,k,"batchingIdTexture"),Dn.setValue(P,"batchingIdTexture",k._indirectTexture,at),Dn.setOptional(P,k,"batchingColorTexture"),k._colorsTexture!==null&&Dn.setValue(P,"batchingColorTexture",k._colorsTexture,at));let Rg=K.morphAttributes;if((Rg.position!==void 0||Rg.normal!==void 0||Rg.color!==void 0)&&vt.update(k,K,xr),(Gi||Oe.receiveShadow!==k.receiveShadow)&&(Oe.receiveShadow=k.receiveShadow,Dn.setValue(P,"receiveShadow",k.receiveShadow)),W.isMeshGouraudMaterial&&W.envMap!==null&&(Ys.envMap.value=De,Ys.flipEnvMap.value=De.isCubeTexture&&De.isRenderTargetTexture===!1?-1:1),W.isMeshStandardMaterial&&W.envMap===null&&F.environment!==null&&(Ys.envMapIntensity.value=F.environmentIntensity),Gi&&(Dn.setValue(P,"toneMappingExposure",_.toneMappingExposure),Oe.needsLights&&HP(Ys,Tg),ue&&W.fog===!0&&He.refreshFogUniforms(Ys,ue),He.refreshMaterialUniforms(Ys,W,N,R,A.state.transmissionRenderTarget[S.id]),il.upload(P,RI(Oe),Ys,at)),W.isShaderMaterial&&W.uniformsNeedUpdate===!0&&(il.upload(P,RI(Oe),Ys,at),W.uniformsNeedUpdate=!1),W.isSpriteMaterial&&Dn.setValue(P,"center",k.center),Dn.setValue(P,"modelViewMatrix",k.modelViewMatrix),Dn.setValue(P,"normalMatrix",k.normalMatrix),Dn.setValue(P,"modelMatrix",k.matrixWorld),W.isShaderMaterial||W.isRawShaderMaterial){let or=W.uniformsGroups;for(let Pg=0,QP=or.length;Pg<QP;Pg++){let LI=or[Pg];cn.update(LI,xr),cn.bind(LI,xr)}}return xr}function HP(S,F){S.ambientLightColor.needsUpdate=F,S.lightProbe.needsUpdate=F,S.directionalLights.needsUpdate=F,S.directionalLightShadows.needsUpdate=F,S.pointLights.needsUpdate=F,S.pointLightShadows.needsUpdate=F,S.spotLights.needsUpdate=F,S.spotLightShadows.needsUpdate=F,S.rectAreaLights.needsUpdate=F,S.hemisphereLights.needsUpdate=F}function VP(S){return S.isMeshLambertMaterial||S.isMeshToonMaterial||S.isMeshPhongMaterial||S.isMeshStandardMaterial||S.isShadowMaterial||S.isShaderMaterial&&S.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(S,F,K){tt.get(S.texture).__webglTexture=F,tt.get(S.depthTexture).__webglTexture=K;let W=tt.get(S);W.__hasExternalTextures=!0,W.__autoAllocateDepthBuffer=K===void 0,W.__autoAllocateDepthBuffer||Gt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),W.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(S,F){let K=tt.get(S);K.__webglFramebuffer=F,K.__useDefaultFramebuffer=F===void 0},this.setRenderTarget=function(S,F=0,K=0){w=S,T=F,M=K;let W=!0,k=null,ue=!1,_e=!1;if(S){let De=tt.get(S);De.__useDefaultFramebuffer!==void 0?(ke.bindFramebuffer(P.FRAMEBUFFER,null),W=!1):De.__webglFramebuffer===void 0?at.setupRenderTarget(S):De.__hasExternalTextures&&at.rebindTextures(S,tt.get(S.texture).__webglTexture,tt.get(S.depthTexture).__webglTexture);let je=S.texture;(je.isData3DTexture||je.isDataArrayTexture||je.isCompressedArrayTexture)&&(_e=!0);let Xe=tt.get(S).__webglFramebuffer;S.isWebGLCubeRenderTarget?(Array.isArray(Xe[F])?k=Xe[F][K]:k=Xe[F],ue=!0):S.samples>0&&at.useMultisampledRTT(S)===!1?k=tt.get(S).__webglMultisampledFramebuffer:Array.isArray(Xe)?k=Xe[K]:k=Xe,y.copy(S.viewport),b.copy(S.scissor),Q=S.scissorTest}else y.copy(te).multiplyScalar(N).floor(),b.copy(fe).multiplyScalar(N).floor(),Q=ye;if(ke.bindFramebuffer(P.FRAMEBUFFER,k)&&W&&ke.drawBuffers(S,k),ke.viewport(y),ke.scissor(b),ke.setScissorTest(Q),ue){let De=tt.get(S.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+F,De.__webglTexture,K)}else if(_e){let De=tt.get(S.texture),je=F||0;P.framebufferTextureLayer(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,De.__webglTexture,K||0,je)}D=-1},this.readRenderTargetPixels=function(S,F,K,W,k,ue,_e){if(!(S&&S.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Be=tt.get(S).__webglFramebuffer;if(S.isWebGLCubeRenderTarget&&_e!==void 0&&(Be=Be[_e]),Be){ke.bindFramebuffer(P.FRAMEBUFFER,Be);try{let De=S.texture,je=De.format,Xe=De.type;if(!Kt.textureFormatReadable(je)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Kt.textureTypeReadable(Xe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}F>=0&&F<=S.width-W&&K>=0&&K<=S.height-k&&P.readPixels(F,K,W,k,nt.convert(je),nt.convert(Xe),ue)}finally{let De=w!==null?tt.get(w).__webglFramebuffer:null;ke.bindFramebuffer(P.FRAMEBUFFER,De)}}},this.readRenderTargetPixelsAsync=function(S,F,K,W,k,ue,_e){return ct(this,null,function*(){if(!(S&&S.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Be=tt.get(S).__webglFramebuffer;if(S.isWebGLCubeRenderTarget&&_e!==void 0&&(Be=Be[_e]),Be){ke.bindFramebuffer(P.FRAMEBUFFER,Be);try{let De=S.texture,je=De.format,Xe=De.type;if(!Kt.textureFormatReadable(je))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Kt.textureTypeReadable(Xe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(F>=0&&F<=S.width-W&&K>=0&&K<=S.height-k){let Ve=P.createBuffer();P.bindBuffer(P.PIXEL_PACK_BUFFER,Ve),P.bufferData(P.PIXEL_PACK_BUFFER,ue.byteLength,P.STREAM_READ),P.readPixels(F,K,W,k,nt.convert(je),nt.convert(Xe),0),P.flush();let Lt=P.fenceSync(P.SYNC_GPU_COMMANDS_COMPLETE,0);yield VV(P,Lt,4);try{P.bindBuffer(P.PIXEL_PACK_BUFFER,Ve),P.getBufferSubData(P.PIXEL_PACK_BUFFER,0,ue)}finally{P.deleteBuffer(Ve),P.deleteSync(Lt)}return ue}}finally{let De=w!==null?tt.get(w).__webglFramebuffer:null;ke.bindFramebuffer(P.FRAMEBUFFER,De)}}})},this.copyFramebufferToTexture=function(S,F=null,K=0){S.isTexture!==!0&&(tl("WebGLRenderer: copyFramebufferToTexture function signature has changed."),F=arguments[0]||null,S=arguments[1]);let W=Math.pow(2,-K),k=Math.floor(S.image.width*W),ue=Math.floor(S.image.height*W),_e=F!==null?F.x:0,Be=F!==null?F.y:0;at.setTexture2D(S,0),P.copyTexSubImage2D(P.TEXTURE_2D,K,0,0,_e,Be,k,ue),ke.unbindTexture()},this.copyTextureToTexture=function(S,F,K=null,W=null,k=0){S.isTexture!==!0&&(tl("WebGLRenderer: copyTextureToTexture function signature has changed."),W=arguments[0]||null,S=arguments[1],F=arguments[2],k=arguments[3]||0,K=null);let ue,_e,Be,De,je,Xe;K!==null?(ue=K.max.x-K.min.x,_e=K.max.y-K.min.y,Be=K.min.x,De=K.min.y):(ue=S.image.width,_e=S.image.height,Be=0,De=0),W!==null?(je=W.x,Xe=W.y):(je=0,Xe=0);let Ve=nt.convert(F.format),Lt=nt.convert(F.type);at.setTexture2D(F,0),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,F.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,F.unpackAlignment);let An=P.getParameter(P.UNPACK_ROW_LENGTH),gn=P.getParameter(P.UNPACK_IMAGE_HEIGHT),Ui=P.getParameter(P.UNPACK_SKIP_PIXELS),Ot=P.getParameter(P.UNPACK_SKIP_ROWS),Oe=P.getParameter(P.UNPACK_SKIP_IMAGES),Zn=S.isCompressedTexture?S.mipmaps[k]:S.image;P.pixelStorei(P.UNPACK_ROW_LENGTH,Zn.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Zn.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,Be),P.pixelStorei(P.UNPACK_SKIP_ROWS,De),S.isDataTexture?P.texSubImage2D(P.TEXTURE_2D,k,je,Xe,ue,_e,Ve,Lt,Zn.data):S.isCompressedTexture?P.compressedTexSubImage2D(P.TEXTURE_2D,k,je,Xe,Zn.width,Zn.height,Ve,Zn.data):P.texSubImage2D(P.TEXTURE_2D,k,je,Xe,ue,_e,Ve,Lt,Zn),P.pixelStorei(P.UNPACK_ROW_LENGTH,An),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,gn),P.pixelStorei(P.UNPACK_SKIP_PIXELS,Ui),P.pixelStorei(P.UNPACK_SKIP_ROWS,Ot),P.pixelStorei(P.UNPACK_SKIP_IMAGES,Oe),k===0&&F.generateMipmaps&&P.generateMipmap(P.TEXTURE_2D),ke.unbindTexture()},this.copyTextureToTexture3D=function(S,F,K=null,W=null,k=0){S.isTexture!==!0&&(tl("WebGLRenderer: copyTextureToTexture3D function signature has changed."),K=arguments[0]||null,W=arguments[1]||null,S=arguments[2],F=arguments[3],k=arguments[4]||0);let ue,_e,Be,De,je,Xe,Ve,Lt,An,gn=S.isCompressedTexture?S.mipmaps[k]:S.image;K!==null?(ue=K.max.x-K.min.x,_e=K.max.y-K.min.y,Be=K.max.z-K.min.z,De=K.min.x,je=K.min.y,Xe=K.min.z):(ue=gn.width,_e=gn.height,Be=gn.depth,De=0,je=0,Xe=0),W!==null?(Ve=W.x,Lt=W.y,An=W.z):(Ve=0,Lt=0,An=0);let Ui=nt.convert(F.format),Ot=nt.convert(F.type),Oe;if(F.isData3DTexture)at.setTexture3D(F,0),Oe=P.TEXTURE_3D;else if(F.isDataArrayTexture||F.isCompressedArrayTexture)at.setTexture2DArray(F,0),Oe=P.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,F.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,F.unpackAlignment);let Zn=P.getParameter(P.UNPACK_ROW_LENGTH),Nt=P.getParameter(P.UNPACK_IMAGE_HEIGHT),xr=P.getParameter(P.UNPACK_SKIP_PIXELS),Fa=P.getParameter(P.UNPACK_SKIP_ROWS),Gi=P.getParameter(P.UNPACK_SKIP_IMAGES);P.pixelStorei(P.UNPACK_ROW_LENGTH,gn.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,gn.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,De),P.pixelStorei(P.UNPACK_SKIP_ROWS,je),P.pixelStorei(P.UNPACK_SKIP_IMAGES,Xe),S.isDataTexture||S.isData3DTexture?P.texSubImage3D(Oe,k,Ve,Lt,An,ue,_e,Be,Ui,Ot,gn.data):F.isCompressedArrayTexture?P.compressedTexSubImage3D(Oe,k,Ve,Lt,An,ue,_e,Be,Ui,gn.data):P.texSubImage3D(Oe,k,Ve,Lt,An,ue,_e,Be,Ui,Ot,gn),P.pixelStorei(P.UNPACK_ROW_LENGTH,Zn),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Nt),P.pixelStorei(P.UNPACK_SKIP_PIXELS,xr),P.pixelStorei(P.UNPACK_SKIP_ROWS,Fa),P.pixelStorei(P.UNPACK_SKIP_IMAGES,Gi),k===0&&F.generateMipmaps&&P.generateMipmap(Oe),ke.unbindTexture()},this.initRenderTarget=function(S){tt.get(S).__webglFramebuffer===void 0&&at.setupRenderTarget(S)},this.initTexture=function(S){S.isCubeTexture?at.setTextureCube(S,0):S.isData3DTexture?at.setTexture3D(S,0):S.isDataArrayTexture||S.isCompressedArrayTexture?at.setTexture2DArray(S,0):at.setTexture2D(S,0),ke.unbindTexture()},this.resetState=function(){T=0,M=0,w=null,ke.reset(),Ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Us}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=e===Td?"display-p3":"srgb",t.unpackColorSpace=wt.workingColorSpace===El?"display-p3":"srgb"}};var Ed=class extends xt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new hs,this.environmentIntensity=1,this.environmentRotation=new hs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},vd=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=dE,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Vr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return tl("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Vr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},mi=new x,Id=class n{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyMatrix4(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyNormalMatrix(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.transformDirection(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Hr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Vt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Vt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Hr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Hr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Hr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Hr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vt(t,this.array),i=Vt(i,this.array),r=Vt(r,this.array),s=Vt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new yn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var Jb=new x,qb=new jt,Yb=new jt,Uz=new x,Xb=new mt,Wp=new x,Fy=new Zi,$b=new mt,ky=new dl,AA=class extends $t{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=$D,this.bindMatrix=new mt,this.bindMatrixInverse=new mt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new gr),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Wp),this.boundingBox.expandByPoint(Wp)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zi),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Wp),this.boundingSphere.expandByPoint(Wp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Fy.copy(this.boundingSphere),Fy.applyMatrix4(r),e.ray.intersectsSphere(Fy)!==!1&&($b.copy(r).invert(),ky.copy(e.ray).applyMatrix4($b),!(this.boundingBox!==null&&ky.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,ky)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new jt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);let s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===$D?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===fV?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let i=this.skeleton,r=this.geometry;qb.fromBufferAttribute(r.attributes.skinIndex,e),Yb.fromBufferAttribute(r.attributes.skinWeight,e),Jb.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){let o=Yb.getComponent(s);if(o!==0){let a=qb.getComponent(s);Xb.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Uz.copy(Jb).applyMatrix4(Xb),o)}}return t.applyMatrix4(this.bindMatrixInverse)}},Sd=class extends xt{constructor(){super(),this.isBone=!0,this.type="Bone"}},Ia=class extends fn{constructor(e=null,t=1,i=1,r,s,o,a,c,l=on,u=on,d,h){super(null,o,a,c,l,u,r,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Zb=new mt,Gz=new mt,gA=class n{constructor(e=[],t=[]){this.uuid=Vr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new mt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new mt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){let a=e[s]?e[s].matrixWorld:Gz;Zb.multiplyMatrices(a,t[s]),Zb.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new Ia(t,e,e,Vn,Pn);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let s=e.bones[i],o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Sd),this.bones.push(o),this.boneInverses.push(new mt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){let o=t[r];e.bones.push(o.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},Sa=class extends yn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},Wc=new mt,eT=new mt,jp=[],tT=new gr,Hz=new mt,td=new $t,nd=new Zi,Al=class extends $t{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Sa(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Hz)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new gr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wc),tT.copy(e.boundingBox).applyMatrix4(Wc),this.boundingBox.union(tT)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wc),nd.copy(e.boundingSphere).applyMatrix4(Wc),this.boundingSphere.union(nd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){let i=this.matrixWorld,r=this.count;if(td.geometry=this.geometry,td.material=this.material,td.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),nd.copy(this.boundingSphere),nd.applyMatrix4(i),e.ray.intersectsSphere(nd)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Wc),eT.multiplyMatrices(i,Wc),td.matrixWorld=eT,td.raycast(e,jp);for(let o=0,a=jp.length;o<a;o++){let c=jp[o];c.instanceId=s,c.object=this,t.push(c)}jp.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Sa(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ia(new Float32Array(r*this.count),r,this.count,zs,Pn));let s=this.morphTexture.source.data.data,o=0;for(let l=0;l<i.length;l++)o+=i[l];let a=this.geometry.morphTargetsRelative?1:1-o,c=r*e;s[c]=a,s.set(i,c+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}};var gl=class extends Fi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new be(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},mA=new x,_A=new x,nT=new mt,id=new dl,Jp=new Zi,Uy=new x,iT=new x,ml=class extends xt{constructor(e=new Ci,t=new gl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)mA.fromBufferAttribute(t,r-1),_A.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=mA.distanceTo(_A);e.setAttribute("lineDistance",new Ni(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Jp.copy(i.boundingSphere),Jp.applyMatrix4(r),Jp.radius+=s,e.ray.intersectsSphere(Jp)===!1)return;nT.copy(r).invert(),id.copy(e.ray).applyMatrix4(nT);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(u!==null){let f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let m=f,A=p-1;m<A;m+=l){let g=u.getX(m),E=u.getX(m+1),_=qp(this,e,id,c,g,E);_&&t.push(_)}if(this.isLineLoop){let m=u.getX(p-1),A=u.getX(f),g=qp(this,e,id,c,m,A);g&&t.push(g)}}else{let f=Math.max(0,o.start),p=Math.min(h.count,o.start+o.count);for(let m=f,A=p-1;m<A;m+=l){let g=qp(this,e,id,c,m,m+1);g&&t.push(g)}if(this.isLineLoop){let m=qp(this,e,id,c,p-1,f);m&&t.push(m)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function qp(n,e,t,i,r,s){let o=n.geometry.attributes.position;if(mA.fromBufferAttribute(o,r),_A.fromBufferAttribute(o,s),t.distanceSqToSegment(mA,_A,Uy,iT)>i)return;Uy.applyMatrix4(n.matrixWorld);let c=e.ray.origin.distanceTo(Uy);if(!(c<e.near||c>e.far))return{distance:c,point:iT.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}var rT=new x,sT=new x,xd=class extends ml{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)rT.fromBufferAttribute(t,r),sT.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+rT.distanceTo(sT);e.setAttribute("lineDistance",new Ni(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},CA=class extends ml{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},Md=class extends Fi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new be(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},oT=new mt,wE=new dl,Yp=new Zi,Xp=new x,yA=class extends xt{constructor(e=new Ci,t=new Md){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Yp.copy(i.boundingSphere),Yp.applyMatrix4(r),Yp.radius+=s,e.ray.intersectsSphere(Yp)===!1)return;oT.copy(r).invert(),wE.copy(e.ray).applyMatrix4(oT);let a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,d=i.attributes.position;if(l!==null){let h=Math.max(0,o.start),f=Math.min(l.count,o.start+o.count);for(let p=h,m=f;p<m;p++){let A=l.getX(p);Xp.fromBufferAttribute(d,A),aT(Xp,A,c,r,e,t,this)}}else{let h=Math.max(0,o.start),f=Math.min(d.count,o.start+o.count);for(let p=h,m=f;p<m;p++)Xp.fromBufferAttribute(d,p),aT(Xp,p,c,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function aT(n,e,t,i,r,s,o){let a=wE.distanceSqToPoint(n);if(a<t){let c=new x;wE.closestPointToPoint(n,c),c.applyMatrix4(i);let l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}var xa=class extends fn{constructor(e,t,i,r,s,o,a,c,l,u,d,h){super(null,o,a,c,l,u,r,s,d,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}},EA=class extends xa{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ar,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}},vA=class extends xa{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ca),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}};var _l=class extends Fi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new be(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jE,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},er=class extends _l{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new we(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ri(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new be(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new be(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new be(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},IA=class extends Fi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new be(16777215),this.specular=new be(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=jE,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new hs,this.combine=UE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};function $p(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Vz(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Qz(n){function e(r,s){return n[r]-n[s]}let t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function cT(n,e,t){let i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){let a=t[s]*e;for(let c=0;c!==e;++c)r[o++]=n[a+c]}return r}function LT(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}var Do=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){let a=t[1];e<a&&(i=2,s=a);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){let a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},BE=class extends Do{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:eb,endingEnd:eb}}intervalChanged_(e,t,i){let r=this.parameterPositions,s=e-2,o=e+1,a=r[s],c=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case tb:s=e,a=2*t-i;break;case nb:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case tb:o=e,c=2*i-t;break;case nb:o=1,c=i+r[1]-r[0];break;default:o=e-1,c=t}let l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),m=p*p,A=m*p,g=-h*A+2*h*m-h*p,E=(1+h)*A+(-1.5-2*h)*m+(-.5+h)*p+1,_=(-1-f)*A+(1.5+f)*m+.5*p,C=f*A-f*m;for(let T=0;T!==a;++T)s[T]=g*o[u+T]+E*o[l+T]+_*o[c+T]+C*o[d+T];return s}},DE=class extends Do{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[l+h]*d+o[c+h]*u;return s}},bE=class extends Do{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},_r=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=$p(t,this.TimeBufferType),this.values=$p(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:$p(e.times,Array),values:$p(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new bE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new DE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new BE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case cl:t=this.InterpolantFactoryMethodDiscrete;break;case ll:t=this.InterpolantFactoryMethodLinear;break;case hy:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cl;case this.InterpolantFactoryMethodLinear:return ll;case this.InterpolantFactoryMethodSmooth:return hy}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);let a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){let c=i[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(r!==void 0&&Vz(r))for(let a=0,c=r.length;a!==c;++a){let l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===hy,s=e.length-1,o=1;for(let a=1;a<s;++a){let c=!1,l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(r)c=!0;else{let d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){let m=t[d+p];if(m!==t[h+p]||m!==t[f+p]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];let d=a*i,h=o*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,c=o*i,l=0;l!==i;++l)t[c+l]=t[a+l];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};_r.prototype.TimeBufferType=Float32Array;_r.prototype.ValueBufferType=Float32Array;_r.prototype.DefaultInterpolation=ll;var bo=class extends _r{constructor(e,t,i){super(e,t,i)}};bo.prototype.ValueTypeName="bool";bo.prototype.ValueBufferType=Array;bo.prototype.DefaultInterpolation=cl;bo.prototype.InterpolantFactoryMethodLinear=void 0;bo.prototype.InterpolantFactoryMethodSmooth=void 0;var SA=class extends _r{};SA.prototype.ValueTypeName="color";var Hs=class extends _r{};Hs.prototype.ValueTypeName="number";var TE=class extends Do{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t),l=e*a;for(let u=l+a;l!==u;l+=4)Qr.slerpFlat(s,0,o,l-a,o,l,c);return s}},Vs=class extends _r{InterpolantFactoryMethodLinear(e){return new TE(this.times,this.values,this.getValueSize(),e)}};Vs.prototype.ValueTypeName="quaternion";Vs.prototype.InterpolantFactoryMethodSmooth=void 0;var To=class extends _r{constructor(e,t,i){super(e,t,i)}};To.prototype.ValueTypeName="string";To.prototype.ValueBufferType=Array;To.prototype.DefaultInterpolation=cl;To.prototype.InterpolantFactoryMethodLinear=void 0;To.prototype.InterpolantFactoryMethodSmooth=void 0;var Qs=class extends _r{};Qs.prototype.ValueTypeName="vector";var xA=class{constructor(e="",t=-1,i=[],r=pV){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Vr(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Kz(i[o]).scale(r));let s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(_r.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let s=t.length,o=[];for(let a=0;a<s;a++){let c=[],l=[];c.push((a+s-1)%s,a,(a+1)%s),l.push(0,1,0);let u=Qz(c);c=cT(c,1,u),l=cT(l,1,u),!r&&c[0]===0&&(c.push(s),l.push(l[0])),o.push(new Hs(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){let l=e[a],u=l.name.match(s);if(u&&u.length>1){let d=u[1],h=r[d];h||(r[d]=h=[]),h.push(l)}}let o=[];for(let a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(d,h,f,p,m){if(f.length!==0){let A=[],g=[];LT(f,A,g,p),A.length!==0&&m.push(new d(h,A,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode,c=e.length||-1,l=e.hierarchy||[];for(let d=0;d<l.length;d++){let h=l[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let f={},p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)f[h[p].morphTargets[m]]=-1;for(let m in f){let A=[],g=[];for(let E=0;E!==h[p].morphTargets.length;++E){let _=h[p];A.push(_.time),g.push(_.morphTarget===m?1:0)}r.push(new Hs(".morphTargetInfluence["+m+"]",A,g))}c=f.length*o}else{let f=".bones["+t[d].name+"]";i(Qs,f+".position",h,"pos",r),i(Vs,f+".quaternion",h,"rot",r),i(Qs,f+".scale",h,"scl",r)}}return r.length===0?null:new this(s,c,r,a)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function zz(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hs;case"vector":case"vector2":case"vector3":case"vector4":return Qs;case"color":return SA;case"quaternion":return Vs;case"bool":case"boolean":return bo;case"string":return To}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Kz(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=zz(n.type);if(n.times===void 0){let t=[],i=[];LT(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var xo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},wd=class{constructor(e,t,i){let r=this,s=!1,o=0,a=0,c,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){let d=l.indexOf(u);return d!==-1&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=l.length;d<h;d+=2){let f=l[d],p=l[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}},Wz=new wd,zr=(()=>{class n{constructor(t){this.manager=t!==void 0?t:Wz,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Ns={},RE=class extends Error{constructor(e,t){super(e),this.response=t}},tr=class extends zr{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=xo.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ns[e]!==void 0){Ns[e].push({onLoad:t,onProgress:i,onError:r});return}Ns[e]=[],Ns[e].push({onLoad:t,onProgress:i,onError:r});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=Ns[e],d=l.body.getReader(),h=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),f=h?parseInt(h):0,p=f!==0,m=0,A=new ReadableStream({start(g){E();function E(){d.read().then(({done:_,value:C})=>{if(_)g.close();else{m+=C.byteLength;let T=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let M=0,w=u.length;M<w;M++){let D=u[M];D.onProgress&&D.onProgress(T)}g.enqueue(C),E()}},_=>{g.error(_)})}}});return new Response(A)}else throw new RE(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return l.json();default:if(a===void 0)return l.text();{let d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{xo.add(e,l);let u=Ns[e];delete Ns[e];for(let d=0,h=u.length;d<h;d++){let f=u[d];f.onLoad&&f.onLoad(l)}}).catch(l=>{let u=Ns[e];if(u===void 0)throw this.manager.itemError(e),l;delete Ns[e];for(let d=0,h=u.length;d<h;d++){let f=u[d];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var PE=class extends zr{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,o=xo.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;let a=md("img");function c(){u(),xo.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}};var MA=class extends zr{constructor(e){super(e)}load(e,t,i,r){let s=this,o=new Ia,a=new tr(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){let l;try{l=s.parse(c)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}l.image!==void 0?o.image=l.image:l.data!==void 0&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=l.wrapS!==void 0?l.wrapS:Ar,o.wrapT=l.wrapT!==void 0?l.wrapT:Ar,o.magFilter=l.magFilter!==void 0?l.magFilter:hn,o.minFilter=l.minFilter!==void 0?l.minFilter:hn,o.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.colorSpace!==void 0&&(o.colorSpace=l.colorSpace),l.flipY!==void 0&&(o.flipY=l.flipY),l.format!==void 0&&(o.format=l.format),l.type!==void 0&&(o.type=l.type),l.mipmaps!==void 0&&(o.mipmaps=l.mipmaps,o.minFilter=$i),l.mipmapCount===1&&(o.minFilter=hn),l.generateMipmaps!==void 0&&(o.generateMipmaps=l.generateMipmaps),o.needsUpdate=!0,t&&t(o,l)},i,r),o}},Cl=class extends zr{constructor(e){super(e)}load(e,t,i,r){let s=new fn,o=new PE(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}},Bd=class extends xt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new be(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var Gy=new mt,lT=new x,uT=new x,Dd=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new we(512,512),this.map=null,this.mapPass=null,this.matrix=new mt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yd,this._frameExtents=new we(1,1),this._viewportCount=1,this._viewports=[new jt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;lT.setFromMatrixPosition(e.matrixWorld),t.position.copy(lT),uT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(uT),t.updateMatrixWorld(),Gy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gy),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Gy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},LE=class extends Dd{constructor(){super(new Hn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=ul*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},wA=class extends Bd{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xt.DEFAULT_UP),this.updateMatrix(),this.target=new xt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new LE}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},dT=new mt,rd=new x,Hy=new x,OE=class extends Dd{constructor(){super(new Hn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new we(4,2),this._viewportCount=6,this._viewports=[new jt(2,1,1,1),new jt(0,1,1,1),new jt(3,1,1,1),new jt(1,1,1,1),new jt(3,0,1,1),new jt(1,0,1,1)],this._cubeDirections=[new x(1,0,0),new x(-1,0,0),new x(0,0,1),new x(0,0,-1),new x(0,1,0),new x(0,-1,0)],this._cubeUps=[new x(0,1,0),new x(0,1,0),new x(0,1,0),new x(0,1,0),new x(0,0,1),new x(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),rd.setFromMatrixPosition(e.matrixWorld),i.position.copy(rd),Hy.copy(i.position),Hy.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Hy),i.updateMatrixWorld(),r.makeTranslation(-rd.x,-rd.y,-rd.z),dT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dT)}},BA=class extends Bd{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new OE}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},NE=class extends Dd{constructor(){super(new fl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},yl=class extends Bd{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xt.DEFAULT_UP),this.updateMatrix(),this.target=new xt,this.shadow=new NE}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};var Ro=class{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var DA=class extends zr{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,o=xo.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(l=>{t&&t(l),s.manager.itemEnd(e)}).catch(l=>{r&&r(l)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;let c=fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){return xo.add(e,l),t&&t(l),s.manager.itemEnd(e),l}).catch(function(l){r&&r(l),xo.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});xo.add(e,c),s.manager.itemStart(e)}};var bA=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=hT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=hT();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function hT(){return(typeof performance>"u"?Date:performance).now()}var YE="\\[\\]\\.:\\/",jz=new RegExp("["+YE+"]","g"),XE="[^"+YE+"]",Jz="[^"+YE.replace("\\.","")+"]",qz=/((?:WC+[\/:])*)/.source.replace("WC",XE),Yz=/(WCOD+)?/.source.replace("WCOD",Jz),Xz=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",XE),$z=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",XE),Zz=new RegExp("^"+qz+Yz+Xz+$z+"$"),eK=["material","materials","bones","map"],FE=class{constructor(e,t,i){let r=i||dn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},dn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(jz,"")}static parseTrackName(t){let i=Zz.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let o=r.nodeName.substring(s+1);eK.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(o){for(let a=0;a<o.length;a++){let c=o[a];if(c.name===i||c.uuid===i)return c;let l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,s=i.propertyName,o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[s];if(a===void 0){let u=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+s+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=FE,n})();dn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};dn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};dn.prototype.GetterByBindingType=[dn.prototype._getValue_direct,dn.prototype._getValue_array,dn.prototype._getValue_arrayElement,dn.prototype._getValue_toArray];dn.prototype.SetterByBindingTypeAndVersioning=[[dn.prototype._setValue_direct,dn.prototype._setValue_direct_setNeedsUpdate,dn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_array,dn.prototype._setValue_array_setNeedsUpdate,dn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_arrayElement,dn.prototype._setValue_arrayElement_setNeedsUpdate,dn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[dn.prototype._setValue_fromArray,dn.prototype._setValue_fromArray_setNeedsUpdate,dn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var j7=new Float32Array(1);var Zp=new x,Cn=new Cd,TA=class extends xd{constructor(e){let t=new Ci,i=new gl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,m){c(p),c(m)}function c(p){r.push(0,0,0),s.push(0,0,0),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}t.setAttribute("position",new Ni(r,3)),t.setAttribute("color",new Ni(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();let l=new be(16755200),u=new be(16711680),d=new be(43775),h=new be(16777215),f=new be(3355443);this.setColors(l,u,d,h,f)}setColors(e,t,i,r,s){let a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,i=1,r=1;Cn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Sn("c",t,e,Cn,0,0,-1),Sn("t",t,e,Cn,0,0,1),Sn("n1",t,e,Cn,-i,-r,-1),Sn("n2",t,e,Cn,i,-r,-1),Sn("n3",t,e,Cn,-i,r,-1),Sn("n4",t,e,Cn,i,r,-1),Sn("f1",t,e,Cn,-i,-r,1),Sn("f2",t,e,Cn,i,-r,1),Sn("f3",t,e,Cn,-i,r,1),Sn("f4",t,e,Cn,i,r,1),Sn("u1",t,e,Cn,i*.7,r*1.1,-1),Sn("u2",t,e,Cn,-i*.7,r*1.1,-1),Sn("u3",t,e,Cn,0,r*2,-1),Sn("cf1",t,e,Cn,-i,0,1),Sn("cf2",t,e,Cn,i,0,1),Sn("cf3",t,e,Cn,0,-r,1),Sn("cf4",t,e,Cn,0,r,1),Sn("cn1",t,e,Cn,-i,0,-1),Sn("cn2",t,e,Cn,i,0,-1),Sn("cn3",t,e,Cn,0,-r,-1),Sn("cn4",t,e,Cn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Sn(n,e,t,i,r,s,o){Zp.set(r,s,o).unproject(i);let a=e[n];if(a!==void 0){let c=t.getAttribute("position");for(let l=0,u=a.length;l<u;l++)c.setXYZ(a[l],Zp.x,Zp.y,Zp.z)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:kE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=kE);var $E=class extends bA{constructor(){super(),this.gameTime=0,this.gameDeltaTime=0}update(){this.gameDeltaTime=this.getDelta(),this.gameTime=this.elapsedTime}},ZE=$E;var e0=class{constructor(e){this.isDestroyed=!1,this.isFirstRender=!0,this.blur=!1,this.container=e,this.renderer=new pA({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e.clientWidth,e.clientHeight),e.appendChild(this.renderer.domElement);let t=this.renderer.domElement;this.scene=new Ed,this.camera=new Hn(70,t.clientWidth/t.clientHeight,.1,100),this.clock=new ZE,window.onresize=()=>{this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}clear(){let e=[];this.scene.traverse(t=>{e.push(t)});for(let t of e)t.removeFromParent()}restart(){this.clear(),this.scene=new Ed,this.clock=new ZE}animate(){this.isFirstRender&&(this.setCull(!1),this.isFirstRender=!1),this.clock.update(),this.render()}render(){this.renderer.render(this.scene,this.camera)}setCull(e){this.scene.traverse(t=>{t.frustumCulled=e})}gameLoop(){this.gameLoopId&&cancelAnimationFrame(this.gameLoopId),!this.isDestroyed&&(this.animate(),this.gameLoopId=requestAnimationFrame(()=>this.gameLoop()))}start(){this.gameLoop()}dispose(){this.container.removeChild(this.renderer.domElement),this.isDestroyed=!0}},OT=e0;var Zt={common:"./assets/game/shared",golf:"./assets/game/golf-level",climb:"./assets/game/climb-level",slide:"./assets/game/slide-level"},Pd={models:{level:`${Zt.common}/tile.glb`},textures:{player:`${Zt.common}/character.webp`,backdrop:`${Zt.common}/backdrop.webp`,diamond:`${Zt.common}/diamond.webp`,stage:`${Zt.common}/stage.webp`,plane:`${Zt.common}/plane.webp`}},NT={models:{level:`${Zt.golf}/golf-level.glb`},textures:Bt(ae({},Pd.textures),{sky:`${Zt.golf}/sky.webp`,ground:`${Zt.golf}/ground.webp`,sun:`${Zt.golf}/sun.webp`,clouds:`${Zt.golf}/clouds.webp`,city:`${Zt.golf}/city.webp`})},FT={models:{level:`${Zt.climb}/climb-level.glb`},textures:Bt(ae({},Pd.textures),{sky:`${Zt.climb}/sky.webp`,ground:`${Zt.common}/ground.webp`,hills:`${Zt.common}/hills.webp`,clouds:`${Zt.common}/clouds.webp`,city:`${Zt.common}/city.webp`,crowd:`${Zt.climb}/crowd.webp`,tower:`${Zt.climb}/tower.webp`})},kT={models:{level:`${Zt.slide}/slide-level.glb`},textures:Bt(ae({},Pd.textures),{sky:`${Zt.slide}/sky.webp`,ground:`${Zt.common}/ground.webp`,hills:`${Zt.common}/hills.webp`,clouds:`${Zt.common}/clouds.webp`,city:`${Zt.common}/city.webp`})};var UT={tracking:{weights:new x(.5,1,0)},keyframes:{intro:{fov:60,position:new x(0,2,-6),lookAt:new x(0,2,10),transitionSpeed:1},play:{fov:60,position:new x(0,2,-6),lookAt:new x(0,2,10),transitionSpeed:1},outro:{fov:60,position:new x(0,2,-6),lookAt:new x(0,2,10),transitionSpeed:1}}},GT={tracking:{weights:new x(.5,1,0)},keyframes:{intro:{fov:65,position:new x(0,2,0),lookAt:new x(0,2,10),transitionSpeed:1},play:{fov:60,position:new x(0,2,-6.5),lookAt:new x(0,2,10),transitionSpeed:10},outro:{fov:50,position:new x(0,2,-12),lookAt:new x(0,2,10),transitionSpeed:1}}},HT={tracking:{weights:new x(1,.2,1)},keyframes:{intro:{fov:60,position:new x(-9,3.5,5),lookAt:new x(0,3.5,5),transitionSpeed:1},play:{fov:60,position:new x(-12,5,2),lookAt:new x(0,3.5,2),transitionSpeed:10},outro:{fov:60,position:new x(-12,5,2),lookAt:new x(0,5,2),transitionSpeed:1}}},VT={tracking:{weights:new x(.5,1,0)},keyframes:{intro:{fov:60,position:new x(0,2,0),lookAt:new x(0,2,10),transitionSpeed:1},play:{fov:60,position:new x(0,2,-6),lookAt:new x(0,2,10),transitionSpeed:10},outro:{fov:50,position:new x(0,2,-12),lookAt:new x(0,2,10),transitionSpeed:1}}};var QT={scrollSpeed:10,tileSize:20,jumpForce:1,laneWidth:1.5,pointValue:1,laneChangeDamping:.1,tilePadding:{before:2,after:2}},zT={scrollSpeed:22,tileSize:40,jumpForce:.6,laneWidth:2,pointValue:1,laneChangeDamping:.07,tilePadding:{before:1,after:4}},KT={scrollSpeed:8.5,tileSize:24,jumpForce:.7,pointValue:1,laneChangeDamping:.01,laneWidth:0,tilePadding:{before:1,after:4}},WT={scrollSpeed:40,tileSize:80,jumpForce:0,pointValue:1,laneChangeDamping:.06,laneWidth:1.5,tilePadding:{before:1,after:4}};var Ks=function(n){return n[n.Tile1=1]="Tile1",n}(Ks||{}),jT=[Ks.Tile1,Ks.Tile1,Ks.Tile1,Ks.Tile1,Ks.Tile1,Ks.Tile1,Ks.Tile1,Ks.Tile1];var En=function(n){return n[n.Start=10]="Start",n[n.End=11]="End",n[n.Empty=9]="Empty",n[n.Gate1=7]="Gate1",n[n.Gate2=8]="Gate2",n[n.Tile1=6]="Tile1",n[n.Tile2=1]="Tile2",n[n.Tile3=2]="Tile3",n[n.Tile4=5]="Tile4",n[n.Tile5=3]="Tile5",n[n.Tile6=4]="Tile6",n}(En||{}),JT=[En.Empty,En.Start,En.Tile1,En.Tile2,En.Tile3,En.Tile6,En.Gate1,En.Tile3,En.Tile4,En.Tile2,En.Tile1,En.Gate2,En.Tile5,En.Tile1,En.Tile4,En.Tile6,En.End,En.Empty,En.Empty,En.Empty,En.Empty];var Ei=function(n){return n[n.Tile1=1]="Tile1",n[n.Tile2=2]="Tile2",n[n.Tile3=3]="Tile3",n[n.Tile4=4]="Tile4",n[n.Tile5=5]="Tile5",n[n.Tile6=6]="Tile6",n[n.Tile7=7]="Tile7",n[n.Start=9]="Start",n[n.Empty=10]="Empty",n[n.EmptyEnd=12]="EmptyEnd",n[n.End=11]="End",n}(Ei||{}),qT=[Ei.Empty,Ei.Start,Ei.Tile1,Ei.Tile2,Ei.Tile3,Ei.Tile4,Ei.Tile5,Ei.Tile6,Ei.Tile7,Ei.End,Ei.EmptyEnd,Ei.EmptyEnd,Ei.EmptyEnd,Ei.EmptyEnd];var pn=function(n){return n[n.Start=9]="Start",n[n.Tile1=2]="Tile1",n[n.Tile2=1]="Tile2",n[n.Tile3=3]="Tile3",n[n.Tile4=6]="Tile4",n[n.Tile5=7]="Tile5",n[n.Tile6=8]="Tile6",n[n.Tile7=5]="Tile7",n[n.Tile8=4]="Tile8",n[n.End=10]="End",n[n.Empty=11]="Empty",n}(pn||{}),YT=[pn.Start,pn.Tile1,pn.Tile2,pn.Tile3,pn.Tile4,pn.Tile5,pn.Tile6,pn.Tile7,pn.Tile8,pn.Tile1,pn.Tile2,pn.Tile3,pn.Tile4,pn.Tile5,pn.Tile6,pn.Tile7,pn.Tile8,pn.End,pn.Empty,pn.Empty,pn.Empty,pn.Empty];var XT={shadows:!0,bloom:!0,blur:!1,scoreScale:1,scoreHeight:1,runCycleSpeed:1,playerYOffset:0},$T={shadows:!0,bloom:!0,blur:!1,scoreScale:1,scoreHeight:1.5,runCycleSpeed:1,playerYOffset:-.05,curve:{swayFrequency:.075,swayScale:2,horizonBias:1,horizonBendScale:.05,horizonBendPower:1.5}},ZT={shadows:!1,bloom:!0,blur:!1,scoreScale:2,scoreHeight:.7,runCycleSpeed:1,playerYOffset:-.1},eR={shadows:!1,bloom:!1,blur:!1,scoreScale:1,scoreHeight:1,runCycleSpeed:1,playerYOffset:-.1,curve:{swayFrequency:.05,swayScale:2,horizonBias:10,horizonBendScale:.05,horizonBendPower:1.8}};var Jt=function(n){return n.GOLF="GOLF",n.SLIDE="SLIDE",n.CLIMB="CLIMB",n.DEFAULT="DEFAULT",n}(Jt||{}),Ma={assetSources:Pd,cameraParams:UT,gameplayParams:QT,graphicsParams:XT,levelBlueprint:jT},tR={assetSources:NT,cameraParams:GT,gameplayParams:zT,graphicsParams:$T,levelBlueprint:JT},nR={assetSources:FT,cameraParams:HT,gameplayParams:KT,graphicsParams:ZT,levelBlueprint:qT},iR={assetSources:kT,cameraParams:VT,gameplayParams:WT,graphicsParams:eR,levelBlueprint:YT};var t0=class{constructor(){this.assetSources=Ma.assetSources,this.cameraParams=Ma.cameraParams,this.gameplayParams=Ma.gameplayParams,this.levelBlueprint=Ma.levelBlueprint,this.graphicsParams=Ma.graphicsParams,this.levelId=Jt.DEFAULT}setLevel(e=Jt.DEFAULT){let t=Ma;switch(e){case Jt.CLIMB:t=nR;break;case Jt.GOLF:t=tR;break;case Jt.SLIDE:t=iR;break}this.assetSources=t.assetSources,this.cameraParams=t.cameraParams,this.gameplayParams=t.gameplayParams,this.levelBlueprint=t.levelBlueprint,this.graphicsParams=t.graphicsParams,this.levelId=e}},tK=new t0,Ze=tK;var IZ=Math.PI/180,SZ=180/Math.PI;function OA(n,e,t){return Math.max(e,Math.min(t,n))}function Ld(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Od(n,e,t){return(1-t)*n+t*e}var wa=function(n){return n.INTRO="intro",n.PLAY="play",n.OUTRO="outro",n}(wa||{}),n0={fast:1,slow:100},rR=2,nK=.2,i0=class extends xt{constructor(e){super(),this.transitionSpeedDamping=1,this.frame=Ze.cameraParams.keyframes.intro,this.transitionSpeed=this.frame.transitionSpeed,this.add(e),this.camera=e,this.weights=Ze.cameraParams.tracking.weights.clone()}init(){this.camera.fov=this.frame.fov,this.camera.far=2e3,this.camera.updateProjectionMatrix(),this.camera.position.copy(this.frame.position),this.camera.lookAt(this.frame.lookAt)}setTarget(e){this.target=e}setStatus(e){switch(e){case wa.INTRO:this.transitionSpeedDamping=n0.fast,this.frame=Ze.cameraParams.keyframes.intro;break;case wa.PLAY:this.transitionSpeedDamping=n0.fast,this.frame=Ze.cameraParams.keyframes.play;break;case wa.OUTRO:this.transitionSpeedDamping=n0.slow,this.frame=Ze.cameraParams.keyframes.outro;break}}update(e,t=0){if(!this.target)return;let i=OA(e*this.transitionSpeedDamping,0,1);this.transitionSpeed=Od(this.transitionSpeed,this.frame.transitionSpeed,i);let r=this.getCurve(Ze.graphicsParams.curve,t);this.rotation.y=r*nK;let s=this.target.position.clone();s.multiply(this.weights),s.add(this.frame.position),this.camera.position.lerp(s,e*this.transitionSpeed),this.camera.fov=Od(this.camera.fov,this.frame.fov,e*this.transitionSpeed),this.camera.updateProjectionMatrix()}getCurve(e,t){if(!e)return 0;let i=t+rR,r=t-rR,s=Math.sin(i*e.swayFrequency)*e.swayScale,o=Math.sin(r*e.swayFrequency)*e.swayScale;return s-o}},r0=i0;var Ba=function(n){return n.OBSTACLE="obstacle",n.PLATFORM="platform",n.COLLECTIBLE="collectible",n}(Ba||{}),As=function(n){return n.LEFT="Left",n.RIGHT="Right",n.TOP="Top",n.BOTTOM="Bottom",n.FRONT="Front",n.BACK="Back",n}(As||{}),Cr=function(n){return n.FLAT="Flat",n.TUBE="Tube",n.HOLE="Hole",n}(Cr||{}),s0=class{constructor(e){this.obstacles=[],this.platforms=[],this.collectibles=[],this.player=e,this.groundShape=Cr.FLAT}handleObstaclesCollisions(){this.obstacles.forEach(e=>{this.player.boundingBox.collisionTest(e.boundingBox)&&this.onCollision&&this.onCollision(Ba.OBSTACLE)})}handleCollectiblesCollisions(){this.collectibles.forEach(e=>{this.player.boundingBox.collisionTest(e.boundingBox)&&(e.isCollected||(e.collect(),this.onCollision&&this.onCollision(Ba.COLLECTIBLE)))})}handlePlatformsCollisions(){this.platforms.forEach(e=>{let t=this.player.boundingBox.collisionTest(e.boundingBox);t&&(t.includes(As.TOP)?this.player.physicsObject.applyPlatform(e):this.onCollision&&this.onCollision(Ba.OBSTACLE))})}setGroundShape(e){this.groundShape=e}update(e,t){let{obstacles:i,platforms:r,collectibles:s}=t;this.obstacles=i,this.platforms=r,this.collectibles=s,this.obstacles.forEach(o=>o.boundingBox.update()),this.platforms.forEach(o=>o.boundingBox.update()),this.collectibles.forEach(o=>o.boundingBox.update()),this.player.boundingBox.update(),this.player.physicsObject.update(e),this.handleObstaclesCollisions(),this.handlePlatformsCollisions(),this.handleCollectiblesCollisions(),this.player.physicsObject.applyGround(this.groundShape)}},o0=s0;var iK=4,rK=.4,a0=class{constructor(e){this.currentAction=ui.UP,this.isTriggered=!1,this.start=new we,this.swipeThreshold=e.clientWidth*rK,this.canvas=e,this.addListeners(e)}addListeners(e){e.addEventListener("touchstart",this.handleTouchStart.bind(this),!1),e.addEventListener("touchmove",this.handleTouchMove.bind(this),!1),e.addEventListener("touchend",this.handleTouchEnd.bind(this),!1)}removeListeners(){this.canvas.removeEventListener("touchstart",this.handleTouchStart.bind(this),!1),this.canvas.removeEventListener("touchmove",this.handleTouchMove.bind(this),!1),this.canvas.removeEventListener("touchend",this.handleTouchEnd.bind(this),!1)}handleTouchStart(e){if(this.currentAction=ui.UP,!this.onSwipe)return;if(Ze.levelId===Jt.CLIMB)return this.onSwipe(this.currentAction);this.isTriggered=!1;let t=e.touches[0];this.start=new we(t.clientX,t.clientY)}handleTouchMove(e){if(!this.onSwipe||Ze.levelId===Jt.CLIMB)return;let t=e.touches[0],i=new we(t.clientX,t.clientY),r=this.start.clone().sub(i);Math.abs(r.x)>iK&&(this.currentAction=r.x>0?ui.LEFT:ui.RIGHT),Math.abs(r.x)>this.swipeThreshold&&(this.onSwipe(this.currentAction),this.start.copy(i),this.isTriggered=!0)}handleTouchEnd(){!this.onSwipe||Ze.levelId===Jt.CLIMB||this.isTriggered||this.onSwipe(this.currentAction)}},sR=a0;var ui=function(n){return n.LEFT="ArrowLeft",n.RIGHT="ArrowRight",n.UP="ArrowUp",n}(ui||{}),NA=function(n){return n.USER_INPUT="user-input",n}(NA||{}),c0=class{constructor(e){this.onKeyDown=t=>{switch(t.key){case ui.LEFT:case ui.RIGHT:case ui.UP:this.handleKeyEvent(t.key);break}},this.events=new bs,this.initKeyListeners(),this.swipeSystem=new sR(e),this.swipeSystem.onSwipe=t=>{this.handleKeyEvent(t)}}initKeyListeners(){window.addEventListener("keydown",this.onKeyDown)}handleKeyEvent(e){Ze.levelId===Jt.CLIMB&&[ui.LEFT,ui.RIGHT].includes(e)||Ze.levelId===Jt.SLIDE&&e===ui.UP||this.events.emit(NA.USER_INPUT,e)}removeListeners(){this.events.removeAllListeners(),window.removeEventListener("keydown",this.onKeyDown),this.swipeSystem.removeListeners()}},oR=c0;var Kn=function(n){return n.OBSTACLE="obstacle",n.PLATFORM="platform",n.COLLECTIBLE="collectible",n.INSTANCE_HELPER="instanceHolder",n.BOUNDING_BOX="bounding-box",n}(Kn||{}),Il=function(n){return n.RETRO_MATERIAL="retro-material",n}(Il||{}),gs=function(n){return n.ANIMATED_SPRITE="animated-sprite",n.DEBUG="debug",n}(gs||{});var l0=class extends li{constructor(e){if(super(),this.obstacles=[],this.platforms=[],this.collectibles=[],this.instanceHolders=[],e){this.name=e.name;for(let t of e.children)this.add(t.clone());this.init()}}init(){this.traverse(e=>{switch(e.userData.type){case Kn.PLATFORM:this.platforms.push(e);break;case Kn.OBSTACLE:this.obstacles.push(e);break;case Kn.COLLECTIBLE:this.collectibles.push(e);break;case Kn.INSTANCE_HELPER:this.instanceHolders.push(e);break}})}mount(){for(let e of this.instanceHolders)e.assignInstance();for(let e of this.collectibles)e.reset()}unmount(){for(let e of this.instanceHolders)e.unassignInstance()}update(){for(let e of this.instanceHolders)e.update()}copy(e,t){return super.copy(e,t),this.init(),this}},aR=l0;function cR(n){let e=n.replace(/\D/g,"");return Number(e)}var u0=class{constructor(){this.tileLibrary={},this.tiles=[]}init(e){e.traverse(t=>{t.name.includes(Ln.MODULE)&&(this.tileLibrary[cR(t.name)]=new aR(t.clone()))});for(let t of Ze.levelBlueprint)this.tileLibrary[t]&&this.tiles.push(this.tileLibrary[t].clone())}take(){let t=this.tiles.splice(0,1)[0];return t?(t.mount(),t.visible=!0,t):null}},lR=u0;var d0=class{constructor(e,t,i){this.name=e,this.instancedMesh=new Al(t.geometry,t.material,i),this.instancedMesh.frustumCulled=!1,this.instancedMesh.name=this.name,this.instancePool=[...Array(i).keys()].map(r=>r),this.instancedMesh.instanceMatrix.setUsage(ST),this.instancedMesh.instanceMatrix.needsUpdate=!0,this.hideAll()}hideAll(){let e=new xt;e.position.set(0,0,0),e.scale.set(0,0,0),e.updateMatrix();for(let t=0;t<this.instancePool.length;t++)this.instancedMesh.setMatrixAt(t,e.matrix)}hideAt(e){let t=new xt;t.position.set(0,0,0),t.scale.set(0,0,0),t.updateMatrix(),this.instancedMesh.setMatrixAt(e,t.matrix)}takeInstanceIndex(){return this.instancePool.pop()}giveInstanceIndex(e){this.instancePool.push(e),this.hideAt(e)}setInstanceColor(e,t){this.instancedMesh.setColorAt(e,t),this.instancedMesh.instanceColor&&(this.instancedMesh.instanceColor.needsUpdate=!0)}},Nd=d0;function Fd(n){return n.replace(/[0-9]/g,"")}var uR=`
  float getSine(float scroll, float oscSpeed, float scale) {
    return sin(scroll * oscSpeed) * scale;
  }

  float getIntensityCurve(float scroll, float scale, float power) {
    float value = pow(abs(scroll) * scale, power);
    return clamp(value, -1., 1.);
  }
`;var dR=`
  mat4 getBillboardedMatrix(mat4 modelViewMatrix, mat4 transformMatrix) {

  // Column 0:
  modelViewMatrix[0][0] = sign(modelViewMatrix[0][0]) * length(vec3(transformMatrix[0]));
  modelViewMatrix[0][1] = 0.;
  modelViewMatrix[0][2] = 0.;

  #ifdef BILLBOARD_TYPE_SPHERE
    // Column 1:
    modelViewMatrix[1][0] = 0.;
    modelViewMatrix[1][1] = length(vec3(transformMatrix[1]));
    modelViewMatrix[1][2] = 0.;
    // Column 2:
    modelViewMatrix[2][0] = 0.;
    modelViewMatrix[2][1] = 0.;
    modelViewMatrix[2][2] = 1.;
  #endif

    return modelViewMatrix;
  }
`,hR=`
  #ifdef IS_BILLBOARD
    mat4 billboardModelViewMatrix = getBillboardedMatrix(vViewMatrix * vModelMatrix, vModelMatrix);
    vViewMatrix = billboardModelViewMatrix * inverse(vModelMatrix);
  #endif
`;var fR=`
  #include <common>
  #include <packing>
  #include <bsdfs>
  #include <lights_pars_begin>
  #include <lights_phong_pars_fragment>
  #include <shadowmap_pars_fragment>
`,pR=`
  IncidentLight directLight;
  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif
    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
      directionalLight = directionalLights[ i ];
      getDirectionalLightInfo( directionalLight, directLight );
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      shadowColor *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif
    }
    #pragma unroll_loop_end
  #endif
`,AR=`
  vec3 shadowWorldNormal = inverseTransformDirection( normal, viewMatrix );
  vec4 shadowWorldPosition;

  #if defined( USE_SHADOWMAP )
    #if NUM_DIR_LIGHT_SHADOWS > 0
      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
        shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
        vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
      }
      #pragma unroll_loop_end
    #endif
    #if NUM_POINT_LIGHT_SHADOWS > 0
      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
        shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
        vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
      }
      #pragma unroll_loop_end
    #endif
  #endif
`;var gR=`
  #define PHONG

  uniform float zScroll;
  uniform float curveIntensity;
  uniform vec2 uvScale;

  varying vec3 vViewPosition;
  varying vec3 vWorld;
  varying vec3 vColor;
  varying vec2 vUv;

  #include <common>
  #include <shadowmap_pars_vertex>
  #include <curve-functions>
  ${dR}

  void main() {
    vec4 worldPosition = vec4(position, 1.);
    mat4 vModelMatrix = modelMatrix;
    #ifdef USE_INSTANCING
      vModelMatrix *= instanceMatrix;
    #endif
    worldPosition = vModelMatrix * vec4(position, 1.);

    vColor = vec3(1.);
    #ifdef USE_INSTANCING_COLOR
      vColor = instanceColor;
    #endif

    ${AR}

    #ifdef IS_CURVE
      float zWorld = worldPosition.z;
      float zGameWorld = worldPosition.z + zScroll;

      worldPosition.x += getXCurveOffset(worldPosition, zScroll);
      worldPosition.y += getYCurveOffset(worldPosition, zScroll);
    #endif

    mat4 vViewMatrix = viewMatrix;
    ${hR}

    vWorld = worldPosition.xyz;
    vUv = uv * uvScale;
    gl_Position = projectionMatrix * vViewMatrix * worldPosition;
  }
`;var mR=`
  #define PHONG

  struct ShadowParams {
    float minIntensity;
    float distanceFactor;
    float distanceBias;
  };

  const ShadowParams sParams = ShadowParams(0.7, 0.1, 2.);

  uniform sampler2D map;
  uniform vec3 color;
  uniform vec3 playerWorld;
  uniform float opacity;
  uniform vec2 mapOffset;

  varying vec2 vUv;
  varying vec3 vWorld;
  varying vec3 vColor;
  ${fR}

  float mapRange(float value, float min1, float max1, float min2, float max2) {
    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
  }

  void main() {
    if(opacity < .2) discard;

    vec4 outCol = vec4(color, 1.);
    vec3 shadowColor = vec3(1.);

    #ifdef IS_TEXTURE
      outCol = texture2D(map, vUv + mapOffset);
      #ifndef IS_TRANSPARENT
        if(outCol.a < .8) discard;
      #endif
    #endif

    ${pR}

    float lightColor = shadowColor.r + max(vWorld.z - sParams.distanceBias, 0.) * sParams.distanceFactor;
    lightColor = clamp(lightColor, 0., 1.);

    float shadow = mapRange(lightColor, 0., 1., sParams.minIntensity, 1.);
    vec3 albedo = outCol.xyz * vColor * shadow;
    float alpha = 1.;
    albedo = pow(albedo, vec3(.7));

    gl_FragColor = vec4(vec3(albedo), alpha);
  }
`;function Sl(n){return n.toString().includes(".")?n:Number(n).toFixed(1)}var h0={color:new be("white"),opacity:1,uvScale:new we(1,1)},f0=class extends IA{constructor(e){e.color=e.color||h0.color,e.uvScale=e.uvScale||h0.uvScale,e.opacity=e.opacity==null?h0.opacity:e.opacity,e.map&&(e.map.colorSpace=Qt,e.map.magFilter=on,e.map.minFilter=on),super({opacity:e.opacity,map:e.map,color:e.color,alphaTest:e.alphaTest||.5}),this.isCompiled=!1,this.mapOffset=new we,this.zScroll=e.zScroll||0,this.isCurve=!!e.isCurve,this.isBillboard=!!e.isBillboard,this.uvScale=e.uvScale,this.uniforms=null,this.preCompile(),this.side=Xi,this.transparent=!!e.isTransparent,this.hide(),this.name=Il.RETRO_MATERIAL,this.userData.type=Il.RETRO_MATERIAL,this.customProgramCacheKey=function(){return(Math.random()*1e6).toFixed(1)}}preCompile(){this.onBeforeCompile=function(e){e.uniforms=Bt(ae({},e.uniforms),{zScroll:{value:this.zScroll},playerWorld:{value:new x},color:{value:this.color},map:{value:this.map},mapOffset:{value:this.mapOffset},uvScale:{value:this.uvScale}}),e.vertexShader=`
        ${this.isCurve&&Ze.graphicsParams.curve?"#define IS_CURVE":""}
        ${this.isBillboard?"#define IS_BILLBOARD":""}
        ${gR.replace("#include <curve-functions>",this.getCurveFunction(Ze.graphicsParams.curve))}
      `,e.fragmentShader=`
        ${this.transparent?"#define IS_TRANSPARENT":""}
        ${this.map?"#define IS_TEXTURE":""}
        ${mR}
      `,this.uniforms=e.uniforms,this.isCompiled=!0,this.show()}}updateUniforms(){this.uniforms&&(this.uniforms.zScroll.value=this.zScroll,this.uniforms.mapOffset.value=this.mapOffset,this.uniforms.uvScale.value=this.uvScale)}hide(){this.colorWrite=!1}show(){this.colorWrite=!0}getCurveFunction(e){if(!e)return"";let t=Sl(e.swayFrequency),i=Sl(e.swayScale),r=Sl(e.horizonBias),s=Sl(e.horizonBendScale),o=Sl(e.horizonBendPower);return`
      ${uR}

      float getXCurveOffset(vec4 worldPosition, float gameScroll) {
        float zGameWorld = worldPosition.z + gameScroll;
        float bias = getSine(gameScroll, ${t}, ${i});
        float displacement = getSine(zGameWorld, ${t}, ${i});
        return displacement - bias;
      }

      float getYCurveOffset(vec4 worldPosition, float gameScroll) {
        float transformedZ = max(worldPosition.z - ${r}, 0.);
        return - pow(transformedZ * ${s}, ${o});
      }
    `}},Lo=f0;var p0=class extends $t{constructor(e){e.colorSpace=Qt;let t=new ps,i=new Lo({map:e,isBillboard:!0,isCurve:!0});super(t,i),this.name="diamond"}},_R=p0;var g0="collectible-instance-manager",CR=225,A0=class{constructor(){this.instancedMeshManagers=[]}init(e,t){this.generateInstancedMeshManagers(e),this.generateCollectibleInstanceManager(t)}addInstancedMeshesTo(e){for(let t of this.instancedMeshManagers)e.add(t.instancedMesh)}getManagerByName(e){return this.instancedMeshManagers.find(i=>i.name===e)}generateCollectibleInstanceManager(e){let t=new _R(e),i=new Nd(g0,t,CR);this.instancedMeshManagers.push(i)}generateInstancedMeshManagers(e){e.traverse(t=>{if(t.name.includes(Ln.INSTANCE)){let i=t,r=Fd(i.name);if(!this.instancedMeshManagers.find(o=>o.name===r)){let o=new Nd(r,i,CR);this.instancedMeshManagers.push(o)}}})}},yR=A0;var m0=class extends xt{constructor(e){super(),this.index=-1,this.manager=new Nd("",new $t,0),e&&this.init(e),this.userData.type=Kn.INSTANCE_HELPER}init(e){this.manager=e,this.name=this.manager.name}assignInstance(){let e=this.manager.takeInstanceIndex();if(e===void 0)return console.error("instance pool is empty");this.index=e}unassignInstance(){this.manager.giveInstanceIndex(this.index),this.index=-1}setColor(e){this.manager.setInstanceColor(this.index,e)}update(){if(this.index===-1)return;let e=this.matrixWorld;this.updateMatrixWorld(),this.manager.instancedMesh.setMatrixAt(this.index,e),this.manager.instancedMesh.instanceMatrix.needsUpdate=!0}copy(e,t){return super.copy(e,t),this.init(e.manager),this}},kd=m0;var _0=class extends $t{constructor(e="red"){let t=new va,i=new mr({wireframe:!0,color:e});super(t,i),this.userData.type=gs.DEBUG,this.color=e,this.visible=!1}copy(e,t){super.copy(e,t);let i=this.material;return i.color=new be(this.color),this}},C0=_0;var y0=class extends xt{constructor(){super(),this.world={position:new x,scale:new x},this.debug=new C0("red"),this.children.length===0&&this.init(),this.update(),this.name="bounding-box",this.userData.type=Kn.BOUNDING_BOX}init(){this.debug=new C0("red"),this.debug.scale.set(1,1,1),this.debug.position.set(0,0,0),this.add(this.debug)}update(){this.getWorldPosition(this.world.position),this.getWorldScale(this.world.scale)}getTop(){return this.world.position.y+this.world.scale.y/2}getBottom(){return this.world.position.y-this.world.scale.y/2}getHeightOffset(){return this.world.scale.y/2}getBounds(){let{position:e,scale:t}=this.world;return{top:e.y+t.y/2,bottom:e.y-t.y/2,right:e.x+t.x/2,left:e.x-t.x/2,front:e.z+t.z/2,back:e.z-t.z/2}}collisionTest(e){let t=this.getBounds(),i=e.getBounds(),r=t.bottom>=i.top,s=t.top<=i.bottom,o=t.left>=i.right,a=t.right<=i.left,c=t.back>=i.front,l=t.front<=i.back;if(r||s||o||a||c||l)return!1;let u=[Math.abs(t.bottom-i.top),Math.abs(t.top-i.bottom),Math.abs(t.left-i.right),Math.abs(t.right-i.left),Math.abs(t.back-i.front),Math.abs(t.front-i.back)],d=[];return u.forEach((h,f)=>{if(h<.2)switch(f){case 0:d.push(As.TOP);break;case 1:d.push(As.BOTTOM);break;case 2:d.push(As.RIGHT);break;case 3:d.push(As.LEFT);break;case 4:d.push(As.FRONT);break;case 5:d.push(As.BACK);break}}),d.length===0&&d.push(As.TOP),d}copy(e,t){super.copy(e,t);let i=this.children[0];if(!i||i.userData.type!==gs.DEBUG)throw Error("bounding box copy does not have a debug cube");return this.debug=this.children[0],this}},Ud=y0;var E0=class extends li{constructor(){super(),this.boundingBox=new Ud}init(){this.boundingBox=new Ud,this.add(this.boundingBox)}copy(e,t){super.copy(e,t);let i=this.children.find(r=>r.userData.type===Kn.BOUNDING_BOX);if(!i)throw Error("collidable copy missing bounding box");return this.boundingBox=i,this}},xl=E0;var v0=class extends xl{constructor(){super(),this.name=Ln.OBSTACLE,this.userData.type=Kn.OBSTACLE}},ER=v0;var I0=class extends xl{constructor(){super(),this.name=Ln.PLATFORM,this.userData.type=Kn.PLATFORM}},vR=I0;var S0=class extends xl{constructor(e){super(),this.isCollected=!1,e?(this.instanceHolder=e,this.add(this.instanceHolder)):this.instanceHolder=new kd,this.name=Ln.COLLECTIBLE,this.userData.type=Kn.COLLECTIBLE}collect(){this.instanceHolder.unassignInstance(),this.isCollected=!0}reset(){this.isCollected=!1,!(this.instanceHolder.index>=0)&&this.instanceHolder.assignInstance()}copy(e,t){super.copy(e,t);let i=this.children.find(r=>r.userData.type===Kn.INSTANCE_HELPER);if(!i)throw Error("collectible copy - no instance holder");return this.instanceHolder=i,this}},IR=S0;var FA=ae({},console);FA.log=(n,e)=>{},FA.error=(n,e)=>{},FA.warn=(n,e)=>{};var kA=FA;var x0=class{buildLevel(e,t){this.replaceInstances(e,t),this.generateCollidables(e,t)}replaceInstances(e,t){let i=t.instancedMeshManagers;for(let r of i){let s=[];e.traverse(o=>{if(o.type!=="Mesh")return;let a=Fd(o.name),c=Fd(r.name);a===c&&s.push(o)});for(let o of s){let a=new kd(r);this.replaceObjectBy(o,a)}}}generateCollidables(e,t){let i=t.getManagerByName(g0),r={obstacles:[],platforms:[],collectibles:[]};e.traverse(s=>{if(s.name.includes(Ln.OBSTACLE)){r.obstacles.push(s);return}if(s.name.includes(Ln.PLATFORM)){r.platforms.push(s);return}if(s.name.includes(Ln.COLLECTIBLE)){r.collectibles.push(s);return}});for(let s of r.obstacles){let o=new ER;o.init(),this.replaceObjectBy(s,o)}for(let s of r.platforms){let o=new vR;o.init(),this.replaceObjectBy(s,o)}for(let s of r.collectibles){let o=new kd(i),a=new IR(o);a.init(),this.replaceObjectBy(s,a)}}replaceObjectBy(e,t){if(t.position.copy(e.position),t.quaternion.copy(e.quaternion),t.scale.copy(e.scale),!e.parent)return kA.error("parent not found");e.parent.add(t),e.removeFromParent()}},SR=x0;var Ln=function(n){return n.OBSTACLE="obstacle",n.PLATFORM="platform",n.MODULE="module",n.COLLECTIBLE="collectible",n.DIAMOND="diamond",n.INSTANCE="-instance",n.BILLBOARD="-billboard",n.SHADOWS="-shadows",n.ROAD="road-",n.GRASS="grass-",n}(Ln||{}),xR=function(n){return n.ADD_TILE="ADD_TILE",n}(xR||{}),oK=100,aK=0,M0=class extends xt{constructor(e=new bs){super(),this.scroll=0,this.scroll=0,this.tiles=[],this.pool=new lR,this.instanceSystem=new yR,this.events=e,this.builder=new SR,this.buildProgress=0}init(e,t){this.instanceSystem.init(e,t),this.instanceSystem.addInstancedMeshesTo(this),this.builder.buildLevel(e,this.instanceSystem),this.pool.init(e);for(let i=0;i<oK;i++)this.addTile()}update(e,t=4){this.scroll+=t*e;let i=!1,r=[...this.tiles];for(let s=0;s<r.length;s++){let o=r[s];o.update(),o.position.z-=t*e,o.position.z<=-(Ze.gameplayParams.tileSize*1.5)&&(this.removeTile(s),i=!0)}i&&this.addTile()}updatePhysics(){let e=[],t=[],i=[];return this.tiles[0]&&(e.push(...this.tiles[0].obstacles),t.push(...this.tiles[0].platforms),i.push(...this.tiles[0].collectibles)),this.tiles[1]&&(e.push(...this.tiles[1].obstacles),t.push(...this.tiles[1].platforms),i.push(...this.tiles[1].collectibles)),{obstacles:e,platforms:t,collectibles:i}}addTile(){let e=this.pool.take(),t=this.tiles[this.tiles.length-1];e&&(e.position.z=t?t.position.z+Ze.gameplayParams.tileSize:aK,this.add(e),this.tiles.push(e),this.events.emit(xR.ADD_TILE,{tile:e,progress:this.buildProgress}),this.buildProgress+=1,this.onAddTile&&this.onAddTile(e))}removeTile(e){let t=this.tiles.splice(e,1)[0];t.unmount(),t.removeFromParent()}},w0=M0;var B0=class extends Lo{constructor(e){if(super(e),!e.map)throw Error("sprite material needs a texture")}},MR=B0;var D0=class{constructor(){this.isActive=!1,this.interval=0,this.loop=!1,this.iteration=0,this.callback=()=>{},this.time=0}update(e){if(this.isActive&&(this.time-=e,!(this.time>0))){if(this.callback(this.iteration),!this.loop){this.isActive=!1;return}this.iteration+=1,this.time=this.interval}}getProgress(){return Ld(this.time,this.interval,0,0,1)}set(e,t,i=!1){this.interval=t,this.loop=i,this.callback=e,this.isActive=!0,this.iteration=0,this.time=this.interval}},wR=D0;var b0=class{constructor(e,t){this.timer=new wR,this.onUvUpdate=()=>{};let i=ae({},t);i.sheet.texture=e,this.blueprint=i,this.uvParams={origin:new we(0,0),scale:new we(1,1)}}setState(e){let t=this.blueprint.states[e];if(!t)throw new Error("sprite animation does not exist");this.setActiveCell(t,0),this.timer.set(i=>this.setActiveCell(t,i),t.animation.speed,!0)}update(e){this.timer.update(e)}setActiveCell(e,t){let i=t%e.cells.length,r=e.cells[i],{grid:s}=this.blueprint.sheet;this.uvParams.scale=new we(1/s[0],1/s[1]),this.uvParams.origin=new we(r[0]*this.uvParams.scale.x,r[1]*this.uvParams.scale.y),this.onUvUpdate(this.uvParams)}},BR=b0;var nr=function(n){return n.IDLE="idle",n}(nr||{}),T0=class extends $t{constructor(e,t,i){let{width:r,height:s}=t.plane,o=new ps(r*2,s*2),a=new MR({map:e});super(o,a),this.animationSystem=new BR(e,t),this.animationSystem.onUvUpdate=c=>{this.updateUv(c)},this.userData.type=gs.ANIMATED_SPRITE,this.position.y=.25,this.baseUv=this.geometry.getAttribute("uv").clone(),this.init(i)}init(e){this.animationSystem.setState(e)}setState(e){this.animationSystem.setState(e)}update(e){this.animationSystem.update(e)}updateUv(e){let t=this.geometry.getAttribute("uv");for(let i=0;i<t.count;i++){let r=new we(this.baseUv.getX(i),this.baseUv.getY(i));r.multiply(e.scale).add(e.origin),t.setXY(i,r.x,r.y)}t.needsUpdate=!0}},UA=T0;function Oo(n,e){let t=[];for(let i=0;i<n;i++)t.push([i,e]);return t}var DR=15,R0={sheet:{texture:new fn,grid:[DR,1]},states:{[nr.IDLE]:{animation:{loop:!0,speed:.07},cells:Oo(DR,0)}},plane:{width:1,height:1}};var P0=class{constructor(e,t){this.scene=e,this.camera=t,this.materials={curve:[],collectible:[]}}prepare(e){e.traverse(t=>{t.type==="Mesh"&&t.userData.type!==gs.DEBUG&&(this.prepareMesh(t),this.prepareMaterial(t))})}init(){this.scene.traverse(e=>{e.type==="Mesh"&&e.userData.type!==gs.DEBUG&&(this.prepareMesh(e),this.prepareMaterial(e))})}prepareMesh(e){e.name.includes(Ln.SHADOWS)?e.receiveShadow=!0:e.castShadow=!0,e.name.includes(Ln.COLLECTIBLE)&&this.materials.collectible.push(e.material)}prepareMaterial(e){let t=e.material;if(t.userData.type===Il.RETRO_MATERIAL){let i=t;this.prepareRetroMaterial(i,e)}else this.prepareStandardMaterial(t,e);this.registerMaterial(e.material),e.material.preCompile()}prepareRetroMaterial(e,t){e.name=`${t.name}-material`,this.registerMaterial(e)}prepareStandardMaterial(e,t){let i=t.name.includes(Ln.BILLBOARD),r=t.name.includes(Ln.SHADOWS),s=new Lo({isBillboard:i,isShadows:r,isCurve:!0,map:e.map||void 0});s.name=`${t.name}-material`,t.material=s}registerMaterial(e){let{isCurve:t}=e;!this.materials.curve.find(r=>r===e)&&t&&this.materials.curve.push(e)}update(e,t){this.updateCurveMaterials(e),this.updateCollectibleMaterials(t)}updateCollectibleMaterials(e){let{grid:t}=R0.sheet,{animation:i,cells:r}=R0.states[nr.IDLE],s=Math.floor(e/i.speed)%r.length,o=new we().fromArray(r[s]),a=new we(1/t[0],1/t[1]),c=o.multiply(a);for(let l of this.materials.collectible)l.uvScale=a,l.mapOffset=c,l.updateUniforms()}updateCurveMaterials(e){for(let t of this.materials.curve)t.zScroll=e,t.updateUniforms()}},L0=P0;var cK=.3,O0=2,lK=.7,bR=120,uK=.001,N0=class{constructor(e=new x,t){this.isJumping=!1,this.position=e.clone(),this.boundingBox=t,this.mass=lK,this.velocity=0,this.targetLane=0,this.currentLane=0}goRight(){let e=Math.max(this.targetLane-1,-1);this.targetLane!==e&&this.onLaneChange&&this.onLaneChange(),this.targetLane=e}goLeft(){let e=Math.min(this.targetLane+1,1);this.targetLane!==e&&this.onLaneChange&&this.onLaneChange(),this.targetLane=e}jump(){this.isJumping||(this.velocity=cK*Ze.gameplayParams.jumpForce,this.isJumping=!0,this.onJump&&this.onJump())}update(e){this.currentLane=Od(this.currentLane,this.targetLane,Ze.gameplayParams.laneChangeDamping*e*bR),this.position.x=this.currentLane*Ze.gameplayParams.laneWidth,this.velocity-=this.mass*e,this.position.y+=this.velocity*e*bR}applyPlatform(e){let t=e.boundingBox.getTop(),i=this.boundingBox.getHeightOffset();this.velocity>0||(this.isJumping=!1,this.position.y=t+i-uK,this.velocity=0)}applyGround(e){let t=new x(0,3,0),i=this.boundingBox.getHeightOffset(),r=this.position.clone().add(new x(0,-i,0));switch(e){case Cr.FLAT:if(r.y>0)return;this.isJumping=!1,this.position.y=i,this.velocity=0;break;case Cr.TUBE:if(t.distanceTo(r)<O0)return;this.isJumping=!1;let s=this.position.x/O0,o=Math.asin(s),c=(1-Math.cos(o))*O0;this.position.y=i+c,this.velocity=0;break;case Cr.HOLE:break}}},TR=N0;var Ml={width:9,height:5},Gd=.04,vi=function(n){return n.BACK="back",n.BACK_LEFT="backLeft",n.BACK_RIGHT="backRight",n.SIDE_RIGHT="sideRight",n.LYING="lying",n}(vi||{}),RR={sheet:{texture:new fn,grid:[Ml.width,5]},states:{[vi.BACK]:{animation:{loop:!0,speed:Gd},cells:Oo(Ml.width,4)},[vi.BACK_LEFT]:{animation:{loop:!0,speed:Gd},cells:Oo(Ml.width,3)},[vi.BACK_RIGHT]:{animation:{loop:!0,speed:Gd},cells:Oo(Ml.width,2)},[vi.SIDE_RIGHT]:{animation:{loop:!0,speed:Gd},cells:Oo(Ml.width,1)},[vi.LYING]:{animation:{loop:!0,speed:Gd},cells:Oo(Ml.width,0)}},plane:{width:1,height:1}};var dK=200,hK=5,F0=class extends UA{constructor(e,t){super(e,t,vi.BACK)}blink(){let e=0,t=setInterval(()=>{this.visible=!this.visible,e++,e>hK&&clearInterval(t)},dK)}update(e){super.update(e*Ze.graphicsParams.runCycleSpeed)}},PR=F0;var fK={Scale:new x(.6,1.6,.5)},k0=class extends li{constructor(){super(),this.boundingBox=new Ud,this.boundingBox.scale.copy(fK.Scale),this.add(this.boundingBox),this.previousLane=0,this.physicsObject=new TR(this.position,this.boundingBox),this.physicsObject.onJump=()=>{this.onJump&&this.onJump()},this.physicsObject.onLaneChange=()=>{this.onLaneChange&&this.onLaneChange()}}init(e){this.initMesh(e)}initMesh(e){switch(e.colorSpace=Qt,e.magFilter=on,this.mesh=new PR(e,RR),this.mesh.position.y=Ze.graphicsParams.playerYOffset,this.mesh.name="player-billboard",this.setInitialRotation(),this.add(this.mesh),Ze.levelId){case Jt.CLIMB:this.mesh.setState(vi.SIDE_RIGHT);break;case Jt.SLIDE:this.mesh.setState(vi.LYING);break;default:this.mesh.setState(vi.BACK)}}move(e){if(this.mesh)switch(e){case ui.RIGHT:this.physicsObject.goRight();break;case ui.LEFT:this.physicsObject.goLeft();break;case ui.UP:this.physicsObject.jump();break}}update(e){if(this.position.copy(this.physicsObject.position),!!this.mesh){if(this.physicsObject.isJumping||this.mesh.update(e),Ze.levelId===Jt.SLIDE&&(this.mesh.rotation.z=-this.physicsObject.currentLane/2),this.previousLane!==this.physicsObject.targetLane&&Ze.levelId===Jt.GOLF)switch(this.physicsObject.targetLane){case 1:this.mesh.setState(vi.BACK_LEFT);break;case 0:this.mesh.setState(vi.BACK);break;case-1:this.mesh.setState(vi.BACK_RIGHT);break}this.previousLane=this.physicsObject.targetLane}}kill(){this.mesh&&this.mesh.blink()}revive(){this.mesh&&(this.mesh.visible=!0)}setInitialRotation(){this.mesh&&(this.mesh.rotation.set(0,Math.PI,0),Ze.levelId===Jt.CLIMB&&(this.rotation.y=Math.PI/2))}},U0=k0;var G0=class{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}},Da=class{constructor(e,t,i,r){this._dataView=new DataView(e.buffer,e.byteOffset+t,i),this._littleEndian=r,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){let i=this._offset,r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,r)}},fne=new Uint8Array([0]),Ii=[171,75,84,88,32,50,48,187,13,10,26,10];function LR(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):Buffer.from(n).toString("utf8")}function OR(n){let e=new Uint8Array(n.buffer,n.byteOffset,Ii.length);if(e[0]!==Ii[0]||e[1]!==Ii[1]||e[2]!==Ii[2]||e[3]!==Ii[3]||e[4]!==Ii[4]||e[5]!==Ii[5]||e[6]!==Ii[6]||e[7]!==Ii[7]||e[8]!==Ii[8]||e[9]!==Ii[9]||e[10]!==Ii[10]||e[11]!==Ii[11])throw new Error("Missing KTX 2.0 identifier.");let t=new G0,i=17*Uint32Array.BYTES_PER_ELEMENT,r=new Da(n,Ii.length,i,!0);t.vkFormat=r._nextUint32(),t.typeSize=r._nextUint32(),t.pixelWidth=r._nextUint32(),t.pixelHeight=r._nextUint32(),t.pixelDepth=r._nextUint32(),t.layerCount=r._nextUint32(),t.faceCount=r._nextUint32();let s=r._nextUint32();t.supercompressionScheme=r._nextUint32();let o=r._nextUint32(),a=r._nextUint32(),c=r._nextUint32(),l=r._nextUint32(),u=r._nextUint64(),d=r._nextUint64(),h=new Da(n,Ii.length+i,3*s*8,!0);for(let N=0;N<s;N++)t.levels.push({levelData:new Uint8Array(n.buffer,n.byteOffset+h._nextUint64(),h._nextUint64()),uncompressedByteLength:h._nextUint64()});let f=new Da(n,o,a,!0),p={vendorId:f._skip(4)._nextUint16(),descriptorType:f._nextUint16(),versionNumber:f._nextUint16(),descriptorBlockSize:f._nextUint16(),colorModel:f._nextUint8(),colorPrimaries:f._nextUint8(),transferFunction:f._nextUint8(),flags:f._nextUint8(),texelBlockDimension:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],bytesPlane:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],samples:[]},m=(p.descriptorBlockSize/4-6)/4;for(let N=0;N<m;N++){let L={bitOffset:f._nextUint16(),bitLength:f._nextUint8(),channelType:f._nextUint8(),samplePosition:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&L.channelType?(L.sampleLower=f._nextInt32(),L.sampleUpper=f._nextInt32()):(L.sampleLower=f._nextUint32(),L.sampleUpper=f._nextUint32()),p.samples[N]=L}t.dataFormatDescriptor.length=0,t.dataFormatDescriptor.push(p);let A=new Da(n,c,l,!0);for(;A._offset<l;){let N=A._nextUint32(),L=A._scan(N),Y=LR(L),te=A._scan(N-L.byteLength);t.keyValue[Y]=Y.match(/^ktx/i)?LR(te):te,A._offset%4&&A._skip(4-A._offset%4)}if(d<=0)return t;let g=new Da(n,u,d,!0),E=g._nextUint16(),_=g._nextUint16(),C=g._nextUint32(),T=g._nextUint32(),M=g._nextUint32(),w=g._nextUint32(),D=[];for(let N=0;N<s;N++)D.push({imageFlags:g._nextUint32(),rgbSliceByteOffset:g._nextUint32(),rgbSliceByteLength:g._nextUint32(),alphaSliceByteOffset:g._nextUint32(),alphaSliceByteLength:g._nextUint32()});let I=u+g._offset,y=I+C,b=y+T,Q=b+M,U=new Uint8Array(n.buffer,n.byteOffset+I,C),z=new Uint8Array(n.buffer,n.byteOffset+y,T),q=new Uint8Array(n.buffer,n.byteOffset+b,M),R=new Uint8Array(n.buffer,n.byteOffset+Q,w);return t.globalData={endpointCount:E,selectorCount:_,imageDescs:D,endpointsData:U,selectorsData:z,tablesData:q,extendedData:R},t}function H0(n,e){if(e===vT)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===bd||e===PA){let t=n.getIndex();if(t===null){let o=[],a=n.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)o.push(c);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=t.count-2,r=[];if(e===bd)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var V0=new WeakMap,GA=class extends zr{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){let s=new tr(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{this.parse(o,t,r)},i,r)}parse(e,t,i=()=>{}){this.decodeDracoFile(e,t,null,null,Qt,i).catch(i)}decodeDracoFile(e,t,i,r,s=an,o=()=>{}){let a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:s};return this.decodeGeometry(e,a).then(t).catch(o)}decodeGeometry(e,t){let i=JSON.stringify(t);if(V0.has(e)){let c=V0.get(e);if(c.key===i)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(c=>(r=c,new Promise((l,u)=>{r._callbacks[s]={resolve:l,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),V0.set(e,{key:i,promise:a}),a}_createGeometry(e){let t=new Ci;e.index&&t.setIndex(new yn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize,c=new yn(o,a);s==="color"&&(this._assignVertexColorSpace(c,r.vertexColorSpace),c.normalized=!(o instanceof Float32Array)),t.setAttribute(s,c)}return t}_assignVertexColorSpace(e,t){if(t!==Qt)return;let i=new be;for(let r=0,s=e.count;r<s;r++)i.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,i.r,i.g,i.b)}_loadLibrary(e,t){let i=new tr(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{let r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let s=pK.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){let o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function pK(){let n,e;onmessage=function(o){let a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":let c=a.buffer,l=a.taskConfig;e.then(u=>{let d=u.draco,h=new d.Decoder;try{let f=t(d,h,new Int8Array(c),l),p=f.attributes.map(m=>m.array.buffer);f.index&&p.push(f.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:f},p)}catch(f){console.error(f),self.postMessage({type:"error",id:a.id,error:f.message})}finally{d.destroy(h)}});break}};function t(o,a,c,l){let u=l.attributeIDs,d=l.attributeTypes,h,f,p=a.GetEncodedGeometryType(c);if(p===o.TRIANGULAR_MESH)h=new o.Mesh,f=a.DecodeArrayToMesh(c,c.byteLength,h);else if(p===o.POINT_CLOUD)h=new o.PointCloud,f=a.DecodeArrayToPointCloud(c,c.byteLength,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());let m={index:null,attributes:[]};for(let A in u){let g=self[d[A]],E,_;if(l.useUniqueIDs)_=u[A],E=a.GetAttributeByUniqueId(h,_);else{if(_=a.GetAttributeId(h,o[u[A]]),_===-1)continue;E=a.GetAttribute(h,_)}let C=r(o,a,h,A,g,E);A==="color"&&(C.vertexColorSpace=l.vertexColorSpace),m.attributes.push(C)}return p===o.TRIANGULAR_MESH&&(m.index=i(o,a,h)),o.destroy(h),m}function i(o,a,c){let u=c.num_faces()*3,d=u*4,h=o._malloc(d);a.GetTrianglesUInt32Array(c,d,h);let f=new Uint32Array(o.HEAPF32.buffer,h,u).slice();return o._free(h),{array:f,itemSize:1}}function r(o,a,c,l,u,d){let h=d.num_components(),p=c.num_points()*h,m=p*u.BYTES_PER_ELEMENT,A=s(o,u),g=o._malloc(m);a.GetAttributeDataArrayForAllPoints(c,d,A,m,g);let E=new u(o.HEAPF32.buffer,g,p).slice();return o._free(g),{name:l,array:E,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var HA=class extends zr{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new q0(t)}),this.register(function(t){return new Y0(t)}),this.register(function(t){return new sv(t)}),this.register(function(t){return new ov(t)}),this.register(function(t){return new av(t)}),this.register(function(t){return new $0(t)}),this.register(function(t){return new Z0(t)}),this.register(function(t){return new ev(t)}),this.register(function(t){return new tv(t)}),this.register(function(t){return new J0(t)}),this.register(function(t){return new nv(t)}),this.register(function(t){return new X0(t)}),this.register(function(t){return new rv(t)}),this.register(function(t){return new iv(t)}),this.register(function(t){return new W0(t)}),this.register(function(t){return new cv(t)}),this.register(function(t){return new lv(t)})}load(e,t,i,r){let s=this,o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){let l=Ro.extractUrlBase(e);o=Ro.resolveURL(l,this.path)}else o=Ro.extractUrlBase(e);this.manager.itemStart(e);let a=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new tr(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s,o={},a={},c=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===GR){try{o[yt.KHR_BINARY_GLTF]=new uv(e)}catch(d){r&&r(d);return}s=JSON.parse(o[yt.KHR_BINARY_GLTF].content)}else s=JSON.parse(c.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new mv(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){let d=this.pluginCallbacks[u](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){let d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case yt.KHR_MATERIALS_UNLIT:o[d]=new j0;break;case yt.KHR_DRACO_MESH_COMPRESSION:o[d]=new dv(s,this.dracoLoader);break;case yt.KHR_TEXTURE_TRANSFORM:o[d]=new hv;break;case yt.KHR_MESH_QUANTIZATION:o[d]=new fv;break;default:h.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){let i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}};function AK(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var yt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},W0=class{constructor(e){this.parser=e,this.name=yt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){let s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){let t=this.parser,i="light:"+e,r=t.cache.get(i);if(r)return r;let s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e],l,u=new be(16777215);c.color!==void 0&&u.setRGB(c.color[0],c.color[1],c.color[2],an);let d=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new yl(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new BA(u),l.distance=d;break;case"spot":l=new wA(u),l.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,Ws(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}},j0=class{constructor(){this.name=yt.KHR_MATERIALS_UNLIT}getMaterialType(){return mr}extendParams(e,t,i){let r=[];e.color=new be(1,1,1),e.opacity=1;let s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){let o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],an),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Qt))}return Promise.all(r)}},J0=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}},q0=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){let a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new we(a,a)}return Promise.all(s)}},Y0=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_DISPERSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}},X0=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},$0=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_SHEEN}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[];t.sheenColor=new be(0,0,0),t.sheenRoughness=0,t.sheen=1;let o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){let a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],an)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Qt)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},Z0=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},ev=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_VOLUME}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;let a=o.attenuationColor||[1,1,1];return t.attenuationColor=new be().setRGB(a[0],a[1],a[2],an),Promise.all(s)}},tv=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_IOR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}},nv=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_SPECULAR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));let a=o.specularColorFactor||[1,1,1];return t.specularColor=new be().setRGB(a[0],a[1],a[2],an),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Qt)),Promise.all(s)}},iv=class{constructor(e){this.parser=e,this.name=yt.EXT_MATERIALS_BUMP}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}},rv=class{constructor(e){this.parser=e,this.name=yt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:er}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}},sv=class{constructor(e){this.parser=e,this.name=yt.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}},ov=class{constructor(e){this.parser=e,this.name=yt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;let o=s.extensions[t],a=r.images[o.source],c=i.textureLoader;if(a.uri){let l=i.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},av=class{constructor(e){this.parser=e,this.name=yt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){let t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;let o=s.extensions[t],a=r.images[o.source],c=i.textureLoader;if(a.uri){let l=i.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,o.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){let t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},cv=class{constructor(e){this.name=yt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){let c=r.byteOffset||0,l=r.byteLength||0,u=r.count,d=r.byteStride,h=new Uint8Array(a,c,l);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,r.mode,r.filter).then(function(f){return f.buffer}):o.ready.then(function(){let f=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})})}else return null}},lv=class{constructor(e){this.name=yt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=t.meshes[i.mesh];for(let l of r.primitives)if(l.mode!==yr.TRIANGLES&&l.mode!==yr.TRIANGLE_STRIP&&l.mode!==yr.TRIANGLE_FAN&&l.mode!==void 0)return null;let o=i.extensions[this.name].attributes,a=[],c={};for(let l in o)a.push(this.parser.getDependency("accessor",o[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{let u=l.pop(),d=u.isGroup?u.children:[u],h=l[0].count,f=[];for(let p of d){let m=new mt,A=new x,g=new Qr,E=new x(1,1,1),_=new Al(p.geometry,p.material,h);for(let C=0;C<h;C++)c.TRANSLATION&&A.fromBufferAttribute(c.TRANSLATION,C),c.ROTATION&&g.fromBufferAttribute(c.ROTATION,C),c.SCALE&&E.fromBufferAttribute(c.SCALE,C),_.setMatrixAt(C,m.compose(A,g,E));for(let C in c)if(C==="_COLOR_0"){let T=c[C];_.instanceColor=new Sa(T.array,T.itemSize,T.normalized)}else C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&p.geometry.setAttribute(C,c[C]);xt.prototype.copy.call(_,p),this.parser.assignFinalMaterial(_),f.push(_)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}},GR="glTF",Hd=12,NR={JSON:1313821514,BIN:5130562},uv=class{constructor(e){this.name=yt.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,Hd),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==GR)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-Hd,s=new DataView(e,Hd),o=0;for(;o<r;){let a=s.getUint32(o,!0);o+=4;let c=s.getUint32(o,!0);if(o+=4,c===NR.JSON){let l=new Uint8Array(e,Hd+o,a);this.content=i.decode(l)}else if(c===NR.BIN){let l=Hd+o;this.body=e.slice(l,l+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},dv=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=yt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(let u in o){let d=Av[u]||u.toLowerCase();a[d]=o[u]}for(let u in e.attributes){let d=Av[u]||u.toLowerCase();if(o[u]!==void 0){let h=i.accessors[e.attributes[u]],f=wl[h.componentType];l[d]=f.name,c[d]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d,h){r.decodeDracoFile(u,function(f){for(let p in f.attributes){let m=f.attributes[p],A=c[p];A!==void 0&&(m.normalized=A)}d(f)},a,l,an,h)})})}},hv=class{constructor(){this.name=yt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},fv=class{constructor(){this.name=yt.KHR_MESH_QUANTIZATION}},VA=class extends Do{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){let s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=a*2,l=a*3,u=r-t,d=(i-t)/u,h=d*d,f=h*d,p=e*l,m=p-l,A=-2*f+3*h,g=f-h,E=1-A,_=g-h+d;for(let C=0;C!==a;C++){let T=o[m+C+a],M=o[m+C+c]*u,w=o[p+C+a],D=o[p+C]*u;s[C]=E*T+_*M+A*w+g*D}return s}},gK=new Qr,pv=class extends VA{interpolate_(e,t,i,r){let s=super.interpolate_(e,t,i,r);return gK.fromArray(s).normalize().toArray(s),s}},yr={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},wl={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},FR={9728:on,9729:hn,9984:GE,9985:od,9986:jc,9987:$i},kR={33071:Ar,33648:ds,10497:ya},Q0={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Av={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},No={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mK={CUBICSPLINE:void 0,LINEAR:ll,STEP:cl},z0={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function _K(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new _l({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:us})),n.DefaultMaterial}function ba(n,e,t){for(let i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Ws(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function CK(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){let d=e[l];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);let o=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){let d=e[l];if(i){let h=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(h)}if(r){let h=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(s){let h=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then(function(l){let u=l[0],d=l[1],h=l[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function yK(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function EK(n){let e,t=n.extensions&&n.extensions[yt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+K0(t.attributes):e=n.indices+":"+K0(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+K0(n.targets[i]);return e}function K0(n){let e="",t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function gv(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function vK(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}var IK=new mt,mv=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new AK,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let c=a.match(/Version\/(\d+)/);r=i&&c?parseInt(c[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||s&&o<98?this.textureLoader=new Cl(this.options.manager):this.textureLoader=new DA(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new tr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){let a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return ba(s,a,r),Ws(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(let c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){let o=t[r].joints;for(let a=0,c=o.length;a<c;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){let o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let r=i.clone(),s=(o,a)=>{let c=this.associations.get(o);c!=null&&this.associations.set(a,c);for(let[l,u]of o.children.entries())s(u,a.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let r=e(t[i]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let r=0;r<t.length;r++){let s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){let i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[yt.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(s,o){i.load(Ro.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){let r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){let t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let o=Q0[r.type],a=wl[r.componentType],c=r.normalized===!0,l=new a(r.count*o);return Promise.resolve(new yn(l,o,c))}let s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){let a=o[0],c=Q0[r.type],l=wl[r.componentType],u=l.BYTES_PER_ELEMENT,d=u*c,h=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0,m,A;if(f&&f!==d){let g=Math.floor(h/f),E="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count,_=t.cache.get(E);_||(m=new l(a,g*f,r.count*f/u),_=new vd(m,f/u),t.cache.add(E,_)),A=new Id(_,c,h%f/u,p)}else a===null?m=new l(r.count*c):m=new l(a,h,r.count*c),A=new yn(m,c,p);if(r.sparse!==void 0){let g=Q0.SCALAR,E=wl[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,C=r.sparse.values.byteOffset||0,T=new E(o[1],_,r.sparse.count*g),M=new l(o[2],C,r.sparse.count*c);a!==null&&(A=new yn(A.array.slice(),A.itemSize,A.normalized));for(let w=0,D=T.length;w<D;w++){let I=T[w];if(A.setX(I,M[w*c]),c>=2&&A.setY(I,M[w*c+1]),c>=3&&A.setZ(I,M[w*c+2]),c>=4&&A.setW(I,M[w*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return A})}loadTexture(e){let t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s],a=this.textureLoader;if(o.uri){let c=i.manager.getHandler(o.uri);c!==null&&(a=c)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){let r=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];let l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);let h=(s.samplers||{})[o.sampler]||{};return u.magFilter=FR[h.magFilter]||hn,u.minFilter=FR[h.minFilter]||$i,u.wrapS=kR[h.wrapS]||ya,u.wrapT=kR[h.wrapT]||ya,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){let i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());let o=r.images[e],a=self.URL||self.webkitURL,c=o.uri||"",l=!1;if(o.bufferView!==void 0)c=i.getDependency("bufferView",o.bufferView).then(function(d){l=!0;let h=new Blob([d],{type:o.mimeType});return c=a.createObjectURL(h),c});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(c).then(function(d){return new Promise(function(h,f){let p=h;t.isImageBitmapLoader===!0&&(p=function(m){let A=new fn(m);A.needsUpdate=!0,h(A)}),t.load(Ro.resolveURL(d,s.path),p,void 0,f)})}).then(function(d){return l===!0&&a.revokeObjectURL(c),Ws(d,o),d.userData.mimeType=o.mimeType||vK(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){let s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[yt.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[yt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let c=s.associations.get(o);o=s.extensions[yt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,c)}}return r!==void 0&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){let t=e.geometry,i=e.material,r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+i.uuid,c=this.cache.get(a);c||(c=new Md,Fi.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){let a="LineBasicMaterial:"+i.uuid,c=this.cache.get(a);c||(c=new gl,Fi.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(a,c)),i=c}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),s&&(c.vertexColors=!0),o&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return _l}loadMaterial(e){let t=this,i=this.json,r=this.extensions,s=i.materials[e],o,a={},c=s.extensions||{},l=[];if(c[yt.KHR_MATERIALS_UNLIT]){let d=r[yt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),l.push(d.extendParams(a,s,t))}else{let d=s.pbrMetallicRoughness||{};if(a.color=new be(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){let h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],an),a.opacity=h[3]}d.baseColorTexture!==void 0&&l.push(t.assignTexture(a,"map",d.baseColorTexture,Qt)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(l.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Xi);let u=s.alphaMode||z0.OPAQUE;if(u===z0.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===z0.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==mr&&(l.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new we(1,1),s.normalTexture.scale!==void 0)){let d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==mr&&(l.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==mr){let d=s.emissiveFactor;a.emissive=new be().setRGB(d[0],d[1],d[2],an)}return s.emissiveTexture!==void 0&&o!==mr&&l.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Qt)),Promise.all(l).then(function(){let d=new o(a);return s.name&&(d.name=s.name),Ws(d,s),t.associations.set(d,{materials:e}),s.extensions&&ba(r,d,s),d})}createUniqueName(e){let t=dn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[yt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return UR(c,a,t)})}let o=[];for(let a=0,c=e.length;a<c;a++){let l=e[a],u=EK(l),d=r[u];if(d)o.push(d.promise);else{let h;l.extensions&&l.extensions[yt.KHR_DRACO_MESH_COMPRESSION]?h=s(l):h=UR(new Ci,l,t),r[u]={primitive:l,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){let t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let c=0,l=o.length;c<l;c++){let u=o[c].material===void 0?_K(this.cache):this.getDependency("material",o[c].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(c){let l=c.slice(0,c.length-1),u=c[c.length-1],d=[];for(let f=0,p=u.length;f<p;f++){let m=u[f],A=o[f],g,E=l[f];if(A.mode===yr.TRIANGLES||A.mode===yr.TRIANGLE_STRIP||A.mode===yr.TRIANGLE_FAN||A.mode===void 0)g=s.isSkinnedMesh===!0?new AA(m,E):new $t(m,E),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),A.mode===yr.TRIANGLE_STRIP?g.geometry=H0(g.geometry,PA):A.mode===yr.TRIANGLE_FAN&&(g.geometry=H0(g.geometry,bd));else if(A.mode===yr.LINES)g=new xd(m,E);else if(A.mode===yr.LINE_STRIP)g=new ml(m,E);else if(A.mode===yr.LINE_LOOP)g=new CA(m,E);else if(A.mode===yr.POINTS)g=new yA(m,E);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);Object.keys(g.geometry.morphAttributes).length>0&&yK(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Ws(g,s),A.extensions&&ba(r,g,A),t.assignFinalMaterial(g),d.push(g)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(d.length===1)return s.extensions&&ba(r,d[0],s),d[0];let h=new li;s.extensions&&ba(r,h,s),t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t,i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Hn(xT.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new fl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Ws(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let s=r.pop(),o=r,a=[],c=[];for(let l=0,u=o.length;l<u;l++){let d=o[l];if(d){a.push(d);let h=new mt;s!==null&&h.fromArray(s.array,l*16),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new gA(a,c)})}loadAnimation(e){let t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],c=[],l=[],u=[];for(let d=0,h=r.channels.length;d<h;d++){let f=r.channels[d],p=r.samplers[f.sampler],m=f.target,A=m.node,g=r.parameters!==void 0?r.parameters[p.input]:p.input,E=r.parameters!==void 0?r.parameters[p.output]:p.output;m.node!==void 0&&(o.push(this.getDependency("node",A)),a.push(this.getDependency("accessor",g)),c.push(this.getDependency("accessor",E)),l.push(p),u.push(m))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(u)]).then(function(d){let h=d[0],f=d[1],p=d[2],m=d[3],A=d[4],g=[];for(let E=0,_=h.length;E<_;E++){let C=h[E],T=f[E],M=p[E],w=m[E],D=A[E];if(C===void 0)continue;C.updateMatrix&&C.updateMatrix();let I=i._createAnimationTracks(C,T,M,w,D);if(I)for(let y=0;y<I.length;y++)g.push(I[y])}return new xA(s,void 0,g)})}createNodeMesh(e){let t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){let o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),o})}loadNode(e){let t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let l=0,u=a.length;l<u;l++)o.push(i.getDependency("node",a[l]));let c=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),c]).then(function(l){let u=l[0],d=l[1],h=l[2];h!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(h,IK)});for(let f=0,p=d.length;f<p;f++)u.add(d[f]);return u})}_loadNodeShallow(e){let t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let u;if(s.isBone===!0?u=new Sd:l.length>1?u=new li:l.length===1?u=l[0]:u=new xt,u!==l[0])for(let d=0,h=l.length;d<h;d++)u.add(l[d]);if(s.name&&(u.userData.name=s.name,u.name=o),Ws(u,s),s.extensions&&ba(i,u,s),s.matrix!==void 0){let d=new mt;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],r=this,s=new li;i.name&&(s.name=r.createUniqueName(i.name)),Ws(s,i),i.extensions&&ba(t,s,i);let o=i.nodes||[],a=[];for(let c=0,l=o.length;c<l;c++)a.push(r.getDependency("node",o[c]));return Promise.all(a).then(function(c){for(let u=0,d=c.length;u<d;u++)s.add(c[u]);let l=u=>{let d=new Map;for(let[h,f]of r.associations)(h instanceof Fi||h instanceof fn)&&d.set(h,f);return u.traverse(h=>{let f=r.associations.get(h);f!=null&&d.set(h,f)}),d};return r.associations=l(s),s})}_createAnimationTracks(e,t,i,r,s){let o=[],a=e.name?e.name:e.uuid,c=[];No[s.path]===No.weights?e.traverse(function(h){h.morphTargetInfluences&&c.push(h.name?h.name:h.uuid)}):c.push(a);let l;switch(No[s.path]){case No.weights:l=Hs;break;case No.rotation:l=Vs;break;case No.position:case No.scale:l=Qs;break;default:switch(i.itemSize){case 1:l=Hs;break;case 2:case 3:default:l=Qs;break}break}let u=r.interpolation!==void 0?mK[r.interpolation]:ll,d=this._getArrayFromAccessor(i);for(let h=0,f=c.length;h<f;h++){let p=new l(c[h]+"."+No[s.path],t.array,d,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),o.push(p)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let i=gv(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){let r=this instanceof Vs?pv:VA;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function SK(n,e,t){let i=e.attributes,r=new gr;if(i.POSITION!==void 0){let a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(c!==void 0&&l!==void 0){if(r.set(new x(c[0],c[1],c[2]),new x(l[0],l[1],l[2])),a.normalized){let u=gv(wl[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let s=e.targets;if(s!==void 0){let a=new x,c=new x;for(let l=0,u=s.length;l<u;l++){let d=s[l];if(d.POSITION!==void 0){let h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(f!==void 0&&p!==void 0){if(c.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){let m=gv(wl[h.componentType]);c.multiplyScalar(m)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let o=new Zi;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function UR(n,e,t){let i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(c){n.setAttribute(a,c)})}for(let o in i){let a=Av[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){let o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return wt.workingColorSpace!==an&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${wt.workingColorSpace}" not supported.`),Ws(n,e),SK(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?CK(n,e.targets,t):n})}var QA=class extends MA{constructor(e){super(e),this.type=yi}parse(e){let o=function(D,I){switch(D){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},u=`
`,d=function(D,I,y){I=I||1024;let Q=D.pos,U=-1,z=0,q="",R=String.fromCharCode.apply(null,new Uint16Array(D.subarray(Q,Q+128)));for(;0>(U=R.indexOf(u))&&z<I&&Q<D.byteLength;)q+=R,z+=R.length,Q+=128,R+=String.fromCharCode.apply(null,new Uint16Array(D.subarray(Q,Q+128)));return-1<U?(y!==!1&&(D.pos+=z+U+1),q+R.slice(0,U)):!1},h=function(D){let I=/^#\?(\S+)/,y=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,b=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Q=/^\s*FORMAT=(\S+)\s*$/,U=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,z={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0},q,R;for((D.pos>=D.byteLength||!(q=d(D)))&&o(1,"no header found"),(R=q.match(I))||o(3,"bad initial token"),z.valid|=1,z.programtype=R[1],z.string+=q+`
`;q=d(D),q!==!1;){if(z.string+=q+`
`,q.charAt(0)==="#"){z.comments+=q+`
`;continue}if((R=q.match(y))&&(z.gamma=parseFloat(R[1])),(R=q.match(b))&&(z.exposure=parseFloat(R[1])),(R=q.match(Q))&&(z.valid|=2,z.format=R[1]),(R=q.match(U))&&(z.valid|=4,z.height=parseInt(R[1],10),z.width=parseInt(R[2],10)),z.valid&2&&z.valid&4)break}return z.valid&2||o(3,"missing format specifier"),z.valid&4||o(3,"missing image size specifier"),z},f=function(D,I,y){let b=I;if(b<8||b>32767||D[0]!==2||D[1]!==2||D[2]&128)return new Uint8Array(D);b!==(D[2]<<8|D[3])&&o(3,"wrong scanline width");let Q=new Uint8Array(4*I*y);Q.length||o(4,"unable to allocate buffer space");let U=0,z=0,q=4*b,R=new Uint8Array(4),N=new Uint8Array(q),L=y;for(;L>0&&z<D.byteLength;){z+4>D.byteLength&&o(1),R[0]=D[z++],R[1]=D[z++],R[2]=D[z++],R[3]=D[z++],(R[0]!=2||R[1]!=2||(R[2]<<8|R[3])!=b)&&o(3,"bad rgbe scanline format");let Y=0,te;for(;Y<q&&z<D.byteLength;){te=D[z++];let ye=te>128;if(ye&&(te-=128),(te===0||Y+te>q)&&o(3,"bad scanline data"),ye){let Ge=D[z++];for(let j=0;j<te;j++)N[Y++]=Ge}else N.set(D.subarray(z,z+te),Y),Y+=te,z+=te}let fe=b;for(let ye=0;ye<fe;ye++){let Ge=0;Q[U]=N[ye+Ge],Ge+=b,Q[U+1]=N[ye+Ge],Ge+=b,Q[U+2]=N[ye+Ge],Ge+=b,Q[U+3]=N[ye+Ge],U+=4}L--}return Q},p=function(D,I,y,b){let Q=D[I+3],U=Math.pow(2,Q-128)/255;y[b+0]=D[I+0]*U,y[b+1]=D[I+1]*U,y[b+2]=D[I+2]*U,y[b+3]=1},m=function(D,I,y,b){let Q=D[I+3],U=Math.pow(2,Q-128)/255;y[b+0]=Rd.toHalfFloat(Math.min(D[I+0]*U,65504)),y[b+1]=Rd.toHalfFloat(Math.min(D[I+1]*U,65504)),y[b+2]=Rd.toHalfFloat(Math.min(D[I+2]*U,65504)),y[b+3]=Rd.toHalfFloat(1)},A=new Uint8Array(e);A.pos=0;let g=h(A),E=g.width,_=g.height,C=f(A.subarray(A.pos),E,_),T,M,w;switch(this.type){case Pn:w=C.length/4;let D=new Float32Array(w*4);for(let y=0;y<w;y++)p(C,y*4,D,y*4);T=D,M=Pn;break;case yi:w=C.length/4;let I=new Uint16Array(w*4);for(let y=0;y<w;y++)m(C,y*4,I,y*4);T=I,M=yi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:E,height:_,data:T,header:g.string,gamma:g.gamma,exposure:g.exposure,type:M}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(o,a){switch(o.type){case Pn:case yi:o.colorSpace=an,o.minFilter=hn,o.magFilter=hn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,r)}};var zA=class{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){let t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){let i=this.workersResolve[e];if(i&&i(t),this.queue.length){let{resolve:r,msg:s,transfer:o}=this.queue.shift();this.workersResolve[e]=r,this.workers[e].postMessage(s,o)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise(i=>{let r=this._getIdleWorker();r!==-1?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=i,this.workers[r].postMessage(e,t)):this.queue.push({resolve:i,msg:e,transfer:t})})}dispose(){this.workers.forEach(e=>e.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}};var _v,js,yv,Cv={env:{emscripten_notify_memory_growth:function(n){yv=new Uint8Array(js.exports.memory.buffer)}}},KA=class{init(){return _v||(_v=typeof fetch<"u"?fetch("data:application/wasm;base64,"+HR).then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,Cv)).then(this._init):WebAssembly.instantiate(Buffer.from(HR,"base64"),Cv).then(this._init),_v)}_init(e){js=e.instance,Cv.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!js)throw new Error("ZSTDDecoder: Await .init() before decoding.");let i=e.byteLength,r=js.exports.malloc(i);yv.set(e,r),t=t||Number(js.exports.ZSTD_findDecompressedSize(r,i));let s=js.exports.malloc(t),o=js.exports.ZSTD_decompress(s,t,r,i),a=yv.slice(s,s+o);return js.exports.free(r),js.exports.free(s),a}},HR="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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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";var Ev=new WeakMap,vv=0,Iv,r1=(()=>{class n extends zr{constructor(t){super(t),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new zA,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(t){return this.transcoderPath=t,this}setWorkerLimit(t){return this.workerPool.setWorkerLimit(t),this}detectSupportAsync(t){return ct(this,null,function*(){return this.workerConfig={astcSupported:yield t.hasFeatureAsync("texture-compression-astc"),etc1Supported:yield t.hasFeatureAsync("texture-compression-etc1"),etc2Supported:yield t.hasFeatureAsync("texture-compression-etc2"),dxtSupported:yield t.hasFeatureAsync("texture-compression-bc"),bptcSupported:yield t.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:yield t.hasFeatureAsync("texture-compression-pvrtc")},this})}detectSupport(t){return t.isWebGPURenderer===!0?this.workerConfig={astcSupported:t.hasFeature("texture-compression-astc"),etc1Supported:t.hasFeature("texture-compression-etc1"),etc2Supported:t.hasFeature("texture-compression-etc2"),dxtSupported:t.hasFeature("texture-compression-bc"),bptcSupported:t.hasFeature("texture-compression-bptc"),pvrtcSupported:t.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:t.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:t.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:t.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:t.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:t.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:t.extensions.has("WEBGL_compressed_texture_pvrtc")||t.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){let t=new tr(this.manager);t.setPath(this.transcoderPath),t.setWithCredentials(this.withCredentials);let i=t.loadAsync("basis_transcoder.js"),r=new tr(this.manager);r.setPath(this.transcoderPath),r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials);let s=r.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([i,s]).then(([o,a])=>{let c=n.BasisWorker.toString(),l=["/* constants */","let _EngineFormat = "+JSON.stringify(n.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(n.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(n.BasisFormat),"/* basis_transcoder.js */",o,"/* worker */",c.substring(c.indexOf("{")+1,c.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l])),this.transcoderBinary=a,this.workerPool.setWorkerCreator(()=>{let u=new Worker(this.workerSourceURL),d=this.transcoderBinary.slice(0);return u.postMessage({type:"init",config:this.workerConfig,transcoderBinary:d},[d]),u})}),vv>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),vv++}return this.transcoderPending}load(t,i,r,s){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");let o=new tr(this.manager);o.setResponseType("arraybuffer"),o.setWithCredentials(this.withCredentials),o.load(t,a=>{if(Ev.has(a))return Ev.get(a).promise.then(i).catch(s);this._createTexture(a).then(c=>i?i(c):null).catch(s)},r,s)}_createTextureFrom(t,i){let{faces:r,width:s,height:o,format:a,type:c,error:l,dfdFlags:u}=t;if(c==="error")return Promise.reject(l);let d;if(i.faceCount===6)d=new vA(r,a,xn);else{let h=r[0].mipmaps;d=i.layerCount>1?new EA(h,s,o,i.layerCount,a,xn):new xa(h,s,o,a,xn)}return d.minFilter=r[0].mipmaps.length===1?hn:$i,d.magFilter=hn,d.generateMipmaps=!1,d.needsUpdate=!0,d.colorSpace=s1(i),d.premultiplyAlpha=!!(u&1),d}_createTexture(r){return ct(this,arguments,function*(t,i={}){let s=OR(new Uint8Array(t));if(s.vkFormat!==0)return RK(s);let o=i,a=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:t,taskConfig:o},[t])).then(c=>this._createTextureFrom(c.data,s));return Ev.set(t,{promise:a}),a})}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),vv--,this}}return n.BasisFormat={ETC1S:0,UASTC_4x4:1},n.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},n.EngineFormat={RGBAFormat:Vn,RGBA_ASTC_4x4_Format:gd,RGBA_BPTC_Format:el,RGBA_ETC2_EAC_Format:Ad,RGBA_PVRTC_4BPPV1_Format:hd,RGBA_S3TC_DXT5_Format:Zc,RGB_ETC1_Format:fd,RGB_ETC2_Format:pd,RGB_PVRTC_4BPPV1_Format:dd,RGBA_S3TC_DXT1_Format:$c},n.BasisWorker=function(){let e,t,i,r=_EngineFormat,s=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",function(m){let A=m.data;switch(A.type){case"init":e=A.config,a(A.transcoderBinary);break;case"transcode":t.then(()=>{try{let{faces:g,buffers:E,width:_,height:C,hasAlpha:T,format:M,dfdFlags:w}=c(A.buffer);self.postMessage({type:"transcode",id:A.id,faces:g,width:_,height:C,hasAlpha:T,format:M,dfdFlags:w},E)}catch(g){console.error(g),self.postMessage({type:"error",id:A.id,error:g.message})}});break}});function a(m){t=new Promise(A=>{i={wasmBinary:m,onRuntimeInitialized:A},BASIS(i)}).then(()=>{i.initializeBasis(),i.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function c(m){let A=new i.KTX2File(new Uint8Array(m));function g(){A.close(),A.delete()}if(!A.isValid())throw g(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");let E=A.isUASTC()?o.UASTC_4x4:o.ETC1S,_=A.getWidth(),C=A.getHeight(),T=A.getLayers()||1,M=A.getLevels(),w=A.getFaces(),D=A.getHasAlpha(),I=A.getDFDFlags(),{transcoderFormat:y,engineFormat:b}=h(E,_,C,D);if(!_||!C||!M)throw g(),new Error("THREE.KTX2Loader:	Invalid texture");if(!A.startTranscoding())throw g(),new Error("THREE.KTX2Loader: .startTranscoding failed");let Q=[],U=[];for(let z=0;z<w;z++){let q=[];for(let R=0;R<M;R++){let N=[],L,Y;for(let fe=0;fe<T;fe++){let ye=A.getImageLevelInfo(R,fe,z);z===0&&R===0&&fe===0&&(ye.origWidth%4!==0||ye.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),M>1?(L=ye.origWidth,Y=ye.origHeight):(L=ye.width,Y=ye.height);let Ge=new Uint8Array(A.getImageTranscodedSizeInBytes(R,fe,0,y));if(!A.transcodeImage(Ge,R,fe,z,y,0,-1,-1))throw g(),new Error("THREE.KTX2Loader: .transcodeImage failed.");N.push(Ge)}let te=p(N);q.push({data:te,width:L,height:Y}),U.push(te.buffer)}Q.push({mipmaps:q,width:_,height:C,format:b})}return g(),{faces:Q,buffers:U,width:_,height:C,hasAlpha:D,format:b,dfdFlags:I}}let l=[{if:"astcSupported",basisFormat:[o.UASTC_4x4],transcoderFormat:[s.ASTC_4x4,s.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.BC7_M5,s.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.BC1,s.BC3],engineFormat:[r.RGBA_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.ETC1,s.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.ETC1],engineFormat:[r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[s.PVRTC1_4_RGB,s.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],u=l.sort(function(m,A){return m.priorityETC1S-A.priorityETC1S}),d=l.sort(function(m,A){return m.priorityUASTC-A.priorityUASTC});function h(m,A,g,E){let _,C,T=m===o.ETC1S?u:d;for(let M=0;M<T.length;M++){let w=T[M];if(e[w.if]&&w.basisFormat.includes(m)&&!(E&&w.transcoderFormat.length<2)&&!(w.needsPowerOfTwo&&!(f(A)&&f(g))))return _=w.transcoderFormat[E?1:0],C=w.engineFormat[E?1:0],{transcoderFormat:_,engineFormat:C}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),_=s.RGBA32,C=r.RGBAFormat,{transcoderFormat:_,engineFormat:C}}function f(m){return m<=2?!0:(m&m-1)===0&&m!==0}function p(m){if(m.length===1)return m[0];let A=0;for(let _=0;_<m.length;_++){let C=m[_];A+=C.byteLength}let g=new Uint8Array(A),E=0;for(let _=0;_<m.length;_++){let C=m[_];g.set(C,E),E+=C.byteLength}return g}},n})(),TK=new Set([Vn,Po,zs]),Sv={[109]:Vn,[97]:Vn,[37]:Vn,[43]:Vn,[103]:Po,[83]:Po,[16]:Po,[22]:Po,[100]:zs,[76]:zs,[15]:zs,[9]:zs,[166]:al,[165]:al},xv={[109]:Pn,[97]:yi,[37]:xn,[43]:xn,[103]:Pn,[83]:yi,[16]:xn,[22]:xn,[100]:Pn,[76]:yi,[15]:xn,[9]:xn,[166]:xn,[165]:xn};function RK(n){return ct(this,null,function*(){let{vkFormat:e}=n;if(Sv[e]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let t;n.supercompressionScheme===2&&(Iv||(Iv=new Promise(s=>ct(this,null,function*(){let o=new KA;yield o.init(),s(o)}))),t=yield Iv);let i=[];for(let s=0;s<n.levels.length;s++){let o=Math.max(1,n.pixelWidth>>s),a=Math.max(1,n.pixelHeight>>s),c=n.pixelDepth?Math.max(1,n.pixelDepth>>s):0,l=n.levels[s],u;if(n.supercompressionScheme===0)u=l.levelData;else if(n.supercompressionScheme===2)u=t.decode(l.levelData,l.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let d;xv[e]===Pn?d=new Float32Array(u.buffer,u.byteOffset,u.byteLength/Float32Array.BYTES_PER_ELEMENT):xv[e]===yi?d=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/Uint16Array.BYTES_PER_ELEMENT):d=u,i.push({data:d,width:o,height:a,depth:c})}let r;if(TK.has(Sv[e]))r=n.pixelDepth===0?new Ia(i[0].data,n.pixelWidth,n.pixelHeight):new _d(i[0].data,n.pixelWidth,n.pixelHeight,n.pixelDepth);else{if(n.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");r=new xa(i,n.pixelWidth,n.pixelHeight)}return r.mipmaps=i,r.type=xv[e],r.format=Sv[e],r.colorSpace=s1(n),r.needsUpdate=!0,Promise.resolve(r)})}function s1(n){let e=n.dataFormatDescriptor[0];return e.colorPrimaries===1?e.transferFunction===2?Qt:an:e.colorPrimaries===10?e.transferFunction===2?Td:El:e.colorPrimaries===0?Gr:(console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${e.colorPrimaries}"`),Gr)}var Rne=function(){"use strict";var n="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FHRAOCUFHOXBKKAVC+QDF8kJJJJBK/uLEVUCUAICDTGVAICffffI0eGOCBYD1+KJJBhJJJJBBHRALALYD9gGWCDTFARbDBALAWCEFbD9gABARbDBAOCBYD1+KJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDLCUADCDTADCffffI0eCBYD1+KJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDWABYDBCBAVZ+TJJJB8aADCI9uHWDNADtMBABYDBHOAEHLADHRINAOALYDBCDTFGVAVYDBCEFbDBALCLFHLARCUFGRMBKKDNAItMBABYDBHLABYDLHRCBHVAIHOINARAVbDBARCLFHRALYDBAVFHVALCLFHLAOCUFGOMBKKDNADCI6MBAWCEAWCE0eHdABYDLHRABYDWHVCBHLINAECWFYDBHOAECLFYDBHDARAEYDBCDTFGWAWYDBGWCEFbDBAVAWCDTFALbDBARADCDTFGDADYDBGDCEFbDBAVADCDTFALbDBARAOCDTFGOAOYDBGOCEFbDBAVAOCDTFALbDBAECXFHEAdALCEFGL9HMBKKDNAItMBABYDLHEABYDBHLINAEAEYDBALYDB9rbDBALCLFHLAECLFHEAICUFGIMBKKKqBABAEADAIC+01JJBZ+MJJJBKqBABAEADAIC+c+JJJBZ+MJJJBK9dEEUABCfEAICDTZ+TJJJBHLCBHIDNADtMBINDNALAEYDBCDTFGBYDBCU9HMBABAIbDBAICEFHIKAECLFHEADCUFGDMBKKAIK9TEIUCBCBYD+M+KJJBGEABCIFC98gFGBbD+M+KJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABK9TEIUCBCBYD+M+KJJBGEABCIFC98gFGBbD+M+KJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK9+EIUzBHEDNDNCBYD+M+KJJBGDAECZTGI9NMBCUHEADAI9rCffIFCZ4NBCUsMEKADHEKCBABAE9rCIFC98gCBYD+M+KJJBFGDbD+M+KJJBDNADzBCZTGE9NMBADAE9rCffIFCZ4NB8aKKXBABAEZ+YJJJBK+BEEIUDNAB+8GDCl4GICfEgGLCfEsMBDNALMBDNABjBBBB9cMBAECBbDBABSKABjBBJ9fnAEZ+XJJJBHBAEAEYDBCNFbDBABSKAEAICfEgC+CUFbDBADCfff+D94gCJJJ/4Iv++HBKABK+gEBDNDNAECJE9IMBABjBBBUnHBDNAECfE9PMBAEC+BUFHEXDKABjBBBUnHBAECPDAECPD6eC+C9+FHEXEKAEC+BU9KMBABjBBJXnHBDNAEC+b9+9NMBAEC/mBFHEXEKABjBBJXnHBAEC+299AEC+2990eC/MEFHEKABAEClTCJJJ/8IF++nKK+eDDBCJWK+EDB4+H9W9n94+p+Gw+J9o+YE9pBBBBBBEBBBDBBBEBBBDBBBBBBBDBBBBBBBEBBBBBBB+L29Hz/69+9Kz/n/76z/RG97z/Z/O9Xz8j/b85z/+/U9Yz/B/K9hz+2/z9dz9E+L9Mz59a8kz+R/t3z+a+Zyz79ohz/J4++8++y+d9v8+BBBB9S+49+z8r+Hbz9m9m/m8+l/Z/O8+/8+pg89Q/X+j878r+Hq8++m+b/E87BBBBBBJzBBJzBBJz+e/v/n8++y+dSz9I/h/68+XD/r8+/H0838+/w+nOzBBBB+wv9o8+UF888+9I/h/68+9C9g/l89/N/M9M89/d8kO8+BBBBF+8Tz9M836zs+2azl/Zpzz818ez9E+LXz/u98f8+819e/68+BC+EQKXEBBBDBBBAwBB",e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var t,i=WebAssembly.instantiate(r(n),{}).then(function(h){t=h.instance,t.exports.__wasm_call_ctors(),t.exports.meshopt_encodeVertexVersion(0),t.exports.meshopt_encodeIndexVersion(1)});function r(h){for(var f=new Uint8Array(h.length),p=0;p<h.length;++p){var m=h.charCodeAt(p);f[p]=m>96?m-71:m>64?m-65:m>47?m+4:m>46?63:62}for(var A=0,p=0;p<h.length;++p)f[A++]=f[p]<60?e[f[p]]:(f[p]-60)*64+f[++p];return f.buffer.slice(0,A)}function s(h){if(!h)throw new Error("Assertion failed")}function o(h){return new Uint8Array(h.buffer,h.byteOffset,h.byteLength)}function a(h,f,p){var m=t.exports.sbrk,A=m(h.length*4),g=m(f*4),E=new Uint8Array(t.exports.memory.buffer),_=o(h);E.set(_,A),p&&p(A,A,h.length,f);var C=t.exports.meshopt_optimizeVertexFetchRemap(g,A,h.length,f);E=new Uint8Array(t.exports.memory.buffer);var T=new Uint32Array(f);new Uint8Array(T.buffer).set(E.subarray(g,g+f*4)),_.set(E.subarray(A,A+h.length*4)),m(A-m(0));for(var M=0;M<h.length;++M)h[M]=T[h[M]];return[T,C]}function c(h,f,p,m,A){var g=t.exports.sbrk,E=g(f),_=g(m*A),C=new Uint8Array(t.exports.memory.buffer);C.set(o(p),_);var T=h(E,f,_,m,A),M=new Uint8Array(T);return M.set(C.subarray(E,E+T)),g(E-g(0)),M}function l(h){for(var f=0,p=0;p<h.length;++p){var m=h[p];f=f<m?m:f}return f}function u(h,f){if(s(f==2||f==4),f==4)return new Uint32Array(h.buffer,h.byteOffset,h.byteLength/4);var p=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/2);return new Uint32Array(p)}function d(h,f,p,m,A,g){var E=t.exports.sbrk,_=E(p*m),C=E(p*g),T=new Uint8Array(t.exports.memory.buffer);T.set(o(f),C),h(_,p,m,A,C);var M=new Uint8Array(p*m);return M.set(T.subarray(_,_+p*m)),E(_-E(0)),M}return{ready:i,supported:!0,reorderMesh:function(h,f,p){var m=f?p?t.exports.meshopt_optimizeVertexCacheStrip:t.exports.meshopt_optimizeVertexCache:void 0;return a(h,l(h)+1,m)},encodeVertexBuffer:function(h,f,p){s(p>0&&p<=256),s(p%4==0);var m=t.exports.meshopt_encodeVertexBufferBound(f,p);return c(t.exports.meshopt_encodeVertexBuffer,m,h,f,p)},encodeIndexBuffer:function(h,f,p){s(p==2||p==4),s(f%3==0);var m=u(h,p),A=t.exports.meshopt_encodeIndexBufferBound(f,l(m)+1);return c(t.exports.meshopt_encodeIndexBuffer,A,m,f,4)},encodeIndexSequence:function(h,f,p){s(p==2||p==4);var m=u(h,p),A=t.exports.meshopt_encodeIndexSequenceBound(f,l(m)+1);return c(t.exports.meshopt_encodeIndexSequence,A,m,f,4)},encodeGltfBuffer:function(h,f,p,m){var A={ATTRIBUTES:this.encodeVertexBuffer,TRIANGLES:this.encodeIndexBuffer,INDICES:this.encodeIndexSequence};return s(A[m]),A[m](h,f,p)},encodeFilterOct:function(h,f,p,m){return s(p==4||p==8),s(m>=1&&m<=16),d(t.exports.meshopt_encodeFilterOct,h,f,p,m,16)},encodeFilterQuat:function(h,f,p,m){return s(p==8),s(m>=4&&m<=16),d(t.exports.meshopt_encodeFilterQuat,h,f,p,m,16)},encodeFilterExp:function(h,f,p,m){return s(p>0&&p%4==0),s(m>=1&&m<=24),d(t.exports.meshopt_encodeFilterExp,h,f,p,m,p)}}}();var o1=function(){"use strict";var n="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",e="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",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var r=n;WebAssembly.validate(t)&&(r=e);var s,o=WebAssembly.instantiate(a(r),{}).then(function(d){s=d.instance,s.exports.__wasm_call_ctors()});function a(d){for(var h=new Uint8Array(d.length),f=0;f<d.length;++f){var p=d.charCodeAt(f);h[f]=p>96?p-71:p>64?p-65:p>47?p+4:p>46?63:62}for(var m=0,f=0;f<d.length;++f)h[m++]=h[f]<60?i[h[f]]:(h[f]-60)*64+h[++f];return h.buffer.slice(0,m)}function c(d,h,f,p,m,A){var g=s.exports.sbrk,E=f+3&-4,_=g(E*p),C=g(m.length),T=new Uint8Array(s.exports.memory.buffer);T.set(m,C);var M=d(_,f,p,C,m.length);if(M==0&&A&&A(_,E,p),h.set(T.subarray(_,_+f*p)),g(_-g(0)),M!=0)throw new Error("Malformed buffer data: "+M)}var l={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:o,supported:!0,decodeVertexBuffer:function(d,h,f,p,m){c(s.exports.meshopt_decodeVertexBuffer,d,h,f,p,s.exports[l[m]])},decodeIndexBuffer:function(d,h,f,p){c(s.exports.meshopt_decodeIndexBuffer,d,h,f,p)},decodeIndexSequence:function(d,h,f,p){c(s.exports.meshopt_decodeIndexSequence,d,h,f,p)},decodeGltfBuffer:function(d,h,f,p,m,A){c(s.exports[u[m]],d,h,f,p,s.exports[l[A]])}}}();var One=function(){"use strict";var n="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iDZGK+TjBBBB+XGQALiDLALiDcGX+TGMAMAQ9deGQALiDWALiDkGM+TGpApAQ9deHpDNABtMBADtMBjBBBBjBBJzAp+VApjBBBB9beHQINABAQABiDBAK+TnuDBABCLFGIAQAIiDBAX+TnuDBABCWFGIAQAIiDBAM+TnuDBABCXFHBADCUFGDMBKKApK+qDIDUI99DUCBHI8jJJJJBCA9rGLCZFCWFCBYD11JJBbDBALCB8pDJ1JJB83IZALCWFCBYDn1JJBbDBALCB8pD+M1JJB83IBDNDNAEMBjBBJfHVjBBJfHOjBBJfHRXEKADCD4CDTHWINCBHDINALCZFADFGdABADFiDBGOAdiDBGRARAO9eeuDBALADFGdAOAdiDBGRARAO9deuDBADCLFGDCX9HMBKABAWFHBAICEFGIAE9HMBKALiDWALiDk+THRALiDLALiDc+THOALiDBALiDZ+THVKAVjBBBB+XGVAOAOAV9deGOARARAO9deK9dEEUABCfEAICDTZ1JJJBHLCBHIDNADtMBINDNALAEYDBCDTFGBYDBCU9HMBABAIbDBAICEFHIKAECLFHEADCUFGDMBKKAIK9TEIUCBCBYD/01JJBGEABCIFC98gFGBbD/01JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABK9TEIUCBCBYD/01JJBGEABCIFC98gFGBbD/01JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK9+EIUzBHEDNDNCBYD/01JJBGDAECZTGI9NMBCUHEADAI9rCffIFCZ4NBCUsMEKADHEKCBABAE9rCIFC98gCBYD/01JJBFGDbD/01JJBDNADzBCZTGE9NMBADAE9rCffIFCZ4NB8aKK6EIUCBHIDNADtMBDNINABrBBGLAErBBGV9HMEAECEFHEABCEFHBADCUFGDMBXDKKALAV9rHIKAIKK+CEDBCJWK9pffUUffUUffUUffUfffUfffUfBBBBBBBBEEEBEEBEBBEEEBEBBBBBEBEBBBBBEBBBDBBBBBBBBBBBBBBBEEEEEBEBBBBBEBBBBBEEBBBBBBC/sWKXEBBBDBBBJ9kBB",e=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var t,i=WebAssembly.instantiate(r(n),{}).then(function(h){t=h.instance,t.exports.__wasm_call_ctors()});function r(h){for(var f=new Uint8Array(h.length),p=0;p<h.length;++p){var m=h.charCodeAt(p);f[p]=m>96?m-71:m>64?m-65:m>47?m+4:m>46?63:62}for(var A=0,p=0;p<h.length;++p)f[A++]=f[p]<60?e[f[p]]:(f[p]-60)*64+f[++p];return f.buffer.slice(0,A)}function s(h){if(!h)throw new Error("Assertion failed")}function o(h){return new Uint8Array(h.buffer,h.byteOffset,h.byteLength)}function a(h,f){var p=t.exports.sbrk,m=p(h.length*4),A=p(f*4),g=new Uint8Array(t.exports.memory.buffer),E=o(h);g.set(E,m);var _=t.exports.meshopt_optimizeVertexFetchRemap(A,m,h.length,f);g=new Uint8Array(t.exports.memory.buffer);var C=new Uint32Array(f);new Uint8Array(C.buffer).set(g.subarray(A,A+f*4)),E.set(g.subarray(m,m+h.length*4)),p(m-p(0));for(var T=0;T<h.length;++T)h[T]=C[h[T]];return[C,_]}function c(h){for(var f=0,p=0;p<h.length;++p){var m=h[p];f=f<m?m:f}return f}function l(h,f,p,m,A,g,E,_,C){var T=t.exports.sbrk,M=T(4),w=T(p*4),D=T(A*g),I=T(p*4),y=new Uint8Array(t.exports.memory.buffer);y.set(o(m),D),y.set(o(f),I);var b=h(w,I,p,D,A,g,E,_,C,M);y=new Uint8Array(t.exports.memory.buffer);var Q=new Uint32Array(b);o(Q).set(y.subarray(w,w+b*4));var U=new Float32Array(1);return o(U).set(y.subarray(M,M+4)),T(M-T(0)),[Q,U[0]]}function u(h,f,p,m){var A=t.exports.sbrk,g=A(p*m),E=new Uint8Array(t.exports.memory.buffer);E.set(o(f),g);var _=h(g,p,m);return A(g-A(0)),_}var d={LockBorder:1};return{ready:i,supported:!0,compactMesh:function(h){s(h instanceof Uint32Array||h instanceof Int32Array||h instanceof Uint16Array||h instanceof Int16Array),s(h.length%3==0);var f=h.BYTES_PER_ELEMENT==4?h:new Uint32Array(h);return a(f,c(h)+1)},simplify:function(h,f,p,m,A,g){s(h instanceof Uint32Array||h instanceof Int32Array||h instanceof Uint16Array||h instanceof Int16Array),s(h.length%3==0),s(f instanceof Float32Array),s(f.length%p==0),s(p>=3),s(m%3==0);for(var E=0,_=0;_<(g?g.length:0);++_)E|=d[g[_]];var C=h.BYTES_PER_ELEMENT==4?h:new Uint32Array(h),T=l(t.exports.meshopt_simplify,C,h.length,f,f.length,p*4,m,A,E);return T[0]=h instanceof Uint32Array?T[0]:new h.constructor(T[0]),T},getScale:function(h,f){return s(h instanceof Float32Array),s(h.length%f==0),u(t.exports.meshopt_simplifyScale,h,h.length,f*4)}}}();var a1={DRACO:"/loaders/draco/",KTX:""},PK={isDraco:!1,isKtx:!1,isMeshOpt:!1},Mv=class{constructor(e,t=PK){this.renderer=e,this.manager=new wd,this.gltfLoader=new HA(this.manager),this.hdriLoader=new QA(this.manager),this.textureLoader=new Cl(this.manager),t.isDraco&&this.initDracoLoader(),t.isKtx&&kA.error("ktx loader not set"),t.isMeshOpt&&this.initMeshOptLoader()}loadTextures(e){return ct(this,null,function*(){let t=[];for(let i of e)t.push(this.loadTexture(i));return Promise.all(t)})}loadEnvmaps(e){return ct(this,null,function*(){let t=[];for(let i of e)t.push(this.loadEnvmap(i));return Promise.all(t)})}loadTexture(e){return ct(this,null,function*(){return new Promise(t=>{this.textureLoader.load(e,i=>(i.wrapS=ds,i.wrapT=ds,i.flipY=!0,t(i)),()=>{},i=>{console.error(i)})})})}loadEnvmap(e){return ct(this,null,function*(){let t=new pl(this.renderer);return new Promise(i=>{this.hdriLoader.load(e,r=>{r.flipY=!0;let s=t.fromEquirectangular(r).texture;r.dispose(),i(s)},()=>{},r=>{console.error(r)})})})}loadModels(e){return ct(this,null,function*(){let t=[];for(let i of e)t.push(this.loadModel(i));return Promise.all(t)})}loadModel(e){return ct(this,null,function*(){return new Promise(t=>{this.gltfLoader.load(e,i=>{let r=this.buildGraph(i.scene);Object.assign(i,r),t(i)},()=>{},i=>{console.error(i)})})})}initKtxLoader(){let e=new r1;e.setTranscoderPath(a1.DRACO).detectSupport(this.renderer),this.gltfLoader.setKTX2Loader(e)}initMeshOptLoader(){this.gltfLoader.setMeshoptDecoder(o1)}initDracoLoader(){let e=new GA;e.setDecoderPath(a1.DRACO),this.gltfLoader.setDRACOLoader(e)}buildGraph(e){let t={nodes:{},materials:{}};return e&&e.traverse(i=>{let r=i;i.name&&(t.nodes[i.name]=r);let s=r.material;s&&!t.materials[s.name]&&(t.materials[s.name]=s)}),t}},c1=Mv;var wv=class{constructor(){this.isLoaded=!1,this.assetLoader={},this.assets={models:{},textures:{}}}load(e,t){return ct(this,null,function*(){this.assetLoader=new c1(e);let i={models:{},textures:{}};for(let[r,s]of Object.entries(t.models)){let o=yield this.assetLoader.loadModel(s);i.models[r]=o}for(let[r,s]of Object.entries(t.textures)){let o=yield this.assetLoader.loadTexture(s);i.textures[r]=o}this.assets=i,this.isLoaded=!0})}},WA=wv;var LK=!1,OK={position:new x(0,12,15)},jA=256,Bl={near:1,far:25,right:15,left:-15,top:5,bottom:-10,width:jA,height:jA},Bv=class extends xt{constructor(){super();let e=this.getLight();this.add(e),LK&&this.add(new TA(e.shadow.camera))}getLight(){let e=new yl(16777215,3);e.name="directional-light",e.position.copy(OK.position),e.castShadow=!0;let t=e.shadow.camera;return t.near=Bl.near,t.far=Bl.far,t.right=Bl.right,t.left=Bl.left,t.top=Bl.top,t.bottom=Bl.bottom,e.shadow.mapSize.width=jA,e.shadow.mapSize.height=jA,e.shadow.radius=2,e}},l1=Bv;var Dv=class extends xt{constructor(){super(),this.player=new U0,this.level=new w0,this.assetLibrary=new WA,this.lights=new l1}reConstruct(){this.player=new U0,this.level=new w0}init(i){return ct(this,arguments,function*({models:e,textures:t}){let r=e.level.scene.clone(),s=t.diamond.clone();this.level.init(r,s),this.player.init(t.player),this.populate()})}update(e,t){this.player.update(e),this.level.update(e,t)}getLevelPhysics(){return this.level.updatePhysics()}populate(){this.add(this.player),this.add(this.level),this.add(this.lights)}},bv=Dv;var qt=function(n){return n.LOAD="load",n.READY="ready",n.PLAY="play",n.PAUSE="pause",n.OVER="over",n.CLEAR="clear",n.RESTART="restart",n}(qt||{}),u1={GAME_OVER:1e3,GAME_CLEAR:1e3},Tv=class{constructor(e,t){this.emitter=e,this.listener=t,this.status=qt.LOAD,this.initListeners()}getStatus(){return this.status}setStatus(e){switch(this.status=e,this.onStatusChange&&this.onStatusChange(this.status),this.status){case qt.OVER:setTimeout(()=>{this.emitter.emit(Wt.OVER)},u1.GAME_OVER);break;case qt.READY:this.emitter.emit(Wt.READY);break;case qt.CLEAR:setTimeout(()=>{this.emitter.emit(Wt.CLEAR)},u1.GAME_CLEAR);break}}onCollectible(){this.emitter.emit(Wt.SCORE_UPDATE,Ze.gameplayParams.pointValue)}onJump(){this.emitter.emit(Wt.JUMP)}onLaneChange(){this.emitter.emit(Wt.LANE_CHANGE)}onDeath(){this.emitter.emit(Wt.DEATH)}initListeners(){this.listener.on(Li.LOAD,()=>{this.setStatus(qt.LOAD)}),this.listener.on(Li.START,()=>{this.setStatus(qt.PLAY)}),this.listener.on(Li.RESTART,()=>{this.setStatus(qt.RESTART)}),this.listener.on(Li.PAUSE,()=>{this.setStatus(qt.PAUSE)})}removeListeners(){this.listener.removeAllListeners()}},d1=Tv;var Rv=class{constructor(){this.isEnd=!1,this.playProgress=0,this.trackProgress=0}update(e){let{tileSize:t}=Ze.gameplayParams,{length:i}=Ze.levelBlueprint,r=i*t;this.trackProgress=Ld(e,0,r,0,1);let{tilePadding:s}=Ze.gameplayParams,o=s.before*t,a=r-s.after*t;this.playProgress=Ld(e,o,a,0,1),this.playProgress=OA(this.playProgress,0,1),!this.isEnd&&this.playProgress===1&&(this.isEnd=!0,this.onGameplayEnd&&this.onGameplayEnd())}getTrackProgress(){return this.trackProgress}reset(){this.isEnd=!1}},h1=Rv;var NK=.5,Pv=class extends OT{constructor(e,t=new bs,i=Jt.DEFAULT){Ze.setLevel(i),super(e),this.progressManager=new h1,this.timeScale=1,this.handleOnBlur=()=>{this.blur=!0},this.assetLibrary=new WA,this.actors=new bv,this.cameraman=new r0(this.camera),this.physicsEngine=new o0(this.actors.player),this.visualPipeline=new L0(this.scene,this.camera),this.input=new oR(this.renderer.domElement),this.events=new bs,this.manager=new d1(this.events,t),Ze.graphicsParams.shadows&&(this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Ur),this.initListeners()}initListeners(){this.input.events.on(NA.USER_INPUT,e=>this.actors.player.move(e)),window.addEventListener("blur",this.handleOnBlur),this.manager.onStatusChange=e=>{this.onManagerStatus(e)},this.progressManager.onGameplayEnd=()=>{this.manager.setStatus(qt.CLEAR)},this.actors.player.onJump=()=>{this.manager.onJump()},this.actors.player.onLaneChange=()=>{this.manager.onLaneChange()}}removeListeners(){this.input.events.removeAllListeners(),window.removeEventListener("blur",this.handleOnBlur)}onManagerStatus(e){switch(e){case qt.LOAD:this.load();break;case qt.READY:this.start();break;case qt.PLAY:this.play();break;case qt.PAUSE:break;case qt.OVER:this.fail();break;case qt.CLEAR:this.cleared();break;case qt.RESTART:this.restart();break}}load(){return ct(this,null,function*(){yield this.assetLibrary.load(this.renderer,Ze.assetSources),this.preInit(),this.init(),this.manager.setStatus(qt.READY)})}restart(){this.removeListeners(),super.restart(),this.actors=new bv,this.cameraman=new r0(this.camera),this.physicsEngine=new o0(this.actors.player),this.visualPipeline=new L0(this.scene,this.camera),this.preInit(),this.init(),this.manager.setStatus(qt.READY),this.progressManager.reset(),this.initListeners()}play(){this.cameraman.setStatus(wa.PLAY)}fail(){this.manager.onDeath(),this.actors.player.kill()}cleared(){this.cameraman.setStatus(wa.OUTRO)}preInit(){let e=this.assetLibrary.assets;if(!e)throw Error("no assets in the library");this.actors.init(e),this.scene.add(this.cameraman),this.scene.add(this.actors),this.cameraman.setTarget(this.actors.player),this.physicsEngine.onCollision=t=>{this.handleCollision(t)},this.actors.level.onAddTile=t=>{this.visualPipeline.prepare(t)}}init(){this.timeScale=1,this.visualPipeline.init(),this.cameraman.init()}handleCollision(e){switch(e){case Ba.COLLECTIBLE:this.manager.onCollectible();break;case Ba.OBSTACLE:if(this.manager.getStatus()===qt.OVER)return;this.manager.setStatus(qt.OVER);break}}animate(){super.animate();let e=this.clock.gameDeltaTime,t=!0;if(this.blur){this.blur=!1;return}switch(this.cameraman.update(e,this.actors.level.scroll),this.progressManager.update(this.actors.level.scroll),this.manager.getStatus()){case qt.PLAY:break;case qt.CLEAR:this.timeScale=Math.max(this.timeScale-e*NK,0),e*=this.timeScale;break;case qt.OVER:t=!1,e=0;break;default:e=0;break}this.actors.update(e,Ze.gameplayParams.scrollSpeed);let i=this.actors.getLevelPhysics();t&&this.physicsEngine.update(e,i),this.visualPipeline.update(this.actors.level.scroll,this.clock.gameTime)}dispose(){this.removeListeners(),super.dispose()}},Dl=Pv;var f1={sheet:{texture:new fn,grid:[1,4]},states:{[nr.IDLE]:{animation:{loop:!0,speed:.1},cells:[[0,0],[0,1],[0,2],[0,3]]}},plane:{width:4,height:1}};var JA={sheet:{texture:new fn,grid:[1,6]},states:{[nr.IDLE]:{animation:{loop:!0,speed:.1},cells:[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5]]}},plane:{width:9,height:1}};var Lv=class extends xt{constructor(){super()}getLayer(e){let t=new ps,i=new Lo({map:e});return new $t(t,i)}getAnimatedSpriteLayer(e,t){return e.colorSpace=Qt,e.minFilter=on,e.magFilter=on,e.wrapS=ds,new UA(e,t,nr.IDLE)}},bl=Lv;var Tl={sheet:{texture:new fn,grid:[6,2]},states:{[nr.IDLE]:{animation:{loop:!0,speed:.1},cells:[[0,1],[1,1],[2,1],[3,1],[4,1],[5,1],[0,0],[1,0],[2,0],[3,0],[4,0]]}},plane:{width:1,height:1}};var Vd={scale:35,distance:20,rotation:new hs(0,-Math.PI/2,0)},p1={position:new x(0,0,0),scale:new x(1,2,1)},Ov={position:new x(-.02,.4,0),scale:new x(3,.75,1),scrollSpeed:1.3},Nv={position:new x(-.01,0,0),scale:new x(1,.5,.5),scrollSpeed:2},Fv={position:new x(-.01,-.1,0),scale:new x(1,.125,1),scrollSpeed:1},kv={position:new x(-.03,-.3,0),scale:new x(2,.5,.5),scrollSpeed:3},qA={position:new x(4.2,-.2,0),scale:new x(.5,.5,1),scrollSpeed:-6},YA={position:new x(2,.4,0),scale:new x(.02,.02,1),scrollSpeed:-6},XA={position:new x(0,-.2,.15),scale:new x(.2,.08,.5),scrollSpeed:15,uvScale:new we(4,1)},Qd={position:new x(.6,-.1,0),scale:new x(.43,.33,1),scrollModulo:.25,scrollSpeed:-6.5},Uv=class extends bl{constructor(){super(),this.rotation.y=Math.PI,this.scale.set(Vd.scale,Vd.scale,Vd.scale),this.position.set(Vd.distance,0,0),this.rotation.copy(Vd.rotation)}init(e){let t=this.getLayer(e.sky);t.scale.copy(p1.scale),t.position.copy(p1.position),this.add(t);let i=this.getLayer(e.city);i.scale.copy(Fv.scale),i.position.copy(Fv.position),this.city=i,this.add(i);let r=this.getLayer(e.hills);r.scale.copy(Nv.scale),r.position.copy(Nv.position),this.hills=r,this.add(r);let s=this.getLayer(e.clouds);s.scale.copy(Ov.scale),s.position.copy(Ov.position),this.clouds=s,this.add(s);let o=this.getLayer(e.ground);o.scale.copy(kv.scale),o.position.copy(kv.position),this.ground=o,this.add(o);let a=this.getAnimatedSpriteLayer(e.stage,Tl);a.scale.copy(qA.scale),a.position.copy(qA.position),this.stage=a,this.add(a);let c=this.getAnimatedSpriteLayer(e.plane,JA);c.scale.copy(YA.scale),c.position.copy(YA.position),this.plane=c,this.add(c);let l=this.getAnimatedSpriteLayer(e.crowd,f1);l.scale.copy(XA.scale),l.position.copy(XA.position);let u=l.material;u.uvScale=XA.uvScale,this.add(l),this.crowd=l;let d=this.getLayer(e.tower);d.scale.copy(Qd.scale),d.position.copy(Qd.position),this.add(d),this.tower=d}updateScroll(e,t){let i=e.material;i.mapOffset=new we(t,0),i.updateUniforms()}update(e,t){if(!this.clouds||!this.ground||!this.hills||!this.city||!this.stage||!this.plane||!this.crowd||!this.tower)return;let i=this.clouds.material;i.mapOffset=new we(e*Ov.scrollSpeed,0),i.updateUniforms(),this.updateScroll(this.ground,e*kv.scrollSpeed),this.updateScroll(this.hills,e*Nv.scrollSpeed),this.updateScroll(this.city,e*Fv.scrollSpeed),this.stage.update(t),this.stage.position.x=e*qA.scrollSpeed+qA.position.x,this.tower.position.x=e%Qd.scrollModulo*Qd.scrollSpeed+Qd.position.x,this.plane.update(t),this.plane.position.x=e*YA.scrollSpeed+YA.position.x,this.crowd.update(t),this.updateScroll(this.crowd,e*XA.scrollSpeed)}},A1=Uv;var FK=1,Gv=class n extends Dl{constructor(e,t){super(e,t,Jt.CLIMB),this.physicsEngine.setGroundShape(Cr.HOLE),this.backdrop=new A1}preInit(){if(super.preInit(),!this.assetLibrary.assets)throw Error("no assets in the library");let{textures:e}=this.assetLibrary.assets;this.backdrop.init(e),this.scene.add(this.backdrop)}init(){super.init(),this.actors.player.physicsObject.position.y=FK}animate(){super.animate(),this.backdrop.update(this.progressManager.getTrackProgress(),this.clock.gameDeltaTime),this.manager.getStatus()===qt.PLAY&&this.actors.player.position.y<-1&&this.manager.setStatus(qt.OVER)}restart(){return ct(this,null,function*(){nh(n.prototype,this,"restart").call(this),this.physicsEngine.setGroundShape(Cr.HOLE)})}},$A=Gv;var ZA={scale:220,position:new x(0,18,200)},g1={scale:new x(1.3,1.3,1),position:new x(0,.4,0)},eg={scale:new x(1.2,1.2,1),positionStart:new x(-.1,.2,.001),positionEnd:new x(.1,.05,.01)},tg={scale:new x(.1,.1,.2),positionStart:new x(0,-.05,.02),positionEnd:new x(0,-.15,.02)},m1={scale:new x(1.1,1.1,1),position:new x(0,-.1,.04)},Rl={scaleStart:new x(.05,.05,1),scaleEnd:new x(.4,.4,1),positionStart:new x(0,-.2,.06),positionEnd:new x(0,-.13,.06)},_1={scale:new x(1,1,1),position:new x(0,-.12,.03)},ng={position:new x(.5,.15,.04),scale:new x(.013,.013,1),scrollSpeed:-.6},Hv=class extends bl{constructor(){super(),this.rotation.y=Math.PI,this.scale.set(ZA.scale,ZA.scale,ZA.scale),this.position.copy(ZA.position)}init(e){let t=this.getLayer(e.clouds);t.scale.copy(eg.scale),t.position.copy(eg.positionStart),this.add(t),this.clouds=t;let i=this.getLayer(e.sky);i.scale.copy(g1.scale),i.position.copy(g1.position),this.add(i);let r=this.getLayer(e.sun);r.scale.copy(tg.scale),r.position.copy(tg.positionStart),this.add(r),this.sun=r;let s=this.getLayer(e.city);s.scale.copy(_1.scale),s.position.copy(_1.position),this.add(s);let o=this.getAnimatedSpriteLayer(e.stage,Tl);o.scale.copy(Rl.scaleStart),o.position.copy(Rl.positionStart),this.stage=o,this.add(o);let a=this.getLayer(e.ground);a.scale.copy(m1.scale),a.position.copy(m1.position),this.add(a);let c=this.getAnimatedSpriteLayer(e.plane,JA);c.scale.copy(ng.scale),c.position.copy(ng.position),this.plane=c,this.add(c)}update(e,t){!this.sun||!this.clouds||!this.stage||!this.plane||(this.sun.position.copy(tg.positionStart.clone().lerp(tg.positionEnd,e)),this.clouds.position.copy(eg.positionStart.clone().lerp(eg.positionEnd,e)),this.stage.position.copy(Rl.positionStart.clone().lerp(Rl.positionEnd,e)),this.stage.update(t),this.stage.scale.copy(Rl.scaleStart.clone().lerp(Rl.scaleEnd,e)),this.plane.update(t),this.plane.position.x=e*ng.scrollSpeed+ng.position.x)}},C1=Hv;var Vv=class extends Dl{constructor(e,t){super(e,t,Jt.GOLF),this.backdrop=new C1}preInit(){if(super.preInit(),!this.assetLibrary.assets)throw Error("no assets in the library");let{textures:e}=this.assetLibrary.assets;this.backdrop.init(e),this.scene.add(this.backdrop)}animate(){super.animate(),this.backdrop.update(this.progressManager.getTrackProgress(),this.clock.gameDeltaTime)}},ig=Vv;var Pl={scale:310,positionStart:new x(0,-100,300),positionEnd:new x(0,100,300)},rg={positionStart:new x(0,0,0),positionEnd:new x(0,1,0),scale:new x(1,2,1)},Qv={position:new x(-.02,.5,.02),scale:new x(2,.5,.5),scrollSpeed:.01},y1={position:new x(0,.2,.05),scale:new x(1,.5,3)},E1={position:new x(0,-.05,.07),scale:new x(1,.25,1)},Ll={positionStart:new x(0,0,.2),positionEnd:new x(0,-.15,.2),scaleStart:new x(.15,.15,.6),scaleEnd:new x(.4,.4,1.1)},zv=class extends bl{constructor(){super(),this.rotation.y=Math.PI,this.scale.set(Pl.scale,Pl.scale,Pl.scale),this.position.copy(Pl.positionStart)}init(e){let t=this.getLayer(e.sky);t.scale.copy(rg.scale),t.position.copy(rg.positionStart),this.sky=t,this.add(t);let i=this.getLayer(e.clouds);i.scale.copy(Qv.scale),i.position.copy(Qv.position),this.clouds=i,this.add(i);let r=this.getLayer(e.hills);r.scale.copy(y1.scale),r.position.copy(y1.position),this.add(r);let s=this.getLayer(e.ground);s.scale.copy(E1.scale),s.position.copy(E1.position),this.add(s);let o=this.getAnimatedSpriteLayer(e.stage,Tl);o.scale.copy(Ll.scaleStart),o.position.copy(Ll.positionStart),this.stage=o,this.add(o)}update(e,t,i){if(this.position.copy(Pl.positionStart.clone().lerp(Pl.positionEnd,e)),!this.clouds||!this.stage||!this.sky)return;let r=this.clouds.material;r.mapOffset=new we(i*Qv.scrollSpeed,0),r.updateUniforms(),this.stage.update(t),this.stage.scale.copy(Ll.scaleStart.clone().lerp(Ll.scaleEnd,e)),this.stage.position.copy(Ll.positionStart.clone().lerp(Ll.positionEnd,e)),this.sky.position.copy(rg.positionStart.clone().lerp(rg.positionEnd,e))}},v1=zv;var Kv=class n extends Dl{constructor(e,t){super(e,t,Jt.SLIDE),this.physicsEngine.setGroundShape(Cr.TUBE),this.backdrop=new v1}restart(){return ct(this,null,function*(){nh(n.prototype,this,"restart").call(this),this.physicsEngine.setGroundShape(Cr.TUBE)})}preInit(){if(super.preInit(),!this.assetLibrary.assets)throw Error("no assets in the library");let{textures:e}=this.assetLibrary.assets;this.backdrop.init(e),this.scene.add(this.backdrop)}animate(){super.animate(),this.backdrop.update(this.progressManager.getTrackProgress(),this.clock.gameDeltaTime,this.clock.gameTime)}},sg=Kv;var Ne=function(n){return n.BGM="BGM",n.CLOUD_MOVING="CLOUD_MOVING",n.DEATH="DEATH",n.FINISH_LINE="FINISH_LINE",n.GAME_OVER="GAME_OVER",n.JUMP="JUMP",n.MOVE="MOVE",n.MENU_CLICK="MENU_CLICK",n.OBSTACLE_HIT="OBSTACLE_HIT",n.POINT_COLLECT="POINT_COLLECT",n.POINTS_COUNTER="POINTS_COUNTER",n.START="START",n.UI_NEGATIVE="UI_NEGATIVE",n.UI_POSITIVE="UI_POSITIVE",n.WHOOSH="WHOOSH",n.ZONE_CLEARED="ZONE_CLEARED",n}(Ne||{}),Wv={[Ne.BGM]:"./assets/audio/bgm.mp3",[Ne.CLOUD_MOVING]:"./assets/audio/cloud-moving.mp3",[Ne.DEATH]:"./assets/audio/obstacle-hit.mp3",[Ne.FINISH_LINE]:"./assets/audio/finish-line.mp3",[Ne.GAME_OVER]:"./assets/audio/game-over.mp3",[Ne.JUMP]:"./assets/audio/jump.mp3",[Ne.MOVE]:"./assets/audio/move.mp3",[Ne.MENU_CLICK]:"./assets/audio/menu-click.mp3",[Ne.OBSTACLE_HIT]:"./assets/audio/obstacle-hit.mp3",[Ne.POINT_COLLECT]:"./assets/audio/point-collect.mp3",[Ne.POINTS_COUNTER]:"./assets/audio/points-counter.mp3",[Ne.START]:"./assets/audio/start.mp3",[Ne.UI_NEGATIVE]:"./assets/audio/ui-negative.mp3",[Ne.UI_POSITIVE]:"./assets/audio/ui-positive.mp3",[Ne.WHOOSH]:"./assets/audio/whoosh.mp3",[Ne.ZONE_CLEARED]:"./assets/audio/zone-cleared.mp3"};var I1=3,kK=1e3,S1=(()=>{let e=class e{constructor(){this.value=I1,this.stepText=Ht(String(I1))}ngOnInit(){this.startCountdown()}ngOnDestroy(){clearTimeout(this.timeout)}playStep(){this.timeout=setTimeout(()=>{this.value-=1,this.value>0?this.stepText.set(String(this.value)):this.stepText.set("GO!"),this.value>=0&&this.playStep()},kK)}startCountdown(){this.playStep()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Pe({type:e,selectors:[["app-arcade-countdown"]],inputs:{onComplete:"onComplete"},standalone:!0,features:[Le],decls:11,vars:4,consts:[[1,"countdown__container"],[1,"countdown__container--inner"],[1,"gradient-text"],[1,"gradient-text__text","drop-shadow"],[1,"gradient-text__text","outline--thin"],[1,"gradient-text__text","gradient"],[1,"gradient-text__text","outline"]],template:function(r,s){r&1&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),ge(4),H(),G(5,"p",4),ge(6),H(),G(7,"p",5),ge(8),H(),G(9,"p",6),ge(10),H()()()()),r&2&&(V(4),ze(s.stepText()),V(2),ze(s.stepText()),V(2),ze(s.stepText()),V(2),ze(s.stepText()))},styles:[".countdown__container[_ngcontent-%COMP%]{background-color:#0006;height:100%;position:relative;width:100%;z-index:1}.countdown__container--inner[_ngcontent-%COMP%]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]{display:inline-block;left:-5px;position:relative}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text[_ngcontent-%COMP%]{font-size:10rem;font-weight:700;left:0;letter-spacing:false;line-height:95%;position:absolute;text-align:center;text-transform:uppercase;top:0}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.drop-shadow[_ngcontent-%COMP%]{filter:drop-shadow(5px 5px #ffb299) drop-shadow(5px 5px 0 #ff7245) drop-shadow(5px 5px 0 #7759d2) drop-shadow(5px 5px 0 rgba(0,0,0,.6));top:-12px}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.gradient[_ngcontent-%COMP%]{background:#fff;background-clip:text;-webkit-text-fill-color:transparent}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline[_ngcontent-%COMP%]{color:#fff;text-shadow:0 -12px #7759d2;background-clip:text;background-color:transparent;position:relative}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline--thin[_ngcontent-%COMP%]{color:#fff;top:-14px}"],changeDetection:0});let n=e;return n})();var UK=["*"];function GK(n,e){n&1&&jf(0)}function HK(n,e){if(n&1&&(G(0,"div",2),st(1,GK,1,0,"ng-container",3),H()),n&2){let t=Se(),i=iC(4);Ie("ngClass",t.customClass),V(),Ie("ngTemplateOutlet",i)}}function VK(n,e){n&1&&jf(0)}function QK(n,e){if(n&1&&st(0,VK,1,0,"ng-container",3),n&2){Se();let t=iC(4);Ie("ngTemplateOutlet",t)}}function zK(n,e){n&1&&iB(0)}var Yn=(()=>{let e=class e{constructor(){this.innerBorder=!0,this.customClass=""}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Pe({type:e,selectors:[["app-pixelated-border"]],inputs:{innerBorder:"innerBorder",customClass:"customClass"},standalone:!0,features:[Le],ngContentSelectors:UK,decls:5,vars:2,consts:[["content",""],[1,"pixelated-border__outer",3,"ngClass"],[1,"pixelated-border__inner",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(r,s){r&1&&(nB(),G(0,"div",1),st(1,HK,2,2,"div",2)(2,QK,1,1,"ng-container"),H(),st(3,zK,1,0,"ng-template",null,0,oB)),r&2&&(Ie("ngClass",s.customClass),V(),qe(s.innerBorder?1:2))},dependencies:[ws,wB,BB],styles:['.pixelated-border__outer[_ngcontent-%COMP%], .pixelated-border__inner[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__outer[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:before{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]:after, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]{background:#323232;box-shadow:0 3px #0003;padding:3px}.pixelated-border__outer.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__inner[_ngcontent-%COMP%]{background:#fff;padding:3px;z-index:5}.pixelated-border__inner[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#fff}.pixelated-border__inner.menu-button[_ngcontent-%COMP%]{height:100%}'],changeDetection:0});let n=e;return n})();var x1=(()=>{let e=class e{constructor(){this.icon="",this.buttonText="Icon"}getIconPath(){return`assets/images/icons.svg#${this.icon}`}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Pe({type:e,selectors:[["app-menu-button"]],inputs:{icon:"icon",buttonText:"buttonText"},standalone:!0,features:[Le],decls:7,vars:3,consts:[["customClass","menu-button",1,"menu-button",3,"innerBorder"],[1,"pixelated-border__edges"],[1,"pixelated-border__background"],[1,"menu-div__svg"],[1,"menu-button__text"]],template:function(r,s){r&1&&(G(0,"app-pixelated-border",0)(1,"div",1)(2,"button",2),Un(),G(3,"svg",3),re(4,"use"),H()(),Pi(),G(5,"h3",4),ge(6),H()()()),r&2&&(Ie("innerBorder",!0),V(4),Jn("href",s.getIconPath()),V(2),ze(s.buttonText))},dependencies:[Yn],styles:['.pixelated-border__outer[_ngcontent-%COMP%], .pixelated-border__inner[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__outer[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:before{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]:after, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]{background:#323232;box-shadow:0 3px #0003;padding:3px}.pixelated-border__outer.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__inner[_ngcontent-%COMP%]{background:#fff;padding:3px;z-index:5}.pixelated-border__inner[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#fff}.pixelated-border__inner.menu-button[_ngcontent-%COMP%]{height:100%}.menu-button[_ngcontent-%COMP%]{aspect-ratio:1}.menu-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:fit-content;max-height:40%;max-width:40%;width:fit-content}.menu-button__text[_ngcontent-%COMP%]{bottom:16px;color:#fffab9;font-size:14px;left:50%;position:absolute;text-shadow:2px -1px 0 #252581;transform:translate(-50%);width:100%}.menu-button[_ngcontent-%COMP%]   .pixelated-border__background[_ngcontent-%COMP%]{background:#637ee1;padding:4px 10px}.menu-button[_ngcontent-%COMP%]   .pixelated-border__background[_ngcontent-%COMP%]:before, .menu-button[_ngcontent-%COMP%]   .pixelated-border__background[_ngcontent-%COMP%]:after{background:#637ee1}.menu-button[_ngcontent-%COMP%]   .pixelated-border__edges[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.menu-button[_ngcontent-%COMP%]   .pixelated-border__edges[_ngcontent-%COMP%]:before{background:#637ee1;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.menu-button[_ngcontent-%COMP%]   .pixelated-border__edges[_ngcontent-%COMP%]:after{background:#637ee1;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.menu-button[_ngcontent-%COMP%]   .pixelated-border__edges[_ngcontent-%COMP%]{height:100%}.menu-button[_ngcontent-%COMP%]   .pixelated-border__background[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;padding:0;width:100%}'],changeDetection:0});let n=e;return n})();var ki=(()=>{let e=class e{constructor(){this.buttonText="",this.disabled=!1,this.type="primary",this.handleClick=new mn}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Pe({type:e,selectors:[["app-cta-button"]],inputs:{buttonText:"buttonText",disabled:"disabled",type:"type"},outputs:{handleClick:"handleClick"},standalone:!0,features:[Le],decls:6,vars:6,consts:[[1,"cta-button"],[3,"innerBorder"],[1,"cta-button__background"],[1,"cta-button__clip",3,"click"],[1,"cta-button__text"]],template:function(r,s){r&1&&(G(0,"div",0)(1,"app-pixelated-border",1)(2,"div",2)(3,"button",3),Ye("click",function(){return s.handleClick.emit()}),G(4,"p",4),ge(5),H()()()()()),r&2&&(V(),Ie("innerBorder",s.type==="primary"),V(),Wf(s.type),Wi("disabled",s.disabled),V(3),ze(s.buttonText))},dependencies:[Yn],styles:['.cta-button[_ngcontent-%COMP%]{cursor:pointer;transition:all 1s ease}.cta-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.cta-button__background[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.cta-button__background[_ngcontent-%COMP%]:before{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.cta-button__background[_ngcontent-%COMP%]:after{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.cta-button__background.primary[_ngcontent-%COMP%]{background:#637ee1}.cta-button__background.primary[_ngcontent-%COMP%]:before, .cta-button__background.primary[_ngcontent-%COMP%]:after{background:#637ee1}.cta-button__background.primary[_ngcontent-%COMP%]   .cta-button__text[_ngcontent-%COMP%]{border-image:url(/playground/assets/images/cta-button-border.svg) 64 0 64 0;border-image-outset:7px;border-image-repeat:repeat;border-image-width:14px;color:#fffab9;overflow:hidden;text-shadow:1px 1px 0 #000}.cta-button__background.secondary[_ngcontent-%COMP%]{background:#fffab9}.cta-button__background.secondary[_ngcontent-%COMP%]:before, .cta-button__background.secondary[_ngcontent-%COMP%]:after{background:#fffab9}.cta-button__background.secondary[_ngcontent-%COMP%]   .cta-button__text[_ngcontent-%COMP%]{color:#323232}.cta-button__background.disabled[_ngcontent-%COMP%]{background:#252581}.cta-button__background.disabled[_ngcontent-%COMP%]:before, .cta-button__background.disabled[_ngcontent-%COMP%]:after{background:#252581}.cta-button__background.disabled[_ngcontent-%COMP%]   .cta-button__text[_ngcontent-%COMP%]{color:#637ee1}.cta-button__text[_ngcontent-%COMP%]{padding:17px;text-align:center}.cta-button__clip[_ngcontent-%COMP%]{all:unset;display:block;height:calc(100% + 3px);overflow:hidden;width:100%}.cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.primary[_ngcontent-%COMP%]{background:#1f1fff}.cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.primary[_ngcontent-%COMP%]:before, .cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.primary[_ngcontent-%COMP%]:after{background:#1f1fff}.cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.secondary[_ngcontent-%COMP%]{background:#fff685}.cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.secondary[_ngcontent-%COMP%]:before, .cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.secondary[_ngcontent-%COMP%]:after{background:#fff685}.cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.disabled[_ngcontent-%COMP%]{background:#252581}.cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.disabled[_ngcontent-%COMP%]:before, .cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.disabled[_ngcontent-%COMP%]:after{background:#252581}.cta-button[_ngcontent-%COMP%]:hover   .cta-button__background.disabled[_ngcontent-%COMP%]   .cta-button__text[_ngcontent-%COMP%]{color:#637ee1}'],changeDetection:0});let n=e;return n})();var Er={production:!0,oAuthClientId:"764843698673-5vusd3nt7me6ipsi0n302deo0cev2vlb.apps.googleusercontent.com"};function zt(n){if(!Er.production){let e=ae({},n);console.debug("Event pushed to dataLayer:",e)}window.dataLayer.push(ae({},n))}var M1={tapToPlay:"Tap to play",instructionsTitle:"Instructions",instructionsDescription:"<p>Complete each level by dodging obstacles and collecting Play Points.</p><p>When you\u2019ve completed the game, you can claim the points you collected in the Play Store &ZeroWidthSpace;and use them for rewards.</p><p>This game is available &ZeroWidthSpace;in the US only</p>",lockupAlt:"The Playground at Zedd in the Park",playgroundLevels:"Complete each level",playgroundLevel1:"Course Runner",playgroundLevel2:"Peak Play",playgroundLevel3:"Wheee! Slide",playgroundLevelLocked:"Level locked!",playgroundSelectALevel:"Select a level",playgroundPlayCtaPlayLevel:"Play Level",playgroundClaimPoints:"Claim points",countdownGo:"Go",gameOverHeading:"GAME OVER",youWinHeading:"LEVEL COMPLETE",levelEndTryAgain:"Try again",levelEndReturnToPlayground:"Return to playground",levelEndContinue:"Continue",completeCongrats:"Congratulations, you won!",completePointsCollected:"Points",completeTopUp:"Top up",completeLevelReward:"level reward",completeRedeem:"Redeem",completeRedeemError:"OH NO. WE\u2019VE RAN INTO SOME ISSUES WITH REDEEMING YOUR POINTS. TRY AGAIN LATER!",gamePaused:"Game Paused",menuTitle:"Menu",menuTitleControls:"Controls",menuSound:"Sound",menuOn:"On",menuOff:"Off",menuResume:"Resume",menuPlayground:"Playground",menuHelp:"Help",menuAbout:"About",menuTerms:"Terms",menuControls:"Controls",termsCopy1:"I accept Google's",termsCta1:"terms and conditions",termsCopy2:"and acknowledge that my information will be used in accordance with Google's",termsCta2:"Privacy Policy",termsCta2Url:"https://policies.google.com/privacy?hl=en&fg=1",termsCopy3:".",controlsOk:"OK",controlsSwipe:"Move",controlsPress:"Jump","404Title":"Error","404Description":"BUMMER, we can\u2019t seem to find the page you\u2019re looking for. TRY THE PREVIOUS PAGE OR GO HOME.","404Cta":"Go to home",rotateText:"ROTATE DEVICE TO PORTRAIT MODE",desktopDescription:"This GAME is best played on a mobile device!"};var w1={tapToPlay:"PRESIONA PARA JUGAR",instructionsTitle:"INSTRUCCIONES",instructionsDescription:"<p>COMPLETA CADA NIVEL ESQUIVANDO OBST\xC1CULOS Y ACUMULANDO TANTOS PUNTOS COMO PUEDAS. UNA VEZ FINALIZADO EL JUEGO PODR\xC1S RECLAMAR LOS PUNTOS ACUMULADOS EN LA PLAY STORE Y CAMBIARLOS POR PREMIOS.</p><p>BUENA SUERTE, Y A JUGAR!</p>",lockupAlt:"EL PLAYGROUND DE ZEDD IN THE PARK",playgroundLevels:"COMPLETA CADA NIVEL",playgroundLevel1:"CORREDOR DE PISTA",playgroundLevel2:"HORA PUNTA",playgroundLevel3:"TOBOG\xC1N ZUUUM!",playgroundLevelLocked:"\xA1NIVEL BLOQUEADO!",playgroundSelectALevel:"SELECCIONA UN NIVEL",playgroundPlayCtaPlayLevel:"JUEGA EL NIVEL",playgroundClaimPoints:"RECLAMAR PUNTOS",countdownGo:"YA",gameOverHeading:"FIN DEL JUEGO",youWinHeading:"NIVEL COMPLETADO",levelEndTryAgain:"VUELVE A INTENTAR",levelEndReturnToPlayground:"REGRESA AL PLAYGROUND",levelEndContinue:"CONTINUAR",completeCongrats:"\xA1FELICITACIONES! \xA1GANASTE!",completePointsCollected:"PUNTOS",completeTopUp:"RECARGA",completeLevelReward:"PREMIO DE NIVEL",completeRedeem:"CANJEAR",completeRedeemError:"VAYA. HA HABIDO UN PROBLEMA CANJEANDO TUS PUNTOS. VU\xC9LVELO A INTENTAR M\xC1S TARDE!",gamePaused:"JUEGO PAUSADO",menuTitle:"MEN\xDA",menuSound:"SONIDO",menuOn:"ON",menuOff:"OFF",menuResume:"REANUDAR",menuPlayground:"PLAYGROUND",menuHelp:"AYUDA",menuAbout:"ACERCA DE",menuControls:"CONTROLES",menuTerms:"t\xE9rminos",termsCopy1:"He le\xEDdo los",termsCta1:"T\xE9rminos y Condiciones",termsCopy2:"de Google y la",termsCta2:"Pol\xEDtica de Privacidad",termsCta2Url:"https://policies.google.com/privacy?hl=es&fg=1",termsCopy3:", y los acepto.",controlsOk:"ACEPTAR",controlsSwipe:"mover",controlsPress:"saltar","404Title":"ERROR","404Description":"VAYA, NO PODEMOS ENCONTRAR LA P\xC1GINA QUE EST\xC1S BUSCANDO. PRUEBA LA P\xC1GINA ANTERIOR O VE AL INICIO","404Cta":"IR A INICIO",rotateText:"GIRAR DISPOSITIVO A MODO RETRATO",desktopDescription:"Este JUEGO se juega mejor en un dispositivo m\xF3vil!"};var Ta=function(n){return n.EN="en",n.ES="es",n}(Ta||{}),jv=function(n){return n.EN="en",n.ES="es",n}(jv||{}),B1="intl",Vre=[Ta.EN,Ta.ES],og=Ta.EN;function D1(n){if(n)return n[0]?.path===B1?n[1]?.path:og;{let e=location.pathname.split("/");return e[1]===B1?String(e[2]):og}}function b1(n){switch(n){case Ta.EN:return jv.EN;case Ta.ES:return jv.ES;default:return n}}function T1(n){switch(n){case Ta.ES:return w1;default:return M1}}var en=(()=>{let e=class e{constructor(){this.locale=og}setLocale(i){this.locale=i||this.locale}getLocale(){return this.locale}getLocalizedCopy(){return T1(this.locale)}getLocalizedLockup(){return`assets/images/lockup_${this.locale}.webp`}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var R1=(()=>{let e=class e{constructor(i){this.localizationService=i,this.title=B_(""),this.body=B_(""),this.closePage=SM(),this.lockupImg=this.localizationService.getLocalizedLockup()}back(){this.closePage.emit(),zt({event:`button_${this.title()}_close`})}};e.\u0275fac=function(r){return new(r||e)(Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-hygiene-page"]],inputs:{title:[1,"title"],body:[1,"body"]},outputs:{closePage:"closePage"},standalone:!0,features:[Le],decls:9,vars:3,consts:[[1,"hygiene-page"],["alt","The Playground at Zedd in the Park"],[1,"hygiene-page__eyebrow"],[1,"checkered-pattern"],[1,"hygiene-page__copy",3,"innerHTML"],["buttonText","Back","type","primary",3,"handleClick"]],template:function(r,s){r&1&&(G(0,"div",0),re(1,"img",1),G(2,"div",2),re(3,"div",3),G(4,"p"),ge(5),H(),re(6,"div",3),H(),re(7,"div",4),G(8,"app-cta-button",5),Ye("handleClick",function(){return s.back()}),H()()),r&2&&(V(),Jn("src",s.lockupImg,Lr),V(4),ze(s.title()),V(2),Ie("innerHTML",s.body(),Ff))},dependencies:[ki],styles:[".hygiene-page[_ngcontent-%COMP%]{align-items:center;background-color:#637ee1;display:flex;flex-direction:column;gap:16px;height:100%;left:0;overflow:scroll;padding:16px 16px 128px;position:absolute;top:0;width:100%;z-index:2}.hygiene-page[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-block:32px;width:90%}.hygiene-page__eyebrow[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;position:relative;width:100%}.hygiene-page__eyebrow[_ngcontent-%COMP%]   .checkered-pattern[_ngcontent-%COMP%]{background:linear-gradient(45deg,#fff 25%,transparent 25%,transparent 75%,#fff 75%),linear-gradient(45deg,#fff 25%,transparent 25%,transparent 75%,#fff 75%);background-color:transparent;background-position:0 0,3px 3px;background-size:6px 6px;flex:1;height:24px}.hygiene-page__eyebrow[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin:0 16px;text-shadow:2px 2px 0 #000}.hygiene-page__copy[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:column;gap:12px;text-align:justify}.hygiene-page[_ngcontent-%COMP%]   app-cta-button[_ngcontent-%COMP%]{bottom:16px;position:fixed;width:calc(100% - 32px)}"],changeDetection:0});let n=e;return n})();function jK(n,e){n&1&&(G(0,"div",8),Un(),G(1,"svg",11),re(2,"use",12),H(),Pi(),G(3,"p"),ge(4,"Swipe"),H()())}function JK(n,e){n&1&&(G(0,"div",8),Un(),G(1,"svg",11),re(2,"use",13),H(),Pi(),G(3,"p"),ge(4,"Jump"),H()())}var P1=(()=>{let e=class e{constructor(){this.playButtonClick=new mn,this.currentLevel=Fo.CLIMB,this.levelsType=Fo}handleOnClick(){this.playButtonClick.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Pe({type:e,selectors:[["app-arcade-menu"]],inputs:{currentLevel:"currentLevel"},outputs:{playButtonClick:"playButtonClick"},standalone:!0,features:[Le],decls:15,vars:3,consts:[[1,"menu"],[3,"innerBorder"],[1,"pixelated-border__edges"],[1,"menu__background","pixelated-border__background"],[1,"menu__title"],[1,"checkered-pattern"],[1,"menu__separator"],[1,"menu__flex"],[1,"menu__control"],[1,"buttonWrapper"],["buttonText","play","type","primary",3,"handleClick"],[1,"menu__control__svg"],["href","assets/images/icons.svg#menu-arrows-2"],["href","assets/images/icons.svg#menu-tap"]],template:function(r,s){r&1&&(G(0,"div",0)(1,"app-pixelated-border",1)(2,"div",2)(3,"div",3)(4,"div",4),re(5,"div",5),G(6,"h1"),ge(7,"CONTROLS"),H(),re(8,"div",5),H(),re(9,"div",6),G(10,"div",7),st(11,jK,5,0,"div",8)(12,JK,5,0,"div",8),H()(),G(13,"div",9)(14,"app-cta-button",10),Ye("handleClick",function(){return s.handleOnClick()}),H()()()()()),r&2&&(V(),Ie("innerBorder",!0),V(10),qe(s.currentLevel===s.levelsType.GOLF||s.currentLevel===s.levelsType.SLIDE?11:-1),V(),qe(s.currentLevel===s.levelsType.GOLF||s.currentLevel===s.levelsType.CLIMB?12:-1))},dependencies:[Yn,ki],styles:['.pixelated-border__outer[_ngcontent-%COMP%], .pixelated-border__inner[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__outer[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:before{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]:after, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]{background:#323232;box-shadow:0 3px #0003;padding:3px}.pixelated-border__outer.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__inner[_ngcontent-%COMP%]{background:#fff;padding:3px;z-index:5}.pixelated-border__inner[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#fff}.pixelated-border__inner.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__background[_ngcontent-%COMP%]{background:#d4dcf7;padding:4px 10px}.pixelated-border__background[_ngcontent-%COMP%]:before, .pixelated-border__background[_ngcontent-%COMP%]:after{background:#d4dcf7}.pixelated-border__edges[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__edges[_ngcontent-%COMP%]:before{background:#d4dcf7;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__edges[_ngcontent-%COMP%]:after{background:#d4dcf7;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.menu[_ngcontent-%COMP%]{margin:0 auto;max-width:340px;min-width:400px;text-align:center;width:100%}.menu__background[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:13px 10px 20px}.menu__title[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;position:relative;width:100%}.menu__title[_ngcontent-%COMP%]   .checkered-pattern[_ngcontent-%COMP%]{background:linear-gradient(45deg,#becaf3 25%,transparent 25%,transparent 75%,#becaf3 75%),linear-gradient(45deg,#becaf3 25%,transparent 25%,transparent 75%,#becaf3 75%);background-color:#d4dcf7;background-position:0 0,3px 3px;background-size:6px 6px;flex:1;height:28px}.menu__title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:14px;margin:0 16px}.menu__separator[_ngcontent-%COMP%]{background:#becaf3;box-shadow:0 2px #ffffff80;height:2px;width:100%}.menu__flex[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center}.menu__control[_ngcontent-%COMP%]{align-items:center;aspect-ratio:1;background:#becaf3;box-shadow:0 2px #ffffff80;display:flex;flex-direction:column;gap:16px;justify-content:center;max-width:160px;width:100%}.menu__control__svg[_ngcontent-%COMP%]{height:48px;width:48px}.menu[_ngcontent-%COMP%]   app-cta-button[_ngcontent-%COMP%]{bottom:16px;left:16px;position:absolute;width:calc(100% - 32px)}.menu[_ngcontent-%COMP%]   .buttonWrapper[_ngcontent-%COMP%]{height:80px}'],changeDetection:0});let n=e;return n})();var Jv=class{constructor(){this.clips=[],this.context=new AudioContext,this.gain=this.context.createGain(),this.out=this.context.destination,this.gain.gain.value=1,this.gain.connect(this.out)}mute(){this.gain.gain.value=0}unmute(){this.gain.gain.value=1}getClip(e){return this.clips.find(t=>t.name===e)}loadClip(e){return ct(this,null,function*(){if(this.getClip(e.name))return;let i=yield(yield fetch(e.src)).arrayBuffer(),r=yield this.context.decodeAudioData(i);this.clips.push({name:e.name,buffer:r})})}playClip(e,t){let i=this.getClip(e);if(!i)return;let r=this.context.createBufferSource();r.buffer=i.buffer;let s=this.context.createGain();return s.gain.value=1,r.connect(s),s.connect(this.gain),t&&(r.loop=!0),r.start(),{source:r,gain:s}}},L1=Jv;var ag=function(n){return n.MUTED="muted",n.ACTIVE="active",n}(ag||{}),Xn=(()=>{let e=class e{constructor(){this.isReady=!1,this.manager=new L1,this.status=ag.MUTED,this.isUserMuted=!1,this.isDocumentVisible=!0,this.isDocumentInteracted=!0,window.addEventListener("click",()=>{this.isDocumentInteracted=!0},{once:!0}),window.addEventListener("visibilitychange",()=>{this.isDocumentVisible=document.visibilityState!=="hidden",this.updateStatus()})}load(){return ct(this,null,function*(){for(let i in Wv){let r=i,s=Wv[r];yield this.manager.loadClip({name:r,src:s})}this.isReady=!0})}mute(){this.isUserMuted=!0,this.updateStatus()}unmute(){this.isUserMuted=!1,this.updateStatus()}updateStatus(){!this.isUserMuted&&this.isDocumentVisible&&this.isDocumentInteracted?this.status=ag.ACTIVE:this.status=ag.MUTED}playClip(i,r){if(!(!this.isReady||this.isUserMuted))return this.manager.playClip(i,r)}getStatus(){return this.status}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var qK=["wglContainer"];function YK(n,e){if(n&1){let t=_n();G(0,"app-arcade-menu",4),Ye("playButtonClick",function(){bt(t);let r=Se();return Tt(r.onPlayClick())}),H()}if(n&2){let t=Se();Ie("currentLevel",t.levelName)}}function XK(n,e){if(n&1){let t=_n();G(0,"app-arcade-countdown",5),Ye("onComplete",function(){bt(t);let r=Se();return Tt(r.onCountdownEnd())}),H()}}var $K={value:"value"},Fo=function(n){return n.GOLF="golf",n.CLIMB="climb",n.SLIDE="slide",n}(Fo||{}),Si=function(n){return n.LOAD="load",n.READY="ready",n.END="end",n.COUNTDOWN="countdown",n.PLAY="play",n}(Si||{}),O1=(()=>{let e=class e{constructor(i,r,s){this.route=r,this.audioService=s,this.isBrowser=!1,this.levelName=Fo.CLIMB,this.events=new bs,this.levelStatusType=Si,this.container=ns.required("wglContainer"),this.isBrowser=ho(i),this.levelStatus=Si.LOAD}onQueryChange(i){this.levelName=i,this.setLevel()}onPlayClick(){this.updateLevelStatus(Si.COUNTDOWN)}onCountdownEnd(){this.updateLevelStatus(Si.PLAY)}removeListeners(){this.level?.events.removeAllListeners()}updateLevelStatus(i){if(i!==this.levelStatus)switch(this.levelStatus=i,this.levelStatus){case Si.LOAD:break;case Si.READY:break;case Si.END:this.level?.restart(),this.events.emit(Li.PAUSE),this.updateLevelStatus(Si.READY);break;case Si.COUNTDOWN:setTimeout(()=>{this.updateLevelStatus(Si.PLAY)},3e3);break;case Si.PLAY:this.events.emit(Li.START);break}}initListeners(){this.level&&(this.level.events.on(Wt.READY,()=>{this.updateLevelStatus(Si.READY)}),this.level.events.on(Wt.OVER,()=>{this.updateLevelStatus(Si.END)}),this.level.events.on(Wt.CLEAR,()=>{this.updateLevelStatus(Si.END)}))}initSoundListeners(){return ct(this,null,function*(){if(!this.audioService||!this.level)return;let i;this.level.events.on(Wt.READY,()=>{i=this.audioService.playClip(Ne.BGM,!0)}),this.level.events.on(Wt.SCORE_UPDATE,()=>{this.audioService.playClip(Ne.POINT_COLLECT)}),this.level.events.on(Wt.JUMP,()=>{this.audioService.playClip(Ne.JUMP)}),this.level.events.on(Wt.LANE_CHANGE,()=>{this.audioService.playClip(Ne.MOVE)}),this.level.events.on(Wt.DEATH,()=>{this.audioService.playClip(Ne.OBSTACLE_HIT)}),this.level.events.on(Wt.CLEAR,()=>{i?.source.stop(),this.audioService.playClip(Ne.FINISH_LINE)}),this.level.events.on(Wt.OVER,()=>{i?.source.stop()})})}setLevel(){switch(this.levelName){case Fo.GOLF:this.level=new ig(this.container().nativeElement,this.events);break;case Fo.CLIMB:this.level=new $A(this.container().nativeElement,this.events);break;case Fo.SLIDE:this.level=new sg(this.container().nativeElement,this.events);break;default:return}this.events.emit(Li.LOAD),this.initListeners(),this.initSoundListeners()}ngAfterViewInit(){return ct(this,null,function*(){yield this.audioService.load(),this.route.queryParams.subscribe(i=>{this.onQueryChange(i[$K.value])}),Er.production&&window.addEventListener("click",()=>{this.container().nativeElement.requestFullscreen()},{once:!0})})}ngOnDestroy(){this.removeListeners(),this.level?.dispose()}};e.\u0275fac=function(r){return new(r||e)(Ae(Gn),Ae(go),Ae(Xn))},e.\u0275cmp=Pe({type:e,selectors:[["app-arcade"]],viewQuery:function(r,s){r&1&&is(s.container,qK,5),r&2&&rs()},standalone:!0,features:[Le],decls:5,vars:2,consts:[["wglContainer",""],[1,"arcadeScreen"],[1,"wrapper"],[3,"currentLevel"],[3,"playButtonClick","currentLevel"],[3,"onComplete"]],template:function(r,s){r&1&&(G(0,"div",1,0)(2,"div",2),st(3,YK,1,1,"app-arcade-menu",3)(4,XK,1,0,"app-arcade-countdown"),H()()),r&2&&(V(3),qe(s.levelStatus===s.levelStatusType.READY?3:-1),V(),qe(s.levelStatus===s.levelStatusType.COUNTDOWN?4:-1))},dependencies:[S1,P1],styles:[".wrapper[_ngcontent-%COMP%]{align-items:center;display:flex;height:100%;justify-content:center;pointer-events:none;position:absolute;width:100%}.wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:all}.arcadeScreen[_ngcontent-%COMP%]{height:100%;left:0;position:fixed;top:0;width:100%}"]});let n=e;return n})();var N1=(()=>{let e=class e{constructor(i,r){this.localizationService=i,this.router=r,this.content=this.localizationService.getLocalizedCopy(),this.ctaCopy=`${this.content?.["404Cta"]}`}ctaClick(){this.router.navigate(["/"])}};e.\u0275fac=function(r){return new(r||e)(Ae(en),Ae(_o))},e.\u0275cmp=Pe({type:e,selectors:[["app-page-not-found"]],standalone:!0,features:[Le],decls:22,vars:3,consts:[[1,"page-not-found"],[1,"page-not-found__top"],[1,"checkered-pattern"],[1,"page-not-found__middle"],[1,"gradient-text"],[1,"gradient-text__text","drop-shadow"],[1,"gradient-text__text","outline--thin"],[1,"gradient-text__text","gradient"],[1,"gradient-text__text","outline"],[1,"pixelated-border__edges"],[1,"page-not-found__bottom"],[3,"click","buttonText"]],template:function(r,s){r&1&&(G(0,"div",0)(1,"div",1),re(2,"div",2),G(3,"p"),ge(4),H(),re(5,"div",2),H(),G(6,"div",3)(7,"div",4)(8,"p",5),ge(9,"404"),H(),G(10,"p",6),ge(11,"404"),H(),G(12,"p",7),ge(13,"404"),H(),G(14,"p",8),ge(15,"404"),H()(),G(16,"app-pixelated-border")(17,"div",9)(18,"p"),ge(19),H()()()(),G(20,"div",10)(21,"app-cta-button",11),Ye("click",function(){return s.ctaClick()}),H()()()),r&2&&(V(4),ze(s.content==null?null:s.content["404Title"]),V(15),ze(s.content==null?null:s.content["404Description"]),V(2),Ie("buttonText",s.ctaCopy))},dependencies:[ki,Yn],styles:['.page-not-found[_ngcontent-%COMP%]{background:#9ba1e9;display:flex;flex-direction:column;height:100%;justify-content:space-between;padding:24px 16px;text-align:center}.page-not-found__top[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;position:relative;width:100%}.page-not-found__top[_ngcontent-%COMP%]   .checkered-pattern[_ngcontent-%COMP%]{background:linear-gradient(45deg,#fff 25%,transparent 25%,transparent 75%,#fff 75%),linear-gradient(45deg,#fff 25%,transparent 25%,transparent 75%,#fff 75%);background-color:transparent;background-position:0 0,3px 3px;background-size:6px 6px;flex:1;height:24px}.page-not-found__top[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin:0 58px;text-shadow:2px 2px 0 #000}app-pixelated-border[_ngcontent-%COMP%]{display:block;margin-top:32px;position:relative}app-pixelated-border[_ngcontent-%COMP%]:after{background-image:url(/playground/assets/images/speech-bubble-tail.webp);background-size:contain;content:"";height:18px;position:absolute;right:32px;top:-12px;transform:rotate(180deg) scaleX(-1);width:21px;z-index:2}app-pixelated-border[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:12px}.gradient-text[_ngcontent-%COMP%]{display:inline-block;left:-5px;position:relative}.gradient-text[_ngcontent-%COMP%]   .gradient-text__text[_ngcontent-%COMP%]{font-size:8rem;font-weight:700;left:0;letter-spacing:false;line-height:95%;position:absolute;text-align:center;text-transform:uppercase;top:0}.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.drop-shadow[_ngcontent-%COMP%]{filter:drop-shadow(5px 5px #ffb299) drop-shadow(5px 5px 0 #ff7245) drop-shadow(5px 5px 0 #7759d2) drop-shadow(5px 5px 0 rgba(0,0,0,.6));top:-12px}.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.gradient[_ngcontent-%COMP%]{background:#fff;background-clip:text;-webkit-text-fill-color:transparent}.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline[_ngcontent-%COMP%]{color:#fff;text-shadow:0 -12px #7759d2;background-clip:text;background-color:transparent;position:relative}.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline--thin[_ngcontent-%COMP%]{color:#fff;top:-14px}'],changeDetection:0});let n=e;return n})();var F1=(()=>{let e=class e{constructor(){this.view="game-over"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Pe({type:e,selectors:[["app-background-overlay"]],inputs:{view:"view"},standalone:!0,features:[Le],decls:1,vars:2,consts:[[1,"background-overlay"]],template:function(r,s){r&1&&re(0,"div",0),r&2&&Wf(s.view)},styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-auto-flow:row;grid-gap:16px;grid-template-columns:repeat(4,1fr)}.grid-layout__col-1[_ngcontent-%COMP%]{display:block;grid-column:span 1}.grid-layout__col-2[_ngcontent-%COMP%]{display:block;grid-column:span 2}.grid-layout__col-3[_ngcontent-%COMP%]{display:block;grid-column:span 3}.grid-layout__col-4[_ngcontent-%COMP%]{display:block;grid-column:span 4}.background-overlay[_ngcontent-%COMP%]{height:100%;height:100dvh;left:0;position:absolute;top:0;width:100%}.background-overlay.level-end[_ngcontent-%COMP%]{background-color:#142667;opacity:.3}.background-overlay.paused[_ngcontent-%COMP%]{background-color:#000;mix-blend-mode:color}"],changeDetection:0});let n=e;return n})();var rn=function(n){return n.ENTER="enter",n.EXIT="exit",n}(rn||{}),dt=function(n){return n.INTRO="intro",n.SIGN_IN="sign-in",n.PLAYGROUND="playground",n.GAMEPLAY="gameplay",n.COMPLETE="complete",n.MENU="menu",n}(dt||{}),Te=function(n){return n.UNPLAYED="unplayed",n.GAME_READY="ready",n.COUNTDOWN="countdown",n.PLAYING="playing",n.PAUSED="paused",n.GAME_OVER="game-over",n.ZONE_CLEARED="zone-cleared",n.GAME_COMPLETE="game-complete",n}(Te||{}),Wn=function(n){return n.GOLF="golf",n.CLIMB="climb",n.SLIDE="slide",n}(Wn||{}),Ol=function(n){return n.LOCKED="locked",n.UNLOCKED="unlocked",n}(Ol||{}),Js=function(n){return n.COMPLETE="complete",n.NOT_COMPLETE="not-complete",n}(Js||{}),Ut=(()=>{let e=class e{constructor(){this.previousUrlIncludesComplete=Ht(!1),this.transitionSignal=Ht(null),this.viewSignal=Ht(dt.INTRO),this.nextViewSignal=Ht(dt.SIGN_IN),this.gameStatusSignal=Ht(Te.UNPLAYED),this.userSignal=Ht(null),this.menuOpenSignal=Ht(!1),this.soundSignal=Ht(!0),this.introBackgroundAnimatedSignal=Ht(!1),this.levelStatusSignal=Ht({[Wn.GOLF]:{current:!1,accessStatus:Ol.UNLOCKED,score:0,playStatus:Js.NOT_COMPLETE},[Wn.CLIMB]:{current:!1,accessStatus:Ol.LOCKED,score:0,playStatus:Js.NOT_COMPLETE},[Wn.SLIDE]:{current:!1,accessStatus:Ol.LOCKED,score:0,playStatus:Js.NOT_COMPLETE}}),this.completeScore=In(()=>{let i=0;for(let r of Object.values(this.levelStatusSignal()))i+=r.score;return i}),this.currentLevelScore=Ht(0)}getNextLevel(){switch(this.getCurrentLevel()){case Wn.GOLF:return Wn.CLIMB;case Wn.CLIMB:return Wn.SLIDE;case Wn.SLIDE:default:return}}getTransitionSignal(){return this.transitionSignal()}getGameStatusSignal(){return this.gameStatusSignal()}setTransitionSignal(i){this.transitionSignal.set(i)}getIntroBackgroundAnimatedSignal(){return this.introBackgroundAnimatedSignal()}setIntroBackgroundAnimatedSignal(i){this.introBackgroundAnimatedSignal.set(i)}setViewSignal(i){Er.production||console.log("set view",i),this.viewSignal.set(i)}getViewSignal(){return this.viewSignal()}setNextViewSignal(i){Er.production||console.log("set next view",i),this.nextViewSignal.set(i)}getNextViewSignal(){return this.nextViewSignal()}setGameStatus(i){Er.production||console.log("set game status",i),this.gameStatusSignal.set(i)}getGameStatus(){return this.gameStatusSignal()}togglePausePlay(){this.gameStatusSignal.set(this.gameStatusSignal()===Te.PLAYING?Te.PAUSED:Te.PLAYING)}setPaused(){this.gameStatusSignal.set(Te.PAUSED)}setUserSignal(i){this.userSignal.set(i)}getUserSignal(){return this.userSignal()}returnToPlayground(){this.setNextViewSignal(dt.PLAYGROUND),this.setTransitionSignal(rn.ENTER)}toggleMenu(){this.menuOpenSignal.update(i=>!i)}getMenuStatus(){return this.menuOpenSignal()}toggleSound(){this.soundSignal.update(i=>!i)}getSound(){return this.soundSignal()}getLevelStatusSignal(){return this.levelStatusSignal()}getCurrentLevel(){let i=this.levelStatusSignal();return Object.keys(i).find(s=>i[s].current)||Wn.GOLF}setCurrentLevel(i){let r=ae({},this.levelStatusSignal());for(let s in r)r[s].current=!1;r[i].current=!0,this.levelStatusSignal.set(r)}increaseCurrentLevelScore(i){this.currentLevelScore.update(r=>r+i)}setLevelComplete(i){let r=ae({},this.levelStatusSignal()),s=this.getNextLevel();s&&(r[s].accessStatus=Ol.UNLOCKED),r[i].playStatus!==Js.COMPLETE&&(r[i].playStatus=Js.COMPLETE,r[i].score=this.currentLevelScore()),this.levelStatusSignal.set(r)}getCurrentLevelScore(){return this.levelStatusSignal()[this.getCurrentLevel()].playStatus===Js.COMPLETE?this.completeScore():this.currentLevelScore()+this.completeScore()}resetScore(){this.currentLevelScore.set(0)}getCompleteScore(){return this.completeScore()}getUnlockedLevels(){let i=this.levelStatusSignal();return Object.keys(i).filter(r=>i[r].accessStatus===Ol.UNLOCKED)}setPreviousUrlIncludesComplete(i){Er.production||console.log("Previous page was complete",i),this.previousUrlIncludesComplete.set(i)}getPreviousUrlIncludesComplete(){return this.previousUrlIncludesComplete()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var cg="https://services.google.com/fh/files/misc/google-play-playground-game-official-terms.pdf";function ZK(n,e){if(n&1&&(G(0,"h1"),ge(1),H()),n&2){let t=Se();V(),ze(t.content==null?null:t.content.menuTitleControls)}}function e5(n,e){if(n&1&&(G(0,"h1"),ge(1),H()),n&2){let t=Se();V(),ze(t.content==null?null:t.content.menuTitle)}}function t5(n,e){if(n&1&&(G(0,"div",12),Un(),G(1,"svg",13),re(2,"use",14),H(),Pi(),G(3,"p"),ge(4),H()()),n&2){let t=Se(2);V(4),ze(t.content==null?null:t.content.controlsSwipe)}}function n5(n,e){if(n&1&&(G(0,"div",12),Un(),G(1,"svg",13),re(2,"use",15),H(),Pi(),G(3,"p"),ge(4),H()()),n&2){let t=Se(2);V(4),ze(t.content==null?null:t.content.controlsPress)}}function i5(n,e){if(n&1&&(G(0,"div",7),st(1,t5,5,1,"div",12)(2,n5,5,1,"div",12),H()),n&2){let t=Se();V(),qe(t.currentLevel===t.level.GOLF||t.currentLevel===t.level.SLIDE?1:-1),V(),qe(t.currentLevel===t.level.GOLF||t.currentLevel===t.level.CLIMB?2:-1)}}function r5(n,e){if(n&1){let t=_n();G(0,"div",8)(1,"app-menu-button",16),Ye("click",function(){bt(t);let r=Se();return Tt(r.resume())}),H(),G(2,"app-menu-button",17),Ye("click",function(){bt(t);let r=Se();return Tt(r.goToPlayground())}),H(),G(3,"app-menu-button",18),Ye("click",function(){bt(t);let r=Se();return Tt(r.toggleSound(!0))}),H(),G(4,"app-menu-button",19),Ye("click",function(){bt(t);let r=Se();return Tt(r.toggleItem(r.showControls,"controls",!0))}),H()()}if(n&2){let t=Se();V(),Ie("buttonText",t.resumeButtonText),V(),Ie("buttonText",t.playgroundButtonText),V(),Ie("icon",t.gameStatusService.getSound()?"menu-sound-on":"menu-sound-off")("buttonText",t.soundButtonText()),V(),Ie("buttonText",t.controlsButtonText)}}function s5(n,e){if(n&1){let t=_n();G(0,"div",8)(1,"app-menu-button",20),Ye("click",function(){bt(t);let r=Se();return Tt(r.toggleItem(r.showAbout,"about"))}),H(),G(2,"app-menu-button",19),Ye("click",function(){bt(t);let r=Se();return Tt(r.toggleItem(r.showControls,"controls"))}),H(),G(3,"app-menu-button",18),Ye("click",function(){bt(t);let r=Se();return Tt(r.toggleSound())}),H(),G(4,"app-menu-button",21),Ye("click",function(){bt(t);let r=Se();return Tt(r.openTerms())}),H()()}if(n&2){let t=Se();V(),Ie("buttonText",t.aboutButtonText),V(),Ie("buttonText",t.controlsButtonText),V(),Ie("icon",t.gameStatusService.getSound()?"menu-sound-on":"menu-sound-off")("buttonText",t.soundButtonText()),V(),Ie("buttonText",t.termsButtonText)}}function o5(n,e){if(n&1){let t=_n();G(0,"app-cta-button",22),Ye("handleClick",function(){bt(t);let r=Se();return Tt(r.toggleItem(r.showControls,"controls"))}),H()}if(n&2){let t=Se();Ie("buttonText",t.controlsOkText)}}function a5(n,e){if(n&1){let t=_n();G(0,"app-hygiene-page",23),Ye("closePage",function(){bt(t);let r=Se();return Tt(r.toggleItem(r.showAbout,"about"))}),H()}if(n&2){let t=Se();Ie("title",t.aboutButtonText)("body",t.aboutCopy)}}function c5(n,e){if(n&1){let t=_n();G(0,"app-hygiene-page",24),Ye("closePage",function(){bt(t);let r=Se();return Tt(r.toggleItem(r.showHelp,"help"))}),H()}}var Nl=(()=>{let e=class e{constructor(i,r,s){this.gameStatusService=i,this.audioService=r,this.localizationService=s,this.gameStatus=Te,this.content=this.localizationService.getLocalizedCopy(),this.soundButtonText=In(()=>`${this.content?.menuSound} [${this.gameStatusService.getSound()?this.content?.menuOn:this.content?.menuOff}]`),this.resumeButtonText=`${this.content?.menuResume}`,this.playgroundButtonText=`${this.content?.menuPlayground}`,this.helpButtonText=`${this.content?.menuHelp}`,this.aboutButtonText=`${this.content?.menuAbout}`,this.controlsButtonText=`${this.content?.menuControls}`,this.termsButtonText=`${this.content?.menuTerms}`,this.controlsOkText=`${this.content?.controlsOk}`,this.aboutCopy=`${this.content?.instructionsDescription}`,this.showAbout=Ht(!1),this.showControls=Ht(!1),this.showHelp=Ht(!1),this.level=Wn,this.gameView=dt,this.showStartControls=this.gameStatusService.getNextViewSignal()===dt.GAMEPLAY&&this.gameStatusService.getGameStatus()!==Te.PAUSED,this.isPaused=this.gameStatusService.getGameStatus()===Te.PAUSED,this.showMenu=this.gameStatusService.getNextViewSignal()===dt.MENU,this.currentLevel=this.gameStatusService.getCurrentLevel()}toggleItem(i,r,s=!1){this.audioService?.playClip(Ne.MENU_CLICK),i()?zt({event:s?"paused_menu_option":"menu_option",option:r}):r==="controls"&&zt({event:"button_controls_ok"}),i.update(o=>!o)}toggleSound(i=!1){zt({event:i?"paused_menu_option":"menu_option",option:"sound",value:this.gameStatusService.getSound()?"off":"on"}),this.gameStatusService.getSound()?(this.audioService?.playClip(Ne.MENU_CLICK),this.audioService?.mute()):(this.audioService?.unmute(),this.audioService?.playClip(Ne.UI_POSITIVE)),this.gameStatusService.toggleSound()}resume(){this.audioService?.playClip(Ne.MENU_CLICK),this.gameStatusService.setGameStatus(Te.PLAYING),zt({event:"paused_menu_option",option:"resume"})}goToPlayground(){this.audioService?.playClip(Ne.MENU_CLICK),this.gameStatusService.setTransitionSignal(rn.ENTER),this.gameStatusService.setGameStatus(Te.UNPLAYED),this.gameStatusService.resetScore(),zt({event:"paused_menu_option",option:"playground"})}openTerms(){zt({event:"menu_option",option:"terms"}),window.open(`${cg}`,"_blank")}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut),Ae(Xn),Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-menu"]],standalone:!0,features:[Le],decls:16,vars:6,consts:[[1,"menu"],[3,"innerBorder"],[1,"pixelated-border__edges"],[1,"menu__background","pixelated-border__background"],[1,"menu__title"],[1,"checkered-pattern"],[1,"menu__separator"],[1,"menu__flex"],[1,"menu__grid"],["type","primary",3,"buttonText"],[3,"title","body"],["title","Help","body","Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam aliquam ultricies vehicula. Nunc lectus nunc, ultrices eget nisl vitae, ultrices fringilla risus. Integer mattis id mauris vel commodo. Suspendisse sollicitudin blandit malesuada. Etiam nisi nunc, cursus sit amet fringilla porttitor, venenatis et orci. Duis rhoncus odio vel tellus dignissim tincidunt. Nullam faucibus fermentum fringilla. Nam non congue enim. Vivamus eget ante a ex euismod ultricies. Donec eu lacinia dui, suscipit efficitur purus. Ut tempor odio a ipsum placerat facilisis. Sed tincidunt tempor aliquet. Nulla efficitur, dui elementum malesuada facilisis, velit elit lacinia tellus, at finibus mauris ex at sapien. Nulla eget ligula eu velit sollicitudin eleifend sed ac erat. Integer mattis venenatis velit, eu volutpat ex laoreet id. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus."],[1,"menu__control"],[1,"menu__control__svg"],["href","assets/images/icons.svg#menu-arrows-2"],["href","assets/images/icons.svg#menu-tap"],["icon","menu-play",3,"click","buttonText"],["icon","menu-home",3,"click","buttonText"],[3,"click","icon","buttonText"],["icon","menu-arrows",3,"click","buttonText"],["icon","menu-about",3,"click","buttonText"],["icon","menu-info",3,"click","buttonText"],["type","primary",3,"handleClick","buttonText"],[3,"closePage","title","body"],["title","Help","body","Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam aliquam ultricies vehicula. Nunc lectus nunc, ultrices eget nisl vitae, ultrices fringilla risus. Integer mattis id mauris vel commodo. Suspendisse sollicitudin blandit malesuada. Etiam nisi nunc, cursus sit amet fringilla porttitor, venenatis et orci. Duis rhoncus odio vel tellus dignissim tincidunt. Nullam faucibus fermentum fringilla. Nam non congue enim. Vivamus eget ante a ex euismod ultricies. Donec eu lacinia dui, suscipit efficitur purus. Ut tempor odio a ipsum placerat facilisis. Sed tincidunt tempor aliquet. Nulla efficitur, dui elementum malesuada facilisis, velit elit lacinia tellus, at finibus mauris ex at sapien. Nulla eget ligula eu velit sollicitudin eleifend sed ac erat. Integer mattis venenatis velit, eu volutpat ex laoreet id. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.",3,"closePage"]],template:function(r,s){r&1&&(G(0,"div",0)(1,"app-pixelated-border",1)(2,"div",2)(3,"div",3)(4,"div",4),re(5,"div",5),st(6,ZK,2,1,"h1")(7,e5,2,1,"h1"),re(8,"div",5),H(),re(9,"div",6),st(10,i5,3,2,"div",7)(11,r5,5,5,"div",8)(12,s5,5,5,"div",8),H()()(),st(13,o5,1,1,"app-cta-button",9),H(),st(14,a5,1,2,"app-hygiene-page",10)(15,c5,1,0,"app-hygiene-page",11)),r&2&&(V(),Ie("innerBorder",!0),V(5),qe(s.gameStatusService.getNextViewSignal()===s.gameView.GAMEPLAY&&s.gameStatusService.getGameStatus()!==s.gameStatus.PAUSED?6:7),V(4),qe(s.showStartControls||s.isPaused&&s.showControls()||s.showMenu&&s.showControls()?10:s.isPaused&&!s.showControls()?11:12),V(3),qe(s.showControls()?13:-1),V(),qe(s.showAbout()?14:-1),V(),qe(s.showHelp()?15:-1))},dependencies:[Yn,x1,ki,R1],styles:['.pixelated-border__outer[_ngcontent-%COMP%], .pixelated-border__inner[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__outer[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:before{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]:after, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]{background:#323232;box-shadow:0 3px #0003;padding:3px}.pixelated-border__outer.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__inner[_ngcontent-%COMP%]{background:#fff;padding:3px;z-index:5}.pixelated-border__inner[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#fff}.pixelated-border__inner.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__background[_ngcontent-%COMP%]{background:#d4dcf7;padding:4px 10px}.pixelated-border__background[_ngcontent-%COMP%]:before, .pixelated-border__background[_ngcontent-%COMP%]:after{background:#d4dcf7}.pixelated-border__edges[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__edges[_ngcontent-%COMP%]:before{background:#d4dcf7;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__edges[_ngcontent-%COMP%]:after{background:#d4dcf7;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.menu[_ngcontent-%COMP%]{margin:0 auto;max-width:340px;text-align:center;width:100%}.menu__background[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:13px 10px 20px}.menu__title[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;position:relative;width:100%}.menu__title[_ngcontent-%COMP%]   .checkered-pattern[_ngcontent-%COMP%]{background:linear-gradient(45deg,#becaf3 25%,transparent 25%,transparent 75%,#becaf3 75%),linear-gradient(45deg,#becaf3 25%,transparent 25%,transparent 75%,#becaf3 75%);background-color:#d4dcf7;background-position:0 0,3px 3px;background-size:6px 6px;flex:1;height:28px}.menu__title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:14px;margin:0 16px}.menu__separator[_ngcontent-%COMP%]{background:#becaf3;box-shadow:0 2px #ffffff80;height:2px;width:100%}.menu__grid[_ngcontent-%COMP%]{display:grid;grid-gap:16px;grid-row:auto auto;grid-template-columns:1fr 1fr}.menu__grid[_ngcontent-%COMP%]   app-menu-button[_ngcontent-%COMP%]{aspect-ratio:1;max-height:160px}.menu__flex[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center}.menu-button__wrapper[_ngcontent-%COMP%]{aspect-ratio:1}.menu__control[_ngcontent-%COMP%]{align-items:center;aspect-ratio:1;background:#becaf3;box-shadow:0 2px #ffffff80;display:flex;flex-direction:column;gap:16px;justify-content:center;max-width:160px;width:100%}.menu__control__svg[_ngcontent-%COMP%]{height:48px;width:48px}.menu[_ngcontent-%COMP%]   app-cta-button[_ngcontent-%COMP%]{bottom:16px;left:16px;position:absolute;width:calc(100% - 32px)}'],changeDetection:0});let n=e;return n})();var k1=(()=>{let e=class e{constructor(i){this.localizationService=i,this.content=this.localizationService.getLocalizedCopy()}};e.\u0275fac=function(r){return new(r||e)(Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-pause-view"]],standalone:!0,features:[Le],decls:5,vars:1,consts:[[1,"paused-view"],[1,"paused-view__content"],[1,"paused-view__title"]],template:function(r,s){r&1&&(G(0,"div",0)(1,"div",1)(2,"h1",2),ge(3),H(),re(4,"app-menu"),H()()),r&2&&(V(3),sn(" ",s.content==null?null:s.content.gamePaused," "))},dependencies:[ws,Nl],styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-auto-flow:row;grid-gap:16px;grid-template-columns:repeat(4,1fr)}.grid-layout__col-1[_ngcontent-%COMP%]{display:block;grid-column:span 1}.grid-layout__col-2[_ngcontent-%COMP%]{display:block;grid-column:span 2}.grid-layout__col-3[_ngcontent-%COMP%]{display:block;grid-column:span 3}.grid-layout__col-4[_ngcontent-%COMP%]{display:block;grid-column:span 4}.paused-view[_ngcontent-%COMP%]{height:100%;padding:16px;position:relative;width:100%;z-index:200}.paused-view__content[_ngcontent-%COMP%]{height:100%;padding:80px 0 0}.paused-view__title[_ngcontent-%COMP%]{color:#fff;font-size:13px;margin-bottom:40px;position:relative;text-align:center;text-shadow:1px 2px 0 #000}.paused-view__background[_ngcontent-%COMP%]{left:0;position:absolute;top:0}.paused-view__text[_ngcontent-%COMP%]{text-shadow:2px -1px 0 #000}.paused-view__score-summary[_ngcontent-%COMP%]{background-color:#fff;height:fit-content;width:100%}"],changeDetection:0});let n=e;return n})();var et=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(et||{}),ms="*";function _s(n,e){return{type:et.Trigger,name:n,definitions:e,options:{}}}function On(n,e=null){return{type:et.Animate,styles:e,timings:n}}function qv(n,e=null){return{type:et.Group,steps:n,options:e}}function U1(n,e=null){return{type:et.Sequence,steps:n,options:e}}function Rt(n){return{type:et.Style,styles:n,offset:null}}function Fl(n,e,t){return{type:et.State,name:n,styles:e,options:t}}function ir(n,e,t=null){return{type:et.Transition,expr:n,animation:e,options:t}}function Ir(n,e,t=null){return{type:et.Query,selector:n,animation:e,options:t}}var Uo=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},zd=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},lg="!";var dg=1e3,Xv=300,Yv=`${dg}ms ease-in-out`,G1=`${dg}ms 100ms ease-in-out`,ug=`${dg}ms ${Xv}ms ease-in-out`,H1=(()=>{let e=class e{constructor(i,r){this.gameStatusService=i,this.audioService=r,this.gameStatus=this.gameStatusService.getGameStatus(),this.view=this.gameStatusService.getViewSignal(),this.nextView=this.gameStatusService.getNextViewSignal(),this.showControls=Ht(!1)}playSound(){this.audioService.playClip(Ne.CLOUD_MOVING)}navigateToNextView(){if(this.gameStatusService.getTransitionSignal()===rn.EXIT){let i=ae({},this.gameStatusService.getLevelStatusSignal()),r=Object.values(i).every(a=>a.playStatus===Js.COMPLETE),s=this.gameStatusService.getGameStatus()===Te.ZONE_CLEARED,o=this.gameStatusService.getGameStatus()===Te.GAME_OVER;r&&!s&&!o&&this.gameStatusService.setGameStatus(Te.GAME_COMPLETE);return}switch(this.view){case dt.SIGN_IN:this.gameStatusService.setViewSignal(dt.PLAYGROUND),this.gameStatusService.setTransitionSignal(rn.EXIT);break;case dt.PLAYGROUND:this.nextView===dt.GAMEPLAY?(this.showControls.set(!0),setTimeout(()=>{this.gameStatusService.setViewSignal(dt.GAMEPLAY)},dg)):this.nextView===dt.MENU?(this.gameStatusService.setViewSignal(dt.MENU),this.gameStatusService.setTransitionSignal(rn.EXIT)):this.nextView===dt.PLAYGROUND&&(this.gameStatusService.setGameStatus(Te.UNPLAYED),this.gameStatusService.setTransitionSignal(rn.EXIT));break;case dt.MENU:this.gameStatusService.setViewSignal(dt.PLAYGROUND),this.gameStatusService.setTransitionSignal(rn.EXIT);break;case dt.GAMEPLAY:this.gameStatusService.getGameStatus()===Te.PAUSED&&this.showControls.set(!0),this.gameStatusService.setViewSignal(dt.PLAYGROUND),this.gameStatusService.setTransitionSignal(rn.EXIT);break}}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut),Ae(Xn))},e.\u0275cmp=Pe({type:e,selectors:[["app-cloud-transition"]],standalone:!0,features:[Le],decls:11,vars:3,consts:[[1,"cloud-transition"],[1,"cloud-transition__bg"],[1,"cloud-transition__cloud-wrapper"],["src","assets/images/cloud-bottom-left.webp","alt","",1,"cloud","top-left","left"],["src","assets/images/cloud-bottom-right.webp","alt","",1,"cloud","top-right","right"],["src","assets/images/cloud-top-left.webp","alt","",1,"cloud","mid-left","left"],["src","assets/images/cloud-top-right.webp","alt","",1,"cloud","mid-right","right"],["src","assets/images/cloud-bottom-left.webp","alt","",1,"cloud","bottom-left","left","delay"],["src","assets/images/cloud-bottom-right.webp","alt","",1,"cloud","bottom-right","right","delay"],[1,"cloud-transition__controls"]],template:function(r,s){r&1&&(G(0,"div",0),Ye("@cloudTransition.start",function(){return s.playSound()})("@cloudTransition.done",function(){return s.navigateToNextView()}),re(1,"div",1),G(2,"div",2),re(3,"img",3)(4,"img",4)(5,"img",5)(6,"img",6)(7,"img",7)(8,"img",8),H(),G(9,"div",9),re(10,"app-menu"),H()()),r&2&&(Ie("@cloudTransition",void 0),V(9),Wi("visible",s.showControls()))},dependencies:[ws,Nl],styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-auto-flow:row;grid-gap:16px;grid-template-columns:repeat(4,1fr)}.grid-layout__col-1[_ngcontent-%COMP%]{display:block;grid-column:span 1}.grid-layout__col-2[_ngcontent-%COMP%]{display:block;grid-column:span 2}.grid-layout__col-3[_ngcontent-%COMP%]{display:block;grid-column:span 3}.grid-layout__col-4[_ngcontent-%COMP%]{display:block;grid-column:span 4}.cloud-transition[_ngcontent-%COMP%]{z-index:500;height:100dvh;left:0;position:absolute;top:0;width:100%}.cloud-transition__bg[_ngcontent-%COMP%]{background-color:#b035bf;height:100dvh;left:0;position:absolute;top:0;width:100%}.cloud-transition__controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;justify-content:center;left:0;opacity:0;padding:16px;position:absolute;top:0;transition:opacity .5s;width:100%;z-index:2}.cloud-transition__controls.visible[_ngcontent-%COMP%]{opacity:1}.cloud-transition__cloud-wrapper[_ngcontent-%COMP%]{height:100%;overflow:hidden;position:relative;width:100%}.cloud-transition[_ngcontent-%COMP%]   .cloud[_ngcontent-%COMP%]{max-width:unset;position:absolute;width:auto}.cloud-transition[_ngcontent-%COMP%]   .cloud.top-left[_ngcontent-%COMP%]{height:55dvh;left:-240px;min-height:200px;top:-25dvh}.cloud-transition[_ngcontent-%COMP%]   .cloud.top-right[_ngcontent-%COMP%]{height:55dvh;min-height:200px;right:-280px;top:-10dvh}.cloud-transition[_ngcontent-%COMP%]   .cloud.mid-left[_ngcontent-%COMP%]{height:45dvh;left:-280px;min-height:200px;top:20dvh}.cloud-transition[_ngcontent-%COMP%]   .cloud.mid-right[_ngcontent-%COMP%]{height:60dvh;min-height:200px;right:-160px;top:30dvh}.cloud-transition[_ngcontent-%COMP%]   .cloud.bottom-left[_ngcontent-%COMP%]{bottom:-5dvh;height:70dvh;left:-280px;min-height:200px}.cloud-transition[_ngcontent-%COMP%]   .cloud.bottom-right[_ngcontent-%COMP%]{bottom:-12dvh;height:50dvh;min-height:200px;right:-320px}"],data:{animation:[_s("cloudTransition",[ir(":enter",[qv([Ir(".cloud-transition__bg",[Rt({opacity:0}),On(Yv,Rt({opacity:1}))]),Ir(".cloud.right",[Rt({transform:"translateX(150%)"}),On(Yv,Rt({transform:"translateX(0)"}))]),Ir(".cloud.left",[Rt({transform:"translateX(-150%)"}),On(Yv,Rt({transform:"translateX(0)"}))]),Ir(".cloud.right.delay",[Rt({transform:"translateX(150%)"}),On(G1,Rt({transform:"translateX(0)"}))]),Ir(".cloud.left.delay",[Rt({transform:"translateX(-150%)"}),On(G1,Rt({transform:"translateX(0)"}))])])]),ir(":leave",[qv([Ir(".cloud-transition__bg",[On(ug,Rt({opacity:0}))]),Ir(".cloud.right",[On(ug,Rt({transform:"translateX(150%)"}))]),Ir(".cloud.left",[On(ug,Rt({transform:"translateX(-150%)"}))]),Ir(".cloud-transition__controls",[On(ug,Rt({opacity:0}))])])])])]},changeDetection:0});let n=e;return n})();var V1=(()=>{let e=class e{constructor(i){this.gameStatusService=i,this.leadingZeros="",this.score="",this.score=this.gameStatusService.getCurrentLevelScore().toString(),this.formatScore()}formatScore(){this.leadingZeros="0".repeat(5-this.score.length)}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut))},e.\u0275cmp=Pe({type:e,selectors:[["app-score-summary"]],standalone:!0,features:[Le],decls:10,vars:2,consts:[[1,"score-summary"],[1,"score-summary__score","score-summary__border"],[1,"score-summary__point"],["href","assets/images/icons.svg#google-play-point"],[1,"score-summary__leading-zeros"],[1,"score-summary__actual"],[1,"score-summary__arrows"],["href","assets/images/icons.svg#score-arrows"]],template:function(r,s){r&1&&(G(0,"div",0)(1,"div",1),Un(),G(2,"svg",2),re(3,"use",3),H(),Pi(),G(4,"span",4),ge(5),H(),G(6,"span",5),ge(7),H(),Un(),G(8,"svg",6),re(9,"use",7),H()()()),r&2&&(V(5),ze(s.leadingZeros),V(2),ze(s.score))},styles:[".score-summary[_ngcontent-%COMP%]{margin-bottom:32px}.score-summary__border[_ngcontent-%COMP%]{align-items:center;background-image:linear-gradient(#f1f1f1 1px,#f9f9f9,#f1f1f1 3px);background-image:linear-gradient(#000 50%,#14192d 50%);background-size:100% 6px;border-image:url(/playground/assets/images/score-border.svg) 13 13 13 13;border-image-outset:7px;border-image-width:12px;display:flex;height:70px;position:relative;width:100%}.score-summary__score[_ngcontent-%COMP%]{font-size:34px}.score-summary__point[_ngcontent-%COMP%]{aspect-ratio:1;height:38px;margin-left:16px}.score-summary__arrows[_ngcontent-%COMP%]{aspect-ratio:1;height:24px;position:absolute;right:10px}.score-summary__leading-zeros[_ngcontent-%COMP%]{color:#ffffff80;margin-left:10px}.score-summary__actual[_ngcontent-%COMP%]{color:#fff}.score-summary__details[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;margin-top:18px;padding:7px 16px;width:100%}.score-summary__text[_ngcontent-%COMP%]{color:#fffab9;font-size:13px;white-space:nowrap;word-break:keep-all}.score-summary__points[_ngcontent-%COMP%]{color:#fff;font-size:13px;justify-self:flex-end;width:fit-content}"],changeDetection:0});let n=e;return n})();var l5=["headingTextContainer"];function u5(n,e){n&1&&re(0,"app-score-summary")}function d5(n,e){if(n&1){let t=_n();G(0,"app-cta-button",12),Ye("click",function(){bt(t);let r=Se();return Tt(r.handleTryAgain())}),H(),G(1,"app-cta-button",13),Ye("click",function(){bt(t);let r=Se();return Tt(r.returnHome())}),H()}if(n&2){let t=Se();Ie("buttonText",t.tryAgainText),V(),Ie("buttonText",t.returnText)}}function h5(n,e){if(n&1){let t=_n();G(0,"app-cta-button",12),Ye("click",function(){bt(t);let r=Se();return Tt(r.returnHome(!0))}),H()}if(n&2){let t=Se();Ie("buttonText",t.continueText)}}var Q1=(()=>{let e=class e{constructor(i,r,s,o){this.gameStatusService=i,this.localizationService=r,this.audioService=s,this.renderer=o,this.gameStatusType=Te,this.content=this.localizationService.getLocalizedCopy(),this.headingText=`${this.content?.gameOverHeading}`,this.tryAgainText=`${this.content?.levelEndTryAgain}`,this.returnText=`${this.content?.levelEndReturnToPlayground}`,this.continueText=`${this.content?.levelEndContinue}`,this.header=ns.required("headingTextContainer"),this.screen=this.gameStatusService.getGameStatus(),this.screen===Te.ZONE_CLEARED?(this.audioService.playClip(Ne.ZONE_CLEARED),this.headingText=`${this.content?.youWinHeading}`,setTimeout(()=>{this.audioService.playClip(Ne.POINTS_COUNTER)},1e3),this.gameStatusService.setLevelComplete(this.gameStatusService.getCurrentLevel()),zt({event:"level_completed",level:this.gameStatusService.getCurrentLevel(),location:"game",level_score:`${this.gameStatusService.getCurrentLevelScore()}`})):(this.audioService.playClip(Ne.GAME_OVER),zt({event:"game_over",level:this.gameStatusService.getCurrentLevel(),location:"game",level_score:`${this.gameStatusService.getCurrentLevelScore()}`})),this.gameStatusService.resetScore()}ngAfterViewInit(){this.screen===Te.ZONE_CLEARED&&this.header().nativeElement.classList.add("complete")}handleTryAgain(){this.gameStatusService.setNextViewSignal(dt.GAMEPLAY),this.gameStatusService.setTransitionSignal(rn.ENTER),setTimeout(()=>{this.header().nativeElement.classList.remove("complete")},3e3),zt({event:"button_try_again",level:this.gameStatusService.getCurrentLevel(),location:"game"})}returnHome(i=!1){setTimeout(()=>{this.header().nativeElement.classList.remove("complete")},3e3),this.gameStatusService.returnToPlayground(),zt({event:i?"button_continue":"button_back_to_playground",level:this.gameStatusService.getCurrentLevel(),location:"game"})}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut),Ae(en),Ae(Xn),Ae(Ac))},e.\u0275cmp=Pe({type:e,selectors:[["app-level-end"]],viewQuery:function(r,s){r&1&&is(s.header,l5,5),r&2&&rs()},standalone:!0,features:[Le],decls:18,vars:6,consts:[["headingTextContainer",""],[1,"level-end"],[1,"level-end__content"],[1,"level-end__header"],[1,"gradient-text"],[1,"gradient-text__text","drop-shadow"],[1,"gradient-text__text","outline--thin"],[1,"gradient-text__text","gradient"],[1,"gradient-text__text","outline"],[1,"full-width"],[1,"level-end__buttons","grid-layout"],["type","primary",1,"grid-layout__col-4",3,"buttonText"],["type","primary",1,"grid-layout__col-4",3,"click","buttonText"],["type","secondary",1,"grid-layout__col-4",3,"click","buttonText"]],template:function(r,s){r&1&&(G(0,"div",1)(1,"div",2)(2,"div",3,0)(4,"div",4)(5,"p",5),ge(6),H(),G(7,"p",6),ge(8),H(),G(9,"p",7),ge(10),H(),G(11,"p",8),ge(12),H()()(),G(13,"div",9),st(14,u5,1,0,"app-score-summary"),G(15,"div",10),st(16,d5,2,2)(17,h5,1,1,"app-cta-button",11),H()()()()),r&2&&(V(6),ze(s.headingText),V(2),ze(s.headingText),V(2),ze(s.headingText),V(2),ze(s.headingText),V(2),qe(s.screen===s.gameStatusType.ZONE_CLEARED?14:-1),V(2),qe(s.screen===s.gameStatusType.GAME_OVER?16:s.screen===s.gameStatusType.ZONE_CLEARED?17:-1))},dependencies:[ki,V1],styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-auto-flow:row;grid-gap:16px;grid-template-columns:repeat(4,1fr)}.grid-layout__col-1[_ngcontent-%COMP%]{display:block;grid-column:span 1}.grid-layout__col-2[_ngcontent-%COMP%]{display:block;grid-column:span 2}.grid-layout__col-3[_ngcontent-%COMP%]{display:block;grid-column:span 3}.grid-layout__col-4[_ngcontent-%COMP%]{display:block;grid-column:span 4}.level-end[_ngcontent-%COMP%]{bottom:0;height:100%;position:absolute;width:100%;z-index:200}.level-end__content[_ngcontent-%COMP%]{align-items:center;background:url(/playground/assets/images/cloud-background.webp);background-size:cover;display:flex;flex-direction:column;height:100%;justify-content:space-between;padding:11px 16px}.level-end__header[_ngcontent-%COMP%]{margin:auto 0}.level-end__buttons[_ngcontent-%COMP%]{gap:8px;margin-bottom:24px;width:100%}.level-end[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]{display:inline-block;left:-4px;position:relative}.level-end[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text[_ngcontent-%COMP%]{font-size:5rem;font-weight:700;left:0;letter-spacing:7px;line-height:95%;position:absolute;text-align:center;text-transform:uppercase;top:0}.level-end[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.drop-shadow[_ngcontent-%COMP%]{filter:drop-shadow(4px 4px #ffb299) drop-shadow(4px 4px 0 #ff7245) drop-shadow(4px 4px 0 #7759d2) drop-shadow(4px 4px 0 rgba(0,0,0,.6));top:-10px}.level-end[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.gradient[_ngcontent-%COMP%]{background:#fff;background-clip:text;-webkit-text-fill-color:transparent}.level-end[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline[_ngcontent-%COMP%]{color:#fff;text-shadow:0 -10px #7759d2;background-clip:text;background-color:transparent;position:relative}.level-end[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline--thin[_ngcontent-%COMP%]{color:#fff;top:-12px}.level-end[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]{display:inline-block;left:-4px;position:relative}.level-end[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;left:0;letter-spacing:7px;line-height:95%;position:absolute;text-align:center;text-transform:uppercase;top:0}.level-end[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.drop-shadow[_ngcontent-%COMP%]{filter:drop-shadow(4px 4px #ffb299) drop-shadow(4px 4px 0 #ff7245) drop-shadow(4px 4px 0 #7759d2) drop-shadow(4px 4px 0 rgba(0,0,0,.6));top:-10px}.level-end[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.gradient[_ngcontent-%COMP%]{background:#fff;background-clip:text;-webkit-text-fill-color:transparent}.level-end[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline[_ngcontent-%COMP%]{color:#fff;text-shadow:0 -10px #7759d2;background-clip:text;background-color:transparent;position:relative}.level-end[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline--thin[_ngcontent-%COMP%]{color:#fff;top:-12px}.level-end[_ngcontent-%COMP%]   .complete[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text[_ngcontent-%COMP%]{line-height:120%!important}.level-end[_ngcontent-%COMP%]   .zedd-gif[_ngcontent-%COMP%]{height:65vh;max-width:unset;position:absolute;top:90px;width:auto}"],changeDetection:0});let n=e;return n})();function f5(n,e){if(n&1){let t=_n();G(0,"div",0)(1,"app-pixelated-border",1)(2,"div",2)(3,"button",3),Ye("click",function(){bt(t);let r=Se();return Tt(r.onButtonClick())}),Un(),G(4,"svg",4),re(5,"use"),H()()()()()}if(n&2){let t=Se();V(),Ie("innerBorder",!0),V(4),Jn("href",t.getIconUrl())}}var kl=function(n){return n.MENU="menu",n.CLOSE="close",n.PLAY="play",n.PAUSE="pause",n}(kl||{}),z1=(()=>{let e=class e{constructor(i,r,s){this.gameStatusService=i,this.cdr=r,this.audioService=s,this.showButton=!0,this.icon=kl.MENU,this.handleClick=new mn,Ms(()=>{let o=this.gameStatusService.getGameStatus(),a=this.gameStatusService.getViewSignal();a===dt.GAMEPLAY&&(o===Te.PLAYING||o===Te.COUNTDOWN)?(this.showButton=!0,this.icon=kl.PAUSE):a===dt.GAMEPLAY&&o===Te.PAUSED?(this.showButton=!0,this.icon=kl.PLAY):a===dt.GAMEPLAY&&(o===Te.ZONE_CLEARED||o===Te.GAME_OVER)?this.showButton=!1:a===dt.MENU?(this.showButton=!0,this.icon=kl.CLOSE):(this.showButton=!0,this.icon=kl.MENU),this.cdr.detectChanges()})}onButtonClick(){this.audioService.playClip(Ne.MENU_CLICK);let i=this.gameStatusService.getViewSignal(),r=this.gameStatusService.getGameStatus(),s=this.gameStatusService.getCurrentLevel(),o=this.gameStatusService.getViewSignal(),a=this.gameStatusService.getMenuStatus();i===dt.GAMEPLAY?(zt({event:r===Te.PAUSED?"button_resume_game":"button_pause_game",level:s}),this.gameStatusService.togglePausePlay()):(zt({event:a?"button_menu_closed":"button_menu",location:o}),this.gameStatusService.setNextViewSignal(dt.MENU),this.gameStatusService.setTransitionSignal(rn.ENTER),this.gameStatusService.toggleMenu())}getIconUrl(){return"./assets/images/icons.svg#"+this.icon}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut),Ae(os),Ae(Xn))},e.\u0275cmp=Pe({type:e,selectors:[["app-icon-button"]],outputs:{handleClick:"handleClick"},standalone:!0,features:[Le],decls:1,vars:1,consts:[[1,"icon-button"],[3,"innerBorder"],[1,"pixelated-border__edges"],[1,"pixelated-border__background",3,"click"],[1,"icon-button__svg"]],template:function(r,s){r&1&&st(0,f5,6,2,"div",0),r&2&&qe(s.showButton?0:-1)},dependencies:[Yn],styles:['.pixelated-border__outer[_ngcontent-%COMP%], .pixelated-border__inner[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__outer[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:before{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]:after, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]{background:#323232;box-shadow:0 3px #0003;padding:3px}.pixelated-border__outer.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__inner[_ngcontent-%COMP%]{background:#fff;padding:3px;z-index:5}.pixelated-border__inner[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#fff}.pixelated-border__inner.menu-button[_ngcontent-%COMP%]{height:100%}.icon-button[_ngcontent-%COMP%]{width:fit-content;z-index:100}.icon-button__svg[_ngcontent-%COMP%]{height:15px;max-width:15px;width:auto}.pixelated-border__background[_ngcontent-%COMP%]{background:#637ee1;padding:4px 10px}.pixelated-border__background[_ngcontent-%COMP%]:before, .pixelated-border__background[_ngcontent-%COMP%]:after{background:#637ee1}.pixelated-border__edges[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__edges[_ngcontent-%COMP%]:before{background:#637ee1;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__edges[_ngcontent-%COMP%]:after{background:#637ee1;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}'],changeDetection:0});let n=e;return n})();function p5(n,e){if(n&1){let t=_n();G(0,"button",8),Ye("click",function(){bt(t);let r=Se(2);return Tt(r.claimPoints())}),ge(1),H()}if(n&2){let t=Se(2);V(),sn(" ",t.content==null?null:t.content.playgroundClaimPoints," ")}}function A5(n,e){if(n&1&&(G(0,"span",9),ge(1),H(),G(2,"span",10),ge(3),H()),n&2){let t=Se(2);V(),ze(t.formattedScore()[0]),V(2),ze(t.formattedScore()[1])}}function g5(n,e){if(n&1&&(G(0,"app-pixelated-border",3)(1,"div",4)(2,"p",5),Un(),G(3,"svg",6),re(4,"use",7),H(),st(5,p5,2,1,"button")(6,A5,4,2),H()()()),n&2){let t=Se();Ie("innerBorder",!0),V(5),qe(t.gameComplete?5:6)}}function m5(n){return"0".repeat(5-n.toString().length)}var hg=(()=>{let e=class e{constructor(i,r){this.gameStatusService=i,this.localizationService=r,this.formattedScore=In(()=>[m5(this.gameStatusService.getCurrentLevelScore()),this.gameStatusService.getCurrentLevelScore()]),this.content=this.localizationService.getLocalizedCopy(),this.gameComplete=this.gameStatusService.getGameStatus()===Te.GAME_COMPLETE,this.hideMenu=!this.gameStatusService.getMenuStatus()}claimPoints(){this.gameStatusService.setPreviousUrlIncludesComplete(!1),zt({event:"button_claim_points",location:"playground"})}showClaimPointsButton(){return this.gameStatusService.getGameStatus()===Te.GAME_COMPLETE||!!this.gameStatusService.getUserSignal()?.assigned_code}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut),Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-header"]],standalone:!0,features:[Le],decls:5,vars:1,consts:[[1,"header"],[1,"header__inner"],[1,"header__score"],[3,"innerBorder"],[1,"pixelated-border__edges"],[1,"header__score__text","pixelated-border__background"],[1,"header__score__svg"],["href","assets/images/icons.svg#google-play-point"],[3,"click"],[1,"header__score__leading-zeros"],[1,"header__score__actual"]],template:function(r,s){r&1&&(G(0,"div",0)(1,"div",1)(2,"div",2),st(3,g5,7,2,"app-pixelated-border",3),H(),re(4,"app-icon-button"),H()()),r&2&&(V(3),qe(s.hideMenu?3:-1))},dependencies:[z1,Yn],styles:['@font-face{font-family:JoystixProportional;font-style:normal;font-weight:400;src:url(/playground/assets/fonts/JoystixProportional-Regular.otf) format("opentype")}.pixelated-border__outer[_ngcontent-%COMP%], .pixelated-border__inner[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__outer[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:before{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]:after, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]{background:#323232;box-shadow:0 3px #0003;padding:3px}.pixelated-border__outer.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__inner[_ngcontent-%COMP%]{background:#fff;padding:3px;z-index:5}.pixelated-border__inner[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#fff}.pixelated-border__inner.menu-button[_ngcontent-%COMP%]{height:100%}.grid-layout[_ngcontent-%COMP%]{display:grid;grid-auto-flow:row;grid-gap:16px;grid-template-columns:repeat(4,1fr)}.grid-layout__col-1[_ngcontent-%COMP%]{display:block;grid-column:span 1}.grid-layout__col-2[_ngcontent-%COMP%]{display:block;grid-column:span 2}.grid-layout__col-3[_ngcontent-%COMP%]{display:block;grid-column:span 3}.grid-layout__col-4[_ngcontent-%COMP%]{display:block;grid-column:span 4}.header[_ngcontent-%COMP%]{position:relative;z-index:300}.header__inner[_ngcontent-%COMP%]{align-items:center;display:flex;font-size:1.125rem;justify-content:space-between;left:0;padding:11px 16px;position:absolute;top:0;width:100%;z-index:100}.header__score__text[_ngcontent-%COMP%]{align-items:center;color:#fff;display:flex}.header__score__leading-zeros[_ngcontent-%COMP%]{color:#ffffff4d}.header__score__svg[_ngcontent-%COMP%]{height:20px;margin-right:5px;width:20px}.pixelated-border__background[_ngcontent-%COMP%]{background:#323232;padding:4px 10px}.pixelated-border__background[_ngcontent-%COMP%]:before, .pixelated-border__background[_ngcontent-%COMP%]:after{background:#323232}.pixelated-border__edges[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__edges[_ngcontent-%COMP%]:before{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__edges[_ngcontent-%COMP%]:after{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}'],changeDetection:0});let n=e;return n})();function _5(n,e){n&1&&re(0,"app-header")}function C5(n,e){if(n&1&&(G(0,"div",8),re(1,"img",13)(2,"app-menu"),H()),n&2){let t=Se();V(),Jn("src",t.lockupImg,Lr)("alt",t.content==null?null:t.content.lockupAlt)}}function y5(n,e){if(n&1){let t=_n();G(0,"div",9)(1,"p"),ge(2),H(),G(3,"button",14),Ye("click",function(){bt(t);let r=Se();return Tt(r.select(r.levelType.GOLF,1))}),re(4,"img",15),ge(5),H(),G(6,"button",14),Ye("click",function(){bt(t);let r=Se();return Tt(r.select(r.levelType.CLIMB,2))}),re(7,"img",16),ge(8),H(),G(9,"button",14),Ye("click",function(){bt(t);let r=Se();return Tt(r.select(r.levelType.SLIDE,3))}),re(10,"img",17),ge(11),H()()}if(n&2){let t=e,i=Se();V(2),ze(i.content==null?null:i.content.playgroundLevels),V(),Wi("playground__level--locked",!t.includes(i.levelType.GOLF))("playground__level--selected",i.selected()&&i.selectedLevel()===i.levelType.GOLF),V(),Jn("alt",i.content==null?null:i.content.playgroundLevel1),V(),sn(" ",i.content==null?null:i.content.playgroundLevel1," "),V(),Wi("playground__level--locked",!t.includes(i.levelType.CLIMB))("playground__level--selected",i.selected()&&i.selectedLevel()===i.levelType.CLIMB),V(),Jn("alt",i.content==null?null:i.content.playgroundLevel2),V(),sn(" ",i.content==null?null:i.content.playgroundLevel2," "),V(),Wi("playground__level--locked",!t.includes(i.levelType.SLIDE))("playground__level--selected",i.selected()&&i.selectedLevel()===i.levelType.SLIDE),V(),Jn("alt",i.content==null?null:i.content.playgroundLevel3),V(),sn(" ",i.content==null?null:i.content.playgroundLevel3," ")}}function E5(n,e){if(n&1){let t=_n();G(0,"app-cta-button",18),Ye("handleClick",function(){bt(t);let r=Se();return Tt(r.handleClick())}),H()}if(n&2){let t=Se();Ie("buttonText",t.playButtonText())("disabled",!t.gameStatusService.getUnlockedLevels().includes(t.selectedLevel()))}}function v5(n,e){if(n&1&&(G(0,"p",12),ge(1),H()),n&2){let t=Se();V(),ze(t.content==null?null:t.content.playgroundSelectALevel)}}function I5(n,e){n&1&&re(0,"app-level-end")}function S5(n,e){if(n&1&&st(0,I5,1,0,"app-level-end"),n&2){let t=e,i=Se();qe(t===i.gameStatus.GAME_OVER||t===i.gameStatus.ZONE_CLEARED?0:-1)}}var Kd=function(n){return n.UP="up",n.DOWN="down",n.NONE="none",n}(Kd||{}),K1=(()=>{let e=class e{constructor(i,r,s,o){this.gameStatusService=i,this.audioService=r,this.router=s,this.localizationService=o,this.initialPosition=In(()=>this.getInitialPosition()),this.panSky=In(()=>this.getPanSkyDirection()),this.levelType=Wn,this.gameStatus=Te,this.gameView=dt,this.content=this.localizationService.getLocalizedCopy(),this.lockupImg=this.localizationService.getLocalizedLockup(),this.selected=Ht(!1),this.selectedLevel=Ht(Wn.GOLF),this.playButtonText=Ht(`${this.content?.playgroundPlayCtaPlay}`),this.showHeader=In(()=>{let c=this.gameStatusService.getGameStatus();return c!==Te.ZONE_CLEARED&&c!==Te.GAME_OVER}),this.gameStatusService.setViewSignal(dt.PLAYGROUND),this.gameStatusService.getUserSignal()?.assigned_code&&this.router.navigate(["/complete"])}ngAfterViewInit(){return ct(this,null,function*(){this.audioService&&(yield this.audioService.load())})}getInitialPosition(){let i=this.gameStatusService.getPreviousUrlIncludesComplete(),r=this.gameStatusService.getGameStatus()===Te.GAME_COMPLETE;return i&&r?"translateY(150vh)":"translateY(0)"}playPanSound(){this.audioService.playClip(Ne.MENU_CLICK),setTimeout(()=>{this.audioService.playClip(Ne.WHOOSH)},500)}getPanSkyDirection(){let i=this.gameStatusService.getPreviousUrlIncludesComplete(),r=this.gameStatusService.getGameStatus()===Te.GAME_COMPLETE,s=!!this.gameStatusService.getUserSignal()?.assigned_code,o=r||s;return i&&o?(this.playPanSound(),Kd.DOWN):o?(this.playPanSound(),Kd.UP):Kd.NONE}onAnimationEnd(i){i.toState===Kd.UP&&this.router.navigate(["/complete"])}handleClick(){let i=this.gameStatusService.getLevelStatusSignal()[this.gameStatusService.getCurrentLevel()].accessStatus;i==="locked"?this.audioService.playClip(Ne.UI_NEGATIVE):i==="unlocked"&&(this.audioService.playClip(Ne.UI_POSITIVE),this.gameStatusService.setNextViewSignal(dt.GAMEPLAY),this.gameStatusService.setTransitionSignal(rn.ENTER)),zt({event:"button_play_level",level:this.selectedLevel(),location:"playground"})}setActiveLevel(i){this.gameStatusService.setCurrentLevel(i)}select(i,r){let s=!(this.selected()&&this.gameStatusService.getCurrentLevel()===i);this.selected.set(s),this.setActiveLevel(i),this.audioService&&this.audioService.playClip(Ne.MENU_CLICK),this.selectedLevel.set(i),this.playButtonText.set(this.gameStatusService.getUnlockedLevels().includes(this.selectedLevel())?`${this.content?.playgroundPlayCtaPlayLevel} ${r}`:`${this.content?.playgroundLevelLocked}`),zt({event:"level",level:i,location:"playground"})}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut),Ae(Xn),Ae(_o),Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-playground-view"]],standalone:!0,features:[Le],decls:15,vars:13,consts:[["map",""],[1,"playground"],[1,"playground__sky"],["src","assets/images/cloud-bottom-right.webp","alt","",1,"cloud","cloud-1"],["src","assets/images/cloud-top-left.webp","alt","",1,"cloud","cloud-2"],["src","assets/images/cloud-bottom-left.webp","alt","",1,"cloud","cloud-3"],[1,"playground__wrapper"],["alt","The Playground at Zedd in the Park",1,"playground__lockup"],[1,"playground__menu"],[1,"playground__levels"],[1,"playground__ui-container"],["type","primary",1,"grid-layout__col-4",3,"buttonText","disabled"],[1,"blink"],[1,"playground__lockup"],[1,"playground__level",3,"click"],["src","assets/images/level-golf.webp",1,"playground__level__image"],["src","assets/images/level-climb.webp",1,"playground__level__image"],["src","assets/images/level-slide.webp",1,"playground__level__image"],["type","primary",1,"grid-layout__col-4",3,"handleClick","buttonText","disabled"]],template:function(r,s){if(r&1){let o=_n();G(0,"div",1),Ye("@panSky.done",function(c){return bt(o),Tt(s.onAnimationEnd(c))}),G(1,"div",2),re(2,"img",3)(3,"img",4)(4,"img",5),H(),G(5,"div",6,0),st(7,_5,1,0,"app-header"),re(8,"img",7),st(9,C5,3,2,"div",8)(10,y5,12,19,"div",9),H(),G(11,"div",10),st(12,E5,1,2,"app-cta-button",11)(13,v5,2,1,"p",12),H(),st(14,S5,1,1),H()}if(r&2){let o,a;Kf("transform",s.initialPosition()),Wi("game-complete",s.gameStatusService.getGameStatus()===s.gameStatus.GAME_COMPLETE),Ie("@panSky",s.panSky()),V(5),Wi("game-complete",s.gameStatusService.getGameStatus()===s.gameStatus.GAME_COMPLETE),V(2),qe(s.showHeader()?7:-1),V(),Jn("src",s.lockupImg,Lr),V(),qe(s.gameStatusService.getViewSignal()===s.gameView.MENU?9:-1),V(),qe((o=s.gameStatusService.getUnlockedLevels())?10:-1,o),V(2),qe(s.selected()?12:13),V(2),qe((a=s.gameStatusService.getGameStatus())?14:-1,a)}},dependencies:[ki,Q1,hg,Nl],styles:['.grid-layout[_ngcontent-%COMP%]{display:grid;grid-auto-flow:row;grid-gap:16px;grid-template-columns:repeat(4,1fr)}.grid-layout__col-1[_ngcontent-%COMP%]{display:block;grid-column:span 1}.grid-layout__col-2[_ngcontent-%COMP%]{display:block;grid-column:span 2}.grid-layout__col-3[_ngcontent-%COMP%]{display:block;grid-column:span 3}.grid-layout__col-4[_ngcontent-%COMP%]{display:block;grid-column:span 4}.playground[_ngcontent-%COMP%]{bottom:0;height:100dvh;position:relative;transform:translateY(0);width:100%}.playground__sky[_ngcontent-%COMP%]{background:linear-gradient(180deg,#0f2169,#2c51dd,#3e56e0 26%,#e06ece 45%,#e857a9 51%,#681da8 60%);bottom:0;height:250dvh;position:relative;transform:translateY(-150dvh);width:100%;z-index:-1}.playground__sky[_ngcontent-%COMP%]   .cloud[_ngcontent-%COMP%]{max-width:unset;position:absolute;width:550px}.playground__sky[_ngcontent-%COMP%]   .cloud.cloud-1[_ngcontent-%COMP%]{right:-5dvw;top:78dvh}.playground__sky[_ngcontent-%COMP%]   .cloud.cloud-2[_ngcontent-%COMP%]{bottom:98dvh;left:-5dvw}.playground__sky[_ngcontent-%COMP%]   .cloud.cloud-3[_ngcontent-%COMP%]{bottom:120dvh;left:15dvw}.playground__menu[_ngcontent-%COMP%]{align-items:center;background-image:url(/playground/assets/images/cloud-background.webp);background-size:cover;display:flex;flex-direction:column;gap:10%;height:100dvh;left:0;padding:16px;position:absolute;top:0;width:100%;z-index:3}.playground__menu[_ngcontent-%COMP%]   app-menu[_ngcontent-%COMP%]{width:100%}.playground__wrapper[_ngcontent-%COMP%]{background-image:url(/playground/assets/images/cloud-background.webp);background-size:cover;bottom:0;display:flex;flex-direction:column;height:100dvh;padding:16px;position:absolute;width:100%}.playground__lockup[_ngcontent-%COMP%]{margin-inline:auto;margin-top:96px;width:80%}.playground__levels[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-block:auto;padding:0 24px 64px}.playground__levels[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px;padding:16px 0 32px;text-align:center;text-shadow:0 2px #000;width:100%}.playground__level[_ngcontent-%COMP%]{align-items:center;color:#fff;display:flex;font-size:20px;gap:16px;position:relative;text-shadow:0 2px #ffb299,0 4px #ff7245,0 6px #7759d2}.playground__level__image[_ngcontent-%COMP%]{aspect-ratio:1;height:96px;position:relative;z-index:0}.playground__level--selected[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_resize .8s steps(1,end) infinite;background-image:url(/playground/assets/images/selector.webp);background-repeat:no-repeat;background-size:contain;content:"";height:96px;left:48px;position:absolute;top:50%;translate:-50% -50%;width:96px;z-index:1}.playground__level--locked[_ngcontent-%COMP%]   .playground__level__image[_ngcontent-%COMP%]{filter:brightness(.6)}.playground__level--locked[_ngcontent-%COMP%]:after{background-image:url(/playground/assets/images/padlock.webp);background-repeat:no-repeat;background-size:contain;bottom:-12px;content:"";left:48px;min-height:48px;min-width:48px;position:absolute;translate:-50% 0}.playground__ui-container[_ngcontent-%COMP%]{bottom:0;display:flex;flex-direction:column;height:100%;justify-content:end;padding:16px;pointer-events:none;position:absolute;width:100%}.playground__ui-container[_ngcontent-%COMP%]   .blink[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s steps(1,end) infinite;color:#fff;padding:24px;text-align:center;text-shadow:#000 0 2px}.playground__ui-container[_ngcontent-%COMP%]   app-cta-button[_ngcontent-%COMP%]{pointer-events:auto}@keyframes _ngcontent-%COMP%_blink{0%,to{visibility:hidden}50%{visibility:visible}}@keyframes _ngcontent-%COMP%_resize{0%,to{scale:1.2}50%{scale:1}}'],data:{animation:[_s("panSky",[Fl("up",Rt({transform:"translateY(150dvh)"})),Fl("down",Rt({transform:"translateY(0)"})),ir("* => up",[On("2s 600ms ease-out")]),ir("* => down",[On("2s 600ms ease-out")])])]},changeDetection:0});let n=e;return n})();var W1=(()=>{let e=class e{constructor(i,r,s,o){this.gameStatusService=i,this.cdr=r,this.audioService=s,this.localizationService=o,this.countdownIntervalValue=1e3,this.count=4,this.countString=(this.count-1).toString(),this.content=this.localizationService.getLocalizedCopy()}ngOnInit(){this.transitionTimeoutId=setTimeout(()=>{this.startCountdown()},Xv*1.5)}ngOnDestroy(){this.countdownInterval&&clearInterval(this.countdownInterval),this.transitionTimeoutId&&clearTimeout(this.transitionTimeoutId)}startCountdown(){this.audioService.playClip(Ne.MOVE),this.countdownInterval=setInterval(()=>{this.count--,this.countString=(this.count-1).toString(),this.count>0&&this.audioService.playClip(Ne.MOVE),this.count===1?(this.audioService.playClip(Ne.START),this.countString=`${this.content?.countdownGo}`):this.count===0&&(clearInterval(this.countdownInterval),this.gameStatusService.setGameStatus(Te.PLAYING)),this.cdr.markForCheck()},this.countdownIntervalValue)}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut),Ae(os),Ae(Xn),Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-countdown"]],standalone:!0,features:[Le],decls:11,vars:4,consts:[[1,"countdown__container"],[1,"countdown__container--inner"],[1,"gradient-text"],[1,"gradient-text__text","drop-shadow"],[1,"gradient-text__text","outline--thin"],[1,"gradient-text__text","gradient"],[1,"gradient-text__text","outline"]],template:function(r,s){r&1&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),ge(4),H(),G(5,"p",4),ge(6),H(),G(7,"p",5),ge(8),H(),G(9,"p",6),ge(10),H()()()()),r&2&&(V(4),ze(s.countString),V(2),ze(s.countString),V(2),ze(s.countString),V(2),ze(s.countString))},styles:[".countdown__container[_ngcontent-%COMP%]{background-color:#0006;height:100%;position:relative;width:100%;z-index:1}.countdown__container--inner[_ngcontent-%COMP%]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]{display:inline-block;left:-5px;position:relative}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text[_ngcontent-%COMP%]{font-size:10rem;font-weight:700;left:0;letter-spacing:false;line-height:95%;position:absolute;text-align:center;text-transform:uppercase;top:0}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.drop-shadow[_ngcontent-%COMP%]{filter:drop-shadow(5px 5px #ffb299) drop-shadow(5px 5px 0 #ff7245) drop-shadow(5px 5px 0 #7759d2) drop-shadow(5px 5px 0 rgba(0,0,0,.6));top:-12px}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.gradient[_ngcontent-%COMP%]{background:#fff;background-clip:text;-webkit-text-fill-color:transparent}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline[_ngcontent-%COMP%]{color:#fff;text-shadow:0 -12px #7759d2;background-clip:text;background-color:transparent;position:relative}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline--thin[_ngcontent-%COMP%]{color:#fff;top:-14px}.countdown__container[_ngcontent-%COMP%]   .gradient-text[_ngcontent-%COMP%]   .gradient-text__text[_ngcontent-%COMP%]{padding:10px}"],changeDetection:0});let n=e;return n})();var x5=["wglContainer"],j1=(()=>{let e=class e{constructor(i,r,s){this.platformId=i,this.gameStatusService=r,this.audioService=s,this.gameStatus=Te.COUNTDOWN,this.isBrowser=!1,this.events=new Sp.default,this.container=ns.required("wglContainer"),this.handleWindowBlur=()=>{this.gameStatusService.setPaused()},this.isBrowser=ho(i),this.isBrowser&&(this.audioService=$(Xn)),Ms(()=>{switch(this.gameStatus=this.gameStatusService.getGameStatus(),this.gameStatus){case Te.COUNTDOWN:this.gameStatusService.setTransitionSignal(rn.EXIT);break;case Te.PLAYING:this.events.emit(Li.START),this.isPlayingBgm||(this.bgm=this.audioService?.playClip(Ne.BGM,!0),this.isPlayingBgm=!0),this.bgm&&(this.bgm.gain.gain.value=1);break;case Te.PAUSED:this.events.emit(Li.PAUSE),this.bgm&&(this.bgm.gain.gain.value=.25);break;case Te.GAME_OVER:this.bgm?.source.stop(),this.isPlayingBgm=!1;break;case Te.ZONE_CLEARED:this.bgm?.source.stop(),this.isPlayingBgm=!1;break;case Te.UNPLAYED:this.bgm?.source.stop(),this.isPlayingBgm=!1;break}},{allowSignalWrites:!0})}initListeners(){this.level&&(window.addEventListener("blur",this.handleWindowBlur),this.level.events.on(Wt.READY,()=>{this.gameStatusService.setGameStatus(Te.COUNTDOWN)}),this.level.events.on(Wt.OVER,()=>{this.gameStatusService.setTransitionSignal(rn.ENTER),this.gameStatusService.setGameStatus(Te.GAME_OVER)}),this.level.events.on(Wt.CLEAR,()=>{this.audioService?.playClip(Ne.FINISH_LINE),this.gameStatusService.setTransitionSignal(rn.ENTER),this.gameStatusService.setGameStatus(Te.ZONE_CLEARED)}),this.level.events.on(Wt.JUMP,()=>{this.audioService?.playClip(Ne.JUMP)}),this.level.events.on(Wt.LANE_CHANGE,()=>{this.audioService?.playClip(Ne.MOVE)}),this.level.events.on(Wt.SCORE_UPDATE,i=>{this.audioService?.playClip(Ne.POINT_COLLECT),this.gameStatusService.increaseCurrentLevelScore(i)}),this.level.events.on(Wt.DEATH,()=>{this.audioService?.playClip(Ne.OBSTACLE_HIT)}))}removeListeners(){window.removeEventListener("blur",this.handleWindowBlur),this.level?.events.removeAllListeners()}initializeLevel(i){return ct(this,null,function*(){if(this.audioService){switch(yield this.audioService.load(),i){case Wn.GOLF:this.level=new ig(this.container().nativeElement,this.events);break;case Wn.CLIMB:this.level=new $A(this.container().nativeElement,this.events);break;case Wn.SLIDE:this.level=new sg(this.container().nativeElement,this.events);break}this.level&&(this.initListeners(),this.events.emit(Li.LOAD))}})}ngAfterViewInit(){return ct(this,null,function*(){this.initializeLevel(this.gameStatusService.getCurrentLevel())})}ngOnDestroy(){this.removeListeners(),this.level?.dispose()}};e.\u0275fac=function(r){return new(r||e)(Ae(Gn),Ae(Ut),Ae(Xn))},e.\u0275cmp=Pe({type:e,selectors:[["app-game"]],viewQuery:function(r,s){r&1&&is(s.container,x5,5),r&2&&rs()},standalone:!0,features:[Le],decls:2,vars:0,consts:[["wglContainer",""],[1,"fullScreen"]],template:function(r,s){r&1&&re(0,"div",1,0)},changeDetection:0});let n=e;return n})();function M5(n,e){n&1&&re(0,"app-countdown")}function w5(n,e){if(n&1&&re(0,"app-background-overlay",2)(1,"app-pause-view"),n&2){let t=Se(2);Ie("view",t.gameStatus.PAUSED)}}function B5(n,e){if(n&1&&st(0,M5,1,0,"app-countdown")(1,w5,2,1),n&2){let t=e,i=Se();qe(t===i.gameStatus.GAME_READY||t===i.gameStatus.COUNTDOWN?0:t===i.gameStatus.PAUSED?1:-1)}}var J1=(()=>{let e=class e{constructor(i){this.gameStatusService=i,this.gameStatus=Te}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut))},e.\u0275cmp=Pe({type:e,selectors:[["app-gameplay-view"]],standalone:!0,features:[Le],decls:4,vars:1,consts:[[1,"gameplay"],[1,"gameplay__game"],[3,"view"]],template:function(r,s){if(r&1&&(G(0,"div",0)(1,"div",1),re(2,"app-game"),H(),st(3,B5,2,1),H()),r&2){let o;V(3),qe((o=s.gameStatusService.getGameStatus())?3:-1,o)}},dependencies:[k1,W1,j1,F1],styles:[".grid-layout[_ngcontent-%COMP%]{display:grid;grid-auto-flow:row;grid-gap:16px;grid-template-columns:repeat(4,1fr)}.grid-layout__col-1[_ngcontent-%COMP%]{display:block;grid-column:span 1}.grid-layout__col-2[_ngcontent-%COMP%]{display:block;grid-column:span 2}.grid-layout__col-3[_ngcontent-%COMP%]{display:block;grid-column:span 3}.grid-layout__col-4[_ngcontent-%COMP%]{display:block;grid-column:span 4}.gameplay[_ngcontent-%COMP%]{height:100%;position:relative;width:100%}.gameplay__game[_ngcontent-%COMP%]{height:100dvh;left:0;position:absolute;top:0;width:100%}"],changeDetection:0});let n=e;return n})();function Go(){return _s("fadeIn",[ir(":enter",[Rt({opacity:0}),On("1000ms ease-in",Rt({opacity:1}))]),ir(":leave",[On("0.2s ease-in",Rt({opacity:0}))])])}var q1=(()=>{let e=class e{constructor(i,r){this.gameStatusService=i,this.localizationService=r,this.isClicked=!1,this.content=this.localizationService.getLocalizedCopy(),this.lockupImg=this.localizationService.getLocalizedLockup()}handleClick(){this.gameStatusService.setIntroBackgroundAnimatedSignal(!0),this.isClicked=!0,zt({event:"start"})}navigateToSignIn(i){i.fromState!=="void"&&i.phaseName==="done"&&this.gameStatusService.setViewSignal(dt.SIGN_IN)}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut),Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-intro-view"]],standalone:!0,features:[Le],decls:10,vars:7,consts:[[1,"intro",3,"click"],[1,"intro__logos"],["src","assets/images/google-play-logo.webp","alt","Google Play",1,"intro__google-play"],["alt","The Playground at Zedd in the Park",1,"intro__lockup"],[1,"intro__cta"],[1,"intro__desktop"],["src","assets/images/qr-code.webp","alt","QR Code"]],template:function(r,s){r&1&&(G(0,"button",0),Ye("click",function(){return s.handleClick()})("@slideUp.done",function(a){return s.navigateToSignIn(a)}),G(1,"div",1),re(2,"img",2)(3,"img",3),H(),G(4,"div",4),ge(5),H(),G(6,"div",5)(7,"p"),ge(8),H(),re(9,"img",6),H()()),r&2&&(Ie("@slideUp",s.isClicked),V(),Ie("@fadeIn",void 0),V(2),Jn("src",s.lockupImg,Lr),V(),Ie("@fadeIn",void 0),V(),sn(" ",s.content==null?null:s.content.tapToPlay," "),V(),Ie("@fadeIn",void 0),V(2),ze(s.content==null?null:s.content.desktopDescription))},styles:[".intro[_ngcontent-%COMP%]{align-items:center;box-sizing:border-box;display:flex;flex-direction:column;height:100%;justify-content:space-between;padding:24px;position:relative;width:100%;z-index:1}@media screen and (orientation: landscape) and (width >= 1024px){.intro[_ngcontent-%COMP%]{cursor:default;gap:24px;justify-content:flex-start;pointer-events:none}}.intro__desktop[_ngcontent-%COMP%]{align-items:center;display:none;flex-direction:column;gap:24px}.intro__desktop[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px;text-align:center;text-shadow:2px 2px 0px #000;width:340px}.intro__desktop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}@media screen and (orientation: landscape) and (width >= 1024px){.intro__desktop[_ngcontent-%COMP%]{display:flex}}.intro__logos[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;gap:48px}@media screen and (orientation: landscape) and (width >= 1024px){.intro__logos[_ngcontent-%COMP%]{gap:24px}}.intro__google-play[_ngcontent-%COMP%]{width:92px}@media screen and (orientation: landscape) and (width >= 1024px){.intro__google-play[_ngcontent-%COMP%]{width:147px}}.intro__cta[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s steps(1,end) infinite;bottom:10%;color:#fff;cursor:pointer;padding:14px;position:absolute;text-align:center;text-shadow:#000 0 2px;width:100%}@media screen and (orientation: landscape) and (width >= 1024px){.intro__cta[_ngcontent-%COMP%]{display:none}}@keyframes _ngcontent-%COMP%_blink{0%,to{visibility:hidden}50%{visibility:visible}}"],data:{animation:[_s("slideUp",[Fl("false",Rt({transform:"translateY(0)"})),Fl("true",Rt({transform:"translateY(100%)"})),ir("true <=> false",[On("500ms ease-in-out")])]),Go()]},changeDetection:0});let n=e;return n})();var D5="/playground/api/login",b5="/playground/api/submit_score",fg=(()=>{let e=class e{constructor(i,r,s){this.document=i,this.http=r,this.gameStatusService=s}createGoogleButton(i){if(Er.oAuthClientId){if(!window.google.accounts.id){console.error("Cannot access Google account on window object");return}window.google.accounts.id.initialize({client_id:Er.oAuthClientId,callback:this.handleSignUp.bind(this)}),window.google.accounts.id.renderButton(i,{size:"large",shape:"rectangular",text:"signin_with",theme:"outline",type:"standard"})}}handleSignUp(i){let r={access_token:i.credential};this.http.post(D5,r).pipe(wi(1),hi(s=>(console.error(s),ti))).subscribe(s=>{this.gameStatusService.setUserSignal(s),this.gameStatusService.setTransitionSignal(rn.ENTER)})}submitUserScore(i){let r={score:i};return this.http.post(b5,r)}};e.\u0275fac=function(r){return new(r||e)(Re(un),Re(xu),Re(Ut))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var T5=["signInButton"];function R5(n,e){n&1&&re(0,"div",15,0)}var X1=(()=>{let e=class e{constructor(i,r){this.authService=i,this.localizationService=r,this.signInButtonElement=ns("signInButton"),this.content=this.localizationService.getLocalizedCopy(),this.showSignInButton=Ht(!1),Ms(()=>{let s=this.signInButtonElement();s&&this.authService.createGoogleButton(s.nativeElement)})}toggleAcceptTerms(){this.showSignInButton.update(i=>!i)}openTerms(){zt({event:"sign-in_terms_open"}),window.open(`${cg}`,"_blank")}};e.\u0275fac=function(r){return new(r||e)(Ae(fg),Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-sign-in-view"]],viewQuery:function(r,s){r&1&&is(s.signInButtonElement,T5,5),r&2&&rs()},standalone:!0,features:[Le],decls:29,vars:14,consts:[["signInButton",""],[1,"sign-in"],["alt","Google Play Icon","src","assets/images/google-play-icon.webp",1,"sign-in__icon"],[1,"sign-in__middle"],[1,"sign-in__text"],[3,"innerBorder"],[1,"pixelated-border__edges"],[1,"sign-in__text__background","pixelated-border__background"],[1,"sign-in__text__title"],[1,"checkered-pattern"],[1,"sign-in__text__separator"],[1,"sign-in__text__body",3,"innerHTML"],["src","assets/images/cloud-4.webp","alt","Cloud",1,"sign-in__cloud","sign-in__cloud--left"],["src","assets/images/cloud-5.webp","alt","Cloud",1,"sign-in__cloud","sign-in__cloud--right"],[1,"sign-in__button-wrapper"],[1,"button-wrapper"],[1,"sign-in__terms"],["type","checkbox","tabIndex","1",3,"click"],[1,"sign-in__terms--text"],["href","https://services.google.com/fh/files/misc/google-play-playground-game-official-terms.pdf","tabIndex","1",1,"sign-in__cta"],["target","_blank","tabIndex","1",1,"sign-in__cta",3,"href"]],template:function(r,s){r&1&&(G(0,"div",1),re(1,"img",2),G(2,"div",3)(3,"div",4)(4,"app-pixelated-border",5)(5,"div",6)(6,"div",7)(7,"div",8),re(8,"div",9),G(9,"h1"),ge(10),H(),re(11,"div",9),H(),re(12,"div",10)(13,"div",11),H()()(),re(14,"img",12)(15,"img",13),H(),G(16,"div",14),st(17,R5,2,0,"div",15),H()(),G(18,"app-pixelated-border")(19,"div",16)(20,"input",17),Ye("click",function(){return s.toggleAcceptTerms()}),H(),G(21,"p",18),ge(22),G(23,"a",19),ge(24),H(),ge(25),G(26,"a",20),ge(27),H(),ge(28),H()()()()),r&2&&(V(),Ie("@fadeIn",void 0),V(),Ie("@fadeIn",void 0),V(2),Ie("innerBorder",!0),V(6),ze(s.content==null?null:s.content.instructionsTitle),V(3),Ie("innerHTML",s.content==null?null:s.content.instructionsDescription,Ff),V(3),Ie("@buttonWrapper",void 0),V(),qe(s.showSignInButton()?17:-1),V(),Ie("@fadeIn",void 0),V(4),sn(" ",s.content==null?null:s.content.termsCopy1," "),V(2),sn(" ",s.content==null?null:s.content.termsCta1," "),V(),sn(" ",s.content==null?null:s.content.termsCopy2," "),V(),nC("href",s.content==null?null:s.content.termsCta2Url,Lr),V(),sn(" ",s.content==null?null:s.content.termsCta2," "),V(),sn(" ",s.content==null?null:s.content.termsCopy3," "))},dependencies:[Yn],styles:['.pixelated-border__outer[_ngcontent-%COMP%], .pixelated-border__inner[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__outer[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:before{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]:after, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#323232;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__outer[_ngcontent-%COMP%]{background:#323232;box-shadow:0 3px #0003;padding:3px}.pixelated-border__outer.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__inner[_ngcontent-%COMP%]{background:#fff;padding:3px;z-index:5}.pixelated-border__inner[_ngcontent-%COMP%]:before, .pixelated-border__inner[_ngcontent-%COMP%]:after{background:#fff}.pixelated-border__inner.menu-button[_ngcontent-%COMP%]{height:100%}.pixelated-border__background[_ngcontent-%COMP%]{background:#d4dcf7;padding:4px 10px}.pixelated-border__background[_ngcontent-%COMP%]:before, .pixelated-border__background[_ngcontent-%COMP%]:after{background:#d4dcf7}.pixelated-border__edges[_ngcontent-%COMP%]{position:relative;width:auto;z-index:2}.pixelated-border__edges[_ngcontent-%COMP%]:before{background:#d4dcf7;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.pixelated-border__edges[_ngcontent-%COMP%]:after{background:#d4dcf7;content:"";display:block;inset:3px -3px;position:absolute;z-index:-1}.sign-in[_ngcontent-%COMP%]{align-items:center;background-position:center;background-size:cover;display:flex;flex-direction:column;height:100%;justify-content:space-between;padding:24px 24px 74px;position:relative;width:100%;z-index:1}.sign-in__icon[_ngcontent-%COMP%]{width:48px;z-index:1}.sign-in__icon[_ngcontent-%COMP%], .sign-in__button-wrapper[_ngcontent-%COMP%]{margin-bottom:2rem}.sign-in__middle[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;gap:2rem}@supports not (gap: 1rem){.sign-in__middle[_ngcontent-%COMP%]{margin:2rem 0}}@media screen and (max-height: 667px){.sign-in__icon[_ngcontent-%COMP%], .sign-in__button-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}.sign-in__middle[_ngcontent-%COMP%]{gap:1rem}@supports not (gap: 1rem){.sign-in__middle[_ngcontent-%COMP%]{margin:1rem 0}}}.sign-in__terms[_ngcontent-%COMP%]{display:flex;font-size:12px;gap:1rem;line-height:1.5;padding:8px}@supports not (gap: 1rem){.sign-in__terms[_ngcontent-%COMP%]{margin:0 1rem}}.sign-in__terms[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;box-shadow:4px 4px #323232;height:fit-content;min-height:20px;min-width:20px;outline:2px solid #323232}.sign-in__cta[_ngcontent-%COMP%]{cursor:pointer;text-align:center;text-decoration:underline;text-underline-offset:2px}.sign-in__text[_ngcontent-%COMP%]{margin:0 auto;position:relative;text-align:center;width:100%}.sign-in__text__background[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:13px 12px 20px}@media screen and (max-height: 667px){.sign-in__text__background[_ngcontent-%COMP%]{padding:13px 8px 20px}}.sign-in__text__title[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;position:relative;width:100%}.sign-in__text__title[_ngcontent-%COMP%]   .checkered-pattern[_ngcontent-%COMP%]{background:linear-gradient(45deg,#becaf3 25%,transparent 25%,transparent 75%,#becaf3 75%),linear-gradient(45deg,#becaf3 25%,transparent 25%,transparent 75%,#becaf3 75%);background-color:#d4dcf7;background-position:0 0,3px 3px;background-size:6px 6px;flex:1;height:28px}.sign-in__text__title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:14px;margin:0 16px}.sign-in__text__separator[_ngcontent-%COMP%]{background:#becaf3;box-shadow:0 2px #ffffff80;height:2px;width:100%}.sign-in__text__body[_ngcontent-%COMP%]{color:#323232;display:flex;flex-direction:column;gap:20px}.sign-in__cloud[_ngcontent-%COMP%]{position:absolute;z-index:2}.sign-in__cloud--left[_ngcontent-%COMP%]{left:-24px;top:-12px;width:84px}.sign-in__cloud--right[_ngcontent-%COMP%]{bottom:-12px;right:-24px;width:79px}'],data:{animation:[_s("buttonWrapper",[ir(":enter",[Ir(".button-wrapper",[Rt({opacity:0}),On("0.2s 1.2s ease",Rt({opacity:1}))])])]),Go()]},changeDetection:0});let n=e;return n})();var P5=["video"],$1=(()=>{let e=class e{constructor(i){this.gameStatusService=i,this.video=ns.required("video"),this.introBackgroundAnimated=In(()=>this.gameStatusService.getIntroBackgroundAnimatedSignal()),this.playVideo=()=>{this.video().nativeElement.play()}}ngAfterViewInit(){this.video().nativeElement.load(),this.video().nativeElement.addEventListener("canplay",this.playVideo)}ngOnDestroy(){this.video().nativeElement.addEventListener("canplay",this.playVideo)}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut))},e.\u0275cmp=Pe({type:e,selectors:[["app-intro-background"]],viewQuery:function(r,s){r&1&&is(s.video,P5,5),r&2&&rs()},standalone:!0,features:[Le],decls:5,vars:4,consts:[["video",""],[1,"intro-background"],["muted","","loop","","playsInline",""],["src","assets/video/landing-loop.webm","type","video/webm"],[1,"intro-background__clouds"]],template:function(r,s){r&1&&(G(0,"div",1)(1,"video",2,0),re(3,"source",3),H(),re(4,"div",4),H()),r&2&&(Wi("intro-background--scrolled",s.introBackgroundAnimated()),V(),Ie("@fadeIn",void 0),V(3),Ie("@fadeIn",void 0))},styles:[".intro-background[_ngcontent-%COMP%]{background:#5571c6;bottom:0;display:flex;flex-direction:column-reverse;height:200vh;left:0;position:fixed;transition:bottom 1s ease;width:100%}@media screen and (orientation: landscape) and (width >= 1024px){.intro-background[_ngcontent-%COMP%]{background-image:url(/playground/assets/images/desktop-bg.webp);background-position:bottom;background-size:cover;height:100vh}}.intro-background--scrolled[_ngcontent-%COMP%]{bottom:-50%}.intro-background__clouds[_ngcontent-%COMP%]{background:url(/playground/assets/images/landing-page-top.webp);background-size:cover;height:376px;margin-bottom:-1px;width:100%}@media screen and (orientation: landscape) and (width >= 1024px){.intro-background__clouds[_ngcontent-%COMP%]{display:none}}.intro-background[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%}@media screen and (orientation: landscape) and (width >= 1024px){.intro-background[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{display:none}}"],data:{animation:[Go()]},changeDetection:0});let n=e;return n})();function L5(n,e){n&1&&re(0,"app-intro-background")}function O5(n,e){n&1&&re(0,"app-intro-view")}function N5(n,e){n&1&&re(0,"app-sign-in-view")}function F5(n,e){n&1&&re(0,"app-header")}function k5(n,e){if(n&1&&(re(0,"app-playground-view"),st(1,F5,1,0,"app-header")),n&2){let t=Se(2);V(),qe(t.showHeader()?1:-1)}}function U5(n,e){n&1&&re(0,"app-header")(1,"app-gameplay-view")}function G5(n,e){if(n&1&&st(0,L5,1,0,"app-intro-background")(1,O5,1,0,"app-intro-view")(2,N5,1,0,"app-sign-in-view")(3,k5,2,1)(4,U5,2,0),n&2){let t=e,i=Se();qe(t===i.viewType.INTRO||t===i.viewType.SIGN_IN?0:-1),V(),qe(t===i.viewType.INTRO?1:t===i.viewType.SIGN_IN?2:t===i.viewType.PLAYGROUND||t===i.viewType.COMPLETE||t===i.viewType.MENU?3:t===i.viewType.GAMEPLAY?4:-1)}}function H5(n,e){n&1&&re(0,"app-cloud-transition")}var Z1=(()=>{let e=class e{constructor(i){this.gameStatusService=i,this.viewType=dt,this.gameStatusType=Te,this.transitionStateType=rn,this.transitionState=In(()=>this.gameStatusService.getTransitionSignal()||null),this.showHeader=In(()=>{let r=this.gameStatusService.getGameStatus();return r!==Te.ZONE_CLEARED&&r!==Te.GAME_OVER})}};e.\u0275fac=function(r){return new(r||e)(Ae(Ut))},e.\u0275cmp=Pe({type:e,selectors:[["app-main-view"]],standalone:!0,features:[Le],decls:3,vars:2,consts:[[1,"main-controller"]],template:function(r,s){if(r&1&&(G(0,"div",0),st(1,G5,5,2)(2,H5,1,0,"app-cloud-transition"),H()),r&2){let o;V(),qe((o=s.gameStatusService.getViewSignal())?1:-1,o),V(),qe(s.transitionState()===s.transitionStateType.ENTER?2:-1)}},dependencies:[ws,K1,J1,q1,hg,H1,X1,$1],styles:[".main-controller[_ngcontent-%COMP%]{height:100%;position:relative;width:100%}"],changeDetection:0});let n=e;return n})();function V5(n,e){if(n&1&&(G(0,"span",14),ge(1),H(),re(2,"img",17)),n&2){let t=Se(2);V(),sn("\u2756 ",t.content==null?null:t.content.completeTopUp,"")}}function Q5(n,e){if(n&1&&(G(0,"span",14),ge(1),H(),G(2,"span",15),ge(3),H()),n&2){let t=e;V(),ze(t.tier),V(2),sn("+",t.bonus,"")}}function z5(n,e){if(n&1&&(G(0,"app-pixelated-border")(1,"div",18)(2,"p"),ge(3),H()()()),n&2){let t=Se(2);V(3),ze(t.content==null?null:t.content.completeRedeemError)}}function K5(n,e){if(n&1){let t=_n();G(0,"app-cta-button",19),Ye("handleClick",function(){bt(t);let r=Se(2);return Tt(r.redeemCode())}),H()}if(n&2){let t=Se(2);Ie("buttonText",t.redeemText)}}function W5(n,e){if(n&1&&(G(0,"div",7),re(1,"img"),G(2,"p",8),ge(3),H(),G(4,"div",9),Un(),G(5,"svg",10),re(6,"use",11),H(),Pi(),G(7,"p",12),ge(8),H()(),G(9,"div",13)(10,"span",14),ge(11),H(),G(12,"span",15),ge(13),H(),st(14,V5,3,1)(15,Q5,4,2),H(),st(16,z5,4,1,"app-pixelated-border")(17,K5,1,1,"app-cta-button",16),H()),n&2){let t,i=Se();Ie("@fadeIn",void 0),V(),Jn("src",i.lockupImg,Lr)("alt",i.content==null?null:i.content.lockupAlt),V(2),ze(i.content==null?null:i.content.completeCongrats),V(5),ze(i.totalScore()),V(3),sn("\u2756 ",i.content==null?null:i.content.completePointsCollected,""),V(2),ze(i.pointsCollected()),V(),qe(i.displayTopUp()?14:-1),V(),qe((t=i.googleTierReward())?15:-1,t),V(),qe(i.displayError()?16:17)}}var j5="https://play.google.com/redeem?code=",eP=(()=>{let e=class e{constructor(i,r,s,o){this.authService=i,this.gameStatusService=r,this.router=s,this.localizationService=o,this.showContent=!0,this.content=this.localizationService.getLocalizedCopy(),this.lockupImg=this.localizationService.getLocalizedLockup(),this.redeemText=`${this.content?.completeRedeem}`,this.pointsCollected=In(()=>this.gameStatusService.getUserSignal()?.base_points||this.gameStatusService.getCompleteScore()),this.displayTopUp=In(()=>{let a=this.gameStatusService.getUserSignal();if(a){let c=a.play_points||0,l=a.gpp_tier_bonus||0;return a.base_points!==c-l}else return!1}),this.googleTierReward=In(()=>{let a=this.gameStatusService.getUserSignal();return!a||a?.gpp_tier==="bronze"?null:{bonus:a.gpp_tier_bonus,tier:`\u2756 ${a.gpp_tier} ${this.content?.completeLevelReward}`}}),this.totalScore=In(()=>this.gameStatusService.getUserSignal()?.play_points),this.assignedCode=In(()=>this.gameStatusService.getUserSignal()?.assigned_code||null),this.displayError=Ht(!1),this.gameStatusService.setPreviousUrlIncludesComplete(!0),Ms(()=>{let a=this.gameStatusService.getUserSignal(),c=this.gameStatusService.getCompleteScore();if(!a){this.showContent=!1,this.gameStatusService.setGameStatus(Te.UNPLAYED),this.gameStatusService.setViewSignal(dt.INTRO),this.router.navigate(["/"]);return}zt({event:"game_completed",final_score:`${c}`}),!a.base_points&&c&&this.authService.submitUserScore(c).pipe(wi(1),hi(l=>(this.displayError.set(!0),console.error(l),ti))).subscribe(l=>{this.gameStatusService.setUserSignal(l)})},{allowSignalWrites:!0})}backToPlayground(){this.showContent=!1,this.router.navigate(["/"]),this.gameStatusService.setViewSignal(dt.PLAYGROUND)}redeemCode(){zt({event:"button_redeem",location:"game"}),window.open(`${j5}${this.assignedCode()}`,"_blank")}};e.\u0275fac=function(r){return new(r||e)(Ae(fg),Ae(Ut),Ae(_o),Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-complete-view"]],standalone:!0,features:[Le],decls:9,vars:2,consts:[[1,"complete-screen"],["src","assets/images/cloud-bottom-right.webp","alt","",1,"cloud"],[1,"stars","star-1"],[1,"stars","star-2"],[1,"stars","star-3"],[1,"stars","star-4"],[1,"stars","star-5"],[1,"complete-screen__content"],[1,"complete-screen__congrats"],[1,"complete-screen__total-score"],[1,"score-summary__point"],["href","assets/images/icons.svg#google-play-point"],[1,"complete-screen__score"],[1,"complete-screen__score-summary"],[1,"score-summary__text"],[1,"score-summary__points"],["type","primary",1,"grid-layout__col-4",3,"buttonText"],["src","assets/images/bonus.gif","alt","",1,"score-summary__points"],[1,"pixelated-border__edges"],["type","primary",1,"grid-layout__col-4",3,"handleClick","buttonText"]],template:function(r,s){r&1&&(G(0,"div",0),re(1,"img",1),G(2,"div"),re(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6),H(),st(8,W5,18,10,"div",7),H()),r&2&&(V(2),Ie("@fadeIn",void 0),V(6),qe(s.showContent?8:-1))},dependencies:[ki,Yn],styles:['.grid-layout[_ngcontent-%COMP%]{display:grid;grid-auto-flow:row;grid-gap:16px;grid-template-columns:repeat(4,1fr)}.grid-layout__col-1[_ngcontent-%COMP%]{display:block;grid-column:span 1}.grid-layout__col-2[_ngcontent-%COMP%]{display:block;grid-column:span 2}.grid-layout__col-3[_ngcontent-%COMP%]{display:block;grid-column:span 3}.grid-layout__col-4[_ngcontent-%COMP%]{display:block;grid-column:span 4}@keyframes _ngcontent-%COMP%_star-shine{0%{opacity:.6;transform:scale(1)}50%{opacity:1;rotate:45deg;transform:scale(1.3)}to{opacity:.6;transform:scale(1)}}.complete-screen[_ngcontent-%COMP%]{background:linear-gradient(#0f2169,#2c51dd 33%,#3e56e0 65%,#e06ece 110%);height:100dvh;overflow:hidden;padding:11px 16px;position:relative;text-align:center}.complete-screen[_ngcontent-%COMP%]   .cloud[_ngcontent-%COMP%]{max-width:unset;position:absolute;right:-5vw;top:78vh;width:550px}.complete-screen[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{background-color:#fff;height:2px;position:absolute;width:2px}.complete-screen[_ngcontent-%COMP%]   .stars.star-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_star-shine 1s ease-in-out infinite;left:20vw;top:6vh}.complete-screen[_ngcontent-%COMP%]   .stars.star-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_star-shine 2s ease-in-out infinite;left:8vw;top:30vh}.complete-screen[_ngcontent-%COMP%]   .stars.star-3[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_star-shine 4s ease-in-out infinite;left:16vw;top:50vh}.complete-screen[_ngcontent-%COMP%]   .stars.star-4[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_star-shine 2s ease-in-out infinite;right:8vw;top:36vh}.complete-screen[_ngcontent-%COMP%]   .stars.star-5[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_star-shine 1s ease-in-out .1s infinite;right:45vw;top:63vh}.complete-screen__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;justify-content:space-evenly;position:relative;z-index:250}.complete-screen[_ngcontent-%COMP%]   .complete__title.gradient-text[_ngcontent-%COMP%]{display:inline-block;left:-2px;position:relative}.complete-screen[_ngcontent-%COMP%]   .complete__title.gradient-text[_ngcontent-%COMP%]   .gradient-text__text[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;left:0;letter-spacing:7px;line-height:95%;position:absolute;text-align:center;text-transform:uppercase;top:0}.complete-screen[_ngcontent-%COMP%]   .complete__title.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.drop-shadow[_ngcontent-%COMP%]{filter:drop-shadow(2px 2px #ffb299) drop-shadow(2px 2px 0 #ff7245) drop-shadow(2px 2px 0 #7759d2) drop-shadow(2px 2px 0 rgba(0,0,0,.6));top:-2px}.complete-screen[_ngcontent-%COMP%]   .complete__title.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.gradient[_ngcontent-%COMP%]{background:#fff;background-clip:text;-webkit-text-fill-color:transparent}.complete-screen[_ngcontent-%COMP%]   .complete__title.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline[_ngcontent-%COMP%]{color:#fff;text-shadow:0 -2px #7759d2;background-clip:text;background-color:transparent;position:relative}.complete-screen[_ngcontent-%COMP%]   .complete__title.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline--thin[_ngcontent-%COMP%]{color:#fff;top:-4px}.complete-screen[_ngcontent-%COMP%]   .complete__subtitle.gradient-text[_ngcontent-%COMP%]{display:inline-block;left:-2px;position:relative}.complete-screen[_ngcontent-%COMP%]   .complete__subtitle.gradient-text[_ngcontent-%COMP%]   .gradient-text__text[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;left:0;letter-spacing:7px;line-height:95%;position:absolute;text-align:center;text-transform:uppercase;top:0}.complete-screen[_ngcontent-%COMP%]   .complete__subtitle.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.drop-shadow[_ngcontent-%COMP%]{filter:drop-shadow(2px 2px #ffb299) drop-shadow(2px 2px 0 #ff7245) drop-shadow(2px 2px 0 #7759d2) drop-shadow(2px 2px 0 rgba(0,0,0,.6));top:0}.complete-screen[_ngcontent-%COMP%]   .complete__subtitle.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.gradient[_ngcontent-%COMP%]{background:#fff;background-clip:text;-webkit-text-fill-color:transparent}.complete-screen[_ngcontent-%COMP%]   .complete__subtitle.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline[_ngcontent-%COMP%]{color:#fff;text-shadow:0 0px #7759d2;background-clip:text;background-color:transparent;position:relative}.complete-screen[_ngcontent-%COMP%]   .complete__subtitle.gradient-text[_ngcontent-%COMP%]   .gradient-text__text.outline--thin[_ngcontent-%COMP%]{color:#fff;top:-2px}.complete-screen__icons[_ngcontent-%COMP%]{align-items:center;display:flex;gap:16px;justify-content:center}.complete-screen__icon[_ngcontent-%COMP%]{height:80px;width:80px}.complete-screen__congrats[_ngcontent-%COMP%]{color:#fff}.complete-screen__total-score[_ngcontent-%COMP%]{height:150px;position:relative}.complete-screen__total-score[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 20px 0 rgba(0,0,0,.2));height:100%}.complete-screen__score[_ngcontent-%COMP%]{color:#fff;font-size:5.7rem;left:50%;position:absolute;text-shadow:-5px -5px 0 #323232,5px -5px 0 #323232,-5px 5px 0 #323232,5px 5px 0 #323232,0 -5px 0 #323232,0 5px 0 #323232,-5px 0 0 #323232,5px 0 0 #323232;top:50%;transform:translate(-50%,-50%)}.complete-screen__score-summary[_ngcontent-%COMP%]{align-items:center;display:grid;grid-template-columns:1fr 1fr;row-gap:8px;width:100%}.complete-screen__score-summary[_ngcontent-%COMP%]   .score-summary__text[_ngcontent-%COMP%]{color:#fffab9;font-size:13px;text-align:left;text-shadow:1px 1px 0 #000;white-space:nowrap;word-break:keep-all}.complete-screen__score-summary[_ngcontent-%COMP%]   .score-summary__points[_ngcontent-%COMP%]{color:#fff;font-size:13px;justify-self:flex-end;width:fit-content}.complete-screen__back-cta[_ngcontent-%COMP%]{color:#fff;text-shadow:1px 1px 0 #000}app-pixelated-border[_ngcontent-%COMP%]{display:block;margin-top:32px;position:relative}app-pixelated-border[_ngcontent-%COMP%]:after{background-image:url(/playground/assets/images/speech-bubble-tail.webp);background-size:contain;content:"";height:18px;position:absolute;right:32px;top:-12px;transform:rotate(180deg) scaleX(-1);width:21px;z-index:2}app-pixelated-border[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:12px}'],data:{animation:[Go()]},changeDetection:0});let n=e;return n})();var tP=n=>{let e=$(un),t=$(en),i=D1(n.url);return e.documentElement.lang=b1(i),t.setLocale(i),i};var nP=[{path:"",component:Z1},{path:"complete",component:eP},{path:"levels",component:O1}],iP=[...nP,{path:"intl/:locale",children:nP,resolve:{locale:tP}},{path:"**",component:N1}];function rP(n){return new oe(3e3,!1)}function J5(){return new oe(3100,!1)}function q5(){return new oe(3101,!1)}function Y5(n){return new oe(3001,!1)}function X5(n){return new oe(3003,!1)}function $5(n){return new oe(3004,!1)}function Z5(n,e){return new oe(3005,!1)}function eW(){return new oe(3006,!1)}function tW(){return new oe(3007,!1)}function nW(n,e){return new oe(3008,!1)}function iW(n){return new oe(3002,!1)}function rW(n,e,t,i,r){return new oe(3010,!1)}function sW(){return new oe(3011,!1)}function oW(){return new oe(3012,!1)}function aW(){return new oe(3200,!1)}function cW(){return new oe(3202,!1)}function lW(){return new oe(3013,!1)}function uW(n){return new oe(3014,!1)}function dW(n){return new oe(3015,!1)}function hW(n){return new oe(3016,!1)}function fW(n,e){return new oe(3404,!1)}function pW(n){return new oe(3502,!1)}function AW(n){return new oe(3503,!1)}function gW(){return new oe(3300,!1)}function mW(n){return new oe(3504,!1)}function _W(n){return new oe(3301,!1)}function CW(n,e){return new oe(3302,!1)}function yW(n){return new oe(3303,!1)}function EW(n,e){return new oe(3400,!1)}function vW(n){return new oe(3401,!1)}function IW(n){return new oe(3402,!1)}function SW(n,e){return new oe(3505,!1)}function Ho(n){switch(n.length){case 0:return new Uo;case 1:return n[0];default:return new zd(n)}}function _P(n,e,t=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let p=f,m=h;if(f!=="offset")switch(p=n.normalizePropertyName(p,r),m){case lg:m=t.get(f);break;case ms:m=i.get(f);break;default:m=n.normalizeStyleValue(f,p,m,r);break}d.set(p,m)}),u||s.push(d),a=d,o=l}),r.length)throw pW(r);return s}function yI(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&$v(t,"start",n)));break;case"done":n.onDone(()=>i(t&&$v(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&$v(t,"destroy",n)));break}}function $v(n,e,t){let i=t.totalTime,r=!!t.disabled,s=EI(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),o=n._data;return o!=null&&(s._data=o),s}function EI(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function sr(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function sP(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var xW=typeof document>"u"?null:document.documentElement;function vI(n){let e=n.parentNode||n.host||null;return e===xW?null:e}function MW(n){return n.substring(1,6)=="ebkit"}var Ra=null,oP=!1;function wW(n){Ra||(Ra=BW()||{},oP=Ra.style?"WebkitAppearance"in Ra.style:!1);let e=!0;return Ra.style&&!MW(n)&&(e=n in Ra.style,!e&&oP&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ra.style)),e}function BW(){return typeof document<"u"?document.body:null}function CP(n,e){for(;e;){if(e===n)return!0;e=vI(e)}return!1}function yP(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var II=(()=>{let e=class e{validateStyleProperty(i){return wW(i)}containsElement(i,r){return CP(i,r)}getParentElement(i){return vI(i)}query(i,r,s){return yP(i,r,s)}computeStyle(i,r,s){return s||""}animate(i,r,s,o,a,c=[],l){return new Uo(s,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})(),wI=class wI{};wI.NOOP=new II;var Oa=wI,Na=class{};var DW=1e3,EP="{{",bW="}}",vP="ng-enter",rI="ng-leave",pg="ng-trigger",Cg=".ng-trigger",aP="ng-animating",sI=".ng-animating";function qs(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:oI(parseFloat(e[1]),e[2])}function oI(n,e){switch(e){case"s":return n*DW;default:return n}}function yg(n,e,t){return n.hasOwnProperty("duration")?n:TW(n,e,t)}function TW(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(rP(n)),{duration:0,delay:0,easing:""};r=oI(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=oI(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(J5()),a=!0),s<0&&(e.push(q5()),a=!0),a&&e.splice(c,0,rP(n))}return{duration:r,delay:s,easing:o}}function RW(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Cs(n,e,t){e.forEach((i,r)=>{let s=SI(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function La(n,e){e.forEach((t,i)=>{let r=SI(i);n.style[r]=""})}function Wd(n){return Array.isArray(n)?n.length==1?n[0]:U1(n):n}function PW(n,e,t){let i=e.params||{},r=IP(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(Y5(s))})}var aI=new RegExp(`${EP}\\s*(.+?)\\s*${bW}`,"g");function IP(n){let e=[];if(typeof n=="string"){let t;for(;t=aI.exec(n);)e.push(t[1]);aI.lastIndex=0}return e}function Jd(n,e,t){let i=`${n}`,r=i.replace(aI,(s,o)=>{let a=e[o];return a==null&&(t.push(X5(o)),a=""),a.toString()});return r==i?n:r}var LW=/-+([a-z0-9])/g;function SI(n){return n.replace(LW,(...e)=>e[1].toUpperCase())}function OW(n,e){return n===0||e===0}function NW(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,xI(n,a)))}}return e}function rr(n,e,t){switch(e.type){case et.Trigger:return n.visitTrigger(e,t);case et.State:return n.visitState(e,t);case et.Transition:return n.visitTransition(e,t);case et.Sequence:return n.visitSequence(e,t);case et.Group:return n.visitGroup(e,t);case et.Animate:return n.visitAnimate(e,t);case et.Keyframes:return n.visitKeyframes(e,t);case et.Style:return n.visitStyle(e,t);case et.Reference:return n.visitReference(e,t);case et.AnimateChild:return n.visitAnimateChild(e,t);case et.AnimateRef:return n.visitAnimateRef(e,t);case et.Query:return n.visitQuery(e,t);case et.Stagger:return n.visitStagger(e,t);default:throw $5(e.type)}}function xI(n,e){return window.getComputedStyle(n)[e]}var FW=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Eg=class extends Na{normalizePropertyName(e,t){return SI(e)}normalizeStyleValue(e,t,i,r){let s="",o=i.toString().trim();if(FW.has(t)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Z5(e,i))}return o+s}};var vg="*";function kW(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>UW(i,t,e)):t.push(n),t}function UW(n,e,t){if(n[0]==":"){let c=GW(n,t);if(typeof c=="function"){e.push(c);return}n=c}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(dW(n)),e;let r=i[1],s=i[2],o=i[3];e.push(cP(r,o));let a=r==vg&&o==vg;s[0]=="<"&&!a&&e.push(cP(o,r))}function GW(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(hW(n)),"* => *"}}var Ag=new Set(["true","1"]),gg=new Set(["false","0"]);function cP(n,e){let t=Ag.has(n)||gg.has(n),i=Ag.has(e)||gg.has(e);return(r,s)=>{let o=n==vg||n==r,a=e==vg||e==s;return!o&&t&&typeof r=="boolean"&&(o=r?Ag.has(n):gg.has(n)),!a&&i&&typeof s=="boolean"&&(a=s?Ag.has(e):gg.has(e)),o&&a}}var SP=":self",HW=new RegExp(`s*${SP}s*,?`,"g");function xP(n,e,t,i){return new cI(n).build(e,t,i)}var lP="",cI=class{constructor(e){this._driver=e}build(e,t,i){let r=new lI(t);return this._resetContextStyleTimingState(r),rr(this,Wd(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=lP,e.collectedStyles=new Map,e.collectedStyles.set(lP,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(eW()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==et.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==et.Transition){let c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(tW())}),{type:et.Trigger,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{IP(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(nW(e.name,[...s.values()]))}return{type:et.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=rr(this,Wd(e.animation),t),r=kW(e.expr,t.errors);return{type:et.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Pa(e.options)}}visitSequence(e,t){return{type:et.Sequence,steps:e.steps.map(i=>rr(this,i,t)),options:Pa(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,s=e.steps.map(o=>{t.currentTime=i;let a=rr(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:et.Group,steps:s,options:Pa(e.options)}}visitAnimate(e,t){let i=KW(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Rt({});if(s.type==et.Keyframes)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};i.easing&&(l.easing=i.easing),o=Rt(l)}t.currentTime+=i.duration+i.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:et.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===ms?i.push(a):t.errors.push(iW(a)):i.push(new Map(Object.entries(a)));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(EP)>=0){s=!0;break}}}),{type:et.Style,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(rW(c,u.startTime,u.endTime,s,r)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:r}),t.options&&PW(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:et.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(sW()),i;let r=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(g=>{let E=this._makeStyleAst(g,t),_=E.offset!=null?E.offset:zW(E.styles),C=0;return _!=null&&(s++,C=E.offset=_),c=c||C<0||C>1,a=a||C<l,l=C,o.push(C),E});c&&t.errors.push(oW()),a&&t.errors.push(aW());let d=e.steps.length,h=0;s>0&&s<d?t.errors.push(cW()):s==0&&(h=r/(d-1));let f=d-1,p=t.currentTime,m=t.currentAnimateTimings,A=m.duration;return u.forEach((g,E)=>{let _=h>0?E==f?1:h*E:o[E],C=_*A;t.currentTime=p+m.delay+C,m.duration=C,this._validateStyleAst(g,t),g.offset=_,i.styles.push(g)}),i}visitReference(e,t){return{type:et.Reference,animation:rr(this,Wd(e.animation),t),options:Pa(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:et.AnimateChild,options:Pa(e.options)}}visitAnimateRef(e,t){return{type:et.AnimateRef,animation:this.visitReference(e.animation,t),options:Pa(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=VW(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,sr(t.collectedStyles,t.currentQuerySelector,new Map);let a=rr(this,Wd(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:et.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Pa(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(lW());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:yg(e.timings,t.errors,!0);return{type:et.Stagger,animation:rr(this,Wd(e.animation),t),timings:i,options:null}}};function VW(n){let e=!!n.split(/\s*,\s*/).find(t=>t==SP);return e&&(n=n.replace(HW,"")),n=n.replace(/@\*/g,Cg).replace(/@\w+/g,t=>Cg+"-"+t.slice(1)).replace(/:animating/g,sI),[n,e]}function QW(n){return n?ae({},n):null}var lI=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function zW(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function KW(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=yg(n,e).duration;return Zv(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Zv(0,0,"");return s.dynamic=!0,s.strValue=t,s}let r=yg(t,e);return Zv(r.duration,r.delay,r.easing)}function Pa(n){return n?(n=ae({},n),n.params&&(n.params=QW(n.params))):n={},n}function Zv(n,e,t){return{duration:n,delay:e,easing:t}}function MI(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var qd=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},WW=1,jW=":enter",JW=new RegExp(jW,"g"),qW=":leave",YW=new RegExp(qW,"g");function MP(n,e,t,i,r,s=new Map,o=new Map,a,c,l=[]){return new uI().buildKeyframes(n,e,t,i,r,s,o,a,c,l)}var uI=class{buildKeyframes(e,t,i,r,s,o,a,c,l,u=[]){l=l||new qd;let d=new dI(e,t,l,r,s,u,[]);d.options=c;let h=c.delay?qs(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),rr(this,i,d);let f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let m=f.length-1;m>=0;m--){let A=f[m];if(A.element===t){p=A;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[MI(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:qs(Jd(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime,o=i.duration!=null?qs(i.duration):null,a=i.delay!=null?qs(i.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),rr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==et.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ig);let o=qs(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>rr(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,s=e.options&&e.options.delay?qs(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),rr(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Jd(i,t.params,t.errors):i;return yg(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let s=e.style;s.type==et.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?qs(r.delay):0;s&&(t.previousNode.type===et.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ig);let o=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,l);s&&d.delayNextStep(s),l===t.element&&(c=d.currentTimeline),rr(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;rr(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},Ig={},dI=class n{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ig,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Sg(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=qs(i.duration)),i.delay!=null&&(r.delay=qs(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Jd(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Ig,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new hI(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(JW,"."+this._enterClassName),e=e.replace(YW,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,e,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&a.length==0&&o.push(uW(t)),a}},Sg=class n{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=WW,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||ms),this._currentKeyframe.set(t,ms);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let s=r&&r.params||{},o=XW(e,this._globalTimelineStyles);for(let[a,c]of o){let l=Jd(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ms),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===lg?e.add(d):u===ms&&t.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});let s=[...e.values()],o=[...t.values()];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return MI(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},hI=class extends Sg{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=i+t,a=t/o,c=new Map(e[0]);c.set("offset",0),s.push(c);let l=new Map(e[0]);l.set("offset",uP(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),f=h.get("offset"),p=t+f*i;h.set("offset",uP(p/o)),s.push(h)}i=o,t=0,r="",e=s}return MI(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function uP(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function XW(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let s of i)t.set(s,ms)}else for(let[s,o]of r)t.set(s,o)}),t}function dP(n,e,t,i,r,s,o,a,c,l,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var eI={},xg=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return $W(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||eI,f=a&&a.params||eI,p=this.buildStyles(i,f,d),m=c&&c.params||eI,A=this.buildStyles(r,m,d),g=new Set,E=new Map,_=new Map,C=r==="void",T={params:wP(m,h),delay:this.ast.options?.delay},M=u?[]:MP(e,t,this.ast.animation,s,o,p,A,T,l,d),w=0;return M.forEach(D=>{w=Math.max(D.duration+D.delay,w)}),d.length?dP(t,this._triggerName,i,r,C,p,A,[],[],E,_,w,d):(M.forEach(D=>{let I=D.element,y=sr(E,I,new Set);D.preStyleProps.forEach(Q=>y.add(Q));let b=sr(_,I,new Set);D.postStyleProps.forEach(Q=>b.add(Q)),I!==t&&g.add(I)}),dP(t,this._triggerName,i,r,C,p,A,M,[...g.values()],E,_,w))}};function $W(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}function wP(n,e){let t=ae({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var fI=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=wP(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Jd(o,r,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(a,o)})}),i}};function ZW(n,e,t){return new pI(n,e,t)}var pI=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new fI(r.style,s,i))}),hP(this.states,"true","1"),hP(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new xg(e,r,this.states))}),this.fallbackTransition=e6(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function e6(n,e,t){let i=[(o,a)=>!0],r={type:et.Sequence,steps:[],options:null},s={type:et.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new xg(n,s,e)}function hP(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var t6=new qd,AI=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],r=[],s=xP(this._driver,t,i,r);if(i.length)throw AW(i);r.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,i){let r=e.element,s=_P(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=MP(this._driver,t,s,vP,rI,new Map,new Map,i,t6,r),o.forEach(u=>{let d=sr(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(gW()),o=[]),r.length)throw mW(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,ms))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=Ho(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw _W(e);return t}listen(e,t,i,r){let s=EI(t,"","","");return yI(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},fP="ng-animate-queued",n6=".ng-animate-queued",tI="ng-animate-disabled",i6=".ng-animate-disabled",r6="ng-star-inserted",s6=".ng-star-inserted",o6=[],BP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},a6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Kr="__ng_removed",Yd=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=l6(r),i){let s=e,{value:o}=s,a=th(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},jd="void",nI=new Yd(jd),gI=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Sr(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw CW(i,t);if(i==null||i.length==0)throw yW(t);if(!u6(i))throw EW(i,t);let s=sr(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);let a=sr(this._engine.statesByElement,e,new Map);return a.has(t)||(Sr(e,pg),Sr(e,pg+"-"+t),a.set(t,nI)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw vW(e);return t}trigger(e,t,i,r=!0){let s=this._getTrigger(t),o=new Xd(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Sr(e,pg),Sr(e,pg+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new Yd(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=nI),!(l.value===jd)&&c.value===l.value){if(!f6(c.params,l.params)){let m=[],A=s.matchStyles(c.value,c.params,m),g=s.matchStyles(l.value,l.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{La(e,A),Cs(e,g)})}return}let h=sr(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(Sr(e,fP),o.onStart(()=>{Ul(e,fP)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);let A=this._engine.playersByElement.get(e);if(A){let g=A.indexOf(o);g>=0&&A.splice(g,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,Cg,!0);i.forEach(r=>{if(r[Kr])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,jd,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Ho(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let c=this._triggers.get(o).fallbackTransition,l=i.get(o)||nI,u=new Yd(jd),d=new Xd(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Kr];(!s||s===BP)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Sr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let c=EI(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,yI(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},mI=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new gI(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}}return t}trigger(e,t,i,r){if(mg(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!mg(t))return;let s=t[Kr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Sr(e,tI)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ul(e,tI))}removeNode(e,t,i){if(mg(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Kr]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return mg(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Cg,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,sI,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ho(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Kr];if(t&&t.setForRemoval){if(e[Kr]=BP,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(tI)&&this.markElementAsDisabled(e,!1),this.driver.query(e,i6,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Sr(r,r6)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Ho(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw IW(e)}_flushAnimations(e,t){let i=new qd,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(R=>{u.add(R);let N=this.driver.query(R,n6,!0);for(let L=0;L<N.length;L++)u.add(N[L])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=gP(h,this.collectedEnterElements),p=new Map,m=0;f.forEach((R,N)=>{let L=vP+m++;p.set(N,L),R.forEach(Y=>Sr(Y,L))});let A=[],g=new Set,E=new Set;for(let R=0;R<this.collectedLeaveElements.length;R++){let N=this.collectedLeaveElements[R],L=N[Kr];L&&L.setForRemoval&&(A.push(N),g.add(N),L.hasAnimation?this.driver.query(N,s6,!0).forEach(Y=>g.add(Y)):E.add(N))}let _=new Map,C=gP(h,Array.from(g));C.forEach((R,N)=>{let L=rI+m++;_.set(N,L),R.forEach(Y=>Sr(Y,L))}),e.push(()=>{f.forEach((R,N)=>{let L=p.get(N);R.forEach(Y=>Ul(Y,L))}),C.forEach((R,N)=>{let L=_.get(N);R.forEach(Y=>Ul(Y,L))}),A.forEach(R=>{this.processLeaveNode(R)})});let T=[],M=[];for(let R=this._namespaceList.length-1;R>=0;R--)this._namespaceList[R].drainQueuedTransitions(t).forEach(L=>{let Y=L.player,te=L.element;if(T.push(Y),this.collectedEnterElements.length){let de=te[Kr];if(de&&de.setForMove){if(de.previousTriggersValues&&de.previousTriggersValues.has(L.triggerName)){let Qe=de.previousTriggersValues.get(L.triggerName),Ue=this.statesByElement.get(L.element);if(Ue&&Ue.has(L.triggerName)){let ot=Ue.get(L.triggerName);ot.value=Qe,Ue.set(L.triggerName,ot)}}Y.destroy();return}}let fe=!d||!this.driver.containsElement(d,te),ye=_.get(te),Ge=p.get(te),j=this._buildInstruction(L,i,Ge,ye,fe);if(j.errors&&j.errors.length){M.push(j);return}if(fe){Y.onStart(()=>La(te,j.fromStyles)),Y.onDestroy(()=>Cs(te,j.toStyles)),r.push(Y);return}if(L.isFallbackTransition){Y.onStart(()=>La(te,j.fromStyles)),Y.onDestroy(()=>Cs(te,j.toStyles)),r.push(Y);return}let se=[];j.timelines.forEach(de=>{de.stretchStartingKeyframe=!0,this.disabledNodes.has(de.element)||se.push(de)}),j.timelines=se,i.append(te,j.timelines);let xe={instruction:j,player:Y,element:te};o.push(xe),j.queriedElements.forEach(de=>sr(a,de,[]).push(Y)),j.preStyleProps.forEach((de,Qe)=>{if(de.size){let Ue=c.get(Qe);Ue||c.set(Qe,Ue=new Set),de.forEach((ot,Xt)=>Ue.add(Xt))}}),j.postStyleProps.forEach((de,Qe)=>{let Ue=l.get(Qe);Ue||l.set(Qe,Ue=new Set),de.forEach((ot,Xt)=>Ue.add(Xt))})});if(M.length){let R=[];M.forEach(N=>{R.push(SW(N.triggerName,N.errors))}),T.forEach(N=>N.destroy()),this.reportError(R)}let w=new Map,D=new Map;o.forEach(R=>{let N=R.element;i.has(N)&&(D.set(N,N),this._beforeAnimationBuild(R.player.namespaceId,R.instruction,w))}),r.forEach(R=>{let N=R.element;this._getPreviousPlayers(N,!1,R.namespaceId,R.triggerName,null).forEach(Y=>{sr(w,N,[]).push(Y),Y.destroy()})});let I=A.filter(R=>mP(R,c,l)),y=new Map;AP(y,this.driver,E,l,ms).forEach(R=>{mP(R,c,l)&&I.push(R)});let Q=new Map;f.forEach((R,N)=>{AP(Q,this.driver,new Set(R),c,lg)}),I.forEach(R=>{let N=y.get(R),L=Q.get(R);y.set(R,new Map([...N?.entries()??[],...L?.entries()??[]]))});let U=[],z=[],q={};o.forEach(R=>{let{element:N,player:L,instruction:Y}=R;if(i.has(N)){if(u.has(N)){L.onDestroy(()=>Cs(N,Y.toStyles)),L.disabled=!0,L.overrideTotalTime(Y.totalTime),r.push(L);return}let te=q;if(D.size>1){let ye=N,Ge=[];for(;ye=ye.parentNode;){let j=D.get(ye);if(j){te=j;break}Ge.push(ye)}Ge.forEach(j=>D.set(j,te))}let fe=this._buildAnimation(L.namespaceId,Y,w,s,Q,y);if(L.setRealPlayer(fe),te===q)U.push(L);else{let ye=this.playersByElement.get(te);ye&&ye.length&&(L.parentPlayer=Ho(ye)),r.push(L)}}else La(N,Y.fromStyles),L.onDestroy(()=>Cs(N,Y.toStyles)),z.push(L),u.has(N)&&r.push(L)}),z.forEach(R=>{let N=s.get(R.element);if(N&&N.length){let L=Ho(N);R.setRealPlayer(L)}}),r.forEach(R=>{R.parentPlayer?R.syncPlayerEvents(R.parentPlayer):R.destroy()});for(let R=0;R<A.length;R++){let N=A[R],L=N[Kr];if(Ul(N,rI),L&&L.hasAnimation)continue;let Y=[];if(a.size){let fe=a.get(N);fe&&fe.length&&Y.push(...fe);let ye=this.driver.query(N,sI,!0);for(let Ge=0;Ge<ye.length;Ge++){let j=a.get(ye[Ge]);j&&j.length&&Y.push(...j)}}let te=Y.filter(fe=>!fe.destroyed);te.length?d6(this,N,te):this.processLeaveNode(N)}return A.length=0,U.forEach(R=>{this.players.push(R),R.onDone(()=>{R.destroy();let N=this.players.indexOf(R);this.players.splice(N,1)}),R.play()}),U}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==jd;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){let r=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let c of t.timelines){let l=c.element,u=l!==s,d=sr(i,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}La(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){let a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,h=t.timelines.map(p=>{let m=p.element;u.add(m);let A=m[Kr];if(A&&A.removedBeforeQueried)return new Uo(p.duration,p.delay);let g=m!==c,E=h6((i.get(m)||o6).map(w=>w.getRealPlayer())).filter(w=>{let D=w;return D.element?D.element===m:!1}),_=s.get(m),C=o.get(m),T=_P(this._normalizer,p.keyframes,_,C),M=this._buildPlayer(p,T,E);if(p.subTimeline&&r&&d.add(m),g){let w=new Xd(e,a,m);w.setRealPlayer(M),l.push(w)}return M});l.forEach(p=>{sr(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>c6(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Sr(p,aP));let f=Ho(h);return f.onDestroy(()=>{u.forEach(p=>Ul(p,aP)),Cs(c,t.toStyles)}),d.forEach(p=>{sr(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Uo(e.duration,e.delay)}},Xd=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Uo,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>yI(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){sr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function c6(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function l6(n){return n??null}function mg(n){return n&&n.nodeType===1}function u6(n){return n=="start"||n=="done"}function pP(n,e){let t=n.style.display;return n.style.display=e??"none",t}function AP(n,e,t,i,r){let s=[];t.forEach(c=>s.push(pP(c)));let o=[];i.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,r);u.set(d,h),(!h||h.length==0)&&(l[Kr]=a6,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>pP(c,s[a++])),o}function gP(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:r.has(l)?c=i:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==i&&t.get(c).push(a)}),t}function Sr(n,e){n.classList?.add(e)}function Ul(n,e){n.classList?.remove(e)}function d6(n,e,t){Ho(t).onDone(()=>n.processLeaveNode(e))}function h6(n){let e=[];return DP(n,e),e}function DP(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof zd?DP(i.players,e):e.push(i)}}function f6(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function mP(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}var Hl=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new mI(e.body,t,i),this._timelineEngine=new AI(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let c=[],l=[],u=xP(this._driver,s,c,l);if(c.length)throw fW(r,c);l.length&&void 0,a=ZW(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[s,o]=sP(i),a=r;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if(i.charAt(0)=="@"){let[o,a]=sP(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function p6(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=iI(e[0]),e.length>1&&(i=iI(e[e.length-1]))):e instanceof Map&&(t=iI(e)),t||i?new _I(n,t,i):null}var Gl=class Gl{constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=Gl.initialStylesByElement.get(e);r||Gl.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Cs(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Cs(this._element,this._initialStyles),this._endStyles&&(Cs(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Gl.initialStylesByElement.delete(this._element),this._startStyles&&(La(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(La(this._element,this._endStyles),this._endStyles=null),Cs(this._element,this._initialStyles),this._state=3)}};Gl.initialStylesByElement=new WeakMap;var _I=Gl;function iI(n){let e=null;return n.forEach((t,i)=>{A6(i)&&(e=e||new Map,e.set(i,t))}),e}function A6(n){return n==="display"||n==="position"}var Mg=class{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:xI(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},wg=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return CP(e,t)}getParentElement(e){return vI(e)}query(e,t,i){return yP(e,t,i)}computeStyle(e,t,i){return xI(e,t)}animate(e,t,i,r,s,o=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof Mg);OW(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,m)=>l.set(m,p))});let d=RW(t).map(f=>new Map(f));d=NW(e,d,l);let h=p6(e,d);return new Mg(e,d,c,h)}};var _g="@",bP="@.disabled",Bg=class{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==_g&&t==bP?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},CI=class extends Bg{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==_g?t.charAt(1)=="."&&t==bP?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==_g){let r=g6(e),s=t.slice(1),o="";return s.charAt(0)!=_g&&([s,o]=m6(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,i,a)})}return this.delegate.listen(e,t,i)}};function g6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function m6(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var Dg=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(r);if(!u){let d=()=>l.delete(r);u=new Bg(i,r,this.engine,d),l.set(r,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new CI(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var C6=(()=>{let e=class e extends Hl{constructor(i,r,s){super(i,r,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(Re(un),Re(Oa),Re(Na))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac});let n=e;return n})();function y6(){return new Eg}function E6(n,e,t){return new Dg(n,e,t)}var TP=[{provide:Na,useFactory:y6},{provide:Hl,useClass:C6},{provide:so,useFactory:E6,deps:[rp,Hl,ln]}],v6=[{provide:Oa,useFactory:()=>new wg},{provide:b_,useValue:"BrowserAnimations"},...TP],Xce=[{provide:Oa,useClass:II},{provide:b_,useValue:"NoopAnimations"},...TP];function RP(){return hr("NgEagerAnimations"),[...v6]}var PP=(()=>{let e=class e{constructor(i,r){this.document=i,this.platformId=r,this.documentIsAccessible=ho(this.platformId)}static getCookieRegExp(i){let r=i.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+r+"|;\\s*"+r+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(i){try{return decodeURIComponent(i)}catch{return i}}check(i){return this.documentIsAccessible?(i=encodeURIComponent(i),e.getCookieRegExp(i).test(this.document.cookie)):!1}get(i){if(this.documentIsAccessible&&this.check(i)){i=encodeURIComponent(i);let s=e.getCookieRegExp(i).exec(this.document.cookie);return s[1]?e.safeDecodeURIComponent(s[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let i={},r=this.document;return r.cookie&&r.cookie!==""&&r.cookie.split(";").forEach(s=>{let[o,a]=s.split("=");i[e.safeDecodeURIComponent(o.replace(/^ /,""))]=e.safeDecodeURIComponent(a)}),i}set(i,r,s,o,a,c,l,u){if(!this.documentIsAccessible)return;if(typeof s=="number"||s instanceof Date||o||a||c||l){let f={expires:s,path:o,domain:a,secure:c,sameSite:l||"Lax",partitioned:u};this.set(i,r,f);return}let d=encodeURIComponent(i)+"="+encodeURIComponent(r)+";",h=s||{};if(h.expires)if(typeof h.expires=="number"){let f=new Date(new Date().getTime()+h.expires*1e3*60*60*24);d+="expires="+f.toUTCString()+";"}else d+="expires="+h.expires.toUTCString()+";";h.path&&(d+="path="+h.path+";"),h.domain&&(d+="domain="+h.domain+";"),h.secure===!1&&h.sameSite==="None"&&(h.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${i} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),h.secure&&(d+="secure;"),h.sameSite||(h.sameSite="Lax"),d+="sameSite="+h.sameSite+";",h.partitioned&&(d+="Partitioned;"),this.document.cookie=d}delete(i,r,s,o,a="Lax"){if(!this.documentIsAccessible)return;let c=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(i,"",{expires:c,path:r,domain:s,secure:o,sameSite:a})}deleteAll(i,r,s,o="Lax"){if(!this.documentIsAccessible)return;let a=this.getAll();for(let c in a)a.hasOwnProperty(c)&&this.delete(c,i,r,s,o)}};e.\u0275fac=function(r){return new(r||e)(Re(un),Re(Gn))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var LP="_csrf_token",OP=(()=>{let e=class e{constructor(i,r){this.cookieService=i,this.http=r}intercept(i,r){if(i.method==="GET")return r.handle(i);let s=this.cookieService.get(LP);return s?(i=i.clone({setHeaders:{"X-CSRFToken":s},withCredentials:!0}),r.handle(i)):this.http.get("/").pipe(Bi(),hi(o=>Ke(o)),si(()=>{let o=this.cookieService.get(LP);return i=i.clone({setHeaders:{"X-CSRFToken":o},withCredentials:!0}),r.handle(i)}))}};e.\u0275fac=function(r){return new(r||e)(Re(PP),Re(xu))},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var NP={providers:[hB({eventCoalescing:!0}),KD(iP),uD(),RP(),XB($B(),ZB()),{provide:AC,useClass:OP,multi:!0}]};var FP=(()=>{let e=class e{constructor(i){this.localizationService=i,this.content=this.localizationService.getLocalizedCopy()}};e.\u0275fac=function(r){return new(r||e)(Ae(en))},e.\u0275cmp=Pe({type:e,selectors:[["app-rotate"]],standalone:!0,features:[Le],decls:4,vars:1,consts:[["href","assets/images/icons.svg#rotate"]],template:function(r,s){r&1&&(Un(),G(0,"svg"),re(1,"use",0),H(),Pi(),G(2,"p"),ge(3),H()),r&2&&(V(3),sn(" ",s.content==null?null:s.content.rotateText,`
`))},styles:["[_nghost-%COMP%]{align-items:center;background-color:#9ba1e9;display:none;flex-direction:column;gap:24px;height:100%;justify-content:center;left:0;position:fixed;top:0;width:100%;z-index:2000}@media screen and (orientation: landscape) and (width <= 1023px){[_nghost-%COMP%]{display:flex}}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{height:71px;width:69px}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:18px;text-align:center;text-shadow:2px 2px 0px #000;width:230px}"],changeDetection:0});let n=e;return n})();var kP=(()=>{let e=class e{constructor(){this.platformId=$(Gn)}initialise(){if(ho(this.platformId)){if(!window.glue)return;new glue.CookieNotificationBar(document.body,{category:glue.CookieNotificationBar.category.TWO_B,siteId:window.location.hostname})}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var UP=(()=>{let e=class e{constructor(i){this.cookieNotificationBarService=i,this.cookieNotificationBarService.initialise()}};e.\u0275fac=function(r){return new(r||e)(Ae(kP))},e.\u0275cmp=Pe({type:e,selectors:[["app-root"]],standalone:!0,features:[Le],decls:4,vars:0,consts:[[1,"main"],[1,"main__inner"]],template:function(r,s){r&1&&(G(0,"main",0)(1,"div",1),re(2,"router-outlet"),H()(),re(3,"app-rotate"))},dependencies:[ry,FP],styles:["h1[_ngcontent-%COMP%]{border:1px solid red}.main[_ngcontent-%COMP%]{align-items:center;display:flex;height:100%;height:100dvh;justify-content:center;width:100vw}.main__inner[_ngcontent-%COMP%]{height:100%;width:100%}@media (min-width: 600px){.main__inner[_ngcontent-%COMP%]{max-width:599px}}"]});let n=e;return n})();cD(UP,NP).catch(n=>console.error(n));
